"use strict";(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[747],{1747:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var s=n(65043),r=n(91036),a=n(24858),l=n(18403),d=n(73033),i=n(84756),c=n(24638),o=n(38709),p=n(80511),x=n(82585),b=n(57492),m=n(76793),u=n(51448),h=n(45843),j=n(66581),y=n(70579);const N=x.F,g=d.Ik().shape({txtExpGroupName:d.Yj().required("Please enter expression group")});const k=function(e){var t;let{ScrId:n}=e;const[d,x]=(0,s.useState)([]),{register:k,handleSubmit:E,getValues:v,setValue:I,formState:{errors:C},reset:f}=(0,a.mN)({resolver:(0,l.t)(g)}),[S,G]=(0,s.useState)([]),[w,T]=(0,s.useState)(""),[M,q]=(0,s.useState)(!1),[D,F]=(0,s.useState)(0),[L,U]=(0,s.useState)(-1),[A,P]=(0,s.useState)([]),[B,O]=(0,s.useState)(1),[H,R]=(0,s.useState)(null),[J,Y]=(0,s.useState)([]),[_,z]=(0,s.useState)([]),[Q,V]=(0,s.useState)([]),[$,K]=(0,s.useState)(0),[W,X]=(0,s.useState)(0),[Z,ee]=(0,s.useState)(0),te=async(e,t,s,a)=>{const l={},d={hdr:{convid:(0,p.lk)(),tag:t,orgid:"",vendid:"0"},body:e};try{const t=await i.Ay.post(s,(0,p.Yw)(d),l),c=JSON.parse((0,p.H5)(t.data));"SUCCESS"==c.hdr.rst?setTimeout((()=>{r.oR.success("Successfully updated"),1==a?(ne(),se(n)):2==a&&(ie(),re(e.txtExprGroupId),q(!1))}),300):setTimeout((()=>{r.oR.error(JSON.stringify(c.fdr[0].rstmsg))}),300)}catch(c){setTimeout((()=>{r.oR.error("Unable to process request")}),300)}},ne=()=>{f({txtExprGroupId:"",txtExpGroupName:""})},se=async e=>{const t=await(0,c.C)(e);x(t.body.expressions)},re=async e=>{const t=await(0,o.L1)(n,e);G(t.body.expressions)},ae=()=>(0,y.jsx)(y.Fragment,{children:d?d.map(((e,t)=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:e.egid}),(0,y.jsxs)("td",{children:[" ",(0,y.jsx)("button",{onClick:()=>(e=>{document.getElementById("lblExprGroup").innerHTML=e.egid+" / "+e.egname,f({txtExprGrpId:e.egid,txtParentExprnId:"",txtSeExprTypeId:"",txtExprnId:"",txtExpression:""}),re(e.egid)})(e),className:"btn btn-link",children:e.egname})]}),(0,y.jsxs)("td",{children:[(0,y.jsx)("button",{onClick:()=>(e=>{f({txtExprGroupId:e.egid,txtExpGroupName:e.egname})})(e),className:"btn btn-light clr-gray",children:(0,y.jsx)("i",{className:"fa fa-edit"})}),(0,y.jsx)("button",{onClick:()=>{return t=e.egid,void(window.confirm("Are you sure")&&te({cmbScrId:n,txtExprGroupId:t},"Delete Expression Group",N.Delexprngrp,1));var t},className:"btn btn-light clr-gray",children:(0,y.jsx)("i",{className:"fa fa-trash-o"})})]})]},t))):(0,y.jsx)(y.Fragment,{})}),le=e=>{let{expTreeLst:t}=e;if(t){let e=t.filter((e=>null==e.prexprnid));return(0,y.jsx)(y.Fragment,{children:e.length>0?(0,y.jsx)("ul",{children:e.map((e=>(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(de,{expTreeLst:t,treenode:e})})))}):(0,y.jsx)(y.Fragment,{})})}},de=e=>{let{expTreeLst:t,treenode:n}=e,s=t.filter((e=>e.prexprnid==n.exprnid));return s.length>0?(0,y.jsx)("li",{children:(0,y.jsxs)("details",{open:!0,children:[(0,y.jsxs)("summary",{id:"id"+n.exprnid,children:[(0,y.jsx)("input",{type:"checkbox"}),(0,y.jsx)("button",{type:"button",id:"ui"+n.exprnid,className:"btn btn-light",children:(0,y.jsx)("span",{dangerouslySetInnerHTML:{__html:n.exprn}})}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>ce(n.exprnid),children:(0,y.jsx)("i",{className:"fa fa-plus"})}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>xe(n),children:(0,y.jsx)("i",{className:"fa fa-edit"})}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>be(n.exprnid),children:(0,y.jsx)("i",{className:"fa fa-trash-o"})}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>me(n.exprnid,"U"),children:(0,y.jsx)("i",{className:"fa fa-arrow-up"})}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>me(n.exprnid,"D"),children:(0,y.jsx)("i",{className:"fa fa-arrow-down"})})]}),(0,y.jsx)("ul",{children:s.map((e=>(0,y.jsx)(de,{expTreeLst:t,treenode:e})))})]})}):(0,y.jsxs)("li",{id:"id"+n.exprnid,children:[(0,y.jsx)("span",{children:"\xa0"}),(0,y.jsx)("input",{type:"checkbox"}),"\xa0",(0,y.jsx)("span",{dangerouslySetInnerHTML:{__html:n.exprn}}),2==n.exprntyid||3==n.exprntyid||4==n.exprntyid||6==n.exprntyid?(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>ce(n.exprnid),children:(0,y.jsx)("i",{className:"fa fa-plus"})}):(0,y.jsx)(y.Fragment,{}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>xe(n),children:(0,y.jsx)("i",{className:"fa fa-edit"})}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>be(n.exprnid),children:(0,y.jsx)("i",{className:"fa fa-trash-o"})}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>me(n.exprnid,"U"),children:(0,y.jsx)("i",{className:"fa fa-arrow-up"})}),(0,y.jsx)("button",{type:"button",className:"btn btn-light clr-gray",onClick:()=>me(n.exprnid,"D"),children:(0,y.jsx)("i",{className:"fa fa-arrow-down"})})]})},ie=()=>{f({txtParentExprnId:"",txtSeExprTypeId:"",txtExprnId:"",txtExpression:"",cmbDbConnId:"0",MapType1:"",MapType2:"",cmbGrpElementId:"-1",txtIndexName:"",uniqueField:""}),K(""),X(""),ee(""),z([]),q(!1),U(-1),F(0),V([]),R("")},ce=e=>{I("txtParentExprnId",e),X(e)},oe=async e=>{let t={CHELM:"ScreenId="+n+" and ParentElementId="+e};const s=await(0,b.n)("|CHELM|",t);z(s.body.chelm)},pe=()=>{let e=v("txtExpression"),t=v("cmbDbConnId"),s=v("cmbGrpElementId"),r=v("txtExprGrpId"),a=17==Z?v("txtUniqueCol"):null,l=5==Z?v("cmbMapType"):2;te({cmbScrId:n,txtSeExprnId:$,txtExprGroupId:r,txtSeExprTypeId:Z,txtParentSeExprnId:W,txtExpression:e,cmbCompDbId:t,txtUniqueCol:a,cmbElmGrpId:s,cmbBindTy:l,map:Q},"Update Expression",N.UpdateExpression,2)},xe=e=>{K(e.exprnid),X(e.prexprnid),ee(e.exprntyid),I("txtExprnId",e.exprnid),I("txtParentExprnId",e.prexprnid),I("txtSeExprTypeId",e.exprntyid),I("txtExpression",e.expression);let t=he(e.exprntyid);if(T(t),5==e.exprntyid&&e.dbqry&&(F(e.dbqry.dbconn),O(e.dbqry.bt),U(e.dbqry.elmgrpid),oe(e.dbqry.elmgrpid),e.dbqry.colmap)){var n=[...e.dbqry.colmap];V(n)}if(17==e.exprntyid&&e.msrcqry){F(e.msrcqry.dbconn),O(e.msrcqry.bt),U(e.msrcqry.elmgrpid),R(e.msrcqry.ucol),oe(e.msrcqry.elmgrpid);n=[...e.msrcqry.colmap];V(n)}q(!0)},be=e=>{if(window.confirm("Are you sure, do you want delete ?")){let t=v("txtExprGrpId");te({cmbScrId:n,txtExprGroupId:t,txtSeExprnId:e},"Delete Expression",N.Delexprn,2)}},me=(e,t)=>{let s=v("txtExprGrpId");te({cmbScrId:n,txtExprGroupId:s,txtSeExprnId:e,txtDirection:t},"ReOrder Expression",N.Reord,2)},ue=e=>{I("txtSeExprTypeId",e);let t=v("txtExprnId"),n=v("txtParentExprnId");ee(e),K(t),X(n),V([]);let s=he(e);T(s),3==e||9==e?pe():q(!0)},he=e=>{let t;switch(e){case 1:t="Assign value";break;case 2:t="IF";break;case 3:t="Else";break;case 4:t="Loop";break;case 5:t="DB Query";break;case 6:t="Else If";break;case 7:t="Set Property";break;case 8:t="Domain Data";break;case 9:t="Stop";break;case 10:t="Message";break;case 11:t="Count(condition)";break;case 12:t="Count(group)";break;case 13:t="Sum(condition)";break;case 14:t="Sum(group)";break;case 15:t="Re-Load Combo";break;case 16:t="External Link";break;case 17:t="Multi Search";break;case 21:t="Move Stage";break;case 101:t="Expression Group";break;case 102:t="Custome Code"}return t},je=()=>{let e=document.getElementById("divMappedElm");e.innerHTML="";var t=document.createElement("table");t.className="lst-grid";var n=document.createElement("thead");t.appendChild(n);var s=document.createElement("tr");n.appendChild(s);var r=document.createElement("th");s.append(r),r.append("Element");r=document.createElement("th");s.append(r),r.append("Index / Name");r=document.createElement("th");s.append(r),r.append("Manage"),e.appendChild(t),Q.map((e=>{let n=_.find((t=>t.k==e.elmid));var s=document.createElement("tr");t.appendChild(s);var r,a=document.createElement("td");s.append(a),(r=document.createElement("label")).append(n.v),a.append(r),(a=document.createElement("td")).style="text-align:center",s.append(a),(r=document.createElement("label")).append(e.idxname),a.append(r);a=document.createElement("td");s.append(a);var l=document.createElement("button");l.append("delete"),l.className="btn btn-link",l.onclick=()=>{(e=>{let t=Q,n=t.indexOf(t.find((t=>t.elmid==e)));t.splice(n,1),V(t),je()})(e.elmid)},a.append(l)}))};return(0,s.useEffect)((()=>{(async()=>{const e=await(0,b.n)("|DBCN|","");P(e.body.dbcn)})(),(async()=>{const e=await(0,m.B)(n);Y(e.body.elements)})(),se(n)}),[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsxs)("div",{className:"col-md-4",children:[(0,y.jsx)("form",{onSubmit:E((async e=>{if(void 0==e.txtExpGroupName)return;let t={cmbScrId:n,txtExprGroupId:e.txtExprGroupId,txtSeExpGroupName:e.txtExpGroupName};te(t,"Update Expression Group",N.UpdExpressionGroup,1)})),autoComplete:"off",children:(0,y.jsxs)("div",{className:"row",children:[(0,y.jsxs)("div",{className:"col-md-10",children:[(0,y.jsx)("label",{htmlFor:"txtExpGroupName",className:"form-label",children:"Expression Group"}),(0,y.jsx)("input",{...k("txtExprGroupId"),type:"text",readOnly:"readonly",className:"dispNone"}),(0,y.jsx)("input",{...k("txtExpGroupName"),type:"text",className:"form-control"}),(0,y.jsx)("p",{className:"err-msg",children:null===(t=C.txtExpGroupName)||void 0===t?void 0:t.message})]}),(0,y.jsxs)("div",{className:"col-md-2",children:[(0,y.jsx)("button",{type:"button",className:"btn-link pad-bottom-0-5em",onClick:ne,children:"Reset"}),(0,y.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]})}),(0,y.jsx)("div",{children:(0,y.jsxs)("table",{className:"lst-grid",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Id"}),(0,y.jsx)("th",{children:"Expression Group"}),(0,y.jsx)("th",{children:"Manage"})]})}),(0,y.jsx)("tbody",{children:(0,y.jsx)(ae,{})})]})})]}),(0,y.jsxs)("div",{className:"col-md-8",children:[(0,y.jsxs)("div",{className:"pad-bottom-0-5em",children:[(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(1),children:"Assign value"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(2),children:"IF"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(3),children:"Else"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(6),children:"Else If"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(7),children:"Set Property"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(5),children:"DB Qry & Bind"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(17),children:"Multi Search"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(15),children:"Re-Load Combo"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(10),children:"Message"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(9),children:"Stop"})]}),(0,y.jsxs)("div",{className:"pad-bottom-0-5em",children:[(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(4),children:"Loop"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(11),children:"Count(condition)"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(12),children:"Count(group)"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(13),children:"Sum(condi)"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(14),children:"Sum(group)"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(8),children:"Domain Data"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(21),children:"Move Stage"}),"\xa0\xa0",(0,y.jsx)("button",{type:"button",className:"btn-link btn-link-bg-border",onClick:()=>ue(102),children:"Custome Code"})]}),(0,y.jsxs)("div",{className:"border-bottom-1px",children:[(0,y.jsx)("input",{...k("txtParentExprnId"),type:"text",className:"wd-80",disabled:"disabled",readOnly:"readonly"}),(0,y.jsx)("button",{type:"button",className:"btn-link",onClick:()=>(I("txtParentExprnId",""),void I("txtSeExprTypeId","")),children:"Clear"}),"\xa0 Expresion Group : ",(0,y.jsx)("b",{children:(0,y.jsx)("label",{id:"lblExprGroup"})}),(0,y.jsx)("input",{...k("txtExprGrpId"),type:"text",readOnly:"readonly",className:"dispNone"}),(0,y.jsx)("input",{...k("txtExprnId"),type:"text",className:"dispNone",disabled:"disabled",readOnly:"readonly"}),(0,y.jsx)("input",{...k("txtSeExprTypeId"),type:"text",className:"dispNone",disabled:"disabled",readOnly:"readonly"})]}),(0,y.jsx)("div",{className:"tree",children:(0,y.jsx)(le,{expTreeLst:S})})]})]}),(0,y.jsxs)(u.A,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",top:!0,show:M,onEntered:()=>{f({cmbDbConnId:D,cmbGrpElementId:L})},children:[(0,y.jsx)(u.A.Header,{children:(0,y.jsx)(h.A,{children:(0,y.jsx)("h5",{children:w})})}),(0,y.jsxs)(j.A,{children:[(0,y.jsxs)("div",{className:"pad-bottom-0-5em",children:[(0,y.jsx)("label",{htmlFor:"txtExpression",className:"form-label",children:"Expression"}),(0,y.jsx)("textarea",{...k("txtExpression"),type:"textarea",height:20,className:"form-control"})]}),5==Z||17==Z?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsxs)("div",{className:"col-md-4",children:[(0,y.jsx)("label",{className:"form-label",children:"DB Connection"}),(0,y.jsxs)("select",{...k("cmbDbConnId"),value:D,className:"form-control",onChange:e=>{F(e.target.value)},children:[(0,y.jsx)("option",{value:"0",children:"-select-"}),A.map((e=>(0,y.jsx)("option",{value:e.k,children:e.v},e.k)))]})]}),5==Z?(0,y.jsxs)("div",{className:"col-md-4",children:[(0,y.jsx)("label",{className:"form-label",children:"Map Type"}),(0,y.jsxs)("select",{...k("cmbMapType"),value:B,className:"form-control",onChange:e=>{O(e.target.value)},children:[(0,y.jsx)("option",{value:"1",children:"Index"}),(0,y.jsx)("option",{value:"2",children:"Name"})]})]}):(0,y.jsx)(y.Fragment,{}),(0,y.jsxs)("div",{className:"col-md-4",children:[(0,y.jsx)("label",{className:"form-label",children:"Element Group"}),(0,y.jsxs)("select",{className:"form-control",...k("cmbGrpElementId"),value:L,onChange:e=>{V([]),U(e.target.value),oe(e.target.value,n),je()},children:[(0,y.jsx)("option",{value:"999",children:"-select-"}),J&&J.map((e=>(0,y.jsx)("option",{value:e.elid,children:e.elna},e.elna)))]})]}),17==Z?(0,y.jsxs)("div",{className:"col-md-4",children:[(0,y.jsx)("label",{className:"form-label",children:"Unique Field"}),(0,y.jsx)("input",{...k("txtUniqueCol"),value:H,type:"text",className:"form-control"})]}):(0,y.jsx)(y.Fragment,{})]}),(0,y.jsxs)("div",{className:"row",children:[(0,y.jsxs)("div",{className:"col-md-4",children:[(0,y.jsx)("label",{className:"form-label",children:"Elements"}),(0,y.jsxs)("select",{className:"form-control",...k("cmbMapElementId"),children:[(0,y.jsx)("option",{value:"-1",children:"-select-"}),_&&_.map((e=>(0,y.jsx)("option",{value:e.k,children:e.v},e.k)))]})]}),(0,y.jsxs)("div",{className:"col-md-4",children:[(0,y.jsx)("label",{className:"form-label",children:"Index / Name"}),(0,y.jsx)("input",{...k("txtIndexName"),type:"text",className:"form-control"})]}),(0,y.jsx)("div",{className:"col-md-4",children:(0,y.jsxs)("div",{className:"pad-top-2-5em",children:[(0,y.jsx)("button",{type:"button",className:"btn btn-link",onClick:()=>(()=>{let e=v("cmbMapElementId"),t=v("txtIndexName"),n=Q,s=n.find((t=>t.elmid==e));s?s.idxname=t:n.push({elmid:e,idxname:t}),V(n),je()})(),children:"Update"}),"\xa0",(0,y.jsx)("button",{type:"button",className:"btn btn-link",onClick:()=>je(),children:"Refresh"})]})})]}),(0,y.jsx)("div",{className:"row",children:(0,y.jsx)("div",{id:"divMappedElm",className:"pad-top-0-5em"})})]}):(0,y.jsx)(y.Fragment,{}),(0,y.jsxs)("div",{className:"pad-top-0-5em",children:[(0,y.jsx)("button",{type:"button",onClick:()=>pe(),className:"btn btn-primary",children:"Submit"}),"\xa0",(0,y.jsx)("button",{type:"button",onClick:()=>ie(),className:"btn btn-warning",children:"Cancel"})]})]})]})]})}},24638:(e,t,n)=>{n.d(t,{C:()=>l});var s=n(80511),r=n(84756);const a=n(82585).F,l=async e=>{let t;const n={hdr:{convid:(0,s.lk)(),tag:"Expgroup",orgid:"",vendid:"0"},body:{cmbScrId:e}},l={};try{return await r.Ay.post(a.GetExpGrpLst,(0,s.Yw)(n),l).then((function(e){const n=JSON.parse((0,s.H5)(e.data));t=n})),t}catch(d){console.log(d)}}},76793:(e,t,n)=>{n.d(t,{B:()=>l});var s=n(80511),r=n(84756);const a=n(82585).F,l=async e=>{let t;const n=a.Getscreengrpelms,l={hdr:{convid:(0,s.lk)(),tag:"Table List",orgid:"",vendid:"0"},body:{cmbScrid:e}};console.log(l);const d={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};return await r.Ay.post(n,(0,s.Yw)(l),d).then((function(e){const n=JSON.parse((0,s.H5)(e.data));t=n})),t}}}]);
//# sourceMappingURL=747.3f883518.chunk.js.map