/*! For license information please see 395.f34772b7.chunk.js.LICENSE.txt */
(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[395],{61557:(t,e,i)=>{"use strict";i.d(e,{r:()=>b});var s=i(91120),n=i(17294);class r extends n.m{constructor(){super(...arguments),Object.defineProperty(this,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(n.m.new(this._root,{width:s.Q2,height:s.Q2,interactiveChildren:!1}))}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:n.m.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:s.Q2,height:s.Q2})})}}Object.defineProperty(r,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"}),Object.defineProperty(r,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.m.classNames.concat([r.className])});var a=i(56873),o=i(7552);class l extends r{constructor(){super(...arguments),Object.defineProperty(this,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:n.m.new(this._root,{width:s.Q2,height:s.Q2,isMeasured:!1})}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:new a.fo})}_afterNew(){super._afterNew(),this._disposers.push(this.series);const t=this.seriesContainer.children;this._disposers.push(this.series.events.onAll((e=>{if("clear"===e.type){o.__(e.oldValues,(t=>{this._removeSeries(t)}));const t=this.get("colors");t&&t.reset();const i=this.get("patterns");i&&i.reset()}else if("push"===e.type)t.moveValue(e.newValue),this._processSeries(e.newValue);else if("setIndex"===e.type)t.setIndex(e.index,e.newValue),this._processSeries(e.newValue);else if("insertIndex"===e.type)t.insertIndex(e.index,e.newValue),this._processSeries(e.newValue);else if("removeIndex"===e.type)this._removeSeries(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");t.moveValue(e.value,e.newIndex),this._processSeries(e.value)}})))}_processSeries(t){t.chart=this,t._placeBulletsContainer(this)}_removeSeries(t){t.isDisposed()||(this.seriesContainer.children.removeValue(t),t._removeBulletsContainer())}}Object.defineProperty(l,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"}),Object.defineProperty(l,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:r.classNames.concat([l.className])});var h=i(1685),c=i(2857),d=i(81046);class u extends c.wC{_afterNew(){super._afterNewApplyThemes(),this._dirty.colors=!1}_beforeChanged(){this.isDirty("colors")&&this.reset()}generateColors(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);const t=this.getPrivate("currentPass"),e=this.get("colors",[this.get("baseColor",d.Q1.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",e.length);const i=this.getPrivate("numColors"),s=this.get("passOptions"),n=this.get("reuse");for(let r=0;r<i;r++)if(n)e.push(e[r]);else{const i=e[r].toHSL();let n=i.h+(s.hue||0)*t;for(;n>1;)n-=1;let a=i.s+(s.saturation||0)*t;a>1&&(a=1),a<0&&(a=0);let o=i.l+(s.lightness||0)*t;for(;o>1;)o-=1;e.push(d.Q1.fromHSL(n,a,o))}}getIndex(t){const e=this.get("colors",[]),i=this.get("saturation");return t>=e.length?(this.generateColors(),this.getIndex(t)):null!=i?d.Q1.saturate(e[t],i):e[t]}next(){let t=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",t+this.get("step",1)),this.getIndex(t)}reset(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorSet"}),Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:c.wC.classNames.concat([u.className])});var p=i(21539);class f extends h.S{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,e=this.rule.bind(this);e("PercentSeries").setAll({legendLabelText:"{category}",legendValueText:"{valuePercentTotal.formatNumber('0.00p')}",colors:u.new(this._root,{}),width:s.Q2,height:s.Q2}),e("PieChart").setAll({radius:(0,s.KN)(80),startAngle:-90,endAngle:270}),e("PieSeries").setAll({alignLabels:!0,startAngle:-90,endAngle:270}),e("PieSeries").states.create("hidden",{endAngle:-90,opacity:0}),e("Slice",["pie"]).setAll({position:"absolute",isMeasured:!1,x:0,y:0,toggleKey:"active",tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}",strokeWidth:1,strokeOpacity:1,role:"figure",lineJoin:"round"}),e("Slice",["pie"]).states.create("active",{shiftRadius:20,scale:1}),e("Slice",["pie"]).states.create("hoverActive",{scale:1.04}),e("Slice",["pie"]).states.create("hover",{scale:1.04}),e("RadialLabel",["pie"]).setAll({textType:"aligned",radius:10,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",paddingTop:5,paddingBottom:5,populateText:!0}),e("Tick",["pie"]).setAll({location:1}),e("SlicedChart").setAll({paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10}),e("FunnelSeries").setAll({startLocation:0,endLocation:1,orientation:"vertical",alignLabels:!0,sequencedInterpolation:!0}),e("FunnelSlice").setAll({interactive:!0,expandDistance:0}),e("FunnelSlice").states.create("hover",{expandDistance:.15}),e("Label",["funnel"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:s.yP}),e("Label",["funnel","horizontal"]).setAll({centerX:0,centerY:s.yP,rotation:-90}),e("Label",["funnel","vertical"]).setAll({centerY:s.yP,centerX:0}),e("Tick",["funnel"]).setAll({location:1}),e("FunnelSlice",["funnel","link"]).setAll({fillOpacity:.5,strokeOpacity:0,expandDistance:-.1}),e("FunnelSlice",["funnel","link","vertical"]).setAll({height:10}),e("FunnelSlice",["funnel","link","horizontal"]).setAll({width:10}),e("PyramidSeries").setAll({valueIs:"area"}),e("FunnelSlice",["pyramid","link"]).setAll({fillOpacity:.5}),e("FunnelSlice",["pyramid","link","vertical"]).setAll({height:0}),e("FunnelSlice",["pyramid","link","horizontal"]).setAll({width:0}),e("FunnelSlice",["pyramid"]).setAll({interactive:!0,expandDistance:0}),e("FunnelSlice",["pyramid"]).states.create("hover",{expandDistance:.15}),e("Label",["pyramid"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:s.yP}),e("Label",["pyramid","horizontal"]).setAll({centerX:0,centerY:s.yP,rotation:-90}),e("Label",["pyramid","vertical"]).setAll({centerY:s.yP,centerX:0}),e("Tick",["pyramid"]).setAll({location:1}),e("FunnelSlice",["pictorial"]).setAll({interactive:!0,tooltipText:"{category}: {valuePercentTotal.formatNumber('0.00p')}"}),e("Label",["pictorial"]).setAll({populateText:!0,text:"{category}: {valuePercentTotal.formatNumber('0.00p')}",centerY:s.yP}),e("Label",["pictorial","horizontal"]).setAll({centerX:0,centerY:s.yP,rotation:-90}),e("Label",["pictorial","vertical"]).setAll({centerY:s.yP,centerX:0}),e("FunnelSlice",["pictorial","link"]).setAll({fillOpacity:.5,width:0,height:0}),e("Tick",["pictorial"]).setAll({location:.5});{const i=e("Graphics",["pictorial","background"]);i.setAll({fillOpacity:.2}),(0,p.w)(i,"fill",t,"alternativeBackground")}}}class g extends l{_afterNew(){this._defaultThemes.push(f.new(this._root)),super._afterNew(),this.chartContainer.children.push(this.seriesContainer),this.seriesContainer.children.push(this.bulletsContainer)}_processSeries(t){super._processSeries(t),this.seriesContainer.children.moveValue(this.bulletsContainer,this.seriesContainer.children.length-1)}}Object.defineProperty(g,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentChart"}),Object.defineProperty(g,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:l.classNames.concat([g.className])});var m=i(95788),v=i(711);class b extends g{constructor(){super(...arguments),Object.defineProperty(this,"_maxRadius",{enumerable:!0,configurable:!0,writable:!0,value:1})}_afterNew(){super._afterNew(),this.seriesContainer.setAll({x:s.yP,y:s.yP})}_prepareChildren(){super._prepareChildren();const t=this.chartContainer,e=t.innerWidth(),i=t.innerHeight(),n=this.get("startAngle",0),r=this.get("endAngle",0),a=this.get("innerRadius");let o=v.Ki(0,0,n,r,1);const l=e/(o.right-o.left),h=i/(o.bottom-o.top);let c={left:0,right:0,top:0,bottom:0};if(a instanceof s.QE){let t=a.value,s=Math.min(l,h);t=Math.max(s*t,s-Math.min(i,e))/s,c=v.Ki(0,0,n,r,t),this.setPrivateRaw("irModifyer",t/a.value)}o=v._Z([o,c]);const d=this._maxRadius;this._maxRadius=Math.min(l,h);const u=m.JY(this.get("radius",0),this._maxRadius);this.seriesContainer.setAll({dy:-u*(o.bottom+o.top)/2,dx:-u*(o.right+o.left)/2}),(this.isDirty("startAngle")||this.isDirty("endAngle")||d!=this._maxRadius)&&this.series.each((t=>{t._markDirtyKey("startAngle")})),(this.isDirty("innerRadius")||this.isDirty("radius"))&&this.series.each((t=>{t._markDirtyKey("innerRadius")}))}radius(t){let e=m.JY(this.get("radius",0),this._maxRadius),i=m.JY(this.get("innerRadius",0),e);if(t){let s=this.series.indexOf(t),n=this.series.length,r=t.get("radius");return null!=r?i+m.JY(r,e-i):i+(e-i)/n*(s+1)}return e}innerRadius(t){const e=this.radius();let i=m.JY(this.get("innerRadius",0),e);if(i<0&&(i=e+i),t){let s=this.series.indexOf(t),n=this.series.length,r=t.get("innerRadius");return null!=r?i+m.JY(r,e-i):i+(e-i)/n*s}return i}_updateSize(){super._updateSize(),this.markDirtyKey("radius")}}Object.defineProperty(b,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieChart"}),Object.defineProperty(b,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:g.classNames.concat([b.className])})},27721:(t,e,i)=>{"use strict";i.d(e,{w:()=>K});var s=i(6326),n=i(51781),r=i(17294),a=i(11110),o=i(7552),l=i(55077);class h extends n.s{constructor(){super(...arguments),Object.defineProperty(this,"slicesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(r.m.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(r.m.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"ticksContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(r.m.new(this._root,{position:"absolute",isMeasured:!1}))}),Object.defineProperty(this,"_lLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_rLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_hLabels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:this._makeSlices()}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this._makeLabels()}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:this._makeTicks()})}makeSlice(t){const e=this.slicesContainer.children.push(this.slices.make());return e.on("fill",(()=>{this.updateLegendMarker(t)})),e.on("fillPattern",(()=>{this.updateLegendMarker(t)})),e.on("stroke",(()=>{this.updateLegendMarker(t)})),e._setDataItem(t),t.set("slice",e),this.slices.push(e),e}makeLabel(t){const e=this.labelsContainer.children.push(this.labels.make());return e._setDataItem(t),t.set("label",e),this.labels.push(e),e}_shouldMakeBullet(t){return null!=t.get("value")}makeTick(t){const e=this.ticksContainer.children.push(this.ticks.make());return e._setDataItem(t),t.set("tick",e),this.ticks.push(e),e}_afterNew(){this.fields.push("category","fill"),super._afterNew()}_onDataClear(){const t=this.get("colors");t&&t.reset();const e=this.get("patterns");e&&e.reset()}_prepareChildren(){if(super._prepareChildren(),this._lLabels=[],this._rLabels=[],this._hLabels=[],this._valuesDirty){let t=0,e=0,i=0,s=1/0,n=0;o.__(this._dataItems,(i=>{let s=i.get("valueWorking",0);t+=s,e+=Math.abs(s)})),o.__(this._dataItems,(t=>{let r=t.get("valueWorking",0);r>i&&(i=r),r<s&&(s=r),n++;let a=r/e;0==e&&(a=0),t.setRaw("valuePercentTotal",100*a)})),this.setPrivateRaw("valueLow",s),this.setPrivateRaw("valueHigh",i),this.setPrivateRaw("valueSum",t),this.setPrivateRaw("valueAverage",t/n),this.setPrivateRaw("valueAbsoluteSum",e)}}show(t){const e=Object.create(null,{show:{get:()=>super.show}});return(0,s.sH)(this,void 0,void 0,(function*(){let i=[];i.push(e.show.call(this,t)),i.push(this._sequencedShowHide(!0,t)),yield Promise.all(i)}))}hide(t){const e=Object.create(null,{hide:{get:()=>super.hide}});return(0,s.sH)(this,void 0,void 0,(function*(){let i=[];i.push(e.hide.call(this,t)),i.push(this._sequencedShowHide(!1,t)),yield Promise.all(i)}))}_updateChildren(){super._updateChildren(),this._valuesDirty&&o.__(this._dataItems,(t=>{t.get("label").text.markDirtyText()})),(this.isDirty("legendLabelText")||this.isDirty("legendValueText"))&&o.__(this._dataItems,(t=>{this.updateLegendValue(t)})),this._arrange()}_arrange(){this._arrangeDown(this._lLabels),this._arrangeUp(this._lLabels),this._arrangeDown(this._rLabels),this._arrangeUp(this._rLabels),this._arrangeLeft(this._hLabels),this._arrangeRight(this._hLabels),o.__(this.dataItems,(t=>{this._updateTick(t)}))}_afterChanged(){super._afterChanged(),this._arrange()}processDataItem(t){if(super.processDataItem(t),null==t.get("fill")){let e=this.get("colors");e&&t.setRaw("fill",e.next())}if(null==t.get("fillPattern")){let e=this.get("patterns");e&&t.setRaw("fillPattern",e.next())}}showDataItem(t,e){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,s.sH)(this,void 0,void 0,(function*(){const s=[i.showDataItem.call(this,t,e)];l.Et(e)||(e=this.get("stateAnimationDuration",0));const n=this.get("stateAnimationEasing");let r=t.get("value");const a=t.animate({key:"valueWorking",to:r,duration:e,easing:n});a&&s.push(a.waitForStop());const o=t.get("tick");o&&s.push(o.show(e));const h=t.get("label");h&&s.push(h.show(e));const c=t.get("slice");c&&s.push(c.show(e)),c.get("active")&&c.states.applyAnimate("active"),yield Promise.all(s)}))}hideDataItem(t,e){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,s.sH)(this,void 0,void 0,(function*(){const s=[i.hideDataItem.call(this,t,e)],n=this.states.create("hidden",{});l.Et(e)||(e=n.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const r=n.get("stateAnimationEasing",this.get("stateAnimationEasing")),a=t.animate({key:"valueWorking",to:0,duration:e,easing:r});a&&s.push(a.waitForStop());const o=t.get("tick");o&&s.push(o.hide(e));const h=t.get("label");h&&s.push(h.hide(e));const c=t.get("slice");c.hideTooltip(),c&&s.push(c.hide(e)),yield Promise.all(s)}))}disposeDataItem(t){super.disposeDataItem(t);let e=t.get("label");e&&(this.labels.removeValue(e),e.dispose());let i=t.get("tick");i&&(this.ticks.removeValue(i),i.dispose());let s=t.get("slice");s&&(this.slices.removeValue(s),s.dispose())}hoverDataItem(t){const e=t.get("slice");e&&!e.isHidden()&&e.hover()}unhoverDataItem(t){const e=t.get("slice");e&&e.unhover()}updateLegendMarker(t){if(t){const e=t.get("slice");if(e){const i=t.get("legendDataItem");if(i){const t=i.get("markerRectangle");o.__(a.o,(i=>{null!=e.get(i)&&t.set(i,e.get(i))}))}}}}_arrangeDown(t){if(t){let e=this._getNextDown();t.sort(((t,e)=>t.y>e.y?1:t.y<e.y?-1:0)),o.__(t,(t=>{const i=t.label.adjustedLocalBounds();let s=i.top;t.y+s<e&&(t.y=e-s),t.label.set("y",t.y),e=t.y+i.bottom}))}}_getNextUp(){return this.labelsContainer.maxHeight()}_getNextDown(){return 0}_arrangeUp(t){if(t){let e=this._getNextUp();t.sort(((t,e)=>t.y<e.y?1:t.y>e.y?-1:0)),o.__(t,(t=>{const i=t.label.adjustedLocalBounds();let s=i.bottom;t.y+s>e&&(t.y=e-s),t.label.set("y",t.y),e=t.y+i.top}))}}_arrangeRight(t){if(t){let e=0;t.sort(((t,e)=>t.y>e.y?1:t.y<e.y?-1:0)),o.__(t,(t=>{const i=t.label.adjustedLocalBounds();let s=i.left;t.y+s<e&&(t.y=e-s),t.label.set("x",t.y),e=t.y+i.right}))}}_arrangeLeft(t){if(t){let e=this.labelsContainer.maxWidth();t.sort(((t,e)=>t.y<e.y?1:t.y>e.y?-1:0)),o.__(t,(t=>{const i=t.label.adjustedLocalBounds();let s=i.right;t.y+s>e&&(t.y=e-s),t.label.set("x",t.y),e=t.y+i.left}))}}_updateSize(){super._updateSize(),this.markDirty()}_updateTick(t){}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}}Object.defineProperty(h,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PercentSeries"}),Object.defineProperty(h,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.s.classNames.concat([h.className])});var c=i(84923),d=i(91120);function u(t){return function(){return t}}const p=Math.abs,f=Math.atan2,g=Math.cos,m=Math.max,v=Math.min,b=Math.sin,y=Math.sqrt,_=1e-12,w=Math.PI,x=w/2,A=2*w;function E(t){return t>=1?x:t<=-1?-x:Math.asin(t)}const k=Math.PI,S=2*k,C=1e-6,P=S-C;function T(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=arguments[e]+t[e]}class M{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?T:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return T;const i=10**e;return function(t){this._+=t[0];for(let e=1,s=t.length;e<s;++e)this._+=Math.round(arguments[e]*i)/i+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,s){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,e,i,s,n,r){this._append`C${+t},${+e},${+i},${+s},${this._x1=+n},${this._y1=+r}`}arcTo(t,e,i,s,n){if(t=+t,e=+e,i=+i,s=+s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let r=this._x1,a=this._y1,o=i-t,l=s-e,h=r-t,c=a-e,d=h*h+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(d>C)if(Math.abs(c*o-l*h)>C&&n){let u=i-r,p=s-a,f=o*o+l*l,g=u*u+p*p,m=Math.sqrt(f),v=Math.sqrt(d),b=n*Math.tan((k-Math.acos((f+d-g)/(2*m*v)))/2),y=b/v,_=b/m;Math.abs(y-1)>C&&this._append`L${t+y*h},${e+y*c}`,this._append`A${n},${n},0,0,${+(c*u>h*p)},${this._x1=t+_*o},${this._y1=e+_*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,i,s,n,r){if(t=+t,e=+e,r=!!r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(s),o=i*Math.sin(s),l=t+a,h=e+o,c=1^r,d=r?s-n:n-s;null===this._x1?this._append`M${l},${h}`:(Math.abs(this._x1-l)>C||Math.abs(this._y1-h)>C)&&this._append`L${l},${h}`,i&&(d<0&&(d=d%S+S),d>P?this._append`A${i},${i},0,1,${c},${t-a},${e-o}A${i},${i},0,1,${c},${this._x1=l},${this._y1=h}`:d>C&&this._append`A${i},${i},0,${+(d>=k)},${c},${this._x1=t+i*Math.cos(n)},${this._y1=e+i*Math.sin(n)}`)}rect(t,e,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function D(t){return t.innerRadius}function R(t){return t.outerRadius}function L(t){return t.startAngle}function O(t){return t.endAngle}function I(t){return t&&t.padAngle}function F(t,e,i,s,n,r,a){var o=t-i,l=e-s,h=(a?r:-r)/y(o*o+l*l),c=h*l,d=-h*o,u=t+c,p=e+d,f=i+c,g=s+d,v=(u+f)/2,b=(p+g)/2,_=f-u,w=g-p,x=_*_+w*w,A=n-r,E=u*g-f*p,k=(w<0?-1:1)*y(m(0,A*A*x-E*E)),S=(E*w-_*k)/x,C=(-E*_-w*k)/x,P=(E*w+_*k)/x,T=(-E*_+w*k)/x,M=S-v,D=C-b,R=P-v,L=T-b;return M*M+D*D>R*R+L*L&&(S=P,C=T),{cx:S,cy:C,x01:-c,y01:-d,x11:S*(n/A-1),y11:C*(n/A-1)}}function N(){var t=D,e=R,i=u(0),s=null,n=L,r=O,a=I,o=null,l=function(t){let e=3;return t.digits=function(i){if(!arguments.length)return e;if(null==i)e=null;else{const t=Math.floor(i);if(!(t>=0))throw new RangeError(`invalid digits: ${i}`);e=t}return t},()=>new M(e)}(h);function h(){var h,c,d,u=+t.apply(this,arguments),m=+e.apply(this,arguments),k=n.apply(this,arguments)-x,S=r.apply(this,arguments)-x,C=p(S-k),P=S>k;if(o||(o=h=l()),m<u&&(c=m,m=u,u=c),m>_)if(C>A-_)o.moveTo(m*g(k),m*b(k)),o.arc(0,0,m,k,S,!P),u>_&&(o.moveTo(u*g(S),u*b(S)),o.arc(0,0,u,S,k,P));else{var T,M,D=k,R=S,L=k,O=S,I=C,N=C,j=a.apply(this,arguments)/2,B=j>_&&(s?+s.apply(this,arguments):y(u*u+m*m)),H=v(p(m-u)/2,+i.apply(this,arguments)),W=H,z=H;if(B>_){var V=E(B/u*b(j)),$=E(B/m*b(j));(I-=2*V)>_?(L+=V*=P?1:-1,O-=V):(I=0,L=O=(k+S)/2),(N-=2*$)>_?(D+=$*=P?1:-1,R-=$):(N=0,D=R=(k+S)/2)}var U=m*g(D),G=m*b(D),q=u*g(O),Y=u*b(O);if(H>_){var X,K=m*g(R),Q=m*b(R),J=u*g(L),Z=u*b(L);if(C<w)if(X=function(t,e,i,s,n,r,a,o){var l=i-t,h=s-e,c=a-n,d=o-r,u=d*l-c*h;if(!(u*u<_))return[t+(u=(c*(e-r)-d*(t-n))/u)*l,e+u*h]}(U,G,J,Z,K,Q,q,Y)){var tt=U-X[0],et=G-X[1],it=K-X[0],st=Q-X[1],nt=1/b(((d=(tt*it+et*st)/(y(tt*tt+et*et)*y(it*it+st*st)))>1?0:d<-1?w:Math.acos(d))/2),rt=y(X[0]*X[0]+X[1]*X[1]);W=v(H,(u-rt)/(nt-1)),z=v(H,(m-rt)/(nt+1))}else W=z=0}N>_?z>_?(T=F(J,Z,U,G,m,z,P),M=F(K,Q,q,Y,m,z,P),o.moveTo(T.cx+T.x01,T.cy+T.y01),z<H?o.arc(T.cx,T.cy,z,f(T.y01,T.x01),f(M.y01,M.x01),!P):(o.arc(T.cx,T.cy,z,f(T.y01,T.x01),f(T.y11,T.x11),!P),o.arc(0,0,m,f(T.cy+T.y11,T.cx+T.x11),f(M.cy+M.y11,M.cx+M.x11),!P),o.arc(M.cx,M.cy,z,f(M.y11,M.x11),f(M.y01,M.x01),!P))):(o.moveTo(U,G),o.arc(0,0,m,D,R,!P)):o.moveTo(U,G),u>_&&I>_?W>_?(T=F(q,Y,K,Q,u,-W,P),M=F(U,G,J,Z,u,-W,P),o.lineTo(T.cx+T.x01,T.cy+T.y01),W<H?o.arc(T.cx,T.cy,W,f(T.y01,T.x01),f(M.y01,M.x01),!P):(o.arc(T.cx,T.cy,W,f(T.y01,T.x01),f(T.y11,T.x11),!P),o.arc(0,0,u,f(T.cy+T.y11,T.cx+T.x11),f(M.cy+M.y11,M.cx+M.x11),P),o.arc(M.cx,M.cy,W,f(M.y11,M.x11),f(M.y01,M.x01),!P))):o.arc(0,0,u,O,L,P):o.lineTo(q,Y)}else o.moveTo(0,0);if(o.closePath(),h)return o=null,h+""||null}return h.centroid=function(){var i=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,s=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2-w/2;return[g(s)*i,b(s)*i]},h.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:u(+e),h):t},h.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:u(+t),h):e},h.cornerRadius=function(t){return arguments.length?(i="function"===typeof t?t:u(+t),h):i},h.padRadius=function(t){return arguments.length?(s=null==t?null:"function"===typeof t?t:u(+t),h):s},h.startAngle=function(t){return arguments.length?(n="function"===typeof t?t:u(+t),h):n},h.endAngle=function(t){return arguments.length?(r="function"===typeof t?t:u(+t),h):r},h.padAngle=function(t){return arguments.length?(a="function"===typeof t?t:u(+t),h):a},h.context=function(t){return arguments.length?(o=null==t?null:t,h):o},h}var j=i(711);class B extends a.A{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:N()})}_getTooltipPoint(){let t=this.get("tooltipX"),e=this.get("tooltipY"),i=0,s=0;l.Et(t)&&(i=t),l.Et(e)&&(s=e);let n=this.get("radius",0),r=this.get("innerRadius",0);return n+=this.get("dRadius",0),r+=this.get("dInnerRadius",0),r<0&&(r=n+r),t instanceof d.QE&&(i=this.ix*(r+(n-r)*t.value)),e instanceof d.QE&&(s=this.iy*(r+(n-r)*e.value)),this.get("arc")>=360&&0==r&&(i=0,s=0),{x:i,y:s}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let t=this.get("startAngle",0),e=this.get("arc",0);const i=this._generator;e<0&&(t+=e,e*=-1),e>.1&&i.cornerRadius(this.get("cornerRadius",0)),i.context(this._display);let s=this.get("radius",0),n=this.get("innerRadius",0);s+=this.get("dRadius",0),n+=this.get("dInnerRadius",0),n<0&&(n=s+n),i({innerRadius:n,outerRadius:s,startAngle:(t+90)*j.nr,endAngle:(t+e+90)*j.nr});let r=t+e/2;this.ix=j.gn(r),this.iy=j.F8(r);const a=this.get("shiftRadius",0);this.setRaw("dx",this.ix*a),this.setRaw("dy",this.iy*a),this.markDirtyPosition()}}}function H(t,e){for(let i=0,s=e.length;i<s;i++){const s=e[i];if(s.length>0){let e=s[0];if(e.length>0){let i=e[0];t.moveTo(i.x,i.y);for(let e=0,n=s.length;e<n;e++)W(t,s[e])}}}}function W(t,e){for(let i=0,s=e.length;i<s;i++){const s=e[i];t.lineTo(s.x,s.y)}}Object.defineProperty(B,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"}),Object.defineProperty(B,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.A.classNames.concat([B.className])});class z extends a.A{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const t=this.get("points"),e=this.get("segments");if(t&&t.length>0){let e=t[0];this._display.moveTo(e.x,e.y),H(this._display,[[t]])}else if(e)H(this._display,e);else if(!this.get("draw")){let t=this.width(),e=this.height();this._display.moveTo(0,0),this._display.lineTo(t,e)}}}}Object.defineProperty(z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"}),Object.defineProperty(z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.A.classNames.concat([z.className])});class V extends z{}Object.defineProperty(V,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"}),Object.defineProperty(V,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:z.classNames.concat([V.className])});var $=i(89867),U=i(89638);class G extends U.E{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*j.nr,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(G,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"}),Object.defineProperty(G,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:U.E.classNames.concat([G.className])});var q=i(95788);class Y extends $.J{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(G.new(this._root,{}))}baseRadius(){const t=this.getPrivate("radius",0),e=this.getPrivate("innerRadius",0),i=this.get("baseRadius",0);return e+q.JY(i,t-e)}radius(){const t=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(t?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const t=this.get("textType","adjusted"),e=this.get("inside",!1),i=this.get("orientation");let s=j.n0(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",e);const n=j.F8(s),r=j.gn(s);let a=this.baseRadius(),o=this.radius();if(this._display.angle=0,"circular"==t)this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this.setRaw("x",void 0),this.setRaw("y",void 0),this._text.set("orientation",i),this._text.set("radius",o);else{0==a&&(s=0,o=0);let e=o*r,l=o*n;"radial"==t?(this.setRaw("x",e),this.setRaw("y",l),s<90||s>270||"auto"!=i?(this._display.angle=s,this._flipped=!1):(this._display.angle=s+180,this._flipped=!0),this._dirty.rotation=!1):"adjusted"==t?(this.setRaw("centerX",d.yP),this.setRaw("centerY",d.yP),this.setRaw("x",e),this.setRaw("y",l)):"regular"==t&&(this.setRaw("x",e),this.setRaw("y",l))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const t=this.get("textType","regular"),e=this.get("inside",!1);let i=0,s=0,n=this.get("labelAngle",0),r=this.localBounds(),a=r.right-r.left,o=r.bottom-r.top;if("radial"==t){if(this._flipped){let t=this.get("centerX");t instanceof d.QE&&(a*=1-2*t.value),i=a*j.gn(n),s=a*j.F8(n)}}else e||"adjusted"!=t||(i=a/2*j.gn(n),s=o/2*j.F8(n));this.setRaw("dx",i),this.setRaw("dy",s),super._updatePosition()}get text(){return this._text}}Object.defineProperty(Y,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"}),Object.defineProperty(Y,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:$.J.classNames.concat([Y.className])});var X=i(56873);class K extends h{_makeSlices(){return new X.TS(c.Bj.new({}),(()=>B._new(this._root,{themeTags:q.kE(this.slices.template.get("themeTags",[]),["pie","series"])},[this.slices.template])))}_makeLabels(){return new X.TS(c.Bj.new({}),(()=>Y._new(this._root,{themeTags:q.kE(this.labels.template.get("themeTags",[]),["pie","series"])},[this.labels.template])))}_makeTicks(){return new X.TS(c.Bj.new({}),(()=>V._new(this._root,{themeTags:q.kE(this.ticks.template.get("themeTags",[]),["pie","series"])},[this.ticks.template])))}processDataItem(t){super.processDataItem(t);const e=this.makeSlice(t);e.on("scale",(()=>{this._updateTick(t)})),e.on("shiftRadius",(()=>{this._updateTick(t)})),e.events.on("positionchanged",(()=>{this._updateTick(t)}));const i=this.makeLabel(t);i.events.on("positionchanged",(()=>{this._updateTick(t)})),this.makeTick(t),e.events.on("positionchanged",(()=>{i.markDirty()}))}_getNextUp(){const t=this.chart;return t?t._maxRadius:this.labelsContainer.maxHeight()/2}_getNextDown(){const t=this.chart;return t?-t._maxRadius:-this.labelsContainer.maxHeight()/2}_prepareChildren(){super._prepareChildren();const t=this.chart;if(t){if(this.isDirty("alignLabels")){let t=this.labels.template;if(this.get("alignLabels"))t.set("textType","aligned");else{let e=t.get("textType");null!=e&&"aligned"!=e||t.set("textType","adjusted")}}if(this._valuesDirty||this.isDirty("radius")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("endAngle")||this.isDirty("alignLabels")){this.markDirtyBounds();const e=this.get("startAngle",t.get("startAngle",-90)),i=this.get("endAngle",t.get("endAngle",270))-e;let s=e;const n=t.radius(this);this.setPrivateRaw("radius",n);let r=t.innerRadius(this)*t.getPrivate("irModifyer",1);r<0&&(r=n+r),o.__(this._dataItems,(t=>{this.updateLegendValue(t);let e=i*t.get("valuePercentTotal")/100;const a=t.get("slice");if(a){a.set("radius",n),a.set("innerRadius",r),a.set("startAngle",s),a.set("arc",e);const i=t.get("fill");a._setDefault("fill",i),a._setDefault("stroke",i);const o=t.get("fillPattern");a._setDefault("fillPattern",o)}let o=j.n0(s+e/2);const l=t.get("label");if(l&&(l.setPrivate("radius",n),l.setPrivate("innerRadius",r),l.set("labelAngle",o),"aligned"==l.get("textType"))){let t=n+l.get("radius",0),e=n*j.F8(o);o>90&&o<=270?(l.isHidden()||l.isHiding()||this._lLabels.push({label:l,y:e}),t*=-1,t-=this.labelsContainer.get("paddingLeft",0),l.set("centerX",d.Q2),l.setPrivateRaw("left",!0)):(l.isHidden()||l.isHiding()||this._rLabels.push({label:l,y:e}),t+=this.labelsContainer.get("paddingRight",0),l.set("centerX",0),l.setPrivateRaw("left",!1)),l.set("x",t),l.set("y",n*j.F8(o))}s+=e,this._updateTick(t)}))}}}_updateTick(t){const e=t.get("tick"),i=t.get("label"),s=t.get("slice"),n=e.get("location",1);if(e&&i&&s){const t=(s.get("shiftRadius",0)+s.get("radius",0))*s.get("scale",1)*n,r=i.get("labelAngle",0),a=j.gn(r),o=j.F8(r),l=this.labelsContainer,h=l.get("paddingLeft",0),c=l.get("paddingRight",0);let d=0,u=0;d=i.x(),u=i.y();let p=[];if(0!=d||0!=u){if("circular"==i.get("textType")){const t=i.radius()-i.get("paddingBottom",0),e=i.get("labelAngle",0);d=t*j.gn(e),u=t*j.F8(e)}let e=-c;i.getPrivate("left")&&(e=h),p=[{x:s.x()+t*a,y:s.y()+t*o},{x:d+e,y:u},{x:d,y:u}]}e.set("points",p)}}_positionBullet(t){const e=t.get("sprite");if(e){const i=e.dataItem.get("slice");if(i){const s=i.get("innerRadius",0),n=i.get("radius",0),r=i.get("startAngle",0)+i.get("arc",0)*t.get("locationX",.5),a=s+(n-s)*t.get("locationY",.5);e.setAll({x:j.gn(r)*a,y:j.F8(r)*a})}}}}Object.defineProperty(K,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PieSeries"}),Object.defineProperty(K,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.classNames.concat([K.className])})},93305:(t,e,i)=>{"use strict";i.d(e,{u5:()=>s});const s=new class{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.10.5"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}},30407:(t,e,i)=>{"use strict";i.d(e,{b:()=>Ht});var s=i(19727),n=i(17294),r=i(89638),a=i(78363),o=i(89901),l=i(25887),h=i(8328),c=i(7552),d=i(95788);class u{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver((t=>{c.__(t,(t=>{c.__(this._targets,(e=>{e.target===t.target&&e.callback()}))}))}))}addTarget(t,e){this._observer.observe(t,{box:"border-box"}),this._targets.push({target:t,callback:e})}removeTarget(t){this._observer.unobserve(t),c.TW(this._targets,(e=>e.target!==t))}}class p{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(t,e){if(null===this._timer){let t=null;const e=()=>{const i=Date.now();(null===t||i>t+p.delay)&&(t=i,c.__(this._targets,(t=>{let e=t.target.getBoundingClientRect();e.width===t.size.width&&e.height===t.size.height||(t.size=e,t.callback())}))),0===this._targets.length?this._timer=null:this._timer=requestAnimationFrame(e)};this._timer=requestAnimationFrame(e)}this._targets.push({target:t,callback:e,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}removeTarget(t){c.TW(this._targets,(e=>e.target!==t)),0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty(p,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let f=null;class g{constructor(t,e){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=(null===f&&(f="undefined"!==typeof ResizeObserver?new u:new p),f),this._element=t,this._listener=d.n_(e),this._sensor.addTarget(t,e)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}var m=i(2857);class v extends m.wC{}Object.defineProperty(v,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(v,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:m.wC.classNames.concat([v.className])});var b=i(11110),y=i(43260),_=i(89867),w=i(711);class x extends b.A{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let t=this.width(),e=this.height();if(t>0&&e>0){let i=this.get("cornerRadius",8);i=w.s_(i,0,Math.min(t/2,e/2));let s=this.get("pointerX",0),n=this.get("pointerY",0),r=this.get("pointerBaseWidth",15)/2,a=0,o=0,l=0,h=(s-a)*(e-o)-(n-o)*(t-a),c=(s-l)*(0-e)-(n-e)*(t-l);const d=this._display;if(d.moveTo(i,0),h>0&&c>0){let e=Math.round(w.s_(s,i+r,t-r-i));n=w.s_(n,-1/0,0),d.lineTo(e-r,0),d.lineTo(s,n),d.lineTo(e+r,0)}if(d.lineTo(t-i,0),d.arcTo(t,0,t,i,i),h>0&&c<0){let a=Math.round(w.s_(n,i+r,e-r-i));s=w.s_(s,t,1/0),d.lineTo(t,i),d.lineTo(t,Math.max(a-r,i)),d.lineTo(s,n),d.lineTo(t,a+r)}if(d.lineTo(t,e-i),d.arcTo(t,e,t-i,e,i),h<0&&c<0){let a=Math.round(w.s_(s,i+r,t-r-i));n=w.s_(n,e,1/0),d.lineTo(t-i,e),d.lineTo(a+r,e),d.lineTo(s,n),d.lineTo(a-r,e)}if(d.lineTo(i,e),d.arcTo(0,e,0,e-i,i),h<0&&c>0){let t=Math.round(w.s_(n,i+r,e-i-r));s=w.s_(s,-1/0,0),d.lineTo(0,e-i),d.lineTo(0,t+r),d.lineTo(s,n),d.lineTo(0,Math.max(t-r,i))}d.lineTo(0,i),d.arcTo(0,0,i,0,i),d.closePath()}}}}Object.defineProperty(x,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(x,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:b.A.classNames.concat([x.className])});var A=i(91120),E=i(81046);class k extends n.m{constructor(t,e,i){super(t,e,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=d.kE(this._settings.themeTags,["tooltip"]),super._afterNew();this._setDefaultFn("background",(()=>x.new(this._root,{}))).set("themeTags",["tooltip","background"]),this._label=this.children.push(_.J.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",(()=>{this._updateBackground()}))),this._disposers.push(this.on("bounds",(()=>{this._updateBackground()}))),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",(t=>{t&&(this._disposers.push(d.q2(t,"pointerover",(t=>{this._htmlContentHovered=!0}))),this._disposers.push(d.q2(t,"pointerout",(t=>{this._htmlContentHovered=!1}))))}))),this.on("visible",(t=>{this._handleReaderAnnouncement()})),this.label.events.on("dataitemchanged",(t=>{this._handleReaderAnnouncement()})),this._root._tooltips.push(this)}_handleReaderAnnouncement(){this.get("readerAnnounce")&&this.isVisibleDeep()&&this._root.readerAlert(this.label.getAccessibleText())}get label(){return this._label}dispose(){super.dispose(),c.TF(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width");null!=this.get("labelText")&&this.label.set("text",this.get("labelText"));null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"));null!=this.get("labelAriaLabel")&&this.label.set("ariaLabel",this.get("labelAriaLabel"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover")){if(this.get("keepTargetHover")){const t=this.get("background");this._keepHoverDp=new h.ZT([t.events.on("pointerover",(t=>{let e=this.get("tooltipTarget");e&&(e.parent&&e.parent.getPrivate("tooltipTarget")==e&&(e=e.parent),e.hover())})),t.events.on("pointerout",(t=>{let e=this.get("tooltipTarget");e&&(e.parent&&e.parent.getPrivate("tooltipTarget")==e&&(e=e.parent),this._htmlContentHovered||e.unhover())}))]),this.label.onPrivate("htmlElement",(e=>{this._keepHoverDp&&e&&this._keepHoverDp.disposers.push(d.q2(e,"pointerleave",(e=>{const i=this.root._renderer.getEvent(e);t.events.dispatch("pointerout",{type:"pointerout",originalEvent:i.event,point:i.point,simulated:!1,target:t})})))}))}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let t=this.get("tooltipTarget");const e=this.get("background");let i,s;t&&e&&(i=t.get("fill"),s=t.get("stroke"),null==i&&(i=s),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=i&&e.set("fill",i),this._fillDp=t.on("fill",(t=>{null!=t&&(e.set("fill",t),this._updateTextColor(t))})),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=i&&e.set("stroke",i),this._strokeDp=t.on("fill",(t=>{null!=t&&e.set("stroke",t)})),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=i&&this.label.set("fill",i),this._labelDp=t.on("fill",(t=>{null!=t&&this.label.set("fill",t)})),this._disposers.push(this._labelDp))),this._updateTextColor(i)}_updateTextColor(t){this.get("autoTextColor")&&(null==t&&(t=this.get("background").get("fill")),null==t&&(t=this._root.interfaceColors.get("background")),t instanceof E.Q1&&this.label.set("fill",E.Q1.alternative(t,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(t){super._setDataItem(t),this.label._setDataItem(t)}_updateBackground(){super.updateBackground();const t=this._root.container;if(t){let e=.5,i=.5,s=this.get("centerX");s instanceof A.QE&&(e=s.value);let n=this.get("centerY");n instanceof A.QE&&(i=n.value);let r=t.width(),a=t.height(),o=this.parent,l=0,h=0;if(o){l=o.x(),h=o.y();const t=o.get("layerMargin");t&&(l+=t.left||0,h+=t.top||0,r+=(t.left||0)+(t.right||0),a+=(t.top||0)+(t.bottom||0))}const c=this.get("bounds",{left:-l,top:-h,right:r-l,bottom:a-h});this._updateBounds();let d=this.width(),u=this.height();0===d&&(d=this._w),0===u&&(u=this._h);let p=this.get("pointTo",{x:r/2,y:a/2}),f=p.x,g=p.y,m=this.get("pointerOrientation"),v=this.get("background"),b=0,y=0,_=0;v instanceof x&&(b=v.get("pointerLength",0),y=v.get("strokeWidth",0)/2,_=y,v.set("width",d),v.set("height",u));let E=0,k=0,S=c.right-c.left,C=c.bottom-c.top;"horizontal"==m||"left"==m||"right"==m?(y=0,"horizontal"==m?f>c.left+S/2?(f-=d*(1-e)+b,_*=-1):f+=d*e+b:"left"==m?f+=d*(1-e)+b:(f-=d*e+b,_*=-1)):(_=0,"vertical"==m?g>c.top+u/2+b?g-=u*(1-i)+b:(g+=u*i+b,y*=-1):"down"==m?g-=u*(1-i)+b:(g+=u*i+b,y*=-1)),f=w.s_(f,c.left+d*e,c.left+S-d*(1-e))+_,g=w.s_(g,c.top+u*i,c.top+C-u*(1-i))-y,E=p.x-f+d*e+_,k=p.y-g+u*i-y,this._fx=f,this._fy=g;const P=this.get("animationDuration",0);if(P>0&&this.get("visible")&&this.get("opacity")>.1){const t=this.get("animationEasing");this.animate({key:"x",to:f,duration:P,easing:t}),this.animate({key:"y",to:g,duration:P,easing:t})}else this.set("x",f),this.set("y",g);v instanceof x&&(v.set("pointerX",E),v.set("pointerY",k)),d>0&&(this._w=d),u>0&&(this._h=u)}}}Object.defineProperty(k,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(k,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.m.classNames.concat([k.className])});var S=i(68298),C=i(40730),P=i(55077);class T extends m.wC{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const t="_big_number_suffix_",e="_small_number_suffix_",i="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(t+"3")},{number:1e6,suffix:this._t(t+"6")},{number:1e9,suffix:this._t(t+"9")},{number:1e12,suffix:this._t(t+"12")},{number:1e15,suffix:this._t(t+"15")},{number:1e18,suffix:this._t(t+"18")},{number:1e21,suffix:this._t(t+"21")},{number:1e24,suffix:this._t(t+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(e+"24")},{number:1e-21,suffix:this._t(e+"21")},{number:1e-18,suffix:this._t(e+"18")},{number:1e-15,suffix:this._t(e+"15")},{number:1e-12,suffix:this._t(e+"12")},{number:1e-9,suffix:this._t(e+"9")},{number:1e-6,suffix:this._t(e+"6")},{number:.001,suffix:this._t(e+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(i+"B")},{number:1024,suffix:this._t(i+"KB")},{number:1048576,suffix:this._t(i+"MB")},{number:1073741824,suffix:this._t(i+"GB")},{number:1099511627776,suffix:this._t(i+"TB")},{number:0x4000000000000,suffix:this._t(i+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,e,i){let s;(null==e||P.Kg(e)&&"number"===e.toLowerCase())&&(e=this.get("numberFormat",""));let n=Number(t);if(P.Gv(e))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),e).format(n):new Intl.NumberFormat(void 0,e).format(n)}catch(r){return"Invalid"}else{e=d.fZ(e);let t,r=this.parseFormat(e,this._root.language);t=n>this.get("negativeBase")?r.positive:n<this.get("negativeBase")?r.negative:r.zero,null==i||t.mod||(t=C.C(t),t.decimals.active=0==n?0:i),s=t.template.split(P.Kx).join(this.applyFormat(n,t))}return!0===this.get("forceLTR")&&(s="\u200e"+s),s}parseFormat(t,e){const i=e.translateEmpty("_thousandSeparator"),s=e.translateEmpty("_decimalSeparator");let n={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1}},r=(t=t.replace("||",P.cb)).split("|");return n.positive.source=r[0],"undefined"===typeof r[2]?n.zero=n.positive:n.zero.source=r[2],"undefined"===typeof r[1]?n.negative=n.positive:n.negative.source=r[1],C.__(n,((t,e)=>{if(e.parsed)return;let i=e.source;"number"===i.toLowerCase()&&(i=this.get("numberFormat","#,###.#####"));let s=S.g.chunk(i,!0);for(let n=0;n<s.length;n++){let t=s[n];if(t.text=t.text.replace(P.cb,"|"),"value"===t.type){let i=t.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP\u2030!]?/);if(i)if(null===i||""===i[0])e.template+=t.text;else{let s=i[0].match(/[abespABESP%\u2030!]{2}|[abespABESP%\u2030]{1}$/);s&&(e.mod=s[0].toLowerCase(),e.modSpacing=!!i[0].match(/[ ]{1}[abespABESP%\u2030!]{1}$/));let n=i[0].split(".");if(""===n[0]);else{e.thousands.active=(n[0].match(/0/g)||[]).length,e.thousands.passive=(n[0].match(/\#/g)||[]).length+e.thousands.active;let t=n[0].split(",");1===t.length||(e.thousands.interval=(t.pop()||"").length,0===e.thousands.interval&&(e.thousands.interval=-1))}"undefined"===typeof n[1]||(e.decimals.active=(n[1].match(/0/g)||[]).length,e.decimals.passive=(n[1].match(/\#/g)||[]).length+e.decimals.active),e.template+=t.text.split(i[0]).join(P.Kx)}}else e.template+=t.text}e.parsed=!0})),n}applyFormat(t,e){let i=t<0;t=Math.abs(t);let s="",n="",r=e.mod?e.mod.split(""):[];if(-1!==r.indexOf("b")){let i=this.applyPrefix(t,this.get("bytePrefixes"),-1!==r.indexOf("!"));t=i[0],s=i[1],n=i[2],e.modSpacing&&(n=" "+n)}else if(-1!==r.indexOf("a")){let i=this.applyPrefix(t,t<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==r.indexOf("!"));t=i[0],s=i[1],n=i[2],e.modSpacing&&(n=" "+n)}else if(-1!==r.indexOf("p")){let e=Math.min(t.toString().length+2,21);t=parseFloat(t.toPrecision(e)),s=this._root.language.translate("_percentPrefix"),n=this._root.language.translate("_percentSuffix"),""==s&&""==n&&(n="%")}else if(-1!==r.indexOf("%")){let e=Math.min(t.toString().length+2,21);t*=100,t=parseFloat(t.toPrecision(e)),n="%"}else if(-1!==r.indexOf("\u2030")){let e=Math.min(t.toString().length+3,21);t*=1e3,t=parseFloat(t.toPrecision(e)),n="\u2030"}if(-1!==r.indexOf("e")){let i;i=e.decimals.passive>=0?t.toExponential(e.decimals.passive).split("e"):t.toExponential().split("e"),t=Number(i[0]),n="e"+i[1],e.modSpacing&&(n=" "+n)}else if(0===e.decimals.passive)t=Math.round(t);else if(e.decimals.passive>0){const i=d.w1(t);if(i>0){const s=Math.pow(10,e.decimals.passive);t=Math.round(parseFloat((t*s).toFixed(i)))/s}}let a="",o=P.um(t).split("."),l=o[0];if(l.length<e.thousands.active&&(l=Array(e.thousands.active-l.length+1).join("0")+l),e.thousands.interval>0){let t=[],i=l.split("").reverse().join("");for(let s=0,n=l.length;s<=n;s+=e.thousands.interval){let n=i.substr(s,e.thousands.interval).split("").reverse().join("");""!==n&&t.unshift(n)}l=t.join(e.thousands.separator)}a+=l,1===o.length&&o.push("");let h=o[1];return h.length<e.decimals.active&&(h+=Array(e.decimals.active-h.length+1).join("0")),""!==h&&(a+=e.decimals.separator+h),""===a&&(a="0"),0!==t&&i&&-1===r.indexOf("s")&&(a="-"+a),s&&(a=s+a),n&&(a+=n),a}applyPrefix(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=t,n="",r="",a=!1,o=1;for(let l=0,h=e.length;l<h;l++)e[l].number<=t&&(0===e[l].number?s=0:(s=t/e[l].number,o=e[l].number),n=e[l].prefix,r=e[l].suffix,a=!0);return!a&&i&&e.length&&0!=t&&(s=t/e[0].number,n=e[0].prefix,r=e[0].suffix,a=!0),a&&(s=parseFloat(s.toPrecision(Math.min(o.toString().length+Math.floor(s).toString().replace(/[^0-9]*/g,"").length,21)))),[s,n,r]}escape(t){return t.replace("||",P.cb)}unescape(t){return t.replace(P.cb,"|")}}function M(t,e){let i=0,s=0,n=1,r=0,a=0,o=0,l=0,h=0;return t.formatToParts(e).forEach((t=>{switch(t.type){case"year":i=+t.value;break;case"month":s=+t.value-1;break;case"day":n=+t.value;break;case"hour":r=+t.value;break;case"minute":a=+t.value;break;case"second":o=+t.value;break;case"fractionalSecond":l=+t.value;break;case"weekday":switch(t.value){case"Sun":h=0;break;case"Mon":h=1;break;case"Tue":h=2;break;case"Wed":h=3;break;case"Thu":h=4;break;case"Fri":h=5;break;case"Sat":h=6}}})),24===r&&(r=0),{year:i,month:s,day:n,hour:r,minute:a,second:o,millisecond:l,weekday:h}}function D(t,e){const{year:i,month:s,day:n,hour:r,minute:a,second:o,millisecond:l}=M(t,e);return Date.UTC(i,s,n,r,a,o,l)}class R{constructor(t,e){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!e)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=t,this._utc=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(t){return new this(t,!0)}convertLocal(t){const e=this.offsetUTC(t),i=t.getTimezoneOffset(),s=new Date(t);s.setUTCMinutes(s.getUTCMinutes()-(e-i));const n=s.getTimezoneOffset();return i!=n&&s.setUTCMinutes(s.getUTCMinutes()+n-i),s}offsetUTC(t){return(D(this._utc,t)-D(this._dtf,t))/6e4}parseDate(t){return M(this._dtf,t)}}class L extends m.wC{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,e){let i,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"undefined"!==typeof e&&""!==e||(e=this.get("dateFormat","yyyy-MM-dd"));let n=t;if(P.Gv(e))try{const t=this.get("intlLocales");return t?new Intl.DateTimeFormat(t,e).format(n):new Intl.DateTimeFormat(void 0,e).format(n)}catch(o){return"Invalid"}let r=this.parseFormat(e);const a=this._root.timezone;return!a||this._root.utc||s||(n=a.convertLocal(n)),P.Et(n.getTime())?(i=this.applyFormat(n,r,s),this.get("capitalize")&&(i=i.replace(/^.{1}/,i.substr(0,1).toUpperCase())),i):"Invalid date"}applyFormat(t,e){let i,s,n,r,a,o,l,h,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=e.template,p=t.getTime();this._root.utc&&!c?(i=t.getUTCFullYear(),s=t.getUTCMonth(),n=t.getUTCDay(),r=t.getUTCDate(),a=t.getUTCHours(),o=t.getUTCMinutes(),l=t.getUTCSeconds(),h=t.getUTCMilliseconds()):(i=t.getFullYear(),s=t.getMonth(),n=t.getDay(),r=t.getDate(),a=t.getHours(),o=t.getMinutes(),l=t.getSeconds(),h=t.getMilliseconds());for(let f=0,g=e.parts.length;f<g;f++){let c="";switch(e.parts[f]){case"G":c=this._t(i<0?"_era_bc":"_era_ad");break;case"yyyy":c=Math.abs(i).toString(),i<0&&(c+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":c=Math.abs(i).toString().substr(-e.parts[f].length),i<0&&(c+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let u=d.Ao(t,this._root.utc);c="YYYY"==e.parts[f]?Math.abs(u).toString():Math.abs(u).toString().substr(-e.parts[f].length),u<0&&(c+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":c=""+Math.ceil((t.getMonth()+1)/3);break;case"MMMMM":c=this._t(this._getMonth(s)).substr(0,1);break;case"MMMM":c=this._t(this._getMonth(s));break;case"MMM":c=this._t(this._getShortMonth(s));break;case"MM":c=d.tr(s+1,2,"0");break;case"M":c=(s+1).toString();break;case"ww":c=d.tr(d.Nr(t,this._root.utc),2,"0");break;case"w":c=d.Nr(t,this._root.utc).toString();break;case"W":c=d.L_(t,this._root.utc).toString();break;case"dd":c=d.tr(r,2,"0");break;case"d":c=r.toString();break;case"DD":case"DDD":c=d.tr(d._Q(t,this._root.utc).toString(),e.parts[f].length,"0");break;case"D":c=d._Q(t,this._root.utc).toString();break;case"t":c=this._root.language.translateFunc("_dateOrd").call(this,r);break;case"E":c=(n||7).toString();break;case"EE":c=d.tr((n||7).toString(),2,"0");break;case"EEE":case"eee":c=this._t(this._getShortWeekday(n));break;case"EEEE":case"eeee":c=this._t(this._getWeekday(n));break;case"EEEEE":case"eeeee":c=this._t(this._getShortWeekday(n)).substr(0,1);break;case"e":case"ee":c=(n-(this._root.locale.firstDayOfWeek||1)+1).toString(),"ee"==e.parts[f]&&(c=d.tr(c,2,"0"));break;case"a":c=a>=12?this._t("PM"):this._t("AM");break;case"aa":c=a>=12?this._t("P.M."):this._t("A.M.");break;case"aaa":c=a>=12?this._t("P"):this._t("A");break;case"h":c=d.Jx(a).toString();break;case"hh":c=d.tr(d.Jx(a),2,"0");break;case"H":c=a.toString();break;case"HH":c=d.tr(a,2,"0");break;case"K":c=d.Jx(a,0).toString();break;case"KK":c=d.tr(d.Jx(a,0),2,"0");break;case"k":c=(a+1).toString();break;case"kk":c=d.tr(a+1,2,"0");break;case"m":c=o.toString();break;case"mm":c=d.tr(o,2,"0");break;case"s":c=l.toString();break;case"ss":c=d.tr(l,2,"0");break;case"S":case"SS":case"SSS":c=Math.round(h/1e3*Math.pow(10,e.parts[f].length)).toString();break;case"x":c=p.toString();break;case"n":case"nn":case"nnn":c=d.tr(h,e.parts[f].length,"0");break;case"z":c=d.O(t,!1,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zz":c=d.O(t,!0,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"zzz":c=d.O(t,!1,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zzzz":c=d.O(t,!0,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"Z":case"ZZ":let g=this._root.utc?"UTC":this._root.timezone;g instanceof R&&(g=g.name);const m=g?d.Zn(g):t.getTimezoneOffset();let v=Math.abs(m)/60,b=Math.floor(v),y=60*v-60*b;this._root.utc&&(b=0,y=0),"Z"==e.parts[f]?(c="GMT",c+=m>0?"-":"+",c+=d.tr(b,2)+":"+d.tr(y,2)):(c=m>0?"-":"+",c+=d.tr(b,2)+d.tr(y,2));break;case"i":c=t.toISOString();break;case"I":c=t.toUTCString()}u=u.replace(P.Kx,c)}return u}parseFormat(t){let e={template:"",parts:[]},i=S.g.chunk(t,!0);for(let s=0;s<i.length;s++){let t=i[s];if("value"===t.type){if(t.text.match(/^date$/i)){let e=this.get("dateFormat","yyyy-MM-dd");P.Kg(e)||(e="yyyy-MM-dd"),t.text=e}let i=t.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(i)for(let s=0;s<i.length;s++)e.parts.push(i[s]),t.text=t.text.replace(i[s],P.Kx)}e.template+=t.text}return e}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(t){return this._months()[t]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(t){return this._shortMonths()[t]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(t){return this._weekdays()[t]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(t){return this._shortWeekdays()[t]}parse(t,e){if(t instanceof Date)return t;if(P.Et(t))return new Date(t);if("x"==e)return new Date(parseInt(t));let i;P.Kg(t)||(t=t.toString());let s="";e=(e=d.fZ(e)).substr(0,t.length);let n=this.parseFormat(e),r={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},a={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},o=0,l=0;for(let d=0;d<n.parts.length;d++){switch(l=d+o+1,n.parts[d]){case"yyyy":case"YYYY":s+="([0-9]{4})",r.year=l;break;case"yyy":case"YYY":s+="([0-9]{3})",r.year3=l;break;case"yy":case"YY":s+="([0-9]{2})",r.year2=l;break;case"y":case"Y":s+="([0-9]{1})",r.year1=l;break;case"MMMM":s+="("+this.getStringList(this._months()).join("|")+")",r.monthLong=l;break;case"MMM":s+="("+this.getStringList(this._shortMonths()).join("|")+")",r.monthShort=l;break;case"MM":case"M":s+="([0-9]{2}|[0-9]{1})",r.month=l;break;case"ww":case"w":s+="([0-9]{2}|[0-9]{1})",r.week=l;break;case"dd":case"d":s+="([0-9]{2}|[0-9]{1})",r.day=l;break;case"DDD":case"DD":case"D":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",r.yearDay=l;break;case"dddd":s+="("+this.getStringList(this._weekdays()).join("|")+")",r.weekdayLong=l;break;case"ddd":s+="("+this.getStringList(this._shortWeekdays()).join("|")+")",r.weekdayShort=l;break;case"aaa":case"aa":case"a":s+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",r.am=l;break;case"hh":case"h":s+="([0-9]{2}|[0-9]{1})",r.hour12Base1=l;break;case"HH":case"H":s+="([0-9]{2}|[0-9]{1})",r.hourBase0=l;break;case"KK":case"K":s+="([0-9]{2}|[0-9]{1})",r.hour12Base0=l;break;case"kk":case"k":s+="([0-9]{2}|[0-9]{1})",r.hourBase1=l;break;case"mm":case"m":s+="([0-9]{2}|[0-9]{1})",r.minute=l;break;case"ss":case"s":s+="([0-9]{2}|[0-9]{1})",r.second=l;break;case"SSS":case"SS":case"S":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",r.millisecond=l,r.millisecondDigits=n.parts[d].length;break;case"nnn":case"nn":case"n":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",r.millisecond=l;break;case"x":s+="([0-9]{1,})",r.timestamp=l;break;case"Z":s+="GMT([-+]+[0-9]{2}:[0-9]{2})",r.zone=l;break;case"ZZ":s+="([\\-+]+[0-9]{2}[0-9]{2})",r.zone=l;break;case"i":s+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",r.iso=l,o+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":o--}s+="[^0-9]*"}let h=new RegExp(s),c=t.match(h);if(c){if(r.year>-1&&(a.year=parseInt(c[r.year])),r.year3>-1){let t=parseInt(c[r.year3]);t+=1e3,a.year=t}if(r.year2>-1){let t=parseInt(c[r.year2]);t+=t>50?1e3:2e3,a.year=t}if(r.year1>-1){let t=parseInt(c[r.year1]);t=10*Math.floor((new Date).getFullYear()/10)+t,a.year=t}if(r.monthLong>-1&&(a.month=this.resolveMonth(c[r.monthLong])),r.monthShort>-1&&(a.month=this.resolveShortMonth(c[r.monthShort])),r.month>-1&&(a.month=parseInt(c[r.month])-1),r.week>-1&&-1===r.day&&(a.month=0,a.day=d.X2(parseInt(c[r.week]),a.year,1,this._root.utc)),r.day>-1&&(a.day=parseInt(c[r.day])),r.yearDay>-1&&(a.month=0,a.day=parseInt(c[r.yearDay])),r.hourBase0>-1&&(a.hour=parseInt(c[r.hourBase0])),r.hourBase1>-1&&(a.hour=parseInt(c[r.hourBase1])-1),r.hour12Base0>-1){let t=parseInt(c[r.hour12Base0]);11==t&&(t=0),r.am>-1&&!this.isAm(c[r.am])&&(t+=12),a.hour=t}if(r.hour12Base1>-1){let t=parseInt(c[r.hour12Base1]);12==t&&(t=0),r.am>-1&&!this.isAm(c[r.am])&&(t+=12),a.hour=t}if(r.minute>-1&&(a.minute=parseInt(c[r.minute])),r.second>-1&&(a.second=parseInt(c[r.second])),r.millisecond>-1){let t=parseInt(c[r.millisecond]);2==r.millisecondDigits?t*=10:1==r.millisecondDigits&&(t*=100),a.millisecond=t}if(r.timestamp>-1){a.timestamp=parseInt(c[r.timestamp]);const t=new Date(a.timestamp);a.year=t.getUTCFullYear(),a.month=t.getUTCMonth(),a.day=t.getUTCDate(),a.hour=t.getUTCHours(),a.minute=t.getUTCMinutes(),a.second=t.getUTCSeconds(),a.millisecond=t.getUTCMilliseconds()}r.zone>-1&&(a.offset=this.resolveTimezoneOffset(new Date(a.year,a.month,a.day),c[r.zone])),r.iso>-1&&(a.year=P.Ro(c[r.iso+0]),a.month=P.Ro(c[r.iso+1])-1,a.day=P.Ro(c[r.iso+2]),a.hour=P.Ro(c[r.iso+3]),a.minute=P.Ro(c[r.iso+4]),a.second=P.Ro(c[r.iso+5]),a.millisecond=P.Ro(c[r.iso+6]),"Z"==c[r.iso+7]||"z"==c[r.iso+7]?a.utc=!0:""!=c[r.iso+7]&&(a.offset=this.resolveTimezoneOffset(new Date(a.year,a.month,a.day),c[r.iso+7]))),i=a.utc?new Date(Date.UTC(a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond)):new Date(a.year,a.month,a.day,a.hour,a.minute+a.offset,a.second,a.millisecond)}else i=new Date(t);return i}resolveTimezoneOffset(t,e){if(e.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let i=e.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),s=i[1],n=i[2],r=i[3],a=60*parseInt(n)+parseInt(r);return"+"==s&&(a*=-1),a-(t||new Date).getTimezoneOffset()}return 0}resolveMonth(t){let e=this._months().indexOf(t);return e>-1||!this._root.language.isDefault()&&(e=this._root.language.translateAll(this._months()).indexOf(t),e>-1)?e:0}resolveShortMonth(t){let e=this._shortMonths().indexOf(t);return e>-1?e:(e=this._months().indexOf(t),e>-1||this._root.language&&!this._root.language.isDefault()&&(e=this._root.language.translateAll(this._shortMonths()).indexOf(t),e>-1)?e:0)}isAm(t){return this.getStringList(["AM","A.M.","A"]).indexOf(t.toUpperCase())>-1}getStringList(t){let e=[];for(let i=0;i<t.length;i++)this._root.language?e.push(d.xp(this._t(t[i]))):e.push(d.xp(t[i]));return e}}class O extends m.wC{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const t="_duration_millisecond",e="_duration_second",i="_duration_minute",s="_duration_hour",n="_duration_day",r="_duration_week",a="_duration_month",o="_minute",l="_hour",h="_day",c="_week",d="_week",u="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(t),second:this._t(t+"_second"),minute:this._t(t+o),hour:this._t(t+l),day:this._t(t+h),week:this._t(t+c),month:this._t(t+d),year:this._t(t+u)},second:{second:this._t(e),minute:this._t(e+o),hour:this._t(e+l),day:this._t(e+h),week:this._t(e+c),month:this._t(e+d),year:this._t(e+u)},minute:{minute:this._t(i),hour:this._t(i+l),day:this._t(i+h),week:this._t(i+c),month:this._t(i+d),year:this._t(i+u)},hour:{hour:this._t(s),day:this._t(s+h),week:this._t(s+c),month:this._t(s+d),year:this._t(s+u)},day:{day:this._t(n),week:this._t(n+c),month:this._t(n+d),year:this._t(n+u)},week:{week:this._t(r),month:this._t(r+d),year:this._t(r+u)},month:{month:this._t(a),year:this._t(a+u)},year:{year:this._t("_duration_year")}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(t,e,i){let s=i||this.get("baseUnit");"undefined"!==typeof e&&""!==e||(e=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat(P.Ro(t),void 0,s)),e=d.fZ(e);let n,r=this.parseFormat(e,s),a=Number(t);n=a>this.get("negativeBase")?r.positive:a<this.get("negativeBase")?r.negative:r.zero;let o=this.applyFormat(a,n);return""!==n.color&&(o="["+n.color+"]"+o+"[/]"),o}parseFormat(t,e){let i=e||this.get("baseUnit"),s={positive:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1}},n=(t=t.replace("||",P.cb)).split("|");return s.positive.source=n[0],"undefined"===typeof n[2]?s.zero=s.positive:s.zero.source=n[2],"undefined"===typeof n[1]?s.negative=s.positive:s.negative.source=n[1],C.__(s,((t,e)=>{if(e.parsed)return;let i=e.source,s=[];s=e.source.match(/^\[([^\]]*)\]/),s&&s.length&&""!==s[0]&&(i=e.source.substr(s[0].length),e.color=s[1]);let n=S.g.chunk(i,!0);for(let r=0;r<n.length;r++){let t=n[r];if(t.text=t.text.replace(P.cb,"|"),"value"===t.type){t.text.match(/[yYMdDwhHKkmsSn]+a/)&&(e.absolute=!0,t.text=t.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let i=t.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(i)for(let s=0;s<i.length;s++)null==i[s]&&(i[s]=this._unitAliases[i[s]]),e.parts.push(i[s]),t.text=t.text.replace(i[s],P.Kx)}e.template+=t.text}e.parsed=!0})),s}applyFormat(t,e){let i=!e.absolute&&t<this.get("negativeBase");t=Math.abs(t);let s=this.toTimeStamp(t,e.baseUnit),n=e.template;for(let r=0,a=e.parts.length;r<a;r++){let t,i=e.parts[r],o=this._toTimeUnit(i.substr(0,1)),l=i.length;const h=this._getUnitValue(o);t=r<a-1?Math.floor(s/h):Math.round(s/h),n=n.replace(P.Kx,d.tr(t,l,"0")),s-=t*h}return i&&(n="-"+n),n}toTimeStamp(t,e){return t*this._getUnitValue(e)}_toTimeUnit(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(t,e,i){if(null!=this.get("durationFormat"))return this.get("durationFormat");if(i||(i=this.get("baseUnit")),null!=e&&t!=e){t=Math.abs(t),e=Math.abs(e);let s=this.getValueUnit(Math.max(t,e),i);return this.get("durationFormats")[i][s]}{let e=this.getValueUnit(t,i);return this.get("durationFormats")[i][e]}}getValueUnit(t,e){let i;e||(e=this.get("baseUnit"));let s=this.getMilliseconds(t,e);return C.FY(this._getUnitValues(),((t,n)=>{if(t==e||i){if(s/n<=1)return i||(i=t),!1;i=t}return!0})),i}getMilliseconds(t,e){return e||(e=this.get("baseUnit")),t*this._getUnitValue(e)}_getUnitValue(t){return this._getUnitValues()[t]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const I={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(t){let e="th";if(t<11||t>13)switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class F extends m.wC{_setDefaults(){this.setPrivate("defaultLocale",I),super._setDefaults()}translate(t,e){e||(e=this._root.locale||this.getPrivate("defaultLocale"));let i=t,s=e[t];for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(null===s)i="";else if(null!=s)s&&(i=s);else if(e!==this.getPrivate("defaultLocale"))return this.translate(t,this.getPrivate("defaultLocale"),...r);if(r.length)for(let o=r.length,l=0;l<o;++l)i=i.split("%"+(l+1)).join(r[l]);return i}translateAny(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return this.translate(t,e,...s)}setTranslationAny(t,e,i){(i||this._root.locale)[t]=e}setTranslationsAny(t,e){C.__(t,((t,i)=>{this.setTranslationAny(t,i,e)}))}translateEmpty(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];let r=this.translate(t,e,...s);return r==t?"":r}translateFunc(t,e){return this._root.locale[t]?this._root.locale[t]:e!==this.getPrivate("defaultLocale")?this.translateFunc(t,this.getPrivate("defaultLocale")):()=>""}translateAll(t,e){return this.isDefault()?t:c.Tj(t,(t=>this.translate(t,e)))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}var N=i(13620),j=i(21539),B=i(98639);class H{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=r}setTransform(t,e,i,s,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;this.a=Math.cos(n)*r,this.b=Math.sin(n)*r,this.c=-Math.sin(n)*r,this.d=Math.cos(n)*r,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d)}apply(t){return{x:this.a*t.x+this.c*t.y+this.tx,y:this.b*t.x+this.d*t.y+this.ty}}applyInverse(t){const e=1/(this.a*this.d+this.c*-this.b);return{x:this.d*e*t.x+-this.c*e*t.y+(this.ty*this.c-this.tx*this.d)*e,y:this.a*e*t.y+-this.b*e*t.x+(-this.ty*this.a+this.tx*this.b)*e}}append(t){const e=this.a,i=this.b,s=this.c,n=this.d;this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,i=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty}copyFrom(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty}}var W=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],s=!0,n=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(s=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(l){n=!0,r=l}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},z=2*Math.PI,V=function(t,e,i,s,n,r,a){var o=t.x,l=t.y;return{x:s*(o*=e)-n*(l*=i)+r,y:n*o+s*l+a}},$=function(t,e){var i=1.5707963267948966===e?.551915024494:-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),s=Math.cos(t),n=Math.sin(t),r=Math.cos(t+e),a=Math.sin(t+e);return[{x:s-n*i,y:n+s*i},{x:r+a*i,y:a-r*i},{x:r,y:a}]},U=function(t,e,i,s){var n=t*i+e*s;return n>1&&(n=1),n<-1&&(n=-1),(t*s-e*i<0?-1:1)*Math.acos(n)};const G=function(t){var e=t.px,i=t.py,s=t.cx,n=t.cy,r=t.rx,a=t.ry,o=t.xAxisRotation,l=void 0===o?0:o,h=t.largeArcFlag,c=void 0===h?0:h,d=t.sweepFlag,u=void 0===d?0:d,p=[];if(0===r||0===a)return[];var f=Math.sin(l*z/360),g=Math.cos(l*z/360),m=g*(e-s)/2+f*(i-n)/2,v=-f*(e-s)/2+g*(i-n)/2;if(0===m&&0===v)return[];r=Math.abs(r),a=Math.abs(a);var b=Math.pow(m,2)/Math.pow(r,2)+Math.pow(v,2)/Math.pow(a,2);b>1&&(r*=Math.sqrt(b),a*=Math.sqrt(b));var y=function(t,e,i,s,n,r,a,o,l,h,c,d){var u=Math.pow(n,2),p=Math.pow(r,2),f=Math.pow(c,2),g=Math.pow(d,2),m=u*p-u*g-p*f;m<0&&(m=0),m/=u*g+p*f;var v=(m=Math.sqrt(m)*(a===o?-1:1))*n/r*d,b=m*-r/n*c,y=h*v-l*b+(t+i)/2,_=l*v+h*b+(e+s)/2,w=(c-v)/n,x=(d-b)/r,A=(-c-v)/n,E=(-d-b)/r,k=U(1,0,w,x),S=U(w,x,A,E);return 0===o&&S>0&&(S-=z),1===o&&S<0&&(S+=z),[y,_,k,S]}(e,i,s,n,r,a,c,u,f,g,m,v),_=W(y,4),w=_[0],x=_[1],A=_[2],E=_[3],k=Math.abs(E)/(z/4);Math.abs(1-k)<1e-7&&(k=1);var S=Math.max(Math.ceil(k),1);E/=S;for(var C=0;C<S;C++)p.push($(A,E)),A+=E;return p.map((function(t){var e=V(t[0],r,a,g,f,w,x),i=e.x,s=e.y,n=V(t[1],r,a,g,f,w,x),o=n.x,l=n.y,h=V(t[2],r,a,g,f,w,x);return{x1:i,y1:s,x2:o,y2:l,x:h.x,y:h.y}}))};function q(t,e,i){if(e!==i)throw new Error("Required "+i+" arguments for "+t+" but got "+e)}function Y(t,e,i){if(e<i)throw new Error("Required at least "+i+" arguments for "+t+" but got "+e)}function X(t,e,i){if(Y(t,e,i),e%i!==0)throw new Error("Arguments for "+t+" must be in pairs of "+i)}function K(t){for(let e=0;e<t.length;e+=7){let i=e+3,s=t[i];if(s.length>1){const e=/^([01])([01])(.*)$/.exec(s);null!==e&&(t.splice(i,0,e[1]),++i,t.splice(i,0,e[2]),++i,e[3].length>0?t[i]=e[3]:t.splice(i,1))}if(++i,s=t[i],s.length>1){const e=/^([01])(.+)$/.exec(s);null!==e&&(t.splice(i,0,e[1]),++i,t[i]=e[2])}}}function Q(t){if(0===t||1===t)return t;throw new Error("Flag must be 0 or 1")}function J(t,e){for(;(!t.interactive||e(t))&&t._parent;)t=t._parent}function Z(t,e,i){return d.q2(t,d.wN(e),(t=>{const e=d.wt(t);let s=t.touches;s?(0==s.length&&(s=t.changedTouches),i(c.C(s),e)):i([t],e)}))}function tt(t){const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d",{willReadFrequently:!0});i.drawImage(t,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch(s){return console.warn('Image "'+t.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function et(t){t.width=0,t.height=0,t.style.width="0px",t.style.height="0px"}function it(t){return Math.floor(t)+.5}class st{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(t){this._x=t}set y(t){this._y=t}}class nt extends h.O_{constructor(t){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new st}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new H}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new H}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new H}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=t}subStatus(t){return{inactive:null==this.inactive?t.inactive:this.inactive,layer:this._layer||t.layer}}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let t=this;for(;;){if(t._layer)return t._layer;if(!t._parent)return this._renderer.defaultLayer;t=t._parent}}setLayer(t,e){if(null==t)this._layer=void 0;else{const i=!0;this._layer=this._renderer.getLayer(t,i),this._layer.visible=i,this._layer.margin=e,e&&d.Dt(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost()}}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(t){}_getColorId(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(t){return!t.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(t){return this._isInteractive(t)}contains(t){for(;;){if(t===this)return!0;if(!t._parent)return!1;t=t._parent}}toGlobal(t){return this._matrix.apply(t)}toLocal(t){return this._matrix.applyInverse(t)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){if(!this._localBounds){const t=1e7;this._localBounds={left:t,top:t,right:-t,bottom:-t},this._addBounds(this._localBounds)}return this._localBounds}getAdjustedBounds(t){this._setMatrix();const e=this.getLocalMatrix(),i=e.apply({x:t.left,y:t.top}),s=e.apply({x:t.right,y:t.top}),n=e.apply({x:t.right,y:t.bottom}),r=e.apply({x:t.left,y:t.bottom});return{left:Math.min(i.x,s.x,n.x,r.x),top:Math.min(i.y,s.y,n.y,r.y),right:Math.max(i.x,s.x,n.x,r.x),bottom:Math.max(i.y,s.y,n.y,r.y)}}on(t,e,i){return this.interactive?this._renderer._addEvent(this,t,e,i):new h.W_((()=>{}))}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(t,e){const i=this._matrix;let s=i.tx*e,n=i.ty*e;this.crisp&&(s=it(s),n=it(n)),t.setTransform(i.a*e,i.b*e,i.c*e,i.d*e,s,n)}_transformMargin(t,e,i){const s=this._matrix;t.setTransform(s.a*e,s.b*e,s.c*e,s.d*e,(s.tx+i.left)*e,(s.ty+i.top)*e)}_transformLayer(t,e,i){i.margin?this._transformMargin(t,i.scale||e,i.margin):this._transform(t,i.scale||e)}render(t){if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();const e=this.subStatus(t),i=this._renderer.resolution,s=this._renderer.layers,n=this._renderer._ghostLayer,r=n.context,a=this.mask;a&&a._setMatrix(),c.__(s,(t=>{if(t){const e=t.context;e.save(),a&&(a._transformLayer(e,i,t),a._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(e,i,t),this.filter&&(e.filter=this.filter)}})),r.save(),a&&this._isInteractiveMask(e)&&(a._transformMargin(r,i,n.margin),a._runPath(r),r.clip()),this._transformMargin(r,i,n.margin),this._render(e),r.restore(),c.__(s,(t=>{t&&t.context.restore()}))}}_render(t){!1===this.exportable&&(t.layer.tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some((t=>t.value===this))}shouldCancelTouch(){const t=this._renderer;return!(t.tapToActivate&&!t._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class rt extends nt{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(t){return this.interactiveChildren||super._isInteractiveMask(t)}addChild(t){t._parent=this,this._children.push(t),t._layer&&this.registerChildLayer(t._layer)}addChildAt(t,e){t._parent=this,this._children.splice(e,0,t),t._layer&&this.registerChildLayer(t._layer)}removeChild(t){t._parent=void 0,c.dm(this._children,t)}_render(t){super._render(t);const e=this._renderer;this.interactive&&this.interactiveChildren&&++e._forceInteractive,c.__(this._children,(e=>{e.compoundAlpha=this.compoundAlpha*this.alpha,e.render(t)})),this.interactive&&this.interactiveChildren&&--e._forceInteractive}registerChildLayer(t){this._childLayers||(this._childLayers=[]),c.JJ(this._childLayers,t),this._parent&&this._parent.registerChildLayer(t)}markDirtyLayer(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.markDirtyLayer(),t&&this._childLayers&&c.__(this._childLayers,(t=>t.dirty=!0))}_dispose(){super._dispose(),this._childLayers&&c.__(this._childLayers,(t=>{t.dirty=!0}))}}function at(t,e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.right=Math.max(t.right,e.x),t.bottom=Math.max(t.bottom,e.y)}class ot{colorize(t,e){}colorizeGhost(t,e){this.colorize(t,e)}path(t){}pathGhost(t){this.path(t)}addBounds(t){}}class lt extends ot{colorize(t,e){t.beginPath()}}class ht extends ot{constructor(t){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t})}colorize(t,e){t.fillStyle=void 0!==e?e:this.color}}class ct extends ot{constructor(t){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:t})}colorize(t,e){t.fill(),this.clearShadow&&(t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}}class dt extends ot{colorize(t,e){t.stroke()}}class ut extends ot{constructor(t,e,i){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:i})}colorize(t,e){t.strokeStyle=void 0!==e?e:this.color,t.lineWidth=this.width,this.lineJoin&&(t.lineJoin=this.lineJoin)}}class pt extends ot{constructor(t){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:t})}colorize(t,e){t.setLineDash(this.dash)}}class ft extends ot{constructor(t){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:t})}colorize(t,e){t.lineDashOffset=this.dashOffset}}class gt extends ot{constructor(t,e,i,s){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(t){t.rect(this.x,this.y,this.width,this.height)}addBounds(t){const e=this.x,i=this.y,s=e+this.width,n=i+this.height;at(t,{x:e,y:i}),at(t,{x:s,y:i}),at(t,{x:e,y:n}),at(t,{x:s,y:n})}}class mt extends ot{constructor(t,e,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(t){t.moveTo(this.x+this.radius,this.y),t.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(t){at(t,{x:this.x-this.radius,y:this.y-this.radius}),at(t,{x:this.x+this.radius,y:this.y+this.radius})}}class vt extends ot{constructor(t,e,i,s){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(t){t.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(t){at(t,{x:this.x-this.radiusX,y:this.y-this.radiusY}),at(t,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class bt extends ot{constructor(t,e,i,s,n,r){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(t){this.radius>0&&t.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(t){let e=w.Ki(this.cx,this.cy,this.startAngle*w.iR,this.endAngle*w.iR,this.radius);at(t,{x:e.left,y:e.top}),at(t,{x:e.right,y:e.bottom})}}class yt extends ot{constructor(t,e,i,s,n){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(t){this.radius>0&&t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(t){}}class _t extends ot{constructor(t,e){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:e})}path(t){t.lineTo(this.x,this.y)}addBounds(t){at(t,{x:this.x,y:this.y})}}class wt extends ot{constructor(t,e){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:e})}path(t){t.moveTo(this.x,this.y)}addBounds(t){at(t,{x:this.x,y:this.y})}}class xt extends ot{path(t){t.closePath()}}class At extends ot{constructor(t,e,i,s,n,r){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(t){t.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(t){at(t,{x:this.cpX,y:this.cpY}),at(t,{x:this.cpX2,y:this.cpY2}),at(t,{x:this.toX,y:this.toY})}}class Et extends ot{constructor(t,e,i,s){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(t){t.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(t){at(t,{x:this.cpX,y:this.cpY}),at(t,{x:this.toX,y:this.toY})}}class kt extends ot{constructor(t,e,i,s,n){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:n})}colorize(t,e){this.opacity&&(t.fillStyle=this.color),t.shadowColor=this.color,t.shadowBlur=this.blur,t.shadowOffsetX=this.offsetX,t.shadowOffsetY=this.offsetY}colorizeGhost(t,e){}}class St extends ot{constructor(t,e,i,s,n){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:n})}path(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(t){at(t,{x:this.x,y:this.y}),at(t,{x:this.width,y:this.height})}}class Ct extends nt{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:B.N.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(t){this._operations.push(t)}beginFill(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fillAlpha=e,t?t instanceof E.Q1?this._pushOp(new ht(t.toCSS(e))):(this.isMeasured=!0,this._pushOp(new ht(t))):this._pushOp(new ht("rgba(0, 0, 0, "+e+")"))}endFill(){this._pushOp(new ct(this._hasShadows))}endStroke(){this._pushOp(new dt)}beginPath(){this._pushOp(new lt)}lineStyle(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0;this._strokeAlpha=i,e?e instanceof E.Q1?this._pushOp(new ut(t,e.toCSS(i),s)):this._pushOp(new ut(t,e,s)):this._pushOp(new ut(t,"rgba(0, 0, 0, "+i+")",s))}setLineDash(t){this._pushOp(new pt(t||[]))}setLineDashOffset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._pushOp(new ft(t))}drawRect(t,e,i,s){this._pushOp(new gt(t,e,i,s))}drawCircle(t,e,i){this._pushOp(new mt(t,e,i))}drawEllipse(t,e,i,s){this._pushOp(new vt(t,e,i,s))}arc(t,e,i,s,n){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this._pushOp(new bt(t,e,i,s,n,r))}arcTo(t,e,i,s,n){this._pushOp(new yt(t,e,i,s,n))}lineTo(t,e){this._pushOp(new _t(t,e))}moveTo(t,e){this._pushOp(new wt(t,e))}bezierCurveTo(t,e,i,s,n,r){this._pushOp(new At(t,e,i,s,n,r))}quadraticCurveTo(t,e,i,s){this._pushOp(new Et(t,e,i,s))}closePath(){this._pushOp(new xt)}shadow(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0;this._hasShadows=!0,this._pushOp(new kt(n?t.toCSS(n):t.toCSS(this._fillAlpha||this._strokeAlpha),e,i,s))}image(t,e,i,s,n){this._pushOp(new St(t,e,i,s,n))}svgPath(t){let e=0,i=0,s=null,n=null,r=null,a=null;const o=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,l=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let h;for(;null!==(h=o.exec(t));){const t=h[1],o=h[2],d=[];for(;null!==(h=l.exec(o));)d.push(h[1]);switch("S"!==t&&"s"!==t&&"C"!==t&&"c"!==t&&(s=null,n=null),"Q"!==t&&"q"!==t&&"T"!==t&&"t"!==t&&(r=null,a=null),t){case"M":X(t,d.length,2),e=+d[0],i=+d[1],this.moveTo(e,i);for(let t=2;t<d.length;t+=2)e=+d[t],i=+d[t+1],this.lineTo(e,i);break;case"m":X(t,d.length,2),e+=+d[0],i+=+d[1],this.moveTo(e,i);for(let t=2;t<d.length;t+=2)e+=+d[t],i+=+d[t+1],this.lineTo(e,i);break;case"L":X(t,d.length,2);for(let t=0;t<d.length;t+=2)e=+d[t],i=+d[t+1],this.lineTo(e,i);break;case"l":X(t,d.length,2);for(let t=0;t<d.length;t+=2)e+=+d[t],i+=+d[t+1],this.lineTo(e,i);break;case"H":Y(t,d.length,1);for(let t=0;t<d.length;++t)e=+d[t],this.lineTo(e,i);break;case"h":Y(t,d.length,1);for(let t=0;t<d.length;++t)e+=+d[t],this.lineTo(e,i);break;case"V":Y(t,d.length,1);for(let t=0;t<d.length;++t)i=+d[t],this.lineTo(e,i);break;case"v":Y(t,d.length,1);for(let t=0;t<d.length;++t)i+=+d[t],this.lineTo(e,i);break;case"C":X(t,d.length,6);for(let t=0;t<d.length;t+=6){const r=+d[t],a=+d[t+1];s=+d[t+2],n=+d[t+3],e=+d[t+4],i=+d[t+5],this.bezierCurveTo(r,a,s,n,e,i)}break;case"c":X(t,d.length,6);for(let t=0;t<d.length;t+=6){const r=+d[t]+e,a=+d[t+1]+i;s=+d[t+2]+e,n=+d[t+3]+i,e+=+d[t+4],i+=+d[t+5],this.bezierCurveTo(r,a,s,n,e,i)}break;case"S":X(t,d.length,4),null!==s&&null!==n||(s=e,n=i);for(let t=0;t<d.length;t+=4){const r=2*e-s,a=2*i-n;s=+d[t],n=+d[t+1],e=+d[t+2],i=+d[t+3],this.bezierCurveTo(r,a,s,n,e,i)}break;case"s":X(t,d.length,4),null!==s&&null!==n||(s=e,n=i);for(let t=0;t<d.length;t+=4){const r=2*e-s,a=2*i-n;s=+d[t]+e,n=+d[t+1]+i,e+=+d[t+2],i+=+d[t+3],this.bezierCurveTo(r,a,s,n,e,i)}break;case"Q":X(t,d.length,4);for(let t=0;t<d.length;t+=4)r=+d[t],a=+d[t+1],e=+d[t+2],i=+d[t+3],this.quadraticCurveTo(r,a,e,i);break;case"q":X(t,d.length,4);for(let t=0;t<d.length;t+=4)r=+d[t]+e,a=+d[t+1]+i,e+=+d[t+2],i+=+d[t+3],this.quadraticCurveTo(r,a,e,i);break;case"T":X(t,d.length,2),null!==r&&null!==a||(r=e,a=i);for(let t=0;t<d.length;t+=2)r=2*e-r,a=2*i-a,e=+d[t],i=+d[t+1],this.quadraticCurveTo(r,a,e,i);break;case"t":X(t,d.length,2),null!==r&&null!==a||(r=e,a=i);for(let t=0;t<d.length;t+=2)r=2*e-r,a=2*i-a,e+=+d[t],i+=+d[t+1],this.quadraticCurveTo(r,a,e,i);break;case"A":case"a":const o="a"===t;K(d),X(t,d.length,7);for(let t=0;t<d.length;t+=7){let s=+d[t+5],n=+d[t+6];o&&(s+=e,n+=i);const r=G({px:e,py:i,rx:+d[t],ry:+d[t+1],xAxisRotation:+d[t+2],largeArcFlag:Q(+d[t+3]),sweepFlag:Q(+d[t+4]),cx:s,cy:n});c.__(r,(t=>{this.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y),e=t.x,i=t.y}))}break;case"Z":case"z":q(t,d.length,0),this.closePath()}}}_runPath(t){t.beginPath(),c.__(this._operations,(e=>{e.path(t)}))}_render(t){super._render(t);const e=t.layer.dirty,i=this._isInteractive(t);if(e||i){const s=t.layer.context,n=this._renderer._ghostLayer.context;let r;e&&(s.globalCompositeOperation=this.blendMode,s.beginPath()),i&&(n.beginPath(),r=this._getColorId()),c.__(this._operations,(t=>{e&&(t.path(s),t.colorize(s,void 0)),i&&(t.pathGhost(n),t.colorizeGhost(n,r))}))}}renderDetached(t){if(this.visible){this._setMatrix(),t.save();const e=this.mask;e&&(e._setMatrix(),e._transform(t,1),e._runPath(t),t.clip()),t.globalAlpha=this.compoundAlpha*this.alpha,this._transform(t,1),this.filter&&(t.filter=this.filter),t.globalCompositeOperation=this.blendMode,t.beginPath(),c.__(this._operations,(e=>{e.path(t),e.colorize(t,void 0)})),t.restore()}}_addBounds(t){this.visible&&this.isMeasured&&c.__(this._operations,(e=>{e.addBounds(t)}))}}class Pt extends nt{constructor(t,e,i){super(t),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=e,this.style=i}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(t){this.style.textAlign&&(t.textAlign=this.style.textAlign),this.style.direction&&(t.direction=this.style.direction),this.style.textBaseline&&(t.textBaseline=this.style.textBaseline)}_prerender(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super._render(t);const s=t.layer.context,n=this._renderer._ghostLayer.context,r=this.style;let a=this._getFontStyle(void 0,i);s.font=a,this._isInteractive(t)&&!e&&(n.font=a),r.fill&&(r.fill instanceof E.Q1?s.fillStyle=r.fill.toCSS(void 0!=r.fillOpacity?r.fillOpacity:1):s.fillStyle=r.fill),r.shadowColor&&(t.layer.context.shadowColor=r.shadowColor.toCSS(r.shadowOpacity||1)),r.shadowBlur&&(t.layer.context.shadowBlur=r.shadowBlur),r.shadowOffsetX&&(t.layer.context.shadowOffsetX=r.shadowOffsetX),r.shadowOffsetY&&(t.layer.context.shadowOffsetY=r.shadowOffsetY),this._shared(s),this._isInteractive(t)&&!e&&(n.fillStyle=this._getColorId(),this._shared(n))}_getFontStyle(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.style;let s=[];return t&&t.fontVariant?s.push(t.fontVariant):i.fontVariant&&s.push(i.fontVariant),e||(t&&t.fontWeight?s.push(t.fontWeight):i.fontWeight&&s.push(i.fontWeight)),t&&t.fontStyle?s.push(t.fontStyle):i.fontStyle&&s.push(i.fontStyle),t&&t.fontSize?(P.Et(t.fontSize)&&(t.fontSize=t.fontSize+"px"),s.push(t.fontSize)):i.fontSize&&(P.Et(i.fontSize)&&(i.fontSize=i.fontSize+"px"),s.push(i.fontSize)),t&&t.fontFamily?s.push(t.fontFamily):i.fontFamily?s.push(i.fontFamily):s.length&&s.push("Arial"),s.join(" ")}_render(t){if(this._textInfo||this._measure(t),this.textVisible){const e=this._isInteractive(t),i=t.layer.context,s=t.layer.dirty,n=this._renderer._ghostLayer.context;i.save(),n.save(),this._prerender(t),c.__(this._textInfo,((r,a)=>{c.__(r.textChunks,((a,o)=>{if(a.style&&(i.save(),n.save(),i.font=a.style,this._isInteractive(t)&&(n.font=a.style)),a.fill&&(i.save(),i.fillStyle=a.fill.toCSS()),s&&i.fillText(a.text,a.offsetX,r.offsetY+a.offsetY),"underline"==a.textDecoration||"line-through"==a.textDecoration){let t=1,e=1,s=a.height;const n=this.style.oversizedBehavior||"";if(["truncate","wrap","wrap-no-break"].indexOf(n)>-1){const t=this._measureText(a.text,i);a.width=t.actualBoundingBoxLeft+t.actualBoundingBoxRight}let o,l=a.offsetX;switch(this.style.textAlign){case"right":case"end":l-=a.width;break;case"center":l-=a.width/2}if(a.style){switch(S.g.getTextStyle(a.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":t=2}}s&&(e=s/20),o="line-through"==a.textDecoration?t+r.offsetY+a.offsetY-a.height/2:t+1.5*e+r.offsetY+a.offsetY,i.save(),i.beginPath(),a.fill?i.strokeStyle=a.fill.toCSS():this.style.fill&&this.style.fill instanceof E.Q1&&(i.strokeStyle=this.style.fill.toCSS()),i.lineWidth=t*e,i.moveTo(l,o),i.lineTo(l+a.width,o),i.stroke(),i.restore()}e&&this.interactive&&n.fillText(a.text,a.offsetX,r.offsetY+a.offsetY),a.fill&&i.restore(),a.style&&(i.restore(),n.restore())}))})),i.restore(),n.restore()}}_addBounds(t){if(this.visible&&this.isMeasured){const e=this._measure({inactive:this.inactive,layer:this.getLayer()});at(t,{x:e.left,y:e.top}),at(t,{x:e.right,y:e.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(t){const e=t.layer.context,i=this._renderer._ghostLayer.context,s="rtl"==this.style.direction;this._textInfo=[];const n=this.style.oversizedBehavior,r=this.style.maxWidth,a=P.Et(r)&&"truncate"==n,o=P.Et(r)&&("wrap"==n||"wrap-no-break"==n);e.save(),i.save(),this._prerender(t,!0,this._ignoreFontWeight());const l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",h=this.text.toString().replace(/\r/g,"").split(/\n/);let u,p=!0,f=0,g=0,m=0;c.__(h,((t,s)=>{let n;for(n=""==t?[{type:"value",text:""}]:S.g.chunk(t,!1,this.style.ignoreFormatting);n.length>0;){let t={offsetY:m,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const s=this._measureText(l,e),h=s.actualBoundingBoxAscent+s.actualBoundingBoxDescent;let v;t.height=h,t.ascent=s.actualBoundingBoxAscent;let b,y,_,w=this.style.textDecoration,x=!1,E=!0,k=[];c.FY(n,((s,h)=>{if("format"==s.type)if("[/]"==s.text)p||(e.restore(),i.restore(),p=!0),b=void 0,u=void 0,y=void 0,w=this.style.textDecoration,_=void 0,v=s.text;else{p||(e.restore(),i.restore());let n=S.g.getTextStyle(s.text);const r=this._getFontStyle(n);e.save(),i.save(),e.font=r,u=r,v=s.text,n.textDecoration&&(w=n.textDecoration),n.fill&&(b=n.fill),n.width&&(y=P.Ro(n.width)),n.verticalAlign&&(_=n.verticalAlign),p=!1;const a=this._measureText(l,e),o=a.actualBoundingBoxAscent+a.actualBoundingBoxDescent;o>t.height&&(t.height=o),a.actualBoundingBoxAscent>t.ascent&&(t.ascent=a.actualBoundingBoxAscent)}else if("value"==s.type&&!x){const i=this._measureText(s.text,e);let l=i.actualBoundingBoxLeft+i.actualBoundingBoxRight;if(a){let i=E||this.style.breakWords||!1;const n=this.style.ellipsis||"",a=this._measureText(n,e),o=a.actualBoundingBoxLeft+a.actualBoundingBoxRight;if(t.width+l>r){const a=r-t.width-o;s.text=this._truncateText(e,s.text,a,i),s.text+=n,x=!0}}else if(o&&t.width+l>r){const i=r-t.width,a=this._truncateText(e,s.text,i,!1,E&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==a)return this.textVisible=!0,!1;k=n.slice(h+1),d.Bq(a)!=d.Bq(s.text)&&(k.unshift({type:"value",text:s.text.substr(a.length)}),v&&k.unshift({type:"format",text:v})),s.text=d.Bq(a),n=[],x=!0}let c=1,p=1;if(u&&y&&y>l){const t=l/y;switch(this.style.textAlign){case"right":case"end":c=t;break;case"center":c=t,p=t;break;default:p=t}l=y}const f=i.actualBoundingBoxAscent+i.actualBoundingBoxDescent;f>t.height&&(t.height=f),i.actualBoundingBoxAscent>t.ascent&&(t.ascent=i.actualBoundingBoxAscent),t.width+=l,t.left+=i.actualBoundingBoxLeft/c,t.right+=i.actualBoundingBoxRight/p,t.textChunks.push({style:u,fill:b,text:s.text,width:l,height:f,left:i.actualBoundingBoxLeft,right:i.actualBoundingBoxRight,ascent:i.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:w,verticalAlign:_}),E=!1}return!0})),this.style.lineHeight instanceof A.QE?(t.height*=this.style.lineHeight.value,t.ascent*=this.style.lineHeight.value):(t.height*=this.style.lineHeight||1.2,t.ascent*=this.style.lineHeight||1.2),f<t.left&&(f=t.left),g<t.right&&(g=t.right),this._textInfo.push(t),m+=t.height,n=k||[]}})),p||(e.restore(),i.restore()),c.__(this._textInfo,((t,e)=>{let i=0;c.__(t.textChunks,(e=>{if(e.offsetX=i+e.left-t.left,e.offsetY+=t.height-t.height*(this.style.baselineRatio||.19),i+=e.width,e.verticalAlign)switch(e.verticalAlign){case"super":e.offsetY-=t.height/2-e.height/2;break;case"sub":e.offsetY+=e.height/2}}))}));const v={left:s?-g:-f,top:0,right:s?f:g,bottom:m};if("none"!==n){const t=this._fitRatio(v);if(t<1)if("fit"==n)P.Et(this.style.minScale)&&t<this.style.minScale?(this.textVisible=!1,v.left=0,v.top=0,v.right=0,v.bottom=0):(this._originalScale&&1!=this._originalScale||(this._originalScale=this.scale),this.scale=t,this.textVisible=!0);else if("hide"==n)this.textVisible=!1,v.left=0,v.top=0,v.right=0,v.bottom=0;else{switch(this.style.textAlign){case"right":case"end":v.left=s?r:-r,v.right=0;break;case"center":v.left=-r/2,v.right=r/2;break;default:v.left=0,v.right=s?-r:r}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return e.restore(),i.restore(),v}_fitRatio(t){const e=this.style.maxWidth,i=this.style.maxHeight;if(!P.Et(e)&&!P.Et(i))return 1;const s=t.right-t.left,n=t.bottom-t.top;return Math.min(e/s||1,i/n||1)}_truncateText(t,e,i){let s,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];do{if(n)e=e.slice(0,-1);else{let t=e.replace(/[^,;:!?\\\/\s\u200b]+[,;:!?\\\/\s\u200b]*$/g,"");if(""!=t&&t!==e||!r){if(""==t)return e;e=t}else n=!0}const i=this._measureText(e,t);s=i.actualBoundingBoxLeft+i.actualBoundingBoxRight}while(s>i&&""!=e);return e}_measureText(t,e){let i=e.measureText(t),s={};if(null==i.actualBoundingBoxAscent){const e=document.createElement("div");e.innerText=t,e.style.visibility="hidden",e.style.position="absolute",e.style.top="-1000000px;",e.style.fontFamily=this.style.fontFamily||"",e.style.fontSize=this.style.fontSize+"",document.body.appendChild(e);const n=e.getBoundingClientRect();document.body.removeChild(e);const r=n.height,a=i.width;s={actualBoundingBoxAscent:r,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:a,fontBoundingBoxAscent:r,fontBoundingBoxDescent:0,width:a}}else s={actualBoundingBoxAscent:i.actualBoundingBoxAscent,actualBoundingBoxDescent:i.actualBoundingBoxDescent,actualBoundingBoxLeft:i.actualBoundingBoxLeft,actualBoundingBoxRight:i.actualBoundingBoxRight,fontBoundingBoxAscent:i.actualBoundingBoxAscent,fontBoundingBoxDescent:i.actualBoundingBoxDescent,width:i.width};const n=i.width;switch(this.style.textAlign){case"right":case"end":s.actualBoundingBoxLeft=n,s.actualBoundingBoxRight=0;break;case"center":s.actualBoundingBoxLeft=n/2,s.actualBoundingBoxRight=n/2;break;default:s.actualBoundingBoxLeft=0,s.actualBoundingBoxRight=n}return s}}class Tt{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:(0,A.KN)(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"\u2026"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class Mt extends Pt{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(t){if("circular"===this.textType)this._renderCircular(t);else super._render(t)}_renderCircular(t){if(this.textVisible){this._prerender(t);const e=this._isInteractive(t),i=t.layer.context,s=t.layer.dirty,n=this._renderer._ghostLayer.context;i.save(),e&&n.save(),this._textInfo||this._measure(t);let r=this.radius||0,a=this.startAngle||0,o=0,l=this.orientation,h="auto"==l?"auto":"inward"==l;const d=this.inside,u=this.style.textAlign||"left",p=this.kerning||0;let f="left"==u?1:-1;const g=!this._textReversed;if("auto"==h){let t=0,e=0;c.__(this._textInfo,((e,i)=>{const s=a+e.width/(r-e.height)/2*-f;s>t&&(t=s)})),e="left"==u?(t+o/2)*w.iR:"right"==u?(t-o/2)*w.iR:a*w.iR,e=w.n0(e),h=e>=270||e<=90}1==h&&g&&(this._textInfo.reverse(),this._textReversed=!0),c.__(this._textInfo,((t,l)=>{const m=t.height;d||(r+=m),(-1==f&&h||1==f&&!h)&&g&&t.textChunks.reverse();let v=a;o=0,"center"==u&&(v+=t.width/(r-m)/2*-f,o=v-a),v+=Math.PI*(h?0:1),i.save(),e&&n.save(),i.rotate(v),e&&n.rotate(v);let b=0;c.__(t.textChunks,((t,a)=>{const o=t.text,l=t.width;b=l/2/(r-m)*f,i.rotate(b),e&&n.rotate(b),t.style&&(i.save(),n.save(),i.font=t.style,e&&(n.font=t.style)),t.fill&&(i.save(),i.fillStyle=t.fill.toCSS()),i.textBaseline="middle",i.textAlign="center",e&&(n.textBaseline="middle",n.textAlign="center"),s&&i.fillText(o,0,(h?1:-1)*(0-r+m/2)),e&&n.fillText(o,0,(h?1:-1)*(0-r+m/2)),t.fill&&i.restore(),t.style&&(i.restore(),n.restore()),b=(l/2+p)/(r-m)*f,i.rotate(b),e&&n.rotate(b)})),i.restore(),e&&n.restore(),d&&(r-=m)})),i.restore(),e&&n.restore()}}_measure(t){return"circular"===this.textType?this._measureCircular(t):super._measure(t)}_measureCircular(t){const e=t.layer.context,i=this._renderer._ghostLayer.context,s="rtl"==this.style.direction,n=this.style.oversizedBehavior,r=this.style.maxWidth,a=P.Et(r)&&"truncate"==n,o=this.style.ellipsis||"";let l;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,e.save(),i.save(),this._prerender(t,!0);const h=this.text.toString().replace(/\r/g,"").split(/\n/);let u=!0,p=0,f=0;return c.__(h,((t,n)=>{let h,g,m,v=S.g.chunk(t,!1,this.style.ignoreFormatting),b={offsetY:f,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};c.__(v,((t,n)=>{if("format"==t.type){if("[/]"==t.text)u||(e.restore(),i.restore(),u=!0),g=void 0,h=void 0,m=void 0;else{let s=S.g.getTextStyle(t.text);const n=this._getFontStyle(s);e.save(),i.save(),e.font=n,h=n,s.fill&&(g=s.fill),s.width&&(m=P.Ro(s.width)),u=!1}a&&(l=this._measureText(o,e))}else if("value"==t.type){let i=t.text.match(/./gu)||[];s&&(i=d.SX(t.text),i.reverse());for(let t=0;t<i.length;t++){const s=i[t],n=this._measureText(s,e);let c=n.width;h&&m&&m>c&&(c=m);const d=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent;if(d>b.height&&(b.height=d),n.actualBoundingBoxAscent>b.ascent&&(b.ascent=n.actualBoundingBoxAscent),p+=c,a){l||(l=this._measureText(o,e));const t=l.actualBoundingBoxLeft+l.actualBoundingBoxRight;if(p+t>r){1==b.textChunks.length?this.textVisible=!1:(b.width+=t,b.left+=l.actualBoundingBoxLeft,b.right+=l.actualBoundingBoxRight,b.textChunks.push({style:h,fill:g,text:o,width:t,height:d+l.actualBoundingBoxDescent,left:l.actualBoundingBoxLeft,right:l.actualBoundingBoxRight,ascent:l.actualBoundingBoxAscent,offsetX:0,offsetY:d,textDecoration:void 0}));break}}b.width+=c,b.left+=n.actualBoundingBoxLeft,b.right+=n.actualBoundingBoxRight,b.textChunks.push({style:h,fill:g,text:s,width:c,height:d+n.actualBoundingBoxDescent,left:n.actualBoundingBoxLeft,right:n.actualBoundingBoxRight,ascent:n.actualBoundingBoxAscent,offsetX:0,offsetY:d,textDecoration:void 0})}}})),this.style.lineHeight instanceof A.QE?b.height*=this.style.lineHeight.value:b.height*=this.style.lineHeight||1.2,this._textInfo.push(b),f+=b.height})),u||(e.restore(),i.restore()),"hide"==n&&p>r&&(this.textVisible=!1),c.__(this._textInfo,(t=>{c.__(t.textChunks,(e=>{e.offsetY+=Math.round((t.height-e.height+(t.ascent-e.ascent))/2)}))})),e.restore(),i.restore(),{left:0,top:0,right:0,bottom:0}}}class Dt extends nt{constructor(t,e){super(t),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=e}_dispose(){super._dispose(),this._imageMask&&et(this._imageMask)}getLocalBounds(){if(!this._localBounds){let t=0,e=0;this.width&&(t=this.width),this.height&&(e=this.height),this._localBounds={left:0,top:0,right:t,bottom:e},this._addBounds(this._localBounds)}return this._localBounds}_render(t){if(super._render(t),this.image){if(void 0===this.tainted&&(this.tainted=tt(this.image),t.layer.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(t.layer.dirty){this.shadowColor&&(t.layer.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(t.layer.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(t.layer.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(t.layer.context.shadowOffsetY=this.shadowOffsetY);const e=this.width||this.image.naturalWidth,i=this.height||this.image.naturalHeight;t.layer.context.drawImage(this.image,0,0,e,i)}if(this.interactive&&this._isInteractive(t)){const t=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(t,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(t){if(void 0===this._imageMask){const e=this.width||t.naturalWidth,i=this.height||t.naturalHeight,s=document.createElement("canvas");s.width=e,s.height=i;const n=s.getContext("2d");n.imageSmoothingEnabled=!1,n.fillStyle=this._getColorId(),n.fillRect(0,0,e,i),tt(t)||(n.globalCompositeOperation="destination-in",n.drawImage(t,0,0,e,i)),this._imageMask=s}return this._imageMask}}class Rt{constructor(t,e,i,s){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),d.xY("touchevents")&&t instanceof Touch?this.id=t.identifier:this.id=null}}class Lt extends h.JZ{constructor(t){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new Ot}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_realWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_realHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.resolution=null==t?window.devicePixelRatio:t,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new h.W_((()=>{C.__(this._events,((t,e)=>{e.disposer.dispose()})),c.__(this.layers,(t=>{et(t.view),t.exportableView&&et(t.exportableView)})),et(this._ghostLayer.view),et(this._patternCanvas)}))),this._disposers.push(d.n_((()=>{null==t&&(this.resolution=window.devicePixelRatio)}))),d.xY("touchevents")){const t=t=>{0!==this._dragging.length&&c.FY(this._dragging,(e=>!e.value.shouldCancelTouch()||(t.preventDefault(),!1))),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(d.q2(window,"touchstart",t,{passive:!1})),this._disposers.push(d.q2(this.view,"touchstart",t,{passive:!1})),this._disposers.push(d.q2(this.view,"touchmove",(()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()}),{passive:!0})),this._disposers.push(d.q2(window,"click",(t=>{this._touchActive=!1}),{passive:!0})),this._disposers.push(d.q2(this.view,"click",(t=>{window.setTimeout((()=>{this._touchActive=!0,this._delayTouchDeactivate()}),100)}),{passive:!0}))}d.xY("wheelevents")&&this._disposers.push(d.q2(this.view,"wheel",(t=>{let e=!1;this._hovering.forEach((t=>{if(t.wheelable)return e=!0,!1})),e&&t.preventDefault()}),{passive:!1}))}resetImageArray(){this._ghostLayer.imageArray=void 0}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout((()=>{this._touchActive=!1}),this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(t){t?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(t,e,i,s){return this.defaultLayer.context.createLinearGradient(t,e,i,s)}createRadialGradient(t,e,i,s,n,r){return this.defaultLayer.context.createRadialGradient(t,e,i,s,n,r)}createPattern(t,e,i,s,n){return this._patternCanvas.width=s,this._patternCanvas.height=n,this._patternContext.clearRect(0,0,s,n),e.renderDetached(this._patternContext),t.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,i)}makeContainer(){return new rt(this)}makeGraphics(){return new Ct(this)}makeText(t,e){return new Pt(this,t,e)}makeTextStyle(){return new Tt}makeRadialText(t,e){return new Mt(this,t,e)}makePicture(t){return new Dt(this,t)}resizeLayer(t){t.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resize(t,e,i,s){this._realWidth=t,this._realHeight=e,this._calculatedWidth=i,this._calculatedHeight=s,c.__(this.layers,(t=>{t&&(t.dirty=!0,this.resizeLayer(t))})),this.resizeGhost(),this.view.style.width=i+"px",this.view.style.height=s+"px"}createDetachedLayer(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=document.createElement("canvas"),i=e.getContext("2d",{willReadFrequently:t}),s=new It(e,i);return e.style.position="absolute",e.style.top="0px",e.style.left="0px",s}getLayerByOrder(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++){const i=e[s];if(i.order==t)return i}}getLayer(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getLayerByOrder(t);if(i)return i;const s=this.createDetachedLayer(99==t);s.order=t,s.visible=e,s.view.className="am5-layer-"+t,s.visible&&this.resizeLayer(s);const n=this.layers;n.push(s),n.sort(((t,e)=>t.order>e.order?1:t.order<e.order?-1:0));const r=n.length;let a;for(let o=c.qh(n,s)+1;o<r;o++)if(n[o].visible){a=n[o];break}return s.visible&&(void 0===a?this._layerDom.appendChild(s.view):this._layerDom.insertBefore(s.view,a.view)),s}render(t){if(this._dirtyLayers.length=0,c.__(this.layers,(t=>{t&&t.dirty&&t.visible&&(this._dirtyLayers.push(t),t.clear())})),this._ghostLayer.clear(),t.render({inactive:null,layer:this.defaultLayer}),this._ghostLayer.context.restore(),c.__(this.layers,(t=>{if(t){const e=t.context;e.beginPath(),e.moveTo(0,0),e.stroke()}})),c.__(this._dirtyLayers,(t=>{t.context.restore(),t.dirty=!1})),this._hovering.size&&this._lastPointerMoveEvent){const{events:t,target:e,native:i}=this._lastPointerMoveEvent;c.__(t,(t=>{this._dispatchGlobalMousemove(t,e,i)}))}}paintId(t){const e=function(t){const e=[0,0,0];for(let i=0;i<24;i++)e[i%3]<<=1,e[i%3]|=1&t,t>>=1;return(0|e[0])+(e[1]<<8)+(e[2]<<16)}(++this._colorId),i=E.Q1.fromHex(e).toCSS();return this._colorMap[i]=t,i}_removeObject(t){void 0!==t._colorId&&delete this._colorMap[t._colorId]}_adjustBoundingBox(t){const e=this._ghostLayer.margin;return new DOMRect(-e.left,-e.top,t.width+e.left+e.right,t.height+e.top+e.bottom)}getEvent(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.view.getBoundingClientRect(),s=t.clientX||0,n=t.clientY||0,r=this._calculatedWidth/this._realWidth,a=this._calculatedHeight/this._realHeight,o={x:s-i.left,y:n-i.top},l={x:(s-(e?i.left:0))*r,y:(n-(e?i.top:0))*a};return new Rt(t,o,l,this._adjustBoundingBox(i))}_getHitTarget(t,e,i){if(0===e.width||0===e.height||t.x<e.left||t.x>e.right||t.y<e.top||t.y>e.bottom)return;if(!i||!this._layerDom.contains(i))return;const s=this._ghostLayer.getImageData(t,e);if(0===s.data[0]&&0===s.data[1]&&0===s.data[2])return!1;const n=E.Q1.fromRGB(s.data[0],s.data[1],s.data[2]).toCSS();return this._colorMap[n]}getObjectAtPoint(t){const e=this._ghostLayer.getImageArray(t);if(0===e[0]&&0===e[1]&&0===e[2])return;const i=E.Q1.fromRGB(e[0],e[1],e[2]).toCSS();return this._colorMap[i]}_withEvents(t,e){const i=this._events[t];if(void 0!==i){i.dispatching=!0;try{e(i)}finally{i.dispatching=!1,i.cleanup&&(i.cleanup=!1,c.TW(i.callbacks,(t=>!t.disposed)),0===i.callbacks.length&&(i.disposer.dispose(),delete this._events[t]))}}}_dispatchEventAll(t,e){this.interactionsEnabled&&this._withEvents(t,(t=>{c.__(t.callbacks,(t=>{t.disposed||t.callback.call(t.context,e)}))}))}_dispatchEvent(t,e,i){if(!this.interactionsEnabled)return!1;let s=!1;return this._withEvents(t,(t=>{c.__(t.callbacks,(t=>{t.disposed||t.object!==e||(t.callback.call(t.context,i),s=!0)}))})),s}_dispatchMousedown(t,e){const i=t.button;if(0!=i&&2!=i&&1!=i&&void 0!==i)return;const s=this.getEvent(t),n=this._getHitTarget(s.originalPoint,s.bbox,e);if(n){const t=s.id;let e=!1;J(n,(i=>{const n={id:t,value:i};if(this._mousedown.push(n),!e&&this._dispatchEvent("pointerdown",i,s)){e=!0;this._dragging.some((e=>e.value===i&&e.id===t))||this._dragging.push(n)}return!0}))}}_dispatchGlobalMousemove(t,e,i){const s=this.getEvent(t),n=this._getHitTarget(s.originalPoint,s.bbox,e);s.native=i,n?(this._hovering.forEach((t=>{t.contains(n)||(this._hovering.delete(t),t.cursorOverStyle&&d.eC(document.body,"cursor",t._replacedCursorStyle),this._dispatchEvent("pointerout",t,s))})),s.native&&J(n,(t=>(this._hovering.has(t)||(this._hovering.add(t),t.cursorOverStyle&&(t._replacedCursorStyle=d.gd(document.body,"cursor"),d.eC(document.body,"cursor",t.cursorOverStyle)),this._dispatchEvent("pointerover",t,s)),!0)))):(this._hovering.forEach((t=>{t.cursorOverStyle&&d.eC(document.body,"cursor",t._replacedCursorStyle),this._dispatchEvent("pointerout",t,s)})),this._hovering.clear()),this._dispatchEventAll("globalpointermove",s)}removeHovering(t){this._hovering.delete(t),t.cursorOverStyle&&d.eC(document.body,"cursor",t._replacedCursorStyle)}_dispatchGlobalMouseup(t,e){const i=this.getEvent(t);i.native=e,this._dispatchEventAll("globalpointerup",i)}_dispatchDragMove(t){if(0!==this._dragging.length){const e=this.getEvent(t),i=e.id;this._dragging.forEach((t=>{t.id===i&&this._dispatchEvent("pointermove",t.value,e)}))}}_dispatchDragEnd(t,e){const i=t.button;let s;if(0==i||void 0===i)s="click";else if(2==i)s="rightclick";else{if(1!=i)return;s="middleclick"}const n=this.getEvent(t),r=n.id;if(0!==this._mousedown.length){const t=this._getHitTarget(n.originalPoint,n.bbox,e);t&&this._mousedown.forEach((e=>{e.id===r&&e.value.contains(t)&&this._dispatchEvent(s,e.value,n)})),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach((t=>{t.id===r&&this._dispatchEvent("pointerup",t.value,n)})),this._dragging.length=0)}_dispatchDoubleClick(t,e){const i=this.getEvent(t),s=this._getHitTarget(i.originalPoint,i.bbox,e);s&&J(s,(t=>!this._dispatchEvent("dblclick",t,i)))}_dispatchWheel(t,e){const i=this.getEvent(t),s=this._getHitTarget(i.originalPoint,i.bbox,e);s&&J(s,(t=>!this._dispatchEvent("wheel",t,i)))}_makeSharedEvent(t,e){if(void 0===this._listeners[t]){const i=e();this._listeners[t]=new h.Wr((()=>{delete this._listeners[t],i.dispose()}))}return this._listeners[t].increment()}_onPointerEvent(t,e){let i=!1,s=null;function n(){s=null,i=!1}return new h.ZT([new h.W_((()=>{null!==s&&clearTimeout(s),n()})),d.q2(this.view,d.wN(t),(t=>{i=!0,null!==s&&clearTimeout(s),s=window.setTimeout(n,0)})),Z(window,t,((t,n)=>{null!==s&&(clearTimeout(s),s=null),e(t,n,i),i=!1}))])}_initEvent(t){switch(t){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",(()=>{const t=(t,e,i)=>{this._lastPointerMoveEvent={events:t,target:e,native:i},c.__(t,(t=>{this._dispatchGlobalMousemove(t,e,i)}))};return new h.ZT([this._onPointerEvent("pointerdown",t),this._onPointerEvent("pointermove",t)])}));case"globalpointerup":return this._makeSharedEvent("pointerup",(()=>{const t=this._onPointerEvent("pointerup",((t,e,i)=>{c.__(t,(t=>{this._dispatchGlobalMouseup(t,i)})),this._lastPointerMoveEvent={events:t,target:e,native:i}})),e=this._onPointerEvent("pointercancel",((t,e,i)=>{c.__(t,(t=>{this._dispatchGlobalMouseup(t,i)})),this._lastPointerMoveEvent={events:t,target:e,native:i}}));return new h.W_((()=>{t.dispose(),e.dispose()}))}));case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",(()=>{const t=this._onPointerEvent("pointerdown",((t,e)=>{c.__(t,(t=>{this._dispatchMousedown(t,e)}))})),e=this._onPointerEvent("pointermove",(t=>{c.__(t,(t=>{this._dispatchDragMove(t)}))})),i=this._onPointerEvent("pointerup",((t,e)=>{c.__(t,(t=>{this._dispatchDragEnd(t,e)}))})),s=this._onPointerEvent("pointercancel",((t,e)=>{c.__(t,(t=>{this._dispatchDragEnd(t,e)}))}));return new h.W_((()=>{t.dispose(),e.dispose(),i.dispose(),s.dispose()}))}));case"dblclick":return this._makeSharedEvent("dblclick",(()=>this._onPointerEvent("dblclick",((t,e)=>{c.__(t,(t=>{this._dispatchDoubleClick(t,e)}))}))));case"wheel":return this._makeSharedEvent("wheel",(()=>d.q2(this.view,d.wN("wheel"),(t=>{this._dispatchWheel(t,d.wt(t))}),{passive:!1})))}}_addEvent(t,e,i,s){let n=this._events[e];void 0===n&&(n=this._events[e]={disposer:this._initEvent(e),callbacks:[],dispatching:!1,cleanup:!1});const r={object:t,context:s,callback:i,disposed:!1};return n.callbacks.push(r),new h.W_((()=>{r.disposed=!0,n.dispatching?n.cleanup=!0:(c.dm(n.callbacks,r),0===n.callbacks.length&&(n.disposer.dispose(),delete this._events[e]))}))}getCanvas(t,e){this.render(t),e||(e={});let i=this.resolution,s=Math.floor(this._calculatedWidth*this.resolution),n=Math.floor(this._calculatedHeight*this.resolution);if(e.minWidth&&e.minWidth>s){let t=e.minWidth/s;t>i&&(i=t*this.resolution)}if(e.minHeight&&e.minHeight>n){let t=e.minHeight/n;t>i&&(i=t*this.resolution)}if(e.maxWidth&&e.maxWidth<s){let t=e.maxWidth/s;t<i&&(i=t*this.resolution)}if(e.maxHeight&&e.maxHeight>n){let t=e.maxHeight/n;t<i&&(i=t*this.resolution)}e.maintainPixelRatio&&(i/=this.resolution);const r=[];let a=!1;const o=document.createElement("canvas");i!=this.resolution&&(a=!0,s=s*i/this.resolution,n=n*i/this.resolution),o.width=s,o.height=n,o.style.position="fixed",o.style.top="-10000px",this.view.appendChild(o),r.push(o);const l=o.getContext("2d");let h=0,d=0,u=!1;return c.__(this.layers,(t=>{if(t&&t.visible&&(t.tainted||a)){u=!0,t.exportableView=t.view,t.exportableContext=t.context,t.view=document.createElement("canvas"),t.view.style.position="fixed",t.view.style.top="-10000px",this.view.appendChild(t.view),r.push(t.view);let e=0,a=0;t.margin&&(e+=t.margin.left||0+t.margin.right||0,a+=t.margin.top||0+t.margin.bottom||0),t.view.width=s+e,t.view.height=n+a,t.context=t.view.getContext("2d"),t.dirty=!0,t.scale=i}})),u&&(this._omitTainted=!0,this.render(t),this._omitTainted=!1),c.__(this.layers,(t=>{if(t&&t.visible){let e=0,i=0;t.margin&&(e=-(t.margin.left||0)*this.resolution,i=-(t.margin.top||0)*this.resolution),l.drawImage(t.view,e,i),t.exportableView&&(t.view=t.exportableView,t.exportableView=void 0),t.exportableContext&&(t.context=t.exportableContext,t.exportableContext=void 0),h<t.view.clientWidth&&(h=t.view.clientWidth),d<t.view.clientHeight&&(d=t.view.clientHeight),t.scale=void 0}})),o.style.width=h+"px",o.style.height=d+"px",c.__(r,(t=>{t.style.position="",t.style.top="",this.view.removeChild(t)})),o}}class Ot{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"imageArray",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(t,e,i,s,n){this._resolution=n,t+=this.margin.left+this.margin.right,e+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,s+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(t*n),this._height=Math.floor(e*n),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=s+"px"}getImageData(t,e){return this.context.getImageData(Math.round((t.x-e.left)/e.width*this._width),Math.round((t.y-e.top)/e.height*this._height),1,1)}getImageArray(t){this.imageArray||(this.imageArray=this.context.getImageData(0,0,this._width,this._height).data);const e=this.imageArray,i=Math.round(t.x*this._resolution),s=4*(Math.round(t.y*this._resolution)*this._width+i);return[e[s],e[s+1],e[s+2],e[s+3]]}setMargin(t){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,c.__(t,(t=>{t.margin&&(this.margin.left=Math.max(this.margin.left,t.margin.left),this.margin.right=Math.max(this.margin.right,t.margin.right),this.margin.top=Math.max(this.margin.top,t.margin.top),this.margin.bottom=Math.max(this.margin.bottom,t.margin.bottom))}))}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class It{constructor(t,e){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=t,this.context=e}resize(t,e,i,s,n){null!=this.width&&(t=this.width,i=this.width),null!=this.height&&(e=this.height,s=this.height),this.margin?(t+=this.margin.left+this.margin.right,e+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,s+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(t*n),this._height=Math.floor(e*n),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=s+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}var Ft=i(93218),Nt=i(93305),jt=i(54845);function Bt(t,e){null==t?requestAnimationFrame(e):setTimeout((()=>{requestAnimationFrame(e)}),1e3/t)}class Ht{constructor(t){let e,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyAnimation",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new N.Q}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:F.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:I}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:T.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:L.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:O.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:o.N.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:a.b.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:l.J.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!n)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");if(this._settings=s,0==s.accessible&&(this._a11yD=!0),null==s.useSafeResolution&&(s.useSafeResolution=!0),s.useSafeResolution&&(e=d.U3()),this._renderer=new Lt(e),i=t instanceof HTMLElement?t:document.getElementById(t),c.__(Nt.u5.rootElements,(t=>{if(t.dom===i)throw new Error("You cannot have multiple Roots on the same DOM node")})),this.interfaceColors=v.new(this,{}),null===i)throw new Error("Could not find HTML element with id `"+t+"`");this.dom=i;let r=document.createElement("div");r.style.position="relative",r.style.width="100%",r.style.height="100%",i.appendChild(r);const h=s.tooltipContainerBounds;h&&(this._tooltipContainerSettings=h),this._inner=r,this._updateComputedStyles(),Nt.u5.rootElements.push(this)}static new(t,e){const i=new Ht(t,e,!0);return i._init(),i}moveDOM(t){let e;if(e=t instanceof HTMLElement?t:document.getElementById(t),e){for(;this.dom.childNodes.length>0;)e.appendChild(this.dom.childNodes[0]);this.dom=e,this._initResizeSensor(),this.resize()}}_handleLogo(){if(this._logo){const t=this.dom.offsetWidth,e=this.dom.offsetHeight;t<=150||e<=60?this._logo.hide():this._logo.show()}}_showBranding(){if(!this._logo){const t=this.tooltipContainer.children.push(n.m.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:(0,A.KN)(100),centerY:A.Q2,tooltipText:"Created using amCharts 5",tooltipX:A.Q2,cursorOverStyle:"pointer",background:y.M.new(this,{fill:(0,E.yW)(4671320),fillOpacity:0,tooltipY:5})})),e=k.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});e.label.setAll({fontSize:12}),e.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),t.set("tooltip",e),t.events.on("click",(()=>{window.open("https://www.amcharts.com/","_blank")})),t.states.create("hover",{});t.children.push(b.A.new(this,{stroke:(0,E.yW)(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:(0,E.yW)(3976191)});t.children.push(b.A.new(this,{stroke:(0,E.yW)(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:(0,E.yW)(4671320)}),this._logo=t,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(t){return this._settings.calculateSize?this._settings.calculateSize(t):{width:t.width,height:t.height}}_init(){const t=this._settings;!1!==t.accessible&&(t.focusable&&(this._inner.setAttribute("focusable","true"),this._inner.setAttribute("tabindex",this.tabindex+"")),t.ariaLabel&&this._inner.setAttribute("aria-label",t.ariaLabel),t.role&&this._inner.setAttribute("role",t.role));const e=this._renderer,i=this._getRealSize(),s=this._getCalculatedSize(i),r=Math.floor(s.width),a=Math.floor(s.height),o=Math.floor(i.width),l=Math.floor(i.height),h=n.m.new(this,{visible:!0,width:r,height:a});this._rootContainer=h,this._rootContainer._defaultThemes.push(j.p.new(this));const c=h.children.push(n.m.new(this,{visible:!0,width:A.Q2,height:A.Q2}));this.container=c,e.resize(o,l,r,a),this._inner.appendChild(e.view),this._initResizeSensor();const u=document.createElement("div");if(this._htmlElementContainer=u,u.className="am5-html-container",u.style.position="absolute",u.style.pointerEvents="none",this._tooltipContainerSettings||(u.style.overflow="hidden"),this._inner.appendChild(u),!0!==this._a11yD){const t=document.createElement("div");t.className="am5-reader-container",t.setAttribute("role","alert"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",t.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=t,this._inner.appendChild(this._readerAlertElement);const i=document.createElement("div");i.className="am5-focus-container",i.style.position="absolute",i.style.pointerEvents="none",i.style.top="0px",i.style.left="0px",i.style.overflow="hidden",i.style.width=r+"px",i.style.height=a+"px",i.setAttribute("role","graphics-document"),d.Dt(i,!1),this._focusElementContainer=i,this._inner.appendChild(this._focusElementContainer);const s=document.createElement("div");this._tooltipElementContainer=s,s.className="am5-tooltip-container",this._inner.appendChild(s),d.xY("keyboardevents")&&(this._disposers.push(d.q2(window,"keydown",(t=>{const e=d.K(t);"Shift"==e?this._isShift=!0:"Tab"==e&&(this._isShift=t.shiftKey)}))),this._disposers.push(d.q2(window,"keyup",(t=>{"Shift"==d.K(t)&&(this._isShift=!1)}))),this._disposers.push(d.q2(i,"click",(()=>{const t=this._focusedSprite;if(t){const i=e.getEvent(new MouseEvent("click"));t.events.dispatch("click",{type:"click",originalEvent:i.event,point:i.point,simulated:!0,target:t})}}))),this._disposers.push(d.q2(i,"keydown",(t=>{const i=this._focusedSprite;if(i){"Escape"==t.key&&(d.Ge(),this._focusedSprite=void 0);let s=0,n=0;const r=d.K(t);switch(r){case"Enter":case" ":if(" "==r&&"checkbox"!=i.get("role"))return;t.preventDefault();const a=e.getEvent(new MouseEvent("mouse"));return void i.events.dispatch("click",{type:"click",originalEvent:a.event,point:a.point,simulated:!0,target:i});case"ArrowLeft":s=-6;break;case"ArrowRight":s=6;break;case"ArrowUp":n=-6;break;case"ArrowDown":n=6;break;default:return}if(0!=s||0!=n){if(t.preventDefault(),!i.isDragging()){this._keyboardDragPoint={x:0,y:0};const t=e.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));t.point={x:0,y:0},i.events.isEnabled("pointerdown")&&i.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:t.event,point:t.point,simulated:!0,target:i})}const r=this._keyboardDragPoint;r.x+=s,r.y+=n;const a=e.getEvent(new MouseEvent("mousemove",{clientX:r.x,clientY:r.y}),!1);i.events.isEnabled("globalpointermove")&&i.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:a.event,point:a.point,simulated:!0,target:i})}}}))),this._disposers.push(d.q2(i,"keyup",(t=>{if(this._focusedSprite){const i=this._focusedSprite,s=d.K(t);switch(s){case"ArrowLeft":case"ArrowRight":case"ArrowTop":case"ArrowDown":if(i.isDragging()){const t=this._keyboardDragPoint,s=e.getEvent(new MouseEvent("mouseup",{clientX:t.x,clientY:t.y}));return i.events.isEnabled("globalpointerup")&&i.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:s.event,point:s.point,simulated:!0,target:i}),void(this._keyboardDragPoint=void 0)}if(i.get("focusableGroup")){const t=i.get("focusableGroup"),e=this._tabindexes.filter((e=>!(e.get("focusableGroup")!=t||!1===e.getPrivate("focusable")||!e.isVisibleDeep())));let n=e.indexOf(i);const r=e.length-1;n+="ArrowRight"==s||"ArrowDown"==s?1:-1,n<0?n=r:n>r&&(n=0),d.XC(e[n].getPrivate("focusElement").dom)}}}}))))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new g(this.dom,(()=>{this.autoResize&&this.resize()})),this._disposers.push(this._resizeSensorDisposer)}resize(){const t=this._getRealSize(),e=this._getCalculatedSize(t),i=Math.floor(e.width),s=Math.floor(e.height);if(i>0&&s>0){const e=Math.floor(t.width),n=Math.floor(t.height),r=this._htmlElementContainer;if(r.style.width=i+"px",r.style.height=s+"px",!0!==this._a11yD){const t=this._focusElementContainer;t.style.width=i+"px",t.style.height=s+"px"}this._renderer.resize(e,n,i,s);const a=this._rootContainer;a.setPrivate("width",i),a.setPrivate("height",s),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(t){c.__(this._tickers,(e=>{e(t)}))}_runAnimations(t){let e=0;return c.TW(this._animations,(i=>{const n=i._runAnimation(t);return n!==s.oA.Stopped&&(n!==s.oA.Playing||(++e,!0))})),this._isDirtyAnimation=!1,0===e}_runDirties(){let t={};for(;this._isDirtyParents;)this._isDirtyParents=!1,C.HP(this._dirtyParents).forEach((e=>{const i=this._dirtyParents[e];delete this._dirtyParents[e],i.isDisposed()||(t[i.uid]=i,i._prepareChildren())}));C.HP(t).forEach((e=>{t[e]._updateChildren()}));const e=[];C.HP(this._dirty).forEach((t=>{const i=this._dirty[t];i.isDisposed()?delete this._dirty[i.uid]:(e.push(i),i._beforeChanged())})),e.forEach((t=>{t._changed(),delete this._dirty[t.uid],t._clearDirty()})),this._isDirty=!1;const i={},s=[];C.HP(this._dirtyBounds).forEach((t=>{const e=this._dirtyBounds[t];delete this._dirtyBounds[t],e.isDisposed()||(i[e.uid]=e.depth(),s.push(e))})),this._positionHTMLElements(),s.sort(((t,e)=>jt.UD(i[e.uid],i[t.uid]))),s.forEach((t=>{t._updateBounds()}));const n=this._dirtyPositions;C.HP(n).forEach((t=>{const e=n[t];delete n[t],e.isDisposed()||e._updatePosition()})),e.forEach((t=>{t._afterChanged()}))}_renderFrame(t){if(this._updateTick){this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:t}),this._checkComputedStyles(),this._runTickers(t);const e=this._runAnimations(t);return this._runDirties(),this._render(),this._renderer.resetImageArray(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:t}),0===this._tickers.length&&e&&!this._isDirtyAnimation&&!this._isDirty}return!0}_runTicker(t,e){if(!this.isDisposed()){this.animationTime=t;this._renderFrame(t)?(this._ticker=null,this.animationTime=null):this._paused||(e?this._ticker:Bt(this.fps,this._ticker))}}_runTickerNow(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;if(!this.isDisposed()){const e=performance.now()+t;for(;;){const t=performance.now();if(t>=e){this.animationTime=null;break}this.animationTime=t;if(this._renderFrame(t)){this.animationTime=null;break}}}}_startTicker(){null===this._ticker&&(this.animationTime=null,this._ticker=t=>{this._runTicker(t)},Bt(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(t){this._updateTick=t,t&&this._startTicker()}_addDirtyEntity(t){this._isDirty=!0,void 0===this._dirty[t.uid]&&(this._dirty[t.uid]=t),this._startTicker()}_addDirtyParent(t){this._isDirty=!0,this._isDirtyParents=!0,void 0===this._dirtyParents[t.uid]&&(this._dirtyParents[t.uid]=t),this._startTicker()}_addDirtyBounds(t){this._isDirty=!0,void 0===this._dirtyBounds[t.uid]&&(this._dirtyBounds[t.uid]=t),this._startTicker()}_addDirtyPosition(t){this._isDirty=!0,void 0===this._dirtyPositions[t.uid]&&(this._dirtyPositions[t.uid]=t),this._startTicker()}_addAnimation(t){this._isDirtyAnimation=!0,-1===this._animations.indexOf(t)&&this._animations.push(t),this._startTicker()}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",(()=>{this._isDirty=!0,this._startTicker()}))}eachFrame(t){return this._tickers.push(t),this._startTicker(),new h.W_((()=>{c.dm(this._tickers,t)}))}markDirtyGlobal(t){t||(t=this.container),t.walkChildren((t=>{t instanceof n.m&&this.markDirtyGlobal(t),t.markDirty(),t.markDirtyBounds()}))}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),c.__(this._disposers,(t=>{t.dispose()})),this._inner&&d.Nz(this._inner),c.TF(Nt.u5.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(t){!0!==this._a11yD&&(this._readerAlertElement.innerHTML=d.Kq(t))}setThemes(t){this._rootContainer.set("themes",t);const e=this.tooltipContainer;e&&e._applyThemes();const i=this.interfaceColors;i&&i._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const t=this._tooltipContainerSettings,e=this._rootContainer.children.push(n.m.new(this,{position:"absolute",isMeasured:!1,width:A.Q2,height:A.Q2,layer:t?35:30,layerMargin:t||void 0}));this.tooltipContainer=e;const i=k.new(this,{});this.container.set("tooltip",i),i.hide(0),this._tooltip=i}}_registerTabindexOrder(t){1!=this._a11yD&&(t.get("focusable")?c.JJ(this._tabindexes,t):c.TF(this._tabindexes,t),this._invalidateTabindexes())}_unregisterTabindexOrder(t){1!=this._a11yD&&(c.TF(this._tabindexes,t),this._invalidateTabindexes())}_invalidateTabindexes(){if(1==this._a11yD)return;this._tabindexes.sort(((t,e)=>{const i=t.get("tabindexOrder",0),s=e.get("tabindexOrder",0);return i==s?0:i>s?1:-1}));const t=[];c.__(this._tabindexes,((e,i)=>{e.getPrivate("focusElement")?this._moveFocusElement(i,e):this._makeFocusElement(i,e);const s=e.get("focusableGroup");s&&!1!==e.getPrivate("focusable")&&(-1!==t.indexOf(s)?e.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):t.push(s))}))}_updateCurrentFocus(){1!=this._a11yD&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(t,e){if(1==this._a11yD)return;if(e||(e=t.getPrivate("focusElement").dom),!e)return;const i=t.get("role");i?e.setAttribute("role",i):e.removeAttribute("role");const s=t.get("ariaLabel");if(s){const i=(0,Ft.I)(t,s);e.setAttribute("aria-label",i)}else e.removeAttribute("aria-label");const n=t.get("ariaLive");n?e.setAttribute("aria-live",n):e.removeAttribute("aria-live");const r=t.get("ariaChecked");null!=r&&i&&-1!==["checkbox","option","radio","menuitemcheckbox","menuitemradio","treeitem"].indexOf(i)?e.setAttribute("aria-checked",r?"true":"false"):e.removeAttribute("aria-checked");const a=t.get("ariaCurrent");null!=a?e.setAttribute("aria-current",a):e.removeAttribute("aria-current");const o=t.get("ariaSelected");null!=o&&i&&-1!==["gridcell","option","row","tab","columnheader","rowheader","treeitem"].indexOf(i)?e.setAttribute("aria-selected",o?"true":"false"):e.removeAttribute("aria-selected"),t.get("ariaHidden")?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden");const l=t.get("ariaOrientation");l?e.setAttribute("aria-orientation",l):e.removeAttribute("aria-orientation");const h=t.get("ariaValueNow");h?e.setAttribute("aria-valuenow",h):e.removeAttribute("aria-valuenow");const c=t.get("ariaValueMin");c?e.setAttribute("aria-valuemin",c):e.removeAttribute("aria-valuemin");const d=t.get("ariaValueMax");d?e.setAttribute("aria-valuemax",d):e.removeAttribute("aria-valuemax");const u=t.get("ariaValueText");u?e.setAttribute("aria-valuetext",u):e.removeAttribute("aria-valuetext");const p=t.get("ariaControls");p?e.setAttribute("aria-controls",p):e.removeAttribute("aria-controls"),t.get("visible")&&0!==t.get("opacity")&&"tooltip"!=t.get("role")&&!t.isHidden()&&!1!==t.getPrivate("focusable")?("-1"!=e.getAttribute("tabindex")&&e.setAttribute("tabindex",""+this.tabindex),e.removeAttribute("aria-hidden")):(e.removeAttribute("tabindex"),e.setAttribute("aria-hidden","true"))}_makeFocusElement(t,e){if(e.getPrivate("focusElement")||1==this._a11yD)return;const i=document.createElement("div");"tooltip"!=e.get("role")&&(i.tabIndex=this.tabindex),i.style.position="absolute",d.Dt(i,!1);const s=[];e.setPrivate("focusElement",{dom:i,disposers:s}),this._decorateFocusElement(e),s.push(d.q2(i,"focus",(t=>{this._handleFocus(t)}))),s.push(d.q2(i,"blur",(t=>{this._handleBlur(t)}))),this._moveFocusElement(t,e)}_removeFocusElement(t){if(1==this._a11yD)return;c.TF(this._tabindexes,t);const e=t.getPrivate("focusElement");if(e){this._focusElementContainer.removeChild(e.dom),c.__(e.disposers,(t=>{t.dispose()}))}}_hideFocusElement(t){if(1==this._a11yD)return;t.getPrivate("focusElement").dom.style.display="none"}_moveFocusElement(t,e){if(1==this._a11yD)return;const i=this._focusElementContainer,s=e.getPrivate("focusElement").dom;if(s===this._focusElementContainer.children[t])return;const n=this._focusElementContainer.children[t+1];n?i.insertBefore(s,n):i.append(s)}_positionFocusElement(t){if(1==this._a11yD||void 0==t)return;const e=t.globalBounds();let i=e.right==e.left?t.width():e.right-e.left,s=e.top==e.bottom?t.height():e.bottom-e.top;const n=void 0!==this._settings.focusPadding?this._settings.focusPadding:2;let r=e.left-n,a=e.top-n;i<0&&(r+=i,i=Math.abs(i)),s<0&&(a+=s,s=Math.abs(s));const o=t.getPrivate("focusElement").dom;o.style.top=a+"px",o.style.left=r+"px",o.style.width=i+2*n+"px",o.style.height=s+2*n+"px"}_getSpriteByFocusElement(t){let e;return c.FY(this._tabindexes,((i,s)=>i.getPrivate("focusElement").dom!==t||(e=i,!1))),e}_handleFocus(t){if(1==this._a11yD)return;const e=this._getSpriteByFocusElement(t.target);e&&(e.isVisibleDeep()?(this._positionFocusElement(e),this._focusedSprite=e,e.events.isEnabled("focus")&&e.events.dispatch("focus",{type:"focus",originalEvent:t,target:e})):this._focusNext(t.target,this._isShift?-1:1))}_focusNext(t,e){if(1==this._a11yD)return;const i=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let s=i.indexOf(t)+e;s<0?s=i.length-1:s>=i.length&&(s=0),i[s].focus()}_handleBlur(t){if(1==this._a11yD)return;const e=this._focusedSprite;e&&!e.isDisposed()&&e.events.isEnabled("blur")&&e.events.dispatch("blur",{type:"blur",originalEvent:t,target:e}),this._focusedSprite=void 0}updateTooltip(t){if(1==this._a11yD)return;const e=d.Kq(t._getText());let i=t.getPrivate("tooltipElement");"tooltip"==t.get("role")&&""!=e?(i||(i=this._makeTooltipElement(t)),i.innerHTML!=e&&(i.innerHTML=e),i.setAttribute("aria-hidden",t.isVisibleDeep()?"false":"true")):i&&(i.remove(),t.removePrivate("tooltipElement"))}_makeTooltipElement(t){const e=this._tooltipElementContainer,i=document.createElement("div");return i.style.position="absolute",i.style.width="1px",i.style.height="1px",i.style.overflow="hidden",i.style.clip="rect(1px, 1px, 1px, 1px)",d.Dt(i,!1),this._decorateFocusElement(t,i),e.append(i),t.setPrivate("tooltipElement",i),i}_removeTooltipElement(t){if(1==this._a11yD)return;const e=t.getPrivate("tooltipElement");if(e){const t=e.parentElement;t&&t.removeChild(e)}}_invalidateAccessibility(t){if(1==this._a11yD)return;this._focusElementDirty=!0;const e=t.getPrivate("focusElement");t.get("focusable")?e&&(this._decorateFocusElement(t),this._positionFocusElement(t)):e&&this._removeFocusElement(t)}focused(t){return this._focusedSprite===t}documentPointToRoot(t){const e=this._getRealSize(),i=this._getCalculatedSize(e),s=i.width/e.width,n=i.height/e.height;return{x:(t.x-e.left)*s,y:(t.y-e.top)*n}}rootPointToDocument(t){const e=this._getRealSize(),i=this._getCalculatedSize(e),s=i.width/e.width,n=i.height/e.height;return{x:t.x/s+e.left,y:t.y/n+e.top}}addDisposer(t){return this._disposers.push(t),t}_updateComputedStyles(){const t=window.getComputedStyle(this.dom);let e="";C.__(t,((t,i)=>{P.Kg(t)&&t.match(/^font/)&&(e+=i)}));const i=e!=this._fontHash;return i&&(this._fontHash=e),i}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(t){t instanceof n.m?t.children.each((t=>{this._invalidateLabelBounds(t)})):t instanceof r.E&&t.markDirtyBounds()}_hasLicense(){for(let t=0;t<Nt.u5.licenses.length;t++)if(Nt.u5.licenses[t].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(t){this._renderer.debugGhostView=t}set tapToActivate(t){this._renderer.tapToActivate=t}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(t){this._renderer.tapToActivateTimeout=t}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(t){const e=this._htmlElementContainer,i=document.createElement("div");return t.setPrivate("htmlElement",i),i.style.position="absolute",i.style.overflow="auto",i.style.boxSizing="border-box",d.Dt(i,t.get("interactive",!1)),t.events.isEnabled("click")&&(d.Dt(i,!0),this._disposers.push(d.q2(i,"click",(e=>{const i=this._renderer.getEvent(e);t.events.dispatch("click",{type:"click",originalEvent:i.event,point:i.point,simulated:!1,target:t})})))),this._positionHTMLElement(t),e.append(i),c.JJ(this._htmlEnabledContainers,t),i}_positionHTMLElements(){c.__(this._htmlEnabledContainers,(t=>{this._positionHTMLElement(t)}))}_positionHTMLElement(t){const e=t.getPrivate("htmlElement");if(e){const i=["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"];c.__(i,(i=>{const s=t.get(i);e.style[i]=s?s+"px":""}));const s=t.compositeScale()||1,n=t.compositeRotation()||0;e.style.transform="",e.style.transformOrigin="";const r=t.compositeOpacity();setTimeout((()=>{e.style.opacity=r+""}),10);const a=t.isVisibleDeep();a&&(e.style.display="block");const o=t.globalBounds();e.style.top=o.top+"px",e.style.left=o.left+"px";const l=t.get("width"),h=t.get("height");let d=0,u=0;if(l&&(d=t.width()),h&&(u=t.height()),l&&h)t.removePrivate("minWidth"),t.removePrivate("minHeight");else{e.style.position="fixed",e.style.width="",e.style.height="";const i=e.getBoundingClientRect();e.style.position="absolute",l||(d=i.width),h||(u=i.height),t._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},t.setPrivate("minWidth",d/s),t.setPrivate("minHeight",u/s)}d>0&&(e.style.minWidth=d+"px"),u>0&&(e.style.minHeight=u+"px"),a&&0!=r||(e.style.display="none"),1!=s&&(e.style.transform+="scale("+s+")"),0!=n&&(e.style.transform+=" rotate("+n+"deg)"),""!=e.style.transform&&(e.style.transformOrigin=t.get("centerX",0)+"%  "+t.get("centerY",0)+"%")}}_setHTMLContent(t,e){let i=t.getPrivate("htmlElement");i||(i=this._makeHTMLElement(t)),i.innerHTML!=e&&(i.innerHTML=e)}_removeHTMLContent(t){let e=t.getPrivate("htmlElement");e&&(this._htmlElementContainer.removeChild(e),t.removePrivate("htmlElement")),c.TF(this._htmlEnabledContainers,t)}}},1685:(t,e,i)=>{"use strict";i.d(e,{S:()=>a});var s=i(84923),n=i(54845),r=i(7552);class a{constructor(t,e){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=t,!e)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(t){const e=new this(t,!0);return e.setupDefaultRules(),e}setupDefaultRules(){}_lookupRules(t){return this._rules[t]}ruleRaw(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this._rules[t];i||(i=this._rules[t]=[]),e.sort(n.UD);const{index:a,found:o}=r.IU(i,(t=>{const i=n.UD(t.tags.length,e.length);return 0===i?n.HN(t.tags,e,n.UD):i}));if(o)return i[a].template;{const t=s.Bj.new({});return i.splice(a,0,{tags:e,template:t}),t}}rule(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ruleRaw(t,e)}}},17294:(t,e,i)=>{"use strict";i.d(e,{m:()=>g});var s=i(56873),n=i(7552);class r extends s.B8{constructor(t){super(),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=t,this._events=this.events.onAll((t=>{if("clear"===t.type)n.__(t.oldValues,(t=>{this._onRemoved(t)}));else if("push"===t.type)this._onInserted(t.newValue);else if("setIndex"===t.type)this._onRemoved(t.oldValue),this._onInserted(t.newValue,t.index);else if("insertIndex"===t.type)this._onInserted(t.newValue,t.index);else if("removeIndex"===t.type)this._onRemoved(t.oldValue);else{if("moveIndex"!==t.type)throw new Error("Unknown IListEvent type");this._onRemoved(t.value),this._onInserted(t.value,t.newIndex)}}))}_onInserted(t,e){t._setParent(this._container,!0);const i=this._container._childrenDisplay;void 0===e?i.addChild(t._display):i.addChildAt(t._display,e)}_onRemoved(t){this._container._childrenDisplay.removeChild(t._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),n.__(this.values,(t=>{t.dispose()})))}}var a=i(91120),o=i(76652),l=i(43260),h=i(78363),c=i(89901),d=i(25887),u=i(93218),p=i(55077),f=i(95788);class g extends o.k{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new r(this)}),Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_dispose(){n.W$(this.allChildren(),(t=>{t.dispose()})),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each((t=>{t.removePrivate("x"),t.removePrivate("y")}))),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each((t=>{t.markDirtyPosition()})),this.isDirty("maskContent")){const t=this._childrenDisplay;let e=this._contentMask;this.get("maskContent")?e||(e=l.M.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=e,t.addChildAt(e._display,0),t.mask=e._display):e&&(t.removeChild(e._display),t.mask=null,e.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),n.__(this._percentageSizeChildren,(t=>{t._updateSize()})),n.__(this._percentagePositionChildren,(t=>{t.markDirtyPosition(),t._updateSize()})),this.updateBackground()}updateBackground(){const t=this.get("background");let e=this._localBounds;if(e&&!this.isHidden()){let i=e.left,s=e.top,n=e.right-i,r=e.bottom-s,a=this.get("maxWidth"),o=this.get("maxHeight");o&&r>o&&(r=o),a&&n>a&&(n=a);let l=this.width(),h=this.height();t&&(t.setAll({width:n,height:r,x:i,y:s}),this._display.interactive&&(t._display.interactive=!0));const c=this._contentMask;c&&c.setAll({width:l+1,height:h+1});const d=this.get("verticalScrollbar");if(d){d.set("height",h),d.set("x",l-d.width()-d.get("marginRight",0)),d.set("end",d.get("start",0)+h/this._contentHeight);const t=d.get("background");t&&t.setAll({width:d.width(),height:h});let e=!0;this._contentHeight<=h&&(e=!1),d.setPrivate("visible",e)}}}_applyThemes(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!!super._applyThemes(t)&&(this.eachChildren((e=>{e._applyThemes(t)})),!0)}_applyState(t){super._applyState(t),this.get("setStateOnChildren")&&this.eachChildren((e=>{e.states.apply(t)}))}_applyStateAnimated(t,e){super._applyStateAnimated(t,e),this.get("setStateOnChildren")&&this.eachChildren((i=>{i.states.applyAnimate(t,e)}))}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){let t=this.get("width"),e=this.get("height"),i=this.getPrivate("width"),s=this.getPrivate("height"),n={left:0,top:0,right:this.width(),bottom:this.height()},r=this.get("layout"),a=!1,o=!1;if((r instanceof h.b||r instanceof d.J)&&(a=!0),r instanceof c.N&&(o=!0),null==t&&null==i||null==e&&null==s||this.get("verticalScrollbar")){let t=Number.MAX_VALUE,e=t,i=-t,s=t,r=-t;const l=this.get("paddingLeft",0),h=this.get("paddingTop",0),c=this.get("paddingRight",0),d=this.get("paddingBottom",0);this.children.each((t=>{if("absolute"!=t.get("position")&&t.get("isMeasured")){let n=t.adjustedLocalBounds(),l=t.x(),h=t.y(),c=l+n.left,d=l+n.right,u=h+n.top,p=h+n.bottom;a&&(c-=t.get("marginLeft",0),d+=t.get("marginRight",0)),o&&(u-=t.get("marginTop",0),p+=t.get("marginBottom",0)),c<e&&(e=c),d>i&&(i=d),u<s&&(s=u),p>r&&(r=p)}})),e==t&&(e=0),i==-t&&(i=0),s==t&&(s=0),r==-t&&(r=0),n.left=e-l,n.top=s-h,n.right=i+c,n.bottom=r+d;const u=this.get("minWidth");p.Et(u)&&u>0&&n.right-n.left<u&&(n.right>=u?n.left=n.right-u:n.right=n.left+u);const f=this.get("minHeight");p.Et(f)&&f>0&&n.bottom-n.top<f&&(n.bottom>=f?n.top=n.bottom-f:n.bottom=n.top+f)}else;this._contentWidth=n.right-n.left,this._contentHeight=n.bottom-n.top,p.Et(t)&&(n.left=0,n.right=t),p.Et(i)&&(n.left=0,n.right=i),p.Et(e)&&(n.top=0,n.bottom=e),p.Et(s)&&(n.top=0,n.bottom=s),this._localBounds=n}_updateBounds(){const t=this.get("layout");t&&t.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){const t=this.innerWidth(),e=this.innerHeight();if(t!=this._prevWidth||e!=this._prevHeight){let i=this.get("layout"),s=!1,r=!1;i&&((i instanceof h.b||i instanceof d.J)&&(s=!0),i instanceof c.N&&(r=!0)),n.__(this._percentageSizeChildren,(i=>{if(!s){let e=i.get("width");e instanceof a.QE&&i.setPrivate("width",e.value*t)}if(!r){let t=i.get("height");t instanceof a.QE&&i.setPrivate("height",t.value*e)}})),n.__(this._percentagePositionChildren,(t=>{t.markDirtyPosition(),t.markDirtyBounds()})),this._prevWidth=t,this._prevHeight=e,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}_updateHTMLContent(){const t=this.get("html");t&&""!==t?this._root._setHTMLContent(this,(0,u.I)(this,this.get("html",""))):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}scrollToChild(t){const e=this.get("verticalScrollbar");if(e){let i=t.y(),s=this.innerHeight(),n=t.height(),r=this._contentHeight,a=(s-n/2)/r;if(i+.7*n+this._childrenDisplay.y>s||i-.3*n+this._childrenDisplay.y<0){let t=Math.max(0,Math.min(a,(i-n/2)/r));e.animate({key:"start",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")})}}}_updateChildren(){if(this.isDirty("html")&&this._updateHTMLContent(),this.isDirty("verticalScrollbar")){const t=this.get("verticalScrollbar");if(t){t._setParent(this),t.startGrip.setPrivate("visible",!1),t.endGrip.setPrivate("visible",!1),this.set("maskContent",!0),this.set("paddingRight",t.width()+t.get("marginRight",0)+t.get("marginLeft",0));let e=this.get("background");e||(e=this.set("background",l.M.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",(e=>{const i=e.originalEvent;if(!f.ay(i,this))return;i.preventDefault();let s=i.deltaY/5e3;const n=t.get("start",0),r=t.get("end",1);n+s<=0&&(s=-n),r+s>=1&&(s=1-r),n+s>=0&&r+s<=1&&(t.set("start",n+s),t.set("end",r+s))})),this._disposers.push(this._vsbd0),this._vsbd1=t.events.on("rangechanged",(()=>{let e=this._contentHeight;const i=this._childrenDisplay,s=this._contentMask;i.y=-t.get("start",0)*e,i.markDirtyLayer(),s&&(s._display.y=-i.y,i.mask=s._display)})),this._disposers.push(this._vsbd1),this._display.addChild(t._display)}else{const t=this._prevSettings.verticalScrollbar;if(t){this._display.removeChild(t._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose();this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0)}}}if(this.isDirty("background")){const t=this._prevSettings.background;t&&this._display.removeChild(t._display);const e=this.get("background");e instanceof o.k&&(e.set("isMeasured",!1),e._setParent(this),this._display.addChildAt(e._display,0))}if(this.isDirty("mask")){const t=this.get("mask"),e=this._prevSettings.mask;if(e&&(this._display.removeChild(e._display),e!=t&&e.dispose()),t){const e=t.parent;e&&e.children.removeValue(t),t._setParent(this),this._display.addChildAt(t._display,0),this._childrenDisplay.mask=t._display}}}_processTemplateField(){super._processTemplateField(),this.children.each((t=>{t._processTemplateField()}))}walkChildren(t){this.children.each((e=>{e instanceof g&&e.walkChildren(t),t(e)}))}eachChildren(t){const e=this.get("background");e&&t(e);const i=this.get("verticalScrollbar");i&&t(i);const s=this.get("mask");s&&t(s),this.children.values.forEach((e=>{t(e)}))}allChildren(){const t=[];return this.eachChildren((e=>{t.push(e)})),t}_setDataItem(t){const e=t!==this._dataItem;super._setDataItem(t);const i=this.get("html","");i&&""!==i&&e&&this._root._setHTMLContent(this,(0,u.I)(this,i))}}Object.defineProperty(g,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(g,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:o.k.classNames.concat([g.className])})},11110:(t,e,i)=>{"use strict";i.d(e,{A:()=>d,o:()=>c});var s=i(2857);class n extends s.wC{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fillOpacity"))&&(this._clear=!0),this._checkDirtyFill()}_checkDirtyFill(){(this.isDirty("color")||this.isDirty("fill"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const t=this.get("repetition",""),e=this.get("width",100),i=this.get("height",100),s=this.get("fill"),n=this.get("fillOpacity",1),r=this._backgroundDisplay,a=this._display;a.clear(),r.clear(),s&&n>0&&(r.beginFill(s,n),r.drawRect(0,0,e,i),r.endFill()),a.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(a,r,t,e,i)}this._clear=!1}}Object.defineProperty(n,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(n,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.wC.classNames.concat([n.className])});class r extends n{constructor(){super(...arguments),Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load();const t=this.get("canvas");t&&(this.set("width",t.width),this.set("height",t.height))}_draw(){super._draw();const t=this._image;if(t){const e=this.get("width",100),i=this.get("height",100),s=this.get("fit","image");let n=0,r=0;"pattern"==s?(n=e,r=i):(n=t.width,r=t.height,"image"==s&&(this.set("width",n),this.set("height",r)));let a=0,o=0;this.get("centered",!0)&&(a=e/2-n/2,o=i/2-r/2),this._display.image(t,n,r,a,o)}const e=this.get("canvas");e&&this._display.image(e,e.width,e.height,0,0)}_load(){const t=this.get("src");if(t){const e=new Image;e.src=t,e.decode().then((()=>{this._image=e,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})})).catch((t=>{}))}}}Object.defineProperty(r,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(r,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.classNames.concat([r.className])});var a=i(76652),o=i(98639),l=i(55077),h=i(7552);const c=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset","shadowBlur","shadowColor","shadowOpacity","shadowOffsetX","shadowOffsetY","blur","sepia","invert","brightness","hue","contrast","saturate"];class d extends a.k{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const t=this.get("fillGradient");if(t){this._display.isMeasured=!0;const e=t.get("target");e&&(this._disposers.push(e.events.on("boundschanged",(()=>{this._markDirtyKey("fill")}))),this._disposers.push(e.events.on("positionchanged",(()=>{this._markDirtyKey("fill")}))))}}if(this.isDirty("strokeGradient")){const t=this.get("strokeGradient");if(t){this._display.isMeasured=!0;const e=t.get("target");e&&(this._disposers.push(e.events.on("boundschanged",(()=>{this._markDirtyKey("stroke")}))),this._disposers.push(e.events.on("positionchanged",(()=>{this._markDirtyKey("stroke")}))))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let t=this.get("strokeDasharray");l.Et(t)&&(t=t<.5?[0]:[t]),this._display.setLineDash(t);const e=this.get("strokeDashoffset");e&&this._display.setLineDashOffset(e);const i=this.get("blendMode",o.N.NORMAL);this._display.blendMode=i;const s=this.get("draw");s&&"function"===typeof s&&s(this._display,this);const n=this.get("svgPath");null!=n&&this._display.svgPath(n)}}_afterChanged(){if(super._afterChanged(),this._clear){const t=this.get("fill"),e=this.get("fillGradient"),i=this.get("fillPattern"),s=this.get("fillOpacity"),n=this.get("stroke"),a=this.get("strokeGradient"),o=this.get("strokePattern"),l=this.get("shadowColor"),c=this.get("shadowBlur"),d=this.get("shadowOffsetX"),u=this.get("shadowOffsetY"),p=this.get("shadowOpacity");if(l&&(c||d||u)&&this._display.shadow(l,c,d,u,p),t&&!e&&(this._display.beginFill(t,s),this._display.endFill()),e){if(t){const i=e.get("stops",[]);i.length&&h.__(i,(e=>{e.color&&!e.colorInherited||!t||(e.color=t,e.colorInherited=!0),(null==e.opacity||e.opacityInherited)&&(e.opacity=s,e.opacityInherited=!0)}))}const i=e.getFill(this);i&&(this._display.beginFill(i,s),this._display.endFill())}if(i){const t=i.pattern;t&&(this._display.beginFill(t,s),this._display.endFill(),i instanceof r&&i.events.once("loaded",(()=>{this._clear=!0,this.markDirty()})))}if(n||a||o){const t=this.get("strokeOpacity");let e=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(e/=this.get("scale",1)),this.get("crisp")&&(e/=this._root._renderer.resolution);const i=this.get("lineJoin");if(n&&!a&&(this._display.lineStyle(e,n,t,i),this._display.endStroke()),a){const s=a.get("stops",[]);s.length&&h.__(s,(e=>{e.color&&!e.colorInherited||!n||(e.color=n,e.colorInherited=!0),(null==e.opacity||e.opacityInherited)&&(e.opacity=t,e.opacityInherited=!0)}));const r=a.getFill(this);r&&(this._display.lineStyle(e,r,t,i),this._display.endStroke())}if(o){let s=o.pattern;s&&(this._display.lineStyle(e,s,t,i),this._display.endStroke(),o instanceof r&&o.events.once("loaded",(()=>{this._clear=!0,this.markDirty()})))}}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}Object.defineProperty(d,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(d,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:a.k.classNames.concat([d.className])})},25887:(t,e,i)=>{"use strict";i.d(e,{J:()=>a});var s=i(327),n=i(7552),r=i(711);class a extends s.P{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(t){let e=t.get("paddingLeft",0),i=t.get("paddingRight",0),n=t.get("paddingTop",0),a=t.maxWidth()-e-i,o=a,l=1;(0,s.l)(t,(t=>{if(t.get("visible")&&t.getPrivate("visible")&&!t.get("forceHidden")&&"absolute"!=t.get("position")){let e=t.width();e<o&&(o=e),e>l&&(l=e)}})),o=r.s_(o,1,a),l=r.s_(l,1,a);let h=1;h=this.get("fixedWidthGrid")?a/l:a/o,h=Math.max(1,Math.floor(h)),h=Math.min(this.get("maxColumns",Number.MAX_VALUE),h);let c=this.getColumnWidths(t,h,l,a),d=n,u=0,p=0;h=c.length;let f=e;(0,s.l)(t,(t=>{if("relative"==t.get("position")&&t.isVisible()){const i=t.get("marginTop",0),s=t.get("marginBottom",0);let n=t.adjustedLocalBounds(),r=t.get("marginLeft",0),a=t.get("marginRight",0),o=f+r-n.left,l=d+i-n.top;t.setPrivate("x",o),t.setPrivate("y",l),f+=c[u]+a,p=Math.max(p,t.height()+i+s),u++,u>=h&&(u=0,f=e,d+=p)}}))}getColumnWidths(t,e,i,r){let a=0,o=[],l=0;return(0,s.l)(t,(s=>{let n=s.adjustedLocalBounds();"absolute"!=s.get("position")&&s.isVisible()&&(this.get("fixedWidthGrid")?o[l]=i:o[l]=Math.max(0|o[l],n.right-n.left+s.get("marginLeft",0)+s.get("marginRight",0)),l<t.children.length-1&&(l++,l==e&&(l=0)))})),n.__(o,(t=>{a+=t})),a>r?e>2?(e-=1,this.getColumnWidths(t,e,i,r)):[r]:o}}Object.defineProperty(a,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(a,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.P.classNames.concat([a.className])})},78363:(t,e,i)=>{"use strict";i.d(e,{b:()=>a});var s=i(327),n=i(55077),r=i(91120);class a extends s.P{updateContainer(t){let e=t.get("paddingLeft",0),i=t.innerWidth(),a=0;(0,s.l)(t,(t=>{if(t.isVisible()&&"relative"==t.get("position")){let e=t.get("width");if(e instanceof r.QE){a+=e.value;let s=i*e.value,n=t.get("minWidth",t.getPrivate("minWidth",-1/0));n>s&&(i-=n,a-=e.value);let r=t.get("maxWidth",t.getPrivate("maxWidth",1/0));s>r&&(i-=r,a-=e.value)}else n.Et(e)||(e=t.width()),i-=e+t.get("marginLeft",0)+t.get("marginRight",0)}})),(i<=0||i==1/0)&&(i=.1),(0,s.l)(t,(t=>{if(t.isVisible()&&"relative"==t.get("position")){let e=t.get("width");if(e instanceof r.QE){let s=i*e.value/a-t.get("marginLeft",0)-t.get("marginRight",0),n=t.get("minWidth",t.getPrivate("minWidth",-1/0)),r=t.get("maxWidth",t.getPrivate("maxWidth",1/0));s=Math.min(Math.max(n,s),r),t.setPrivate("width",s)}else t._prevSettings.width instanceof r.QE&&t.setPrivate("width",void 0)}}));let o=e;(0,s.l)(t,(t=>{if("relative"==t.get("position"))if(t.isVisible()){let e=t.adjustedLocalBounds(),i=t.get("marginLeft",0),s=t.get("marginRight",0),n=t.get("maxWidth"),r=e.left,a=e.right;n&&a-r>n&&(a=r+n);let l=o+i-r;t.setPrivate("x",l),o=l+a+s}else t.setPrivate("x",void 0)}))}}Object.defineProperty(a,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(a,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.P.classNames.concat([a.className])})},89867:(t,e,i)=>{"use strict";i.d(e,{J:()=>l});var s=i(89638),n=i(91120),r=i(17294),a=i(7552),o=i(55077);class l extends r.m{constructor(){super(...arguments),Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillGradient","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting","maxChars","ariaLabel"]})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),a.__(this._textKeys,(t=>{const e=this.get(t);void 0!=e&&this._text.set(t,e)})),""!==this.get("html","")&&this._text.set("text",""),this.onPrivate("maxWidth",(()=>{this._setMaxDimentions()})),this.onPrivate("maxHeight",(()=>{this._setMaxDimentions()}))}_makeText(){this._text=this.children.push(s.E.new(this._root,{}))}_updateChildren(){super._updateChildren();const t=this._text;if(a.__(this._textKeys,(t=>{this._text.set(t,this.get(t))})),(this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isDirty("rotation"))&&this._setMaxDimentions(),""!==this.get("html","")?t.set("text",""):(t.set("text",this.get("text")),this._maybeUpdateHTMLColor()),(this.isDirty("fill")||this.isDirty("fillGradient"))&&this._maybeUpdateHTMLColor(),this.isDirty("textAlign")||this.isDirty("width")){const e=this.get("textAlign");let i;null!=this.get("width")?i="right"==e?n.Q2:"center"==e?n.yP:0:"left"==e||"start"==e?i=this.get("paddingLeft",0):"right"!=e&&"end"!=e||(i=-this.get("paddingRight",0)),t.set("x",i)}const e=this.get("background");e&&e.setPrivate("visible",t._display.textVisible)}_maybeUpdateHTMLColor(){const t=this.getPrivate("htmlElement");t&&this.get("fill")&&(t.style.color=this.get("fill").toCSSHex())}_setMaxDimentions(){const t=this.get("rotation"),e=90==t||270==t||-90==t,i=this._text,s=this.get("maxWidth",this.getPrivate("maxWidth",1/0));o.Et(s)?i.set(e?"maxHeight":"maxWidth",s-this.get("paddingLeft",0)-this.get("paddingRight",0)):i.set(e?"maxHeight":"maxWidth",void 0);const n=this.get("maxHeight",this.getPrivate("maxHeight",1/0));o.Et(n)?i.set(e?"maxWidth":"maxHeight",n-this.get("paddingTop",0)-this.get("paddingBottom",0)):i.set(e?"maxWidth":"maxHeight",void 0),this.root.events.once("frameended",(()=>{i.markDirtyBounds()}))}_setDataItem(t){super._setDataItem(t),this._markDirtyKey("text");const e=this._text;e.get("populateText")&&e.markDirtyText();const i=this.get("html");i&&""!==i&&this._updateHTMLContent()}getText(){return this._text._getText()}getAccessibleText(){return this._text._getAccessibleText()}}Object.defineProperty(l,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(l,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:r.m.classNames.concat([l.className])})},327:(t,e,i)=>{"use strict";i.d(e,{P:()=>r,l:()=>n});var s=i(2857);function n(t,e){t.get("reverseChildren",!1)?t.children.eachReverse(e):t.children.each(e)}class r extends s.wC{}Object.defineProperty(r,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(r,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.wC.classNames.concat([r.className])})},81372:(t,e,i)=>{"use strict";i.d(e,{s:()=>p});var s=i(51781),n=i(17294),r=i(89867),a=i(55077),o=i(711),l=i(95788),h=i(43260);class c extends h.M{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let t=this.width(),e=this.height(),i=t,s=e,n=i/Math.abs(t),r=s/Math.abs(e);if(a.Et(i)&&a.Et(s)){let t=Math.min(i,s)/2,e=l.JY(this.get("cornerRadiusTL",8),t),a=l.JY(this.get("cornerRadiusTR",8),t),h=l.JY(this.get("cornerRadiusBR",8),t),c=l.JY(this.get("cornerRadiusBL",8),t),d=Math.min(Math.abs(i/2),Math.abs(s/2));e=o.s_(e,0,d),a=o.s_(a,0,d),h=o.s_(h,0,d),c=o.s_(c,0,d);const u=this._display;u.moveTo(e*n,0),u.lineTo(i-a*n,0),a>0&&u.arcTo(i,0,i,a*r,a),u.lineTo(i,s-h*r),h>0&&u.arcTo(i,s,i-h*n,s,h),u.lineTo(c*n,s),c>0&&u.arcTo(0,s,0,s-c*r,c),u.lineTo(0,e*r),e>0&&u.arcTo(0,0,e*n,0,e),u.closePath()}}}Object.defineProperty(c,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(c,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.M.classNames.concat([c.className])});var d=i(84923),u=i(56873);class p extends s.s{constructor(){super(...arguments),Object.defineProperty(this,"itemContainers",{enumerable:!0,configurable:!0,writable:!0,value:new u.TS(d.Bj.new({}),(()=>n.m._new(this._root,{themeTags:l.kE(this.itemContainers.template.get("themeTags",[]),["legend","item"]),themeTagsSelf:l.kE(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"]),background:c.new(this._root,{themeTags:l.kE(this.itemContainers.template.get("themeTags",[]),["legend","item","background"]),themeTagsSelf:l.kE(this.itemContainers.template.get("themeTagsSelf",[]),["itemcontainer"])})},[this.itemContainers.template])))}),Object.defineProperty(this,"markers",{enumerable:!0,configurable:!0,writable:!0,value:new u.TS(d.Bj.new({}),(()=>n.m._new(this._root,{themeTags:l.kE(this.markers.template.get("themeTags",[]),["legend","marker"])},[this.markers.template])))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new u.TS(d.Bj.new({}),(()=>r.J._new(this._root,{themeTags:l.kE(this.labels.template.get("themeTags",[]),["legend","label"])},[this.labels.template])))}),Object.defineProperty(this,"valueLabels",{enumerable:!0,configurable:!0,writable:!0,value:new u.TS(d.Bj.new({}),(()=>r.J._new(this._root,{themeTags:l.kE(this.valueLabels.template.get("themeTags",[]),["legend","label","value"])},[this.valueLabels.template])))}),Object.defineProperty(this,"markerRectangles",{enumerable:!0,configurable:!0,writable:!0,value:new u.TS(d.Bj.new({}),(()=>c._new(this._root,{themeTags:l.kE(this.markerRectangles.template.get("themeTags",[]),["legend","marker","rectangle"])},[this.markerRectangles.template])))})}_afterNew(){this._settings.themeTags=l.kE(this._settings.themeTags,["legend"]),this.fields.push("name","stroke","fill"),super._afterNew()}makeItemContainer(t){const e=this.children.push(this.itemContainers.make());return e._setDataItem(t),this.itemContainers.push(e),e.states.create("disabled",{}),e}makeMarker(){const t=this.markers.make();return this.markers.push(t),t.states.create("disabled",{}),t}makeLabel(){const t=this.labels.make();return t.states.create("disabled",{}),t}makeValueLabel(){const t=this.valueLabels.make();return t.states.create("disabled",{}),t}makeMarkerRectangle(){const t=this.markerRectangles.make();return t.states.create("disabled",{}),t}processDataItem(t){super.processDataItem(t);const e=this.makeItemContainer(t),i=this.get("nameField"),s=this.get("fillField"),n=this.get("strokeField");if(e){const r=this.get("clickTarget","itemContainer"),a=t.dataContext;a&&a.set&&a.set("legendDataItem",t),e._setDataItem(t),t.set("itemContainer",e);const o=this.makeMarker();if(o){e.children.push(o),o._setDataItem(t),t.set("marker",o);const i=this.get("useDefaultMarker"),r=o.children.push(this.makeMarkerRectangle());let l=t.get("fill"),h=t.get("stroke");t.set("markerRectangle",r),a&&a.get&&(l=a.get(s,l),h=a.get(n,h)),h||(h=l),i?a.on&&(a.on(s,(()=>{r.set("fill",a.get(s))})),a.on(n,(()=>{r.set("stroke",a.get(n))}))):a&&a.createLegendMarker&&a.createLegendMarker(),r.setAll({fill:l,stroke:h});const c=a.component;c&&c.updateLegendMarker&&c.updateLegendMarker(a)}const l=this.makeLabel();if(l){e.children.push(l),l._setDataItem(t),t.set("label",l),l.text.on("text",(()=>{e.setRaw("ariaLabel",l.text._getText()+("none"!==this.get("clickTarget")?"; "+this._t("Press ENTER to toggle"):"")),e.markDirtyAccessibility()})),a&&a.get&&t.set("name",a.get(i));let s=t.get("name");s&&l.set("text",s)}const h=this.makeValueLabel();if(h&&(e.children.push(h),h._setDataItem(t),t.set("valueLabel",h)),a&&a.show&&(a.on("visible",(t=>{e.set("disabled",!t)})),a.get("visible")||e.set("disabled",!0),"none"!=r)){let i=e;"marker"==r&&(i=o),this._addClickEvents(i,a,t)}this.children.values.sort(((t,e)=>{const i=t.dataItem.dataContext,s=e.dataItem.dataContext;if(i&&s){const t=this.data.indexOf(i),e=this.data.indexOf(s);if(t>e)return 1;if(t<e)return-1}return 0})),a&&a.updateLegendValue&&a.updateLegendValue()}}_addClickEvents(t,e,i){t.set("cursorOverStyle","pointer"),t.events.on("pointerover",(()=>{const t=e.component;t&&t.hoverDataItem&&t.hoverDataItem(e)})),t.events.on("pointerout",(()=>{const t=e.component;t&&t.hoverDataItem&&t.unhoverDataItem(e)})),t.events.on("click",(()=>{const s=i.get("label").text._getText();e.show&&e.isHidden&&(e.isHidden()||!1===e.get("visible"))?(e.show(),t.set("disabled",!1),this._root.readerAlert(this._t("%1 shown",this._root.locale,s))):e.hide&&(e.hide(),t.set("disabled",!0),this._root.readerAlert(this._t("%1 hidden",this._root.locale,s)))}))}disposeDataItem(t){super.disposeDataItem(t);const e=t.dataContext;if(e&&e.get){e.get("legendDataItem")==t&&e.set("legendDataItem",void 0)}let i=t.get("itemContainer");i&&(this.itemContainers.removeValue(i),i.dispose());let s=t.get("marker");s&&(this.markers.removeValue(s),s.dispose());let n=t.get("markerRectangle");n&&(this.markerRectangles.removeValue(n),n.dispose());let r=t.get("label");r&&(this.labels.removeValue(r),r.dispose());let a=t.get("valueLabel");a&&(this.valueLabels.removeValue(a),a.dispose())}}Object.defineProperty(p,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Legend"}),Object.defineProperty(p,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.s.classNames.concat([p.className])})},43260:(t,e,i)=>{"use strict";i.d(e,{M:()=>n});var s=i(11110);class n extends s.A{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty(),this._clear=!0}}Object.defineProperty(n,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(n,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.A.classNames.concat([n.className])})},51781:(t,e,i)=>{"use strict";i.d(e,{s:()=>v});var s=i(6326),n=i(2857),r=i(17294),a=i(56873);class o extends a.B8{constructor(){super(...arguments),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}incrementRef(){}decrementRef(){}_onPush(t){this.processor&&this.processor.processRow(t),super._onPush(t)}_onInsertIndex(t,e){this.processor&&this.processor.processRow(e),super._onInsertIndex(t,e)}_onSetIndex(t,e,i){this.processor&&this.processor.processRow(i),super._onSetIndex(t,e,i)}}var l=i(7552),h=i(40730);class c extends n.wB{constructor(t,e,i){super(i),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dataContext=e,this.component=t,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(t){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,t)}hide(t){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,t)}isHidden(){return!this.get("visible")}}class d extends r.m{constructor(){super(...arguments),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new o}),Object.defineProperty(this,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:this._dataItems}),Object.defineProperty(this,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(this,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1})}set data(t){t.incrementRef(),this._data.decrementRef(),this._data=t}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll((t=>{const e=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,"clear"===t.type)l.__(e,(t=>{t.dispose()})),e.length=0,this._onDataClear();else if("push"===t.type){const i=new c(this,t.newValue,this._makeDataItem(t.newValue));e.push(i),this.processDataItem(i)}else if("setIndex"===t.type){const i=e[t.index],s=this._makeDataItem(t.newValue);i.bullets&&0==i.bullets.length&&(i.bullets=void 0),h.HP(s).forEach((t=>{i.animate({key:t,to:s[t],duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})})),i.dataContext=t.newValue}else if("insertIndex"===t.type){const i=new c(this,t.newValue,this._makeDataItem(t.newValue));e.splice(t.index,0,i),this.processDataItem(i)}else if("removeIndex"===t.type){e[t.index].dispose(),e.splice(t.index,1)}else{if("moveIndex"!==t.type)throw new Error("Unknown IStreamEvent type");{const i=e[t.oldIndex];e.splice(t.oldIndex,1),e.splice(t.newIndex,0,i)}}this._afterDataChange()})))}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},l.__(this.valueFields,(t=>{this.get(t+"Field")&&(this._valueFields.push(t),this._valueFieldsF[t]={fieldKey:t+"Field",workingKey:t+"Working"})}))),this.fields&&(this._fields=[],this._fieldsF={},l.__(this.fields,(t=>{this.get(t+"Field")&&(this._fields.push(t),this._fieldsF[t]=t+"Field")})))}get dataItems(){return this._dataItems}processDataItem(t){}_makeDataItem(t){const e={};return this._valueFields&&l.__(this._valueFields,(i=>{const s=this.get(this._valueFieldsF[i].fieldKey);e[i]=t[s],e[this._valueFieldsF[i].workingKey]=e[i]})),this._fields&&l.__(this._fields,(i=>{const s=this.get(this._fieldsF[i]);e[i]=t[s]})),e}makeDataItem(t,e){let i=new c(this,e,t);return this.processDataItem(i),i}pushDataItem(t,e){const i=this.makeDataItem(t,e);return this._mainDataItems.push(i),i}disposeDataItem(t){}showDataItem(t,e){return(0,s.sH)(this,void 0,void 0,(function*(){t.set("visible",!0)}))}hideDataItem(t,e){return(0,s.sH)(this,void 0,void 0,(function*(){t.set("visible",!1)}))}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const t="datavalidated";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this}),this._dataChanged=!1}this.inited=!0}markDirtyValues(t){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}}Object.defineProperty(d,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"}),Object.defineProperty(d,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:r.m.classNames.concat([d.className])});var u=i(81046),p=i(19727),f=i(91120),g=i(89867),m=i(55077);class v extends d{constructor(){super(...arguments),Object.defineProperty(this,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new a.B8}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:r.m.new(this._root,{width:f.Q2,height:f.Q2,position:"absolute"})})}_afterNew(){this.valueFields.push("value","customValue"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll((t=>{if("clear"===t.type)this._handleBullets(this.dataItems);else if("push"===t.type)this._handleBullets(this.dataItems);else if("setIndex"===t.type)this._handleBullets(this.dataItems);else if("insertIndex"===t.type)this._handleBullets(this.dataItems);else if("removeIndex"===t.type)this._handleBullets(this.dataItems);else{if("moveIndex"!==t.type)throw new Error("Unknown IListEvent type");this._handleBullets(this.dataItems)}})))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let t=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),t)}endIndex(){let t=this.dataItems.length;return Math.min(this.getPrivate("endIndex",t),t)}_handleBullets(t){l.__(t,(t=>{const e=t.bullets;e&&(l.__(e,(t=>{t.dispose()})),t.bullets=void 0)})),this.markDirtyValues()}getDataItemById(t){return l.I6(this.dataItems,(e=>e.get("id")==t))}_makeBullets(t){this._shouldMakeBullet(t)&&(t.bullets=[],this.bullets.each((e=>{this._makeBullet(t,e)})))}_shouldMakeBullet(t){return!0}_makeBullet(t,e,i){const s=e(this._root,this,t);return s&&(s._index=i,this._makeBulletReal(t,s)),s}_makeBulletReal(t,e){let i=e.get("sprite");i&&(i._setDataItem(t),i.setRaw("position","absolute"),this.bulletsContainer.children.push(i)),e.series=this,t.bullets.push(e)}addBullet(t,e){t.bullets||(t.bullets=[]),e&&this._makeBulletReal(t,e)}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();let t=this.startIndex(),e=this.endIndex();if(this.isDirty("name")&&this.updateLegendValue(),this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const t=this.getPrivate("baseValueSeries");t&&this._disposers.push(t.onPrivate("startIndex",(()=>{this.markDirtyValues()})))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0,0!=t&&(this._psi=void 0))),this._psi==t&&this._pei==e&&!this.isPrivateDirty("adjustedStartIndex")||this._selectionAggregatesCalculated||(0===t&&e===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(t,e),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let t=this.get("tooltip");t&&(t.hide(0),t.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let t;const e=this.get("legendDataItem");if(e&&(t=e.get("markerRectangle"),t&&this.isVisible())){if(this.isDirty("stroke")){let e=this.get("stroke");t.set("stroke",e)}if(this.isDirty("fill")){let e=this.get("fill");t.set("fill",e)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let t=this.startIndex(),e=this.endIndex();e<this.dataItems.length&&e++;for(let i=t;i<e;i++){let t=this.dataItems[i];t.bullets||this._makeBullets(t)}}}_adjustStartIndex(t){return t}_calculateAggregates(t,e){let i=this._valueFields;if(!i)throw new Error("No value fields are set for the series.");const s={},n={},r={},a={},o={},h={},c={},d={},u={};l.__(i,(t=>{s[t]=0,n[t]=0,r[t]=0})),l.__(i,(i=>{let l=i+"Change",p=i+"ChangePercent",f=i+"ChangePrevious",g=i+"ChangePreviousPercent",m=i+"ChangeSelection",v=i+"ChangeSelectionPercent",b="valueY";"valueX"!=i&&"openValueX"!=i&&"lowValueX"!=i&&"highValueX"!=i||(b="valueX");const y=this.getPrivate("baseValueSeries"),_=this.getPrivate("adjustedStartIndex",t);for(let w=_;w<e;w++){const e=this.dataItems[w];if(e){let _=e.get(i);null!=_&&(r[i]++,s[i]+=_,n[i]+=Math.abs(_),d[i]=s[i]/r[i],(a[i]>_||null==a[i])&&(a[i]=_),(o[i]<_||null==o[i])&&(o[i]=_),c[i]=_,null==h[i]&&(h[i]=_,u[i]=_,y&&(h[b]=y._getBase(b))),0===t&&(e.setRaw(l,_-h[b]),e.setRaw(p,(_-h[b])/h[b]*100)),e.setRaw(f,_-u[b]),e.setRaw(g,(_-u[b])/u[b]*100),e.setRaw(m,_-h[b]),e.setRaw(v,(_-h[b])/h[b]*100),u[i]=_)}}if(e<this.dataItems.length-1){const t=this.dataItems[e];if(t){let e=t.get(i);t.setRaw(f,e-u[b]),t.setRaw(g,(e-u[b])/u[b]*100),t.setRaw(m,e-h[b]),t.setRaw(v,(e-h[b])/h[b]*100)}}t>0&&t--,delete u[i];for(let e=t;e<_;e++){const t=this.dataItems[e];if(t){let e=t.get(i);null==u[i]&&(u[i]=e),null!=e&&(t.setRaw(f,e-u[b]),t.setRaw(g,(e-u[b])/u[b]*100),t.setRaw(m,e-h[b]),t.setRaw(v,(e-h[b])/h[b]*100),u[i]=e)}}})),l.__(i,(t=>{this.setPrivate(t+"AverageSelection",d[t]),this.setPrivate(t+"CountSelection",r[t]),this.setPrivate(t+"SumSelection",s[t]),this.setPrivate(t+"AbsoluteSumSelection",n[t]),this.setPrivate(t+"LowSelection",a[t]),this.setPrivate(t+"HighSelection",o[t]),this.setPrivate(t+"OpenSelection",h[t]),this.setPrivate(t+"CloseSelection",c[t])})),0===t&&e===this.dataItems.length&&l.__(i,(t=>{this.setPrivate(t+"Average",d[t]),this.setPrivate(t+"Count",r[t]),this.setPrivate(t+"Sum",s[t]),this.setPrivate(t+"AbsoluteSum",n[t]),this.setPrivate(t+"Low",a[t]),this.setPrivate(t+"High",o[t]),this.setPrivate(t+"Open",h[t]),this.setPrivate(t+"Close",c[t])}))}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const t=this.get("heatRules");if(this._valuesDirty&&t&&t.length>0&&l.__(t,(t=>{const e=t.minValue||this.getPrivate(t.dataField+"Low")||0,i=t.maxValue||this.getPrivate(t.dataField+"High")||0;l.__(t.target._entities,(s=>{const n=s.dataItem.get(t.dataField);if(!m.Et(n)){t.neutral&&s.set(t.key,t.neutral);const e=s.states;if(e){const i=e.lookup("default");i&&t.neutral&&i.set(t.key,t.neutral)}if(!t.customFunction)return}if(t.customFunction)t.customFunction.call(this,s,e,i,n);else{let r,a;r=t.logarithmic?(Math.log(n)*Math.LOG10E-Math.log(e)*Math.LOG10E)/(Math.log(i)*Math.LOG10E-Math.log(e)*Math.LOG10E):(n-e)/(i-e),!m.Et(n)||m.Et(r)&&Math.abs(r)!=1/0||(r=.5),m.Et(t.min)?a=t.min+(t.max-t.min)*r:t.min instanceof u.Q1?a=u.Q1.interpolate(r,t.min,t.max):t.min instanceof f.QE&&(a=(0,p.zR)(r,t.min,t.max)),s.set(t.key,a);const o=s.states;if(o){const e=o.lookup("default");e&&e.set(t.key,a)}}}))})),this.get("visible")){let t=this.dataItems.length,e=this.startIndex(),i=this.endIndex();i<t&&i++,e>0&&e--;for(let s=0;s<e;s++)this._hideBullets(this.dataItems[s]);for(let s=e;s<i;s++)this._positionBullets(this.dataItems[s]);for(let s=i;s<t;s++)this._hideBullets(this.dataItems[s])}}_positionBullets(t){t.bullets&&l.__(t.bullets,(t=>{this._positionBullet(t);const e=t.get("sprite");t.get("dynamic")&&(e&&(e._markDirtyKey("fill"),e.markDirtySize()),e instanceof r.m&&e.walkChildren((t=>{t._markDirtyKey("fill"),t.markDirtySize(),t instanceof g.J&&t.text.markDirtyText()}))),e instanceof g.J&&e.get("populateText")&&e.text.markDirtyText()}))}_hideBullets(t){t.bullets&&l.__(t.bullets,(t=>{let e=t.get("sprite");e&&e.setPrivate("visible",!1)}))}_positionBullet(t){}_placeBulletsContainer(t){t.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const t=this.bulletsContainer;t.parent&&t.parent.children.removeValue(t)}disposeDataItem(t){const e=t.bullets;e&&l.__(e,(t=>{t.dispose()}))}_getItemReaderLabel(){return""}showDataItem(t,e){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,s.sH)(this,void 0,void 0,(function*(){const s=[i.showDataItem.call(this,t,e)],n=t.bullets;n&&l.__(n,(t=>{const i=t.get("sprite");i&&s.push(i.show(e))})),yield Promise.all(s)}))}hideDataItem(t,e){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,s.sH)(this,void 0,void 0,(function*(){const s=[i.hideDataItem.call(this,t,e)],n=t.bullets;n&&l.__(n,(t=>{const i=t.get("sprite");i&&s.push(i.hide(e))})),yield Promise.all(s)}))}_sequencedShowHide(t,e){return(0,s.sH)(this,void 0,void 0,(function*(){if(this.get("sequencedInterpolation"))if(m.Et(e)||(e=this.get("interpolationDuration",0)),e>0){const i=this.startIndex(),n=this.endIndex();yield Promise.all(l.Tj(this.dataItems,((r,a)=>(0,s.sH)(this,void 0,void 0,(function*(){let s=e||0;(a<i-10||a>n+10)&&(s=0);let o=this.get("sequencedDelay",0)+s/(n-i);var l;yield(l=o*(a-i),new Promise(((t,e)=>{setTimeout(t,l)}))),t?yield this.showDataItem(r,s):yield this.hideDataItem(r,s)})))))}else yield Promise.all(l.Tj(this.dataItems,(e=>t?this.showDataItem(e,0):this.hideDataItem(e,0))))}))}updateLegendValue(t){if(t){const e=t.get("legendDataItem");if(e){const i=e.get("valueLabel");if(i){const e=i.text;let s="";i._setDataItem(t),s=this.get("legendValueText",e.get("text","")),i.set("text",s),e.markDirtyText()}const s=e.get("label");if(s){const e=s.text;let i="";s._setDataItem(t),i=this.get("legendLabelText",e.get("text","")),s.set("text",i),e.markDirtyText()}}}}updateLegendMarker(t){}_onHide(){super._onHide();const t=this.getTooltip();t&&t.hide()}hoverDataItem(t){}unhoverDataItem(t){}_getBase(t){const e=this.dataItems[this.startIndex()];return e?e.get(t):0}}Object.defineProperty(v,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"}),Object.defineProperty(v,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:d.classNames.concat([v.className])})},76652:(t,e,i)=>{"use strict";i.d(e,{k:()=>m});var s=i(6326),n=i(2857),r=i(84923),a=i(91120),o=i(13620),l=i(8328),h=i(19727),c=i(95788),d=i(7552),u=i(55077),p=i(40730),f=i(711);class g extends o.Q{constructor(t){super(),Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=t}_makePointerEvent(t,e){return{type:t,originalEvent:e.event,point:e.point,simulated:e.simulated,native:e.native,target:this._sprite}}_onRenderer(t,e){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let i=this._rendererDisposers[t];if(void 0===i){const s=this._sprite._display.on(t,(t=>{e.call(this,t)}));i=this._rendererDisposers[t]=new l.Wr((()=>{delete this._rendererDisposers[t],s.dispose()}))}return i.increment()}_on(t,e,i,s,n,r){const a=super._on(t,e,i,s,n,r),o=g.RENDERER_EVENTS[e];return void 0!==o&&(a.disposer=new l.ZT([a.disposer,this._onRenderer(e,o)])),a}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(t,e){const i=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(t,e),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(t,e)}finally{this._dispatchParents=i}}}Object.defineProperty(g,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(t){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",t))&&this.dispatch("click",this._makePointerEvent("click",t))},rightclick:function(t){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",t))},middleclick:function(t){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",t))},dblclick:function(t){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",t))},pointerover:function(t){const e=this._sprite;let i=!0;if(e.getPrivate("trustBounds")){e._getBounds();const s=e.globalBounds();if(e.isType("Graphics")){const t=e.get("strokeWidth",1)/2;t>=1&&(s.left-=t,s.right+=t,s.top-=t,s.bottom+=t)}f.HQ(t.point,s)||(i=!1,e._root._renderer.removeHovering(e._display))}i&&this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",t))},pointerout:function(t){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",t))},pointerdown:function(t){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",t))},pointerup:function(t){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",t))},globalpointerup:function(t){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",t))},globalpointermove:function(t){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",t))},wheel:function(t){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:t.event,point:t.point})}}});class m extends n.wC{constructor(){super(...arguments),Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}markDirtyKey(t){this._markDirtyKey(t)}_markDirtyKey(t){super._markDirtyKey(t),"x"!=t&&"y"!=t&&"dx"!=t&&"dy"!=t||(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(t){super._markDirtyPrivateKey(t),"x"!=t&&"y"!=t||this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new g(this)}_processTemplateField(){let t;const e=this.get("templateField");if(e){const i=this.dataItem;if(i){const s=i.dataContext;s&&(t=s[e],t instanceof r.Bj||!t||(t=r.Bj.new(t)))}}this._templateField!==t&&(this._removeTemplateField(),this._templateField=t,t&&t._setObjectTemplate(this),this._applyTemplates())}_setDataItem(t){const e=this._dataItem;this._dataItem=t,this._processTemplateField();const i="dataitemchanged";t!=e&&this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,oldDataItem:e,newDataItem:t})}set dataItem(t){this._setDataItem(t)}get dataItem(){if(this._dataItem)return this._dataItem;{let t=this._parent;for(;t;){if(t._dataItem)return t._dataItem;t=t._parent}}}_addPercentageSizeChildren(){let t=this.parent;t&&(this.get("width")instanceof a.QE||this.get("height")instanceof a.QE?d.JJ(t._percentageSizeChildren,this):d.dm(t._percentageSizeChildren,this))}_addPercentagePositionChildren(){let t=this.parent;t&&(this.get("x")instanceof a.QE||this.get("y")instanceof a.QE?d.JJ(t._percentagePositionChildren,this):d.dm(t._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const t=this._localBounds;if(t){const e=this.get("centerX");null!=e&&(this._display.pivot.x=t.left+c.JY(e,t.right-t.left));const i=this.get("centerY");null!=i&&(this._display.pivot.y=t.top+c.JY(i,t.bottom-t.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const t=this._prevSettings.tooltip;t&&t.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const t=this._tooltipMoveDp;t&&(t.dispose(),this._tooltipMoveDp=void 0);const e=this._tooltipPointerDp;e&&(e.dispose(),this._tooltipPointerDp=void 0),"pointer"==this.get("tooltipPosition")&&(this.isHover()&&(this._tooltipMoveDp=this.events.on("globalpointermove",(t=>{this.showTooltip(t.point)}))),this._tooltipPointerDp=new l.ZT([this.events.on("pointerover",(()=>{this._tooltipMoveDp=this.events.on("globalpointermove",(t=>{this.showTooltip(t.point)}))})),this.events.on("pointerout",(()=>{const t=this._tooltipMoveDp;t&&(t.dispose(),this._tooltipMoveDp=void 0)}))]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();const t=this._display,e=this.events;if(this.isDirty("draggable")){const i=this.get("draggable");i?(this.set("interactive",!0),this._dragDp=new l.ZT([e.on("pointerdown",(t=>{this.dragStart(t)})),e.on("globalpointermove",(t=>{this.dragMove(t)})),e.on("globalpointerup",(t=>{this.dragStop(t)}))])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),t.cancelTouch=!!i}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const t=this.get("tooltipText"),i=this.get("tooltipHTML"),s=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(t||i)&&("click"==s?(this._tooltipDp=new l.ZT([e.on("click",(()=>{this.setTimeout((()=>{const t=this.getTooltip();t&&!t.isHidden()&&t.get("tooltipTarget")===this?this.hideTooltip():this.showTooltip()}),10)})),c.q2(document,"click",(t=>{this.hideTooltip()}))]),this._disposers.push(this._tooltipDp)):"always"==s||(this._tooltipDp=new l.ZT([e.on("pointerover",(()=>{this.showTooltip()})),e.on("pointerout",(()=>{this.hideTooltip()}))]),this._disposers.push(this._tooltipDp)))}if(this.isDirty("toggleKey")){let t=this.get("toggleKey");t&&"none"!=t?this._toggleDp=e.on("click",(()=>{this._isDragging||this.set(t,!this.get(t))})):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(t.alpha=Math.max(0,this.get("opacity",1)),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("rotation")&&(this.markDirtyBounds(),t.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),t.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?t.visible=!0:(t.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const t=this.parent;t&&(this.isDirty("width")&&this.get("width")instanceof a.QE||this.isDirty("height")&&this.get("height")instanceof a.QE)&&(t.markDirty(),t._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight")||this.isDirty("marginLeft")||this.isDirty("marginTop")||this.isDirty("marginRight")||this.isDirty("marginBottom"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const e=this.get("wheelable");e&&this.set("interactive",!0),t.wheelable=!!e}(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(t.filter=this.get("filter"));let i=this.get("filter","");if(this.isDirty("blur")){const t=this.get("blur",0);0!=t&&(i+=" blur("+t+"px)")}if(this.isDirty("saturate")){const t=this.get("saturate",1);1!=t&&(i+=" saturate("+t+")")}if(this.isDirty("brightness")){const t=this.get("brightness",1);1!=t&&(i+=" brightness("+t+")")}if(this.isDirty("contrast")){const t=this.get("contrast",1);1!=t&&(i+=" contrast("+t+")")}if(this.isDirty("sepia")){const t=this.get("sepia",0);0!=t&&(i+=" sepia("+t+")")}if(this.isDirty("hue")){const t=this.get("hue",0);0!=t&&(i+=" hue-rotate("+t+"deg)")}if(this.isDirty("invert")){const t=this.get("invert",0);0!=t&&(i+=" invert("+t+")")}if(i&&(t.filter=i),this.isDirty("cursorOverStyle")&&(t.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new l.ZT([e.on("focus",(()=>{this.showTooltip()})),e.on("blur",(()=>{this.hideTooltip()}))]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility(),this._disposers.push(e.on("blur",(()=>{this.setPrivateRaw("touchHovering",!1)})))),this.isPrivateDirty("focusable")&&this.markDirtyAccessibility(),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(t.exportable=this.get("exportable")),this.isDirty("interactive")){const t=this.events;this.get("interactive")&&!t.isDisposed()?this._hoverDp=new l.ZT([t.on("click",(t=>{c.kH(t.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout((()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:t.target,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}),10))})),t.on("globalpointerup",(t=>{c.kH(t.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:t.target,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})),this._isDown&&this._handleUp(t)})),t.on("pointerover",(()=>{this._handleOver()})),t.on("pointerout",(()=>{this._handleOut()})),t.on("pointerdown",(t=>{this._handleDown(t)}))]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",null)),"always"==this.get("showTooltipOn")&&this._display.visible&&this.showTooltip()}dragStart(t){this._dragEvent=t,this.events.stopParentDispatch()}dragStop(t){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const e="dragstop";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(t){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const e=c.Dn(t.originalEvent);delete this._downPoints[e],0==p.HP(this._downPoints).length&&(this._isDown=!1)}}_hasMoved(t){const e=c.Dn(t.originalEvent),i=this._downPoints[e];if(i){const e=Math.abs(i.x-t.point.x),s=Math.abs(i.y-t.point.y);return e>5||s>5}return!1}_hasDown(){return p.HP(this._downPoints).length>0}_handleDown(t){const e=this.parent;if(e&&!this.get("draggable")&&e._handleDown(t),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:t.point.x,y:t.point.y},this._isDown=!0;const e=c.Dn(t.originalEvent);this._downPoints[e]={x:t.point.x,y:t.point.y}}}dragMove(t){let e=this._dragEvent;if(e){if(e.simulated&&!t.simulated)return!0;let i=0,s=this.parent,n=1;for(;null!=s;)i+=s.get("rotation",0),s=s.parent,s&&(n*=s.get("scale",1));let r=(t.point.x-e.point.x)/n,a=(t.point.y-e.point.y)/n;const o=this.events;if(e.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=t,this._dragPoint={x:this.x(),y:this.y()};const e="dragstart";o.isEnabled(e)&&o.dispatch(e,{type:e,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}if(this._isDragging){let e=this._dragPoint;this.set("x",e.x+r*f.gn(i)+a*f.F8(i)),this.set("y",e.y+a*f.gn(i)-r*f.F8(i));const s="dragged";o.isEnabled(s)&&o.dispatch(s,{type:s,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}else if(Math.hypot(r,a)>5){this._isDragging=!0,this._dragEvent=t,this._dragPoint={x:this.x(),y:this.y()};const e="dragstart";o.isEnabled(e)&&o.dispatch(e,{type:e,target:this,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let t=this.parent,e=0;for(;;){if(!t)return e;++e,t=t.parent}}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){const t=this._display;if(this.get("isMeasured")){this._root._addDirtyBounds(this),t.isMeasured=!0,t.invalidateBounds();const e=this.parent;e&&"absolute"!=this.get("position")&&(null==e.get("width")||null==e.get("height")||e.get("layout"))&&e.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const t=this._adjustedLocalBounds;let e;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),e=this._adjustedLocalBounds):(e={left:0,right:0,top:0,bottom:0},this._localBounds=e,this._adjustedLocalBounds=e),!t||t.left!==e.left||t.top!==e.top||t.right!==e.right||t.bottom!==e.bottom){const t="boundschanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds()),this.getPrivate("showingTooltip")&&this.showTooltip()}}_fixMinBounds(t){let e=this.get("minWidth",this.getPrivate("minWidth")),i=this.get("minHeight",this.getPrivate("minHeight"));u.Et(e)&&t.right-t.left<e&&(t.right=t.left+e),u.Et(i)&&t.bottom-t.top<i&&(t.bottom=t.top+i);let s=this.getPrivate("width"),n=this.getPrivate("height");u.Et(s)&&(s>0?t.right=t.left+s:t.left=t.right+s),u.Et(n)&&(n>0?t.bottom=t.top+n:t.top=t.bottom+n)}_removeParent(t){t&&(t.children.removeValue(this),d.dm(t._percentageSizeChildren,this),d.dm(t._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._statesHandled=!1}hover(){this.isDisposed()||(this.showTooltip(),this._handleOver())}unhover(){this.isDisposed()||(this.hideTooltip(),this._handleOut())}showTooltip(t){if(!this.isDisposed()){const e=this.getTooltip(),i=this.get("tooltipText"),s=this.get("tooltipHTML");if((i||s)&&e){const n=this.get("tooltipPosition"),r=this.getPrivate("tooltipTarget",this);"fixed"!=n&&t||(this._display._setMatrix(),t=this.toGlobal(r._getTooltipPoint())),e.set("pointTo",t),e.set("tooltipTarget",r),e.get("x")||e.set("x",t.x),e.get("y")||e.set("y",t.y),i&&e.label.set("text",i),s&&e.label.set("html",s);const a=this.dataItem;if(a&&e.label._setDataItem(a),"always"==this.get("showTooltipOn")&&(t.x<0||t.x>this._root.width()||t.y<0||t.y>this._root.height()))return void this.hideTooltip();e.label.text.markDirtyText();const o=e.show();return this.setPrivateRaw("showingTooltip",!0),o}}}hideTooltip(){const t=this.getTooltip();if(t&&(t.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)||this.get("tooltip")==t)){let e=t.get("keepTargetHover")&&0==t.get("stateAnimationDuration",0)?400:void 0;const i=t.hide(e);return this.setPrivateRaw("showingTooltip",!1),i}}_getTooltipPoint(){const t=this._localBounds;if(t){let e=0,i=0;return this.get("isMeasured")?(e=t.left+c.JY(this.get("tooltipX",0),t.right-t.left),i=t.top+c.JY(this.get("tooltipY",0),t.bottom-t.top)):(e=c.JY(this.get("tooltipX",0),this.width()),i=c.JY(this.get("tooltipY",0),this.height())),{x:e,y:i}}return{x:0,y:0}}getTooltip(){let t=this.get("tooltip");if(t)return t;{let t=this.parent;if(t)return t.getTooltip()}}_updatePosition(){const t=this.parent;let e=this.get("dx",0),i=this.get("dy",0),s=this.get("x"),n=this.getPrivate("x"),r=0,o=0;const l=this.get("position");s instanceof a.QE&&(s=t?t.innerWidth()*s.value+t.get("paddingLeft",0):0),u.Et(s)?r=s+e:null!=n?r=n:t&&"relative"==l&&(r=t.get("paddingLeft",0)+e);let h=this.get("y"),c=this.getPrivate("y");h instanceof a.QE&&(h=t?t.innerHeight()*h.value+t.get("paddingTop",0):0),u.Et(h)?o=h+i:null!=c?o=c:t&&"relative"==l&&(o=t.get("paddingTop",0)+i);const d=this._display;if(d.x!=r||d.y!=o){d.invalidateBounds(),d.x=r,d.y=o;const t="positionchanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let t=this.get("x"),e=this.getPrivate("x");const i=this.parent;return i?t instanceof a.QE?c.JY(t,i.innerWidth())+i.get("paddingLeft",0):u.Et(t)?t:null!=e?e:i.get("paddingLeft",this._display.x):this._display.x}y(){let t=this.getPrivate("y");if(null!=t)return t;let e=this.get("y");const i=this.parent;return i?e instanceof a.QE?c.JY(e,i.innerHeight())+i.get("paddingTop",0):u.Et(e)?e:null!=t?t:i.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const t=this.get("tooltip");t&&t.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const t=this._adjustedLocalBounds,e=this.x(),i=this.y();return{left:t.left+e,right:t.right+e,top:t.top+i,bottom:t.bottom+i}}globalBounds(){const t=this.localBounds(),e=this.toGlobal({x:t.left,y:t.top}),i=this.toGlobal({x:t.right,y:t.top}),s=this.toGlobal({x:t.right,y:t.bottom}),n=this.toGlobal({x:t.left,y:t.bottom});return{left:Math.min(e.x,i.x,s.x,n.x),top:Math.min(e.y,i.y,s.y,n.y),right:Math.max(e.x,i.x,s.x,n.x),bottom:Math.max(e.y,i.y,s.y,n.y)}}_onShow(t){}_onHide(t){}appear(t,e){return(0,s.sH)(this,void 0,void 0,(function*(){return yield this.hide(0),e?new Promise(((i,s)=>{this.setTimeout((()=>{i(this.show(t))}),e)})):this.show(t)}))}show(t){return(0,s.sH)(this,void 0,void 0,(function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(t);const e=this.states.applyAnimate("default",t);yield(0,h.M9)(e),this._isShowing=!1}}))}hide(t){return(0,s.sH)(this,void 0,void 0,(function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let e=this.states.lookup("hidden");e||(e=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(t);const i=this.states.applyAnimate("hidden",t);yield(0,h.M9)(i),this._isHiding=!1}}))}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const t=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*t:t}compositeScale(){const t=this.get("scale",1);return this._parent?this._parent.compositeScale()*t:t}compositeRotation(){const t=this.get("rotation",0);return this._parent?this._parent.compositeRotation()+t:t}width(){let t=this.get("width"),e=this.get("maxWidth",this.getPrivate("maxWidth")),i=this.get("minWidth",this.getPrivate("minWidth")),s=this.getPrivate("width"),n=0;if(u.Et(s))n=s;else if(null==t)this._adjustedLocalBounds&&(n=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(t instanceof a.QE){const e=this.parent;n=e?e.innerWidth()*t.value:this._root.width()*t.value}else u.Et(t)&&(n=t);return u.Et(i)&&(n=Math.max(i,n)),u.Et(e)&&(n=Math.min(e,n)),n}maxWidth(){let t=this.get("maxWidth",this.getPrivate("maxWidth"));if(u.Et(t))return t;{let t=this.get("width");if(u.Et(t))return t}const e=this.parent;return e?e.innerWidth():this._root.width()}maxHeight(){let t=this.get("maxHeight",this.getPrivate("maxHeight"));if(u.Et(t))return t;{let t=this.get("height");if(u.Et(t))return t}const e=this.parent;return e?e.innerHeight():this._root.height()}height(){let t=this.get("height"),e=this.get("maxHeight",this.getPrivate("maxHeight")),i=this.get("minHeight",this.getPrivate("minHeight")),s=this.getPrivate("height"),n=0;if(u.Et(s))n=s;else if(null==t)this._adjustedLocalBounds&&(n=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(t instanceof a.QE){const e=this.parent;n=e?e.innerHeight()*t.value:this._root.height()*t.value}else u.Et(t)&&(n=t);return u.Et(i)&&(n=Math.max(i,n)),u.Et(e)&&(n=Math.min(e,n)),n}_findStaticTemplate(t){return this._templateField&&t(this._templateField)?this._templateField:super._findStaticTemplate(t)}_walkParents(t){this._parent&&this._walkParent(t)}_walkParent(t){this._parent&&this._parent._walkParent(t),t(this)}get parent(){return this._parent}_setParent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._parent;t!==i&&(this.markDirtyBounds(),t.markDirty(),this._parent=t,e&&(this._removeParent(i),t&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(t){return this._display.toGlobal(t)}toLocal(t){return this._display.toLocal(t)}_getDownPoint(){const t=this._getDownPointId();if(t)return this._downPoints[t]}_getDownPointId(){if(this._downPoints)return p.M2(this._downPoints,((t,e)=>t>e?1:t<e?-1:0))[0]}toFront(){const t=this.parent;t&&t.children.moveValue(this,t.children.length-1)}toBack(){const t=this.parent;t&&t.children.moveValue(this,0)}}Object.defineProperty(m,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(m,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.wC.classNames.concat([m.className])})},89638:(t,e,i)=>{"use strict";i.d(e,{E:()=>l});var s=i(76652),n=i(93218),r=i(7552),a=i(95788),o=i(8328);class l extends s.k{constructor(){super(...arguments),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)}),Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","maxChars"]}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){if(this.get("text")){super._updateBounds();let t=this.get("fillGradient");t&&(this._display.style.fill=t.getFill(this))}else{let t={left:0,right:0,top:0,bottom:0};this._adjustedLocalBounds=t}}_changed(){super._changed(),this._display.clear();let t=this.textStyle;if(this.isDirty("opacity")){let t=this.get("opacity",1);this._display.alpha=t}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")){this.getPrivate("tooltipElement")&&this._disposers.push(new o.W_((()=>{this._root._removeTooltipElement(this)})))}if(this.isDirty("width")&&(t.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(t.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(t.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(t.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(t.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(t.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")||this.isDirty("fillGradient")){const e=this.get("fill"),i=this.get("fillGradient"),s=this.get("fillOpacity");if(i){if(e){const t=i.get("stops",[]);t.length&&r.__(t,(t=>{t.color&&!t.colorInherited||!e||(t.color=e,t.colorInherited=!0),(null==t.opacity||t.opacityInherited)&&(t.opacity=s,t.opacityInherited=!0)}))}t.fill=i.getFill(this)}else e&&(t.fill=e)}if(this.isDirty("fillOpacity")){let e=this.get("fillOpacity",1);e&&(t.fillOpacity=e)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(t.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(t.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),r.__(this._textStyles,(e=>{this._dirty[e]&&(t[e]=this.get(e),this.markDirtyBounds())})),t.fontSize=this.get("fontSize"),t.fontFamily=this.get("fontFamily"),this._display.style=t,this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}_getText(){let t=this.get("text","");return this.get("maxChars")&&(t=a.FZ(t,this.get("maxChars",1e8),this.get("breakWords"),this.get("ellipsis"))),this.get("populateText")?(0,n.I)(this,t):t}_getAccessibleText(){const t=this.get("ariaLabel");return void 0!==t?this.get("populateText")?(0,n.I)(this,t):t:this._getText()}markDirtyText(){this._display.text=this._getText(),"tooltip"==this.get("role")&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(t){super._setDataItem(t),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}}Object.defineProperty(l,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(l,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.k.classNames.concat([l.className])})},89901:(t,e,i)=>{"use strict";i.d(e,{N:()=>a});var s=i(327),n=i(55077),r=i(91120);class a extends s.P{updateContainer(t){let e=t.get("paddingTop",0),i=t.innerHeight(),a=0;(0,s.l)(t,(t=>{if(t.isVisible()&&"relative"==t.get("position")){let e=t.get("height");if(e instanceof r.QE){a+=e.value;let s=i*e.value,n=t.get("minHeight",t.getPrivate("minHeight",-1/0));n>s&&(i-=n,a-=e.value);let r=t.get("maxHeight",t.getPrivate("maxHeight",1/0));s>r&&(i-=r,a-=e.value)}else n.Et(e)||(e=t.height()),i-=e+t.get("marginTop",0)+t.get("marginBottom",0)}})),(i<=0||i==1/0)&&(i=.1),(0,s.l)(t,(t=>{if(t.isVisible()&&"relative"==t.get("position")){let e=t.get("height");if(e instanceof r.QE){let s=i*e.value/a-t.get("marginTop",0)-t.get("marginBottom",0),n=t.get("minHeight",t.getPrivate("minHeight",-1/0)),r=t.get("maxHeight",t.getPrivate("maxHeight",1/0));s=Math.min(Math.max(n,s),r),t.setPrivate("height",s)}else t._prevSettings.height instanceof r.QE&&t.setPrivate("height",void 0)}}));let o=e;(0,s.l)(t,(t=>{if("relative"==t.get("position"))if(t.isVisible()){let e=t.adjustedLocalBounds(),i=t.get("marginTop",0),s=e.top,n=e.bottom,r=t.get("maxHeight");r&&n-s>r&&(n=s+r);let a=t.get("marginBottom",0),l=o+i-s;t.setPrivate("y",l),o=l+n+a}else t.setPrivate("y",void 0)}))}}Object.defineProperty(a,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(a,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.P.classNames.concat([a.className])})},98639:(t,e,i)=>{"use strict";var s;i.d(e,{N:()=>s}),function(t){t.ADD="lighter",t.COLOR="color",t.COLOR_BURN="color-burn",t.COLOR_DODGE="color-dodge",t.DARKEN="darken",t.DIFFERENCE="difference",t.DST_OVER="destination-over",t.EXCLUSION="exclusion",t.HARD_LIGHT="hard-light",t.HUE="hue",t.LIGHTEN="lighten",t.LUMINOSITY="luminosity",t.MULTIPLY="multiply",t.NORMAL="source-over",t.OVERLAY="overlay",t.SATURATION="saturation",t.SCREEN="screen",t.SOFT_LIGHT="soft-light",t.SRC_ATOP="source-atop",t.XOR="xor"}(s||(s={}))},19727:(t,e,i)=>{"use strict";i.d(e,{Kh:()=>p,M9:()=>l,oA:()=>s,y1:()=>h,zR:()=>d});var s,n=i(6326),r=i(91120),a=i(81046),o=i(40730);function l(t){return(0,n.sH)(this,void 0,void 0,(function*(){if(void 0!==t){const e=[];o.__(t,((t,i)=>{e.push(i.waitForStop())})),yield Promise.all(e)}}))}function h(t,e,i){return e+t*(i-e)}function c(t,e,i){return t>=1?i:e}function d(t,e,i){return new r.QE(h(t,e.percent,i.percent))}function u(t,e,i){return a.Q1.interpolate(t,e,i)}function p(t,e){return"number"===typeof t&&"number"===typeof e?h:t instanceof r.QE&&e instanceof r.QE?d:t instanceof a.Q1&&e instanceof a.Q1?u:c}!function(t){t[t.Stopped=0]="Stopped",t[t.Playing=1]="Playing",t[t.Paused=2]="Paused"}(s||(s={}))},7552:(t,e,i)=>{"use strict";function s(t,e){const i=t.length;for(let s=0;s<i;++s)if(t[s]===e)return s;return-1}function n(t,e){const i=t.length;for(let s=0;s<i;++s)if(e(t[s]))return!0;return!1}function r(t,e){const i=t.length,s=new Array(i);for(let n=0;n<i;++n)s[n]=e(t[n],n);return s}function a(t,e){const i=t.length;for(let s=0;s<i;++s)e(t[s],s)}function o(t,e){let i=t.length;for(;i>0;)--i,e(t[i],i)}function l(t,e){const i=t.length;for(let s=0;s<i&&e(t[s],s);++s);}function h(t,e){let i=!1,s=0;for(;;){if(s=t.indexOf(e,s),-1===s)return i;i=!0,t.splice(s,1)}}function c(t,e){let i=t.indexOf(e);return-1!==i&&(t.splice(i,1),!0)}function d(t,e){-1===t.indexOf(e)&&t.push(e)}function u(t){const e=t.length,i=new Array(e);for(let s=0;s<e;++s)i[s]=t[s];return i}function p(t,e,i){t.splice(e,0,i)}function f(t,e){t.splice(e,1)}function g(t,e){const i=t.length;for(let s=0;s<i;++s)if(e(t[s],s))return s;return-1}function m(t,e){const i=g(t,e);if(-1!==i)return t[i]}function v(t,e){const i=function(t,e){let i=t.length;for(;i>0;)if(--i,e(t[i],i))return i;return-1}(t,e);if(-1!==i)return t[i]}function b(t,e){let i=0,s=t.length,n=!1;for(;i<s;){const r=i+s>>1,a=e(t[r]);a<0?i=r+1:0===a?(n=!0,i=r+1):s=r}return{found:n,index:n?i-1:i}}function y(t,e){let i=0,s=t.length,n=!1;for(;i<s;){const r=i+s>>1,a=e(t[r]);a<0?i=r+1:0===a?(n=!0,s=r):s=r}return{found:n,index:i}}function _(t,e){let i=t.length;for(;i>0;)--i,e(t[i])||t.splice(i,1)}i.d(e,{At:()=>p,C:()=>u,FY:()=>l,I6:()=>m,IU:()=>b,JJ:()=>d,SL:()=>g,TF:()=>h,TW:()=>_,Tj:()=>r,W$:()=>o,__:()=>a,bz:()=>n,dm:()=>c,qh:()=>s,um:()=>v,wo:()=>y,xR:()=>f})},81046:(t,e,i)=>{"use strict";i.d(e,{Q1:()=>l,yW:()=>o});var s=i(19727),n=i(95788),r=i(55077);function a(t){return"#"===t[0]&&(t=t.substr(1)),3==t.length&&(t=t[0].repeat(2)+t[1].repeat(2)+t[2].repeat(2)),parseInt(t,16)}function o(t){return l.fromAny(t)}class l{constructor(t){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|t}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return 255&this._hex}toCSS(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba("+this.r+", "+this.g+", "+this.b+", "+t+")"}toCSSHex(){return"#"+n.tr(this.r.toString(16),2)+n.tr(this.g.toString(16),2)+n.tr(this.b.toString(16),2)}toHSL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return n.K6({r:this.r,g:this.g,b:this.b,a:t})}static fromHSL(t,e,i){const s=n.YL({h:t,s:e,l:i});return this.fromRGB(s.r,s.g,s.b)}toString(){return this.toCSSHex()}static fromHex(t){return new l(t)}static fromRGB(t,e,i){return new l((0|i)+(e<<8)+(t<<16))}static fromString(t){return new l(a(t))}static fromCSS(t){return new l(function(t){let e=(t=t.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!e)return 0;let i="";for(let s=1;s<=3;s++){let t=parseInt(e[s]).toString(16);1==t.length&&(t="0"+t),i+=t}return a(i)}(t))}static fromAny(t){if(r.Kg(t)){if("#"==t[0])return l.fromString(t);if("rgb"==t.substr(0,3))return l.fromCSS(t)}else{if(r.Et(t))return l.fromHex(t);if(t instanceof l)return l.fromHex(t.hex)}throw new Error("Unknown color syntax: "+t)}static alternative(t,e,i){const s=n.PE({r:t.r,g:t.g,b:t.b},e?{r:e.r,g:e.g,b:e.b}:void 0,i?{r:i.r,g:i.g,b:i.b}:void 0);return this.fromRGB(s.r,s.g,s.b)}static interpolate(t,e,i){if("hsl"==(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb")){const n=e.toHSL(),r=i.toHSL();return l.fromHSL((0,s.y1)(t,n.h,r.h),(0,s.y1)(t,n.s,r.s),(0,s.y1)(t,n.l,r.l))}return l.fromRGB((0,s.y1)(t,e.r,i.r),(0,s.y1)(t,e.g,i.g),(0,s.y1)(t,e.b,i.b))}static lighten(t,e){const i=n.a({r:t.r,g:t.g,b:t.b},e);return l.fromRGB(i.r,i.g,i.b)}static brighten(t,e){const i=n.Uq({r:t.r,g:t.g,b:t.b},e);return l.fromRGB(i.r,i.g,i.b)}static saturate(t,e){const i=n.Ih({r:t.r,g:t.g,b:t.b},e);return l.fromRGB(i.r,i.g,i.b)}}},8328:(t,e,i)=>{"use strict";i.d(e,{JZ:()=>a,O_:()=>n,W_:()=>r,Wr:()=>l,ZT:()=>o});var s=i(7552);class n{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class r{constructor(t){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=t}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class a extends n{constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){s.__(this._disposers,(t=>{t.dispose()}))}}class o extends n{constructor(t){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=t}_dispose(){s.__(this._disposers,(t=>{t.dispose()}))}get disposers(){return this._disposers}}class l extends r{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new r((()=>{--this._counter,0===this._counter&&this.dispose()}))}}},85799:(t,e,i)=>{"use strict";function s(t){return t}function n(t){return t*t*t}function r(t){return function(e){return 1-t(1-e)}}i.d(e,{FD:()=>r,sn:()=>s,tA:()=>n});let a=2*Math.PI,o=.3/a;Math.asin(1)},2857:(t,e,i)=>{"use strict";i.d(e,{wC:()=>v,wB:()=>m});var s=i(8328),n=i(13620),r=i(19727),a=i(40730),o=i(85799);class l{constructor(t,e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=t,this._settings=e,a.__(e,(t=>{this._userSettings[t]=!0}))}get(t,e){const i=this._settings[t];return void 0!==i?i:e}setRaw(t,e){this._settings[t]=e}set(t,e){this._userSettings[t]=!0,this.setRaw(t,e)}remove(t){delete this._userSettings[t],delete this._settings[t]}setAll(t){a.HP(t).forEach((e=>{this.set(e,t[e])}))}_eachSetting(t){a.__(this._settings,t)}apply(){const t={stateAnimationEasing:!0,stateAnimationDuration:!0},e=this._entity.states.lookup("default");this._eachSetting(((i,s)=>{t[i]||(t[i]=!0,this!==e&&(i in e._settings||(e._settings[i]=this._entity.get(i))),this._entity.set(i,s))}))}applyAnimate(t){null==t&&(t=this._settings.stateAnimationDuration),null==t&&(t=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let e=this._settings.stateAnimationEasing;null==e&&(e=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",o.tA)));const i=this._entity.states.lookup("default"),s={stateAnimationEasing:!0,stateAnimationDuration:!0},n={};return this._eachSetting(((r,a)=>{if(!s[r]){s[r]=!0,this!=i&&(r in i._settings||(i._settings[r]=this._entity.get(r)));const o=this._entity.animate({key:r,to:a,duration:t,easing:e});o&&(n[r]=o)}})),n}}class h{constructor(t){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=t}lookup(t){return this._states[t]}create(t,e){const i=this._states[t];if(i)return i.setAll(e),i;{const i=new l(this._entity,e);return this._states[t]=i,i}}remove(t){delete this._states[t]}apply(t){const e=this._states[t];e&&e.apply(),this._entity._applyState(t)}applyAnimate(t,e){let i;const s=this._states[t];return s&&(i=s.applyAnimate(e)),this._entity._applyStateAnimated(t,e),i}}var c=i(93305),d=i(7552),u=i(54845);class p{constructor(t){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=t}add(t,e){let i=this._callbacks[t];return void 0===i&&(i=this._callbacks[t]=[]),i.push(e),this._entity._markDirtyKey(t),new s.W_((()=>{d.dm(i,e)&&this._entity._markDirtyKey(t)}))}remove(t){const e=this._callbacks[t];void 0!==e&&(delete this._callbacks[t],0!==e.length&&this._entity._markDirtyKey(t))}enable(t){this._disabled[t]&&(delete this._disabled[t],this._entity._markDirtyKey(t))}disable(t){this._disabled[t]||(this._disabled[t]=!0,this._entity._markDirtyKey(t))}fold(t,e){if(!this._disabled[t]){const i=this._callbacks[t];if(void 0!==i)for(let s=0,n=i.length;s<n;++s)e=i[s](e,this._entity,t)}return e}}class f{constructor(t,e,i,s,a,o,l){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new n.Q}),this._animation=t,this._from=e,this._to=i,this._duration=s,this._easing=a,this._loops=o,this._interpolate=(0,r.Kh)(e,i),this._oldTime=l}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise(((t,e)=>{if(this._stopped)t();else{const e=()=>{i.dispose(),t()},i=this.events.on("stopped",e)}}))}_checkEnded(){return!(this._loops>1)||(--this._loops,!1)}_run(t){null!==this._oldTime&&(this._time+=t-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=t}_reset(t){this._oldTime=t,this._time=0}_value(t){return this._interpolate(this._easing(t),this._from,this._to)}}let g=0;class m{constructor(t){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++g}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=t}_checkDirty(){a.HP(this._settings).forEach((t=>{this._userProperties[t]=!0,this._markDirtyKey(t)}))}resetUserSettings(){this._userProperties={}}_runAnimation(t){let e=r.oA.Stopped;if(!this.isDisposed()){let i=!1,s=!1;a.__(this._animatingSettings,((e,n)=>{if(n.stopped)this._stopAnimation(e);else if(n.playing){n._run(t);const s=n.percentage;s>=1?n._checkEnded()?this.set(e,n._value(1)):(i=!0,n._reset(t),this._set(e,n._value(1))):(i=!0,this._set(e,n._value(s)))}else s=!0})),a.__(this._animatingPrivateSettings,((e,n)=>{if(n.stopped)this._stopAnimationPrivate(e);else if(n.playing){n._run(t);const s=n.percentage;s>=1?n._checkEnded()?this.setPrivate(e,n._value(1)):(i=!0,n._reset(t),this._setPrivate(e,n._value(1))):(i=!0,this._setPrivate(e,n._value(s)))}else s=!0})),i?e=r.oA.Playing:s&&(e=r.oA.Paused)}return e}_markDirtyKey(t){this.markDirty()}_markDirtyPrivateKey(t){this.markDirty()}on(t,e){let i=this._settingEvents[t];return void 0===i&&(i=this._settingEvents[t]=[]),i.push(e),new s.W_((()=>{d.dm(i,e),0===i.length&&delete this._settingEvents[t]}))}off(t,e){let i=this._settingEvents[t];void 0!==i&&void 0!==e?d.dm(i,e):delete this._settingEvents[t]}onPrivate(t,e){let i=this._privateSettingEvents[t];return void 0===i&&(i=this._privateSettingEvents[t]=[]),i.push(e),new s.W_((()=>{d.dm(i,e),0===i.length&&delete this._privateSettingEvents[t]}))}offPrivate(t,e){let i=this._privateSettingEvents[t];void 0!==i&&void 0!==e?d.dm(i,e):delete this._privateSettingEvents[t]}getRaw(t,e){const i=this._settings[t];return void 0!==i?i:e}has(t){return t in this._settings}get(t,e){return this.getRaw(t,e)}_sendKeyEvent(t,e){const i=this._settingEvents[t];void 0!==i&&d.__(i,(i=>{i(e,this,t)}))}_sendPrivateKeyEvent(t,e){const i=this._privateSettingEvents[t];void 0!==i&&d.__(i,(i=>{i(e,this,t)}))}_setRaw(t,e,i){this._prevSettings[t]=e,this._sendKeyEvent(t,i)}setRaw(t,e){const i=this._settings[t];this._settings[t]=e,i!==e&&this._setRaw(t,i,e)}_set(t,e){const i=this._settings[t];this._settings[t]=e,i!==e&&(this._setRaw(t,i,e),this._markDirtyKey(t))}_stopAnimation(t){const e=this._animatingSettings[t];e&&(delete this._animatingSettings[t],e.stop())}set(t,e){return this._set(t,e),this._stopAnimation(t),e}remove(t){t in this._settings&&(this._prevSettings[t]=this._settings[t],delete this._settings[t],this._sendKeyEvent(t,void 0),this._markDirtyKey(t)),this._stopAnimation(t)}removeAll(){d.__(a.HP(this._settings),(t=>{this.remove(t)}))}getPrivate(t,e){const i=this._privateSettings[t];return void 0!==i?i:e}_setPrivateRaw(t,e,i){this._prevPrivateSettings[t]=e,this._sendPrivateKeyEvent(t,i)}setPrivateRaw(t,e){const i=this._privateSettings[t];this._privateSettings[t]=e,i!==e&&this._setPrivateRaw(t,i,e)}_setPrivate(t,e){const i=this._privateSettings[t];this._privateSettings[t]=e,i!==e&&(this._setPrivateRaw(t,i,e),this._markDirtyPrivateKey(t))}_stopAnimationPrivate(t){const e=this._animatingPrivateSettings[t];e&&(e.stop(),delete this._animatingPrivateSettings[t])}setPrivate(t,e){return this._setPrivate(t,e),this._stopAnimationPrivate(t),e}removePrivate(t){t in this._privateSettings&&(this._prevPrivateSettings[t]=this._privateSettings[t],delete this._privateSettings[t],this._markDirtyPrivateKey(t)),this._stopAnimationPrivate(t)}setAll(t){a.__(t,((t,e)=>{this.set(t,e)}))}animate(t){const e=t.key,i=t.to,s=t.duration||0,n=t.loops||1,r=void 0===t.from?this.get(e):t.from,a=void 0===t.easing?o.sn:t.easing;if(0===s)this.set(e,i);else{if(void 0!==r&&r!==i){this.set(e,r);const t=this._animatingSettings[e]=new f(this,r,i,s,a,n,this._animationTime());return this._startAnimation(),t}this.set(e,i)}const l=new f(this,r,i,s,a,n,null);return l.stop(),l}animatePrivate(t){const e=t.key,i=t.to,s=t.duration||0,n=t.loops||1,r=void 0===t.from?this.getPrivate(e):t.from,a=void 0===t.easing?o.sn:t.easing;if(0===s)this.setPrivate(e,i);else{if(void 0!==r&&r!==i){this.setPrivate(e,r);const t=this._animatingPrivateSettings[e]=new f(this,r,i,s,a,n,this._animationTime());return this._startAnimation(),t}this.setPrivate(e,i)}const l=new f(this,r,i,s,a,n,null);return l.stop(),l}_dispose(){}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class v extends m{constructor(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(super(e),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new h(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new p(this)}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=t,this._internalTemplates=s,e.id&&this._registerId(e.id)}static new(t,e,i){const s=new this(t,e,!0);return s._template=i,s._afterNew(),s}static _new(t,e){const i=new this(t,e,!0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]);return i._afterNew(),i}_afterNew(){this._checkDirty();let t=!1;const e=this._template;e&&(t=!0,e._setObjectTemplate(this)),d.__(this._internalTemplates,(e=>{t=!0,e._setObjectTemplate(this)})),t&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const t=this._template;t&&t._setObjectTemplate(this),d.__(this._internalTemplates,(t=>{t._setObjectTemplate(this)})),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new n.Q}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefaultFn(t,e){const i=this.get(t);if(i)return i;{const i=e();return this.set(t,i),i}}_setDefault(t,e){this.has(t)||super.set(t,e)}_setRawDefault(t,e){this.has(t)||super.setRaw(t,e)}_clearDirty(){a.HP(this._dirty).forEach((t=>{this._dirty[t]=!1})),a.HP(this._dirtyPrivate).forEach((t=>{this._dirtyPrivate[t]=!1}))}isDirty(t){return!!this._dirty[t]}isPrivateDirty(t){return!!this._dirtyPrivate[t]}_markDirtyKey(t){this._dirty[t]=!0,super._markDirtyKey(t)}_markDirtyPrivateKey(t){this._dirtyPrivate[t]=!0,super._markDirtyKey(t)}isType(t){return-1!==this.classNames.indexOf(t)}_pushPropertyDisposer(t,e){let i=this._disposerProperties[t];return void 0===i&&(i=this._disposerProperties[t]=[]),i.push(e),e}_disposeProperty(t){const e=this._disposerProperties[t];void 0!==e&&(d.__(e,(t=>{t.dispose()})),delete this._disposerProperties[t])}set template(t){const e=this._template;e!==t&&(this._template=t,e&&e._removeObjectTemplate(this),t&&t._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(t){}_applyStateAnimated(t,e){}get(t,e){const i=this.adapters.fold(t,this._settings[t]);return void 0!==i?i:e}isUserSetting(t){return this._userProperties[t]||!1}set(t,e){return this._userProperties[t]=!0,super.set(t,e)}setRaw(t,e){this._userProperties[t]=!0,super.setRaw(t,e)}_setSoft(t,e){return this._userProperties[t]?e:super.set(t,e)}remove(t){delete this._userProperties[t],this._removeTemplateProperty(t)}setPrivate(t,e){return this._userPrivateProperties[t]=!0,super.setPrivate(t,e)}setPrivateRaw(t,e){this._userPrivateProperties[t]=!0,super.setPrivateRaw(t,e)}removePrivate(t){delete this._userPrivateProperties[t],this._removeTemplatePrivateProperty(t)}_setTemplateProperty(t,e,i){if(!this._userProperties[e]){t===this._findTemplateByKey(e)&&super.set(e,i)}}_setTemplatePrivateProperty(t,e,i){if(!this._userPrivateProperties[e]){t===this._findTemplateByPrivateKey(e)&&super.setPrivate(e,i)}}_removeTemplateProperty(t){if(!this._userProperties[t]){const e=this._findTemplateByKey(t);e?super.set(t,e._settings[t]):super.remove(t)}}_removeTemplatePrivateProperty(t){if(!this._userPrivateProperties[t]){const e=this._findTemplateByPrivateKey(t);e?super.setPrivate(t,e._privateSettings[t]):super.removePrivate(t)}}_walkParents(t){t(this._root._rootContainer),t(this)}_applyStateByKey(t){const e=this.states.create(t,{}),i={};this._eachTemplate((s=>{const n=s.states.lookup(t);n&&n._apply(e,i)})),a.__(e._settings,(t=>{i[t]||e._userSettings[t]||e.remove(t)}))}_applyTemplate(t,e){this._templateDisposers.push(t._apply(this,e)),a.__(t._settings,((t,i)=>{e.settings[t]||this._userProperties[t]||(e.settings[t]=!0,super.set(t,i))})),a.__(t._privateSettings,((t,i)=>{e.privateSettings[t]||this._userPrivateProperties[t]||(e.privateSettings[t]=!0,super.setPrivate(t,i))})),this._runSetup&&t.setup&&(this._runSetup=!1,t.setup(this))}_findStaticTemplate(t){if(this._template&&t(this._template))return this._template}_eachTemplate(t){this._findStaticTemplate((e=>(t(e),!1))),d.W$(this._internalTemplates,t),d.__(this._templates,t)}_applyTemplates(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this._disposeTemplates();const e={settings:{},privateSettings:{},states:{}};this._eachTemplate((t=>{this._applyTemplate(t,e)})),t&&(a.__(this._settings,(t=>{this._userProperties[t]||e.settings[t]||super.remove(t)})),a.__(this._privateSettings,(t=>{this._userPrivateProperties[t]||e.privateSettings[t]||super.removePrivate(t)})))}_findTemplate(t){const e=this._findStaticTemplate(t);if(void 0===e){const e=d.um(this._internalTemplates,t);return void 0===e?d.I6(this._templates,t):e}return e}_findTemplateByKey(t){return this._findTemplate((e=>t in e._settings))}_findTemplateByPrivateKey(t){return this._findTemplate((e=>t in e._privateSettings))}_disposeTemplates(){d.__(this._templateDisposers,(t=>{t.dispose()})),this._templateDisposers.length=0}_removeTemplates(){d.__(this._templates,(t=>{t._removeObjectTemplate(this)})),this._templates.length=0}_applyThemes(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!1;const i=[];let s=[];const n=new Set,r=this.get("themeTagsSelf");return r&&d.__(r,(t=>{n.add(t)})),this._walkParents((t=>{t===this._root._rootContainer&&(e=!0),t._defaultThemes.length>0&&i.push(t._defaultThemes);const r=t.get("themes");r&&s.push(r);const a=t.get("themeTags");a&&d.__(a,(t=>{n.add(t)}))})),s=i.concat(s),this._removeTemplates(),(e||t)&&d.W$(this.classNames,(t=>{const e=[];d.__(s,(i=>{d.__(i,(i=>{const s=i._lookupRules(t);s&&d.W$(s,(t=>{if(t.tags.every((t=>n.has(t)))){const i=d.wo(e,(e=>{const i=u.UD(t.tags.length,e.tags.length);return 0===i?u.HN(t.tags,e.tags,u.UD):i}));e.splice(i.index,0,t)}}))}))})),d.__(e,(t=>{this._templates.push(t.template),t.template._setObjectTemplate(this)}))})),this._applyTemplates(),(e||t)&&(this._runSetup=!1),e||t}_changed(){}_beforeChanged(){if(this.isDirty("id")){const t=this.get("id");t&&this._registerId(t);const e=this._prevSettings.id;e&&delete c.u5.entitiesById[e]}}_registerId(t){if(c.u5.entitiesById[t]&&c.u5.entitiesById[t]!==this)throw new Error('An entity with id "'+t+'" already exists.');c.u5.entitiesById[t]=this}_afterChanged(){}addDisposer(t){return this._disposers.push(t),t}_dispose(){super._dispose();const t=this._template;t&&t._removeObjectTemplate(this),d.__(this._internalTemplates,(t=>{t._removeObjectTemplate(this)})),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach((t=>{t.dispose()})),a.__(this._disposerProperties,((t,e)=>{d.__(e,(t=>{t.dispose()}))}));const e=this.get("id");e&&delete c.u5.entitiesById[e]}setTimeout(t,e){const i=setTimeout((()=>{this.removeDispose(n),t()}),e),n=new s.W_((()=>{clearTimeout(i)}));return this._disposers.push(n),n}removeDispose(t){if(!this.isDisposed()){let e=d.qh(this._disposers,t);e>-1&&this._disposers.splice(e,1)}t.dispose()}hasTag(t){return-1!==d.qh(this.get("themeTags",[]),t)}addTag(t){if(!this.hasTag(t)){const e=this.get("themeTags",[]);e.push(t),this.set("themeTags",e)}}removeTag(t){if(this.hasTag(t)){const e=this.get("themeTags",[]);d.TF(e,t),this.set("themeTags",e)}}_t(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return this._root.language.translate(t,e,...s)}get root(){return this._root}}Object.defineProperty(v,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(v,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]})},13620:(t,e,i)=>{"use strict";i.d(e,{Q:()=>a});var s=i(8328),n=i(7552),r=i(55077);class a{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const t=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{n.__(t,(t=>{t.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}}hasListeners(){return 0!==this._listeners.length}hasListenersByType(t){return n.bz(this._listeners,(e=>(null===e.type||e.type===t)&&!e.killed))}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(t){delete this._disabled[t]}disableType(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;this._disabled[t]=e}_removeListener(t){if(0===this._iterating){const e=this._listeners.indexOf(t);if(-1===e)throw new Error("Invalid state: could not remove listener");this._listeners.splice(e,1)}else this._killed.push(t)}_removeExistingListener(t,e,i,s){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((n=>{n.once!==t||n.type!==e||void 0!==i&&n.callback!==i||n.context!==s||n.disposer.dispose()}))}isEnabled(t){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(t)&&void 0===this._disabled[t]}removeType(t){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((e=>{e.type===t&&e.disposer.dispose()}))}has(t,e,i){return-1!==n.SL(this._listeners,(s=>!0!==s.once&&s.type===t&&(void 0===e||s.callback===e)&&s.context===i))}_shouldDispatch(t){if(this._disposed)throw new Error("EventDispatcher is disposed");const e=this._disabled[t];return r.Et(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):this._enabled}_eachListener(t){++this._iterating;try{n.__(this._listeners,t)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(n.__(this._killed,(t=>{this._removeListener(t)})),this._killed.length=0)}}dispatch(t,e){this._shouldDispatch(t)&&this._eachListener((i=>{i.killed||null!==i.type&&i.type!==t||i.dispatch(t,e)}))}_on(t,e,i,n,r,a){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(t,e,i,n);const o={type:e,callback:i,context:n,shouldClone:r,dispatch:a,killed:!1,once:t,disposer:new s.W_((()=>{o.killed=!0,this._removeListener(o)}))};return this._listeners.push(o),o}onAll(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._on(!1,null,t,e,i,((i,s)=>t.call(e,s))).disposer}on(t,e,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this._on(!1,t,e,i,s,((t,s)=>e.call(i,s))).disposer}once(t,e,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=this._on(!0,t,e,i,s,((t,s)=>{n.disposer.dispose(),e.call(i,s)}));return n.disposer}off(t,e,i){this._removeExistingListener(!1,t,e,i)}copyFrom(t){if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const e=[];return n.__(t._listeners,(t=>{!t.killed&&t.shouldClone&&(null===t.type?e.push(this.onAll(t.callback,t.context)):t.once?e.push(this.once(t.type,t.callback,t.context)):e.push(this.on(t.type,t.callback,t.context)))})),new s.ZT(e)}}},56873:(t,e,i)=>{"use strict";i.d(e,{B8:()=>a,TS:()=>l,fo:()=>o});var s=i(13620),n=i(7552);function r(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}class a{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new s.Q}),this._values=t}get values(){return this._values}contains(t){return-1!==this._values.indexOf(t)}removeValue(t){let e=0,i=this._values.length;for(;e<i;)this._values[e]===t?(this.removeIndex(e),--i):++e}indexOf(t){return n.qh(this._values,t)}get length(){return this._values.length}hasIndex(t){return t>=0&&t<this._values.length}getIndex(t){return this._values[t]}_onPush(t){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:t})}_onInsertIndex(t,e){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e})}_onSetIndex(t,e,i){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:t,oldValue:e,newValue:i})}_onRemoveIndex(t,e){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:t,oldValue:e})}_onMoveIndex(t,e,i){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:t,newIndex:e,value:i})}_onClear(t){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:t})}setIndex(t,e){r(t,this._values.length);const i=this._values[t];return i!==e&&(this._values[t]=e,this._onSetIndex(t,i,e)),i}insertIndex(t,e){return r(t,this._values.length+1),n.At(this._values,t,e),this._onInsertIndex(t,e),e}swap(t,e){const i=this._values.length;if(r(t,i),r(e,i),t!==e){const i=this._values[t],s=this._values[e];this._values[t]=s,this._onSetIndex(t,i,s),this._values[e]=i,this._onSetIndex(e,s,i)}}removeIndex(t){r(t,this._values.length);const e=this._values[t];return n.xR(this._values,t),this._onRemoveIndex(t,e),e}moveValue(t,e){let i=this.indexOf(t);if(-1!==i)if(n.xR(this._values,i),null==e){const e=this._values.length;this._values.push(t),this._onMoveIndex(i,e,t)}else n.At(this._values,e,t),this._onMoveIndex(i,e,t);else null==e?(this._values.push(t),this._onPush(t)):(n.At(this._values,e,t),this._onInsertIndex(e,t));return t}push(t){return this._values.push(t),this._onPush(t),t}unshift(t){return this.insertIndex(0,t),t}pushAll(t){n.__(t,(t=>{this.push(t)}))}copyFrom(t){this.pushAll(t._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(t){const e=this._values;this._values=[],this._onClear(e),n.__(t,(t=>{this._values.push(t),this._onPush(t)}))}clear(){this.setAll([])}*[Symbol.iterator](){const t=this._values.length;for(let e=0;e<t;++e)yield this._values[e]}each(t){n.__(this._values,t)}eachReverse(t){n.W$(this._values,t)}}class o extends a{constructor(){super(...arguments),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_onSetIndex(t,e,i){this.autoDispose&&e.dispose(),super._onSetIndex(t,e,i)}_onRemoveIndex(t,e){this.autoDispose&&e.dispose(),super._onRemoveIndex(t,e)}_onClear(t){this.autoDispose&&n.__(t,(t=>{t.dispose()})),super._onClear(t)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.autoDispose&&n.__(this._values,(t=>{t.dispose()})))}}class l extends o{constructor(t,e){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=t,this.make=e}}},711:(t,e,i)=>{"use strict";i.d(e,{F8:()=>o,HQ:()=>p,Ki:()=>c,_Z:()=>u,gn:()=>l,iR:()=>r,n0:()=>h,nr:()=>n,s_:()=>a});const s=Math.PI,n=s/180,r=180/s;function a(t,e,i){return Math.min(Math.max(t,e),i)}function o(t){return Math.sin(n*t)}function l(t){return Math.cos(n*t)}function h(t){return(t%=360)<0&&(t+=360),t}function c(t,e,i,s,n){let r=Number.MAX_VALUE,a=Number.MAX_VALUE,o=-Number.MAX_VALUE,l=-Number.MAX_VALUE,h=[];h.push(d(n,i)),h.push(d(n,s));let c=Math.min(90*Math.floor(i/90),90*Math.floor(s/90)),u=Math.max(90*Math.ceil(i/90),90*Math.ceil(s/90));for(let p=c;p<=u;p+=90)p>=i&&p<=s&&h.push(d(n,p));for(let d=0;d<h.length;d++){let t=h[d];t.x<r&&(r=t.x),t.y<a&&(a=t.y),t.x>o&&(o=t.x),t.y>l&&(l=t.y)}return{left:t+r,top:e+a,right:t+o,bottom:e+l}}function d(t,e){return{x:t*l(e),y:t*o(e)}}function u(t){const e=t.length;if(e>0){let i=t[0],s=i.left,n=i.top,r=i.right,a=i.bottom;if(e>1)for(let o=1;o<e;o++)i=t[o],s=Math.min(i.left,s),r=Math.max(i.right,r),n=Math.min(i.top,n),a=Math.max(i.bottom,a);return{left:s,right:r,top:n,bottom:a}}return{left:0,right:0,top:0,bottom:0}}function p(t,e){return t.x>=e.left&&t.y>=e.top&&t.x<=e.right&&t.y<=e.bottom}},40730:(t,e,i)=>{"use strict";function s(t){return Object.keys(t)}function n(t,e){return s(t).sort(e)}function r(t){return Object.assign({},t)}function a(t,e){s(t).forEach((i=>{e(i,t[i])}))}function o(t,e){for(let i in t)if(l(t,i)&&!e(i,t[i]))break}function l(t,e){return{}.hasOwnProperty.call(t,e)}i.d(e,{C:()=>r,FY:()=>o,HP:()=>s,M2:()=>n,__:()=>a})},54845:(t,e,i)=>{"use strict";function s(t,e){return t===e?0:t<e?-1:1}function n(t,e,i){const n=t.length,r=e.length,a=Math.min(n,r);for(let s=0;s<a;++s){const n=i(t[s],e[s]);if(0!==n)return n}return s(n,r)}i.d(e,{HN:()=>n,UD:()=>s})},91120:(t,e,i)=>{"use strict";i.d(e,{KN:()=>n,Q2:()=>r,QE:()=>s,yP:()=>a});class s{constructor(t){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=t}get value(){return this._value/100}get percent(){return this._value}toString(){return this._value+"%"}interpolate(t,e){return t+this.value*(e-t)}static normalize(t,e,i){return t instanceof s?t:new s(e===i?0:100*Math.min(Math.max(1/(i-e)*(t-e),0),1))}}function n(t){return new s(t)}n(0);const r=n(100),a=n(50)},93218:(t,e,i)=>{"use strict";i.d(e,{I:()=>o});var s=i(55077),n=i(95788),r=i(76652),a=i(68298);function o(t,e){if(null!=e){e=""+e;let i,s=(e=a.g.escape(e)).match(/\{([^}]+)\}/g);if(s)for(i=0;i<s.length;i++){let n=l(t,s[i].replace(/\{([^}]+)\}/,"$1"),"");null==n&&(n=""),e=e.split(s[i]).join(n)}e=a.g.unescape(e)}else e="";return e}function l(t,e,i){let r;const a=t.dataItem;let o,h=[],d=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;for(;o=d.exec(e),null!==o;)if(o[3]){h.push({prop:o[3]});const e=t.getDateFormatter().get("dateFields",[]),i=t.getNumberFormatter().get("numericFields",[]),s=t.getDurationFormatter().get("durationFields",[]);-1!==e.indexOf(o[3])?h.push({method:"formatDate",params:[]}):-1!==i.indexOf(o[3])?h.push({method:"formatNumber",params:[]}):-1!==s.indexOf(o[3])&&h.push({method:"formatDuration",params:[]})}else{let t=[];if(""!=n.Bq(o[2])){let e,i=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;for(;e=i.exec(o[2]),null!==e;)t.push(e[1]||e[2]||e[3])}h.push({method:o[1],params:t})}if(a){r=c(t,h,a._settings),(null==r||s.Gv(r))&&(r=c(t,h,a));let n=a.dataContext;null==r&&n&&(r=c(t,h,n),null==r&&(r=c(t,[{prop:e}],n)),null==r&&n.dataContext&&(r=c(t,h,n.dataContext))),null==r&&a.component&&a.component.dataItem!==a&&(r=l(a.component,e,i))}return null==r&&(r=c(t,h,t)),null==r&&t.parent&&(r=l(t.parent,e,i)),r}function h(t,e){const i=t.getPrivate("customData");if(s.Gv(i))return i[e]}function c(t,e,i,a){let o=i,l=!1;for(let n=0,c=e.length;n<c;n++){let c=e[n];if(c.prop){if(o instanceof r.k){let t=o.get(c.prop);null==t&&(t=o.getPrivate(c.prop)),null==t&&(t=h(o,c.prop)),null==t&&(t=o[c.prop]),o=t}else if(o.get){let t=o.get(c.prop);null==t&&(t=o[c.prop]),o=t}else o=o[c.prop];if(null==o)return}else switch(c.method){case"formatNumber":let e=s.Ro(o);null!=e&&(o=t.getNumberFormatter().format(e,a||c.params[0]||void 0),l=!0);break;case"formatDate":let n=s.ay(o);if(!s.$P(n)||s.yr(n.getTime()))return;null!=n&&(o=t.getDateFormatter().format(n,a||c.params[0]||void 0),l=!0);break;case"formatDuration":let r=s.Ro(o);null!=r&&(o=t.getDurationFormatter().format(r,a||c.params[0]||void 0,c.params[1]||void 0),l=!0);break;case"urlEncode":case"encodeURIComponent":o=encodeURIComponent(o);break;default:o[c.method]&&o[c.method].apply(i,c.params)}}if(!l){let e=[{method:"",params:a}];if(null==a)s.Et(o)?(e[0].method="formatNumber",e[0].params=""):s.$P(o)&&(e[0].method="formatDate",e[0].params="");else{let t=n.gV(a);"number"===t?e[0].method="formatNumber":"date"===t?e[0].method="formatDate":"duration"===t&&(e[0].method="formatDuration")}e[0].method&&(o=c(t,e,o))}return o}},84923:(t,e,i)=>{"use strict";i.d(e,{Bj:()=>c});var s=i(13620),n=i(8328),r=i(7552),a=i(40730);class o{constructor(t,e,i){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=t,this._template=e,this._settings=i}get(t,e){const i=this._settings[t];return void 0!==i?i:e}set(t,e){this._settings[t]=e,this._template._stateChanged(this._name)}remove(t){delete this._settings[t],this._template._stateChanged(this._name)}setAll(t){a.HP(t).forEach((e=>{this._settings[e]=t[e]})),this._template._stateChanged(this._name)}_apply(t,e){a.__(this._settings,((i,s)=>{e[i]||t._userSettings[i]||(e[i]=!0,t.setRaw(i,s))}))}}class l{constructor(t){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=t}lookup(t){return this._states[t]}create(t,e){const i=this._states[t];if(i)return i.setAll(e),i;{const i=new o(t,this._template,e);return this._states[t]=i,this._template._stateChanged(t),i}}remove(t){delete this._states[t],this._template._stateChanged(t)}_apply(t,e){a.__(this._states,((i,s)=>{let n=e.states[i];null==n&&(n=e.states[i]={});const r=t.states.create(i,{});s._apply(r,n)}))}}class h{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(t,e){let i=this._callbacks[t];return void 0===i&&(i=this._callbacks[t]=[]),i.push(e),new n.W_((()=>{r.dm(i,e),0===i.length&&delete this._callbacks[t]}))}remove(t){void 0!==this._callbacks[t]&&delete this._callbacks[t]}_apply(t){const e=[];return a.__(this._callbacks,((i,s)=>{r.__(s,(s=>{e.push(t.adapters.add(i,s))}))})),new n.ZT(e)}}class c{constructor(t,e){if(Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new l(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new h}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new s.Q}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!e)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=t}static new(t){return new c(t,!0)}get entities(){return this._entities}get(t,e){const i=this._settings[t];return void 0!==i?i:e}setRaw(t,e){this._settings[t]=e}set(t,e){this._settings[t]!==e&&(this.setRaw(t,e),this._entities.forEach((i=>{i._setTemplateProperty(this,t,e)})))}remove(t){t in this._settings&&(delete this._settings[t],this._entities.forEach((e=>{e._removeTemplateProperty(t)})))}removeAll(){a.__(this._settings,((t,e)=>{this.remove(t)}))}getPrivate(t,e){const i=this._privateSettings[t];return void 0!==i?i:e}setPrivateRaw(t,e){return this._privateSettings[t]=e,e}setPrivate(t,e){return this._privateSettings[t]!==e&&(this.setPrivateRaw(t,e),this._entities.forEach((i=>{i._setTemplatePrivateProperty(this,t,e)}))),e}removePrivate(t){t in this._privateSettings&&(delete this._privateSettings[t],this._entities.forEach((e=>{e._removeTemplatePrivateProperty(t)})))}setAll(t){a.__(t,((t,e)=>{this.set(t,e)}))}on(t,e){let i=this._settingEvents[t];return void 0===i&&(i=this._settingEvents[t]=[]),i.push(e),new n.W_((()=>{r.dm(i,e),0===i.length&&delete this._settingEvents[t]}))}onPrivate(t,e){let i=this._privateSettingEvents[t];return void 0===i&&(i=this._privateSettingEvents[t]=[]),i.push(e),new n.W_((()=>{r.dm(i,e),0===i.length&&delete this._privateSettingEvents[t]}))}_apply(t,e){const i=[];return a.__(this._settingEvents,((e,s)=>{r.__(s,(s=>{i.push(t.on(e,s))}))})),a.__(this._privateSettingEvents,((e,s)=>{r.__(s,(s=>{i.push(t.onPrivate(e,s))}))})),this.states._apply(t,e),i.push(this.adapters._apply(t)),i.push(t.events.copyFrom(this.events)),new n.ZT(i)}_setObjectTemplate(t){this._entities.push(t)}_removeObjectTemplate(t){r.TF(this._entities,t)}_stateChanged(t){this._entities.forEach((e=>{e._applyStateByKey(t)}))}}},68298:(t,e,i)=>{"use strict";i.d(e,{g:()=>r});var s=i(81046),n=i(55077);class r{static escape(t){return t.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(t){return t.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(t){return t.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=[];t=this.escape(t);let r=e?t.split("'"):[t];for(let a=0;a<r.length;a++){let t=r[a];if(""!==t)if(a%2===0){t=t.replace(/\]\[/g,"]"+n.Kx+"["),t=t.replace(/\[\]/g,"[ ]");let e=t.split(/[\[\]]+/);for(let t=0;t<e.length;t++){let r=this.cleanUp(this.unescape(e[t]));r!==n.Kx&&(""!==r&&(t%2===0?s.push({type:"value",text:r}):s.push({type:i?"value":"format",text:"["+r+"]"})))}}else{let e=t.split(/[\[\]]+/);for(let t=0;t<e.length;t++){let i=this.cleanUp(this.unescape(e[t]));""!==i&&(t%2===0?s.push({type:"text",text:i}):this.isImage(i)?s.push({type:"image",text:"["+i+"]"}):s.push({type:"format",text:"["+i+"]"}))}}}return s}static isImage(t){return!!t.match(/img[ ]?:/)}static getTextStyle(t){let e={};if(""==t||"[ ]"==t)return{};const i=t.match(/('[^']*')|("[^"]*")/gi);if(i)for(let s=0;s<i.length;s++)t=t.replace(i[s],i[s].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let n=t.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!n)return{};for(let r=0;r<n.length;r++)if(n[r].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))e.fontWeight=n[r];else if(n[r].match(/^(underline|line-through)$/i))e.textDecoration=n[r];else if("/"==n[r]);else if(n[r].match(/:/)){const t=n[r].replace("+"," ").split(/:[ ]*/);e[t[0]]=t[1]}else e.fill=s.Q1.fromString(n[r]);return e}}Object.defineProperty(r,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"})},55077:(t,e,i)=>{"use strict";function s(t){return Number(t)!==t}function n(t){if(null!=t&&!c(t)){let e=Number(t);return s(e)&&h(t)&&""!=t?n(t.replace(/[^0-9.\-]+/g,"")):e}return t}function r(t){if(l(t))return new Date(t);if(c(t))return new Date(t);{let e=Number(t);return c(e)?new Date(e):new Date(t)}}function a(t){if(s(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(0===t&&1/t===-1/0)return"-0";let e=t<0;t=Math.abs(t);let i,n=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t),r=n[1],a=n[2]||"";if(void 0===n[3])i=""===a?r:r+"."+a;else{let e=+n[3];if(t<1){i="0."+o("0",e-1)+r+a}else{let t=e-a.length;i=0===t?r+a:t<0?r+a.slice(0,t)+"."+a.slice(t):r+a+o("0",t)}}return e?"-"+i:i}function o(t,e){return new Array(e+1).join(t)}function l(t){return"[object Date]"===function(t){return{}.toString.call(t)}(t)}function h(t){return"string"===typeof t}function c(t){return"number"===typeof t&&Number(t)==t}function d(t){return"object"===typeof t&&null!==t}i.d(e,{$P:()=>l,Et:()=>c,Gv:()=>d,Kg:()=>h,Kx:()=>u,Ro:()=>n,ay:()=>r,cb:()=>p,um:()=>a,yr:()=>s});const u="__\xa7\xa7\xa7__",p="__\xa7\xa7\xa7\xa7__"},95788:(t,e,i)=>{"use strict";i.d(e,{Ao:()=>L,Bq:()=>E,Dn:()=>h,Dt:()=>b,FZ:()=>k,Ge:()=>c,Ih:()=>U,JY:()=>w,Jx:()=>F,K:()=>y,K6:()=>H,Kq:()=>P,L_:()=>O,Nr:()=>R,Nz:()=>r,O:()=>N,PE:()=>G,SX:()=>M,U3:()=>_,Uq:()=>V,X2:()=>I,XC:()=>d,YL:()=>B,Zn:()=>j,_Q:()=>D,a:()=>W,ay:()=>v,eC:()=>f,fZ:()=>C,gV:()=>S,gd:()=>g,kE:()=>q,kH:()=>p,n_:()=>o,q2:()=>a,tr:()=>A,w1:()=>x,wN:()=>u,wt:()=>m,xY:()=>l,xp:()=>T});var s=i(55077),n=(i(7552),i(40730),i(8328));function r(t){t.parentNode&&t.parentNode.removeChild(t)}function a(t,e,i,s){return t.addEventListener(e,i,s||!1),new n.W_((()=>{t.removeEventListener(e,i,s||!1)}))}function o(t){return a(window,"resize",(e=>{t()}))}function l(t){switch(t){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function h(t){return t.pointerId||0}function c(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let t=document.createElement("button");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}}function d(t){t&&t.focus()}function u(t){if(l("pointerevents"))return t;if(l("touchevents"))switch(t){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerleave":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(l("mouseevents"))switch(t){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerleave":return"mouseleave";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return t}function p(t){if("undefined"!==typeof Touch&&t instanceof Touch)return!0;if("undefined"!==typeof PointerEvent&&t instanceof PointerEvent&&null!=t.pointerType)switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(null!=t.type&&t.type.match(/^mouse/))return!1;return!0}function f(t,e,i){t.style[e]=i}function g(t,e){return t.style[e]}function m(t){if(t.composedPath){const e=t.composedPath();return 0===e.length?null:e[0]}return t.target}function v(t,e){return t.target&&function(t,e){let i=e;for(;;){if(t===i)return!0;if(null===i.parentNode){if(null==i.host)return!1;i=i.host}else i=i.parentNode}}(e.root.dom,t.target)}function b(t,e){t.style.pointerEvents=e?"auto":"none"}function y(t){if(void 0!==t.key)return t.key;switch(t.keyCode){case 9:return"Tab";case 13:return"Enter";case 16:return"Shift";case 17:return"Control";case 27:return"Escape";case 32:return" ";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown";case 46:return"Delete"}return""+t.keyCode}n.O_;n.O_;function _(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document?1:void 0}function w(t,e){return s.Et(t)?t:null!=t&&s.Et(t.value)&&s.Et(e)?e*t.value:0}function x(t){let e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function A(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return"string"!==typeof t&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(i)+t:t}function E(t){return function(t){return t.replace(/^[\s]*/,"")}(function(t){return t.replace(/[\s]*$/,"")}(t))}function k(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"...";if(t.length>e){let n=e-1;for(;n>=0&&t.charAt(n).match(/\w/);)n--;return n>=0&&0==i?t.substring(0,n+1)+"...":t.substring(0,e)+s}return t}function S(t){if("undefined"===typeof t)return"string";let e=(t=(t=(t=t.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:"number"===t?"number":"date"===t?"date":"duration"===t?"duration":t.match(/[#0]/)?"number":t.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}function C(t){return t.replace(/\/(date|number|duration)$/i,"")}function P(t){return t?t.replace(/<[^>]*>/g,""):t}function T(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function M(t){const e=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/,i=/([^\u0627\u0623\u062f\u0630\u0631\u0632\u0648]*[\u0627\u0623\u062f\u0630\u0631\u0632\u0648])/gi;let s=t.split(/(\s+)/),n=[];return s.forEach((t=>{if(t.match(/^\s+$/))(t=" ")&&(t="  "),n.push(t);else if(e.test(t)){let e=t.split(i).filter((t=>""!==t));n=n.concat(e)}else n=n.concat([...t])})),n}function D(t){const e=new Date(t.getFullYear(),0,0),i=t.getTime()-e.getTime()+60*(e.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}function R(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),i=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-i);const s=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-s.getTime())/864e5+1)/7)}function L(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),i=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-i);return new Date(Date.UTC(e.getUTCFullYear(),0,1)).getFullYear()}function O(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=R(new Date(t.getFullYear(),t.getMonth(),1),e);let s=R(t,e);return 1==s&&(s=53),s-i+1}function I(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=new Date(e,0,4,0,0,0,0);return s&&n.setUTCFullYear(e),7*t+i-((n.getDay()||7)+3)}function F(t,e){return t>12?t-=12:0===t&&(t=12),null!=e?t+(e-1):t}function N(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>4?arguments[4]:void 0;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])return e?"Coordinated Universal Time":"UTC";if(s){const i=t.toLocaleString("en-US",{timeZone:s});return E(t.toLocaleString("en-US",{timeZone:s,timeZoneName:e?"long":"short"}).substr(i.length))}let n=t.toLocaleString("UTC"),r=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(n.length);return!1===i&&(r=r.replace(/ (standard|daylight|summer|winter) /i," ")),E(r)}function j(t){const e=new Date(Date.UTC(2012,0,1,0,0,0,0)),i=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(e.toLocaleString("en-US",{timeZone:t})).getTime()-i.getTime())/6e4*-1}function B(t){let e,i,s,n=t.h,r=t.s,a=t.l;if(0==r)e=i=s=a;else{let t=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},o=a<.5?a*(1+r):a+r-a*r,l=2*a-o;e=t(l,o,n+1/3),i=t(l,o,n),s=t(l,o,n-1/3)}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*s)}}function H(t){let e=t.r/255,i=t.g/255,s=t.b/255,n=Math.max(e,i,s),r=Math.min(e,i,s),a=0,o=0,l=(n+r)/2;if(n===r)a=o=0;else{let t=n-r;switch(o=l>.5?t/(2-n-r):t/(n+r),n){case e:a=(i-s)/t+(i<s?6:0);break;case i:a=(s-e)/t+2;break;case s:a=(e-i)/t+4}a/=6}return{h:a,s:o,l:l}}function W(t,e){return t?{r:Math.max(0,Math.min(255,t.r+z(t.r,e))),g:Math.max(0,Math.min(255,t.g+z(t.g,e))),b:Math.max(0,Math.min(255,t.b+z(t.b,e))),a:t.a}:t}function z(t,e){let i=e>0?255-t:t;return Math.round(i*e)}function V(t,e){if(t){let i=z(Math.min(Math.max(t.r,t.g,t.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(t.r+i))),g:Math.max(0,Math.min(255,Math.round(t.g+i))),b:Math.max(0,Math.min(255,Math.round(t.b+i))),a:t.a}}return t}function $(t){return(299*t.r+587*t.g+114*t.b)/1e3>=128}function U(t,e){if(void 0===t||1==e)return t;let i=H(t);return i.s=e,B(i)}function G(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{r:255,g:255,b:255},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:255,g:255,b:255},s=e,n=i;return $(i)&&(s=i,n=e),$(t)?n:s}function q(t,e){return t||(t=[]),[...t,...e].filter(((t,e,i)=>i.indexOf(t)===e))}},21539:(t,e,i)=>{"use strict";i.d(e,{p:()=>h,w:()=>l});var s=i(1685),n=i(91120),r=i(81046),a=i(25887),o=i(85799);function l(t,e,i,s){t.set(e,i.get(s)),i.on(s,(i=>{t.set(e,i)}))}class h extends s.S{setupDefaultRules(){super.setupDefaultRules();const t=this._root.language,e=this._root.interfaceColors,i=this._root.horizontalLayout,s=this._root.verticalLayout,h=this.rule.bind(this);h("InterfaceColors").setAll({stroke:r.Q1.fromHex(15066597),fill:r.Q1.fromHex(15987699),primaryButton:r.Q1.fromHex(6788316),primaryButtonHover:r.Q1.fromHex(6779356),primaryButtonDown:r.Q1.fromHex(6872182),primaryButtonActive:r.Q1.fromHex(6872182),primaryButtonDisabled:r.Q1.fromHex(14342874),primaryButtonTextDisabled:r.Q1.fromHex(16777215),primaryButtonText:r.Q1.fromHex(16777215),primaryButtonStroke:r.Q1.fromHex(16777215),secondaryButton:r.Q1.fromHex(14277081),secondaryButtonHover:r.Q1.fromHex(10724259),secondaryButtonDown:r.Q1.fromHex(9276813),secondaryButtonActive:r.Q1.fromHex(15132390),secondaryButtonText:r.Q1.fromHex(0),secondaryButtonStroke:r.Q1.fromHex(16777215),grid:r.Q1.fromHex(0),background:r.Q1.fromHex(16777215),alternativeBackground:r.Q1.fromHex(0),text:r.Q1.fromHex(0),alternativeText:r.Q1.fromHex(16777215),disabled:r.Q1.fromHex(11382189),positive:r.Q1.fromHex(5288704),negative:r.Q1.fromHex(11730944)});{const t=h("ColorSet");t.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[r.Q1.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),t.setPrivate("currentStep",0),t.setPrivate("currentPass",0)}h("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:o.FD(o.tA)}),h("Component").setAll({interpolationDuration:0,interpolationEasing:o.FD(o.tA)}),h("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:n.yP,tooltipY:n.yP,tooltipPosition:"fixed",isMeasured:!0}),h("Sprite").states.create("default",{visible:!0,opacity:1}),h("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),h("Graphics").setAll({strokeWidth:1}),h("Chart").setAll({width:n.Q2,height:n.Q2,interactiveChildren:!1}),h("ZoomableContainer").setAll({width:n.Q2,height:n.Q2,wheelable:!0,pinchZoom:!0,maxZoomLevel:32,minZoomLevel:1,zoomStep:2,animationEasing:o.FD(o.tA),animationDuration:600,maxPanOut:.4}),h("Sprite",["horizontal","center"]).setAll({centerX:n.yP,x:n.yP}),h("Sprite",["vertical","center"]).setAll({centerY:n.yP,y:n.yP}),h("Container",["horizontal","layout"]).setAll({layout:i}),h("Container",["vertical","layout"]).setAll({layout:s}),h("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),h("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),h("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),h("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),h("GrainPattern").setAll({width:200,height:200,colors:[r.Q1.fromHex(0)],size:1,horizontalGap:0,verticalGap:0,density:1,minOpacity:0,maxOpacity:.2});{const t=h("PatternSet");t.setAll({step:1}),l(t,"color",e,"stroke")}h("LinearGradient").setAll({rotation:90}),h("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:a.J.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),h("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:i,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:t.translate("Press ENTER to toggle"),role:"checkbox"});{const t=h("Rectangle",["legend","item","background"]);t.setAll({fillOpacity:0}),l(t,"fill",e,"background")}h("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:n.yP,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),h("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:n.Q2,height:n.Q2,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const t=h("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});l(t,"fill",e,"disabled"),l(t,"stroke",e,"disabled")}h("Label",["legend","label"]).setAll({centerY:n.yP,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0});l(h("Label",["legend","label"]).states.create("disabled",{}),"fill",e,"disabled");h("Label",["legend","value","label"]).setAll({centerY:n.yP,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:n.Q2,populateText:!0});l(h("Label",["legend","value","label"]).states.create("disabled",{}),"fill",e,"disabled");h("HeatLegend").setAll({stepCount:1}),h("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),h("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:n.Q2,width:15}),h("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:n.Q2,height:15}),h("HeatLegend",["vertical"]).setAll({height:n.Q2}),h("HeatLegend",["horizontal"]).setAll({width:n.Q2}),h("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),h("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const t=h("Label");t.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),l(t,"fill",e,"text")}h("RadialLabel").setAll({textType:"regular",centerY:n.yP,centerX:n.yP,inside:!1,radius:0,baseRadius:n.Q2,orientation:"auto",textAlign:"center"}),h("EditableLabel").setAll({editOn:"click",themeTags:["editablelabel"],multiLine:!0}),h("RoundedRectangle",["editablelabel","background"]).setAll({fillOpacity:0,fill:r.Q1.fromHex(0),cornerRadiusBL:3,cornerRadiusBR:3,cornerRadiusTL:3,cornerRadiusTR:3,strokeOpacity:0,stroke:r.Q1.fromHex(0)}),h("RoundedRectangle",["editablelabel","background"]).states.create("active",{strokeOpacity:.2}),h("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),h("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),h("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const t=h("Tick");t.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),l(t,"stroke",e,"grid")}h("Bullet").setAll({locationX:.5,locationY:.5}),h("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:n.yP,centerY:n.yP,animationEasing:o.FD(o.tA),exportable:!1}),h("Polygon").setAll({animationEasing:o.FD(o.tA)});h("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:r.Q1.fromHex(16777215)});{const t=h("Label",["tooltip"]);t.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),l(t,"fill",e,"alternativeText")}h("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:i,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),h("Button").states.create("hover",{}),h("Button").states.create("down",{stateAnimationDuration:0}),h("Button").states.create("active",{}),h("Button").states.create("disabled",{forceInactive:!0});{const t=h("RoundedRectangle",["button","background"]);l(t,"fill",e,"primaryButton"),l(t,"stroke",e,"primaryButtonStroke")}l(h("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",e,"primaryButtonHover");l(h("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",e,"primaryButtonDown");l(h("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",e,"primaryButtonActive");l(h("RoundedRectangle",["button","background"]).states.create("disabled",{}),"fill",e,"primaryButtonDisabled");l(h("Graphics",["button","icon"]).states.create("disabled",{}),"fill",e,"primaryButtonTextDisabled");l(h("Label",["button"]).states.create("disabled",{}),"fill",e,"primaryButtonTextDisabled");{const t=h("Graphics",["button","icon"]);t.setAll({forceInactive:!0}),l(t,"stroke",e,"primaryButtonText")}l(h("Label",["button"]),"fill",e,"primaryButtonText");h("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:n.Q2,role:"button",ariaLabel:t.translate("Zoom Out"),layer:30});{const t=h("RoundedRectangle",["background","button","zoom"]);t.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),l(t,"fill",e,"primaryButton")}l(h("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",e,"primaryButtonHover");l(h("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",e,"primaryButtonDown");{const t=h("Graphics",["icon","button","zoom"]);t.setAll({crisp:!0,strokeOpacity:.7,draw:t=>{t.moveTo(0,0),t.lineTo(12,0)}}),l(t,"stroke",e,"primaryButtonText")}h("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:n.yP,centerY:n.yP,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:t.translate("Use up and down arrows to move selection")});{const t=h("RoundedRectangle",["background","resize","button"]);t.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),l(t,"fill",e,"secondaryButton"),l(t,"stroke",e,"secondaryButtonStroke")}l(h("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",e,"secondaryButtonHover");l(h("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",e,"secondaryButtonDown");{const t=h("Graphics",["resize","button","icon"]);t.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:t=>{t.moveTo(0,.5),t.lineTo(0,12.5),t.moveTo(4,.5),t.lineTo(4,12.5)}}),l(t,"stroke",e,"secondaryButtonText")}h("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),h("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),h("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:t.translate("Play"),toggleKey:"active"});{const t=h("RoundedRectangle",["play","background"]);t.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),l(t,"fill",e,"primaryButton")}{const t=h("Graphics",["play","icon"]);t.setAll({stateAnimationDuration:0,dx:1,draw:t=>{t.moveTo(0,-5),t.lineTo(8,0),t.lineTo(0,5),t.lineTo(0,-5)}}),l(t,"fill",e,"primaryButtonText")}h("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),h("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:t=>{t.moveTo(-4,-5),t.lineTo(-1,-5),t.lineTo(-1,5),t.lineTo(-4,5),t.lineTo(-4,-5),t.moveTo(4,-5),t.lineTo(1,-5),t.lineTo(1,5),t.lineTo(4,5),t.lineTo(4,-5)}}),h("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:t.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const t=h("RoundedRectangle",["switch","background"]);t.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),l(t,"fill",e,"primaryButton")}{const t=h("Circle",["switch","icon"]);t.setAll({radius:8,centerY:0,centerX:0,dx:0}),l(t,"fill",e,"primaryButtonText")}h("Graphics",["switch","icon"]).states.create("active",{dx:16}),h("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:o.FD(o.tA)}),h("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:n.Q2}),h("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:n.Q2}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const t=h("RoundedRectangle",["scrollbar","main","background"]);t.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),l(t,"fill",e,"fill")}{const t=h("RoundedRectangle",["scrollbar","thumb"]);t.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),l(t,"fill",e,"secondaryButton")}l(h("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",e,"secondaryButtonHover");l(h("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",e,"secondaryButtonDown");h("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:n.yP,width:n.Q2,centerX:n.yP,ariaLabel:t.translate("Use up and down arrows to move selection")}),h("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:n.yP,centerY:n.yP,height:n.Q2,ariaLabel:t.translate("Use left and right arrows to move selection")});{const t=h("PointedRectangle",["axis","tooltip","background"]);t.setAll({cornerRadius:0}),l(t,"fill",e,"alternativeBackground")}h("Label",["axis","tooltip"]).setAll({role:void 0}),h("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),h("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),h("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),h("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),h("Star").setAll({spikes:5,innerRadius:5,radius:10}),h("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),h("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),h("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),h("SpriteResizer").setAll({rotationStep:10,isMeasured:!1});h("Container",["resizer","grip"]).states.create("hover",{});{const t=h("RoundedRectangle",["resizer","grip"]);t.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),l(t,"fill",e,"background"),l(t,"stroke",e,"alternativeBackground")}{const t=h("RoundedRectangle",["resizer","grip","outline"]);t.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),t.states.create("hover",{fillOpacity:.3}),l(t,"fill",e,"alternativeBackground")}h("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),h("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const t=h("Rectangle",["resizer","rectangle"]);t.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),l(t,"stroke",e,"alternativeBackground")}h("Graphics",["button","plus","icon"]).setAll({x:n.yP,y:n.yP,draw:t=>{t.moveTo(-4,0),t.lineTo(4,0),t.moveTo(0,-4),t.lineTo(0,4)}}),h("Graphics",["button","minus","icon"]).setAll({x:n.yP,y:n.yP,draw:t=>{t.moveTo(-4,0),t.lineTo(4,0)}}),h("Graphics",["button","home","icon"]).setAll({x:n.yP,y:n.yP,svgPath:"M 8 -1 L 6 -1 L 6 7 L 2 7 L 2 1 L -2 1 L -2 7 L -6 7 L -6 -1 L -8 -1 L 0 -9 L 8 -1 Z M 8 -1"}),h("Button",["zoomtools"]).setAll({marginTop:1,marginBottom:2}),h("ZoomTools").setAll({x:n.Q2,centerX:n.Q2,y:n.Q2,centerY:n.Q2,paddingRight:10,paddingBottom:10})}}},83595:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var s=i(1685);class n extends s.S{setupDefaultRules(){super.setupDefaultRules(),this.rule("Component").setAll({interpolationDuration:600}),this.rule("Hierarchy").set("animationDuration",600),this.rule("Scrollbar").set("animationDuration",600),this.rule("Tooltip").set("animationDuration",300),this.rule("MapChart").set("animationDuration",1e3),this.rule("MapChart").set("wheelDuration",300),this.rule("Entity").setAll({stateAnimationDuration:600}),this.rule("Sprite").states.create("default",{stateAnimationDuration:600}),this.rule("Tooltip",["axis"]).setAll({animationDuration:200}),this.rule("WordCloud").set("animationDuration",500),this.rule("Polygon").set("animationDuration",600),this.rule("ArcDiagram").set("animationDuration",600)}}const r=n},88839:(t,e,i)=>{"use strict";i.d(e,{aF:()=>Ds});var s={};i.r(s),i.d(s,{afterMain:()=>A,afterRead:()=>_,afterWrite:()=>S,applyStyles:()=>L,arrow:()=>Z,auto:()=>l,basePlacements:()=>h,beforeMain:()=>w,beforeRead:()=>b,beforeWrite:()=>E,bottom:()=>r,clippingParents:()=>u,computeStyles:()=>st,createPopper:()=>Ot,createPopperBase:()=>Lt,createPopperLite:()=>It,detectOverflow:()=>yt,end:()=>d,eventListeners:()=>rt,flip:()=>_t,hide:()=>At,left:()=>o,main:()=>x,modifierPhases:()=>C,offset:()=>Et,placements:()=>v,popper:()=>f,popperGenerator:()=>Rt,popperOffsets:()=>kt,preventOverflow:()=>St,read:()=>y,reference:()=>g,right:()=>a,start:()=>c,top:()=>n,variationPlacements:()=>m,viewport:()=>p,write:()=>k});var n="top",r="bottom",a="right",o="left",l="auto",h=[n,r,a,o],c="start",d="end",u="clippingParents",p="viewport",f="popper",g="reference",m=h.reduce((function(t,e){return t.concat([e+"-"+c,e+"-"+d])}),[]),v=[].concat(h,[l]).reduce((function(t,e){return t.concat([e,e+"-"+c,e+"-"+d])}),[]),b="beforeRead",y="read",_="afterRead",w="beforeMain",x="main",A="afterMain",E="beforeWrite",k="write",S="afterWrite",C=[b,y,_,w,x,A,E,k,S];function P(t){return t?(t.nodeName||"").toLowerCase():null}function T(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function M(t){return t instanceof T(t).Element||t instanceof Element}function D(t){return t instanceof T(t).HTMLElement||t instanceof HTMLElement}function R(t){return"undefined"!==typeof ShadowRoot&&(t instanceof T(t).ShadowRoot||t instanceof ShadowRoot)}const L={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},s=e.attributes[t]||{},n=e.elements[t];D(n)&&P(n)&&(Object.assign(n.style,i),Object.keys(s).forEach((function(t){var e=s[t];!1===e?n.removeAttribute(t):n.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var s=e.elements[t],n=e.attributes[t]||{},r=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});D(s)&&P(s)&&(Object.assign(s.style,r),Object.keys(n).forEach((function(t){s.removeAttribute(t)})))}))}},requires:["computeStyles"]};function O(t){return t.split("-")[0]}var I=Math.max,F=Math.min,N=Math.round;function j(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function B(){return!/^((?!chrome|android).)*safari/i.test(j())}function H(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var s=t.getBoundingClientRect(),n=1,r=1;e&&D(t)&&(n=t.offsetWidth>0&&N(s.width)/t.offsetWidth||1,r=t.offsetHeight>0&&N(s.height)/t.offsetHeight||1);var a=(M(t)?T(t):window).visualViewport,o=!B()&&i,l=(s.left+(o&&a?a.offsetLeft:0))/n,h=(s.top+(o&&a?a.offsetTop:0))/r,c=s.width/n,d=s.height/r;return{width:c,height:d,top:h,right:l+c,bottom:h+d,left:l,x:l,y:h}}function W(t){var e=H(t),i=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:s}}function z(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&R(i)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function V(t){return T(t).getComputedStyle(t)}function $(t){return["table","td","th"].indexOf(P(t))>=0}function U(t){return((M(t)?t.ownerDocument:t.document)||window.document).documentElement}function G(t){return"html"===P(t)?t:t.assignedSlot||t.parentNode||(R(t)?t.host:null)||U(t)}function q(t){return D(t)&&"fixed"!==V(t).position?t.offsetParent:null}function Y(t){for(var e=T(t),i=q(t);i&&$(i)&&"static"===V(i).position;)i=q(i);return i&&("html"===P(i)||"body"===P(i)&&"static"===V(i).position)?e:i||function(t){var e=/firefox/i.test(j());if(/Trident/i.test(j())&&D(t)&&"fixed"===V(t).position)return null;var i=G(t);for(R(i)&&(i=i.host);D(i)&&["html","body"].indexOf(P(i))<0;){var s=V(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(t)||e}function X(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function K(t,e,i){return I(t,F(e,i))}function Q(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function J(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}const Z={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,s=t.name,l=t.options,c=i.elements.arrow,d=i.modifiersData.popperOffsets,u=O(i.placement),p=X(u),f=[o,a].indexOf(u)>=0?"height":"width";if(c&&d){var g=function(t,e){return Q("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:J(t,h))}(l.padding,i),m=W(c),v="y"===p?n:o,b="y"===p?r:a,y=i.rects.reference[f]+i.rects.reference[p]-d[p]-i.rects.popper[f],_=d[p]-i.rects.reference[p],w=Y(c),x=w?"y"===p?w.clientHeight||0:w.clientWidth||0:0,A=y/2-_/2,E=g[v],k=x-m[f]-g[b],S=x/2-m[f]/2+A,C=K(E,S,k),P=p;i.modifiersData[s]=((e={})[P]=C,e.centerOffset=C-S,e)}},effect:function(t){var e=t.state,i=t.options.element,s=void 0===i?"[data-popper-arrow]":i;null!=s&&("string"!==typeof s||(s=e.elements.popper.querySelector(s)))&&z(e.elements.popper,s)&&(e.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function tt(t){return t.split("-")[1]}var et={top:"auto",right:"auto",bottom:"auto",left:"auto"};function it(t){var e,i=t.popper,s=t.popperRect,l=t.placement,h=t.variation,c=t.offsets,u=t.position,p=t.gpuAcceleration,f=t.adaptive,g=t.roundOffsets,m=t.isFixed,v=c.x,b=void 0===v?0:v,y=c.y,_=void 0===y?0:y,w="function"===typeof g?g({x:b,y:_}):{x:b,y:_};b=w.x,_=w.y;var x=c.hasOwnProperty("x"),A=c.hasOwnProperty("y"),E=o,k=n,S=window;if(f){var C=Y(i),P="clientHeight",M="clientWidth";if(C===T(i)&&"static"!==V(C=U(i)).position&&"absolute"===u&&(P="scrollHeight",M="scrollWidth"),l===n||(l===o||l===a)&&h===d)k=r,_-=(m&&C===S&&S.visualViewport?S.visualViewport.height:C[P])-s.height,_*=p?1:-1;if(l===o||(l===n||l===r)&&h===d)E=a,b-=(m&&C===S&&S.visualViewport?S.visualViewport.width:C[M])-s.width,b*=p?1:-1}var D,R=Object.assign({position:u},f&&et),L=!0===g?function(t,e){var i=t.x,s=t.y,n=e.devicePixelRatio||1;return{x:N(i*n)/n||0,y:N(s*n)/n||0}}({x:b,y:_},T(i)):{x:b,y:_};return b=L.x,_=L.y,p?Object.assign({},R,((D={})[k]=A?"0":"",D[E]=x?"0":"",D.transform=(S.devicePixelRatio||1)<=1?"translate("+b+"px, "+_+"px)":"translate3d("+b+"px, "+_+"px, 0)",D)):Object.assign({},R,((e={})[k]=A?_+"px":"",e[E]=x?b+"px":"",e.transform="",e))}const st={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,s=i.gpuAcceleration,n=void 0===s||s,r=i.adaptive,a=void 0===r||r,o=i.roundOffsets,l=void 0===o||o,h={placement:O(e.placement),variation:tt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,it(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,it(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var nt={passive:!0};const rt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,s=t.options,n=s.scroll,r=void 0===n||n,a=s.resize,o=void 0===a||a,l=T(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&h.forEach((function(t){t.addEventListener("scroll",i.update,nt)})),o&&l.addEventListener("resize",i.update,nt),function(){r&&h.forEach((function(t){t.removeEventListener("scroll",i.update,nt)})),o&&l.removeEventListener("resize",i.update,nt)}},data:{}};var at={left:"right",right:"left",bottom:"top",top:"bottom"};function ot(t){return t.replace(/left|right|bottom|top/g,(function(t){return at[t]}))}var lt={start:"end",end:"start"};function ht(t){return t.replace(/start|end/g,(function(t){return lt[t]}))}function ct(t){var e=T(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function dt(t){return H(U(t)).left+ct(t).scrollLeft}function ut(t){var e=V(t),i=e.overflow,s=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+s)}function pt(t){return["html","body","#document"].indexOf(P(t))>=0?t.ownerDocument.body:D(t)&&ut(t)?t:pt(G(t))}function ft(t,e){var i;void 0===e&&(e=[]);var s=pt(t),n=s===(null==(i=t.ownerDocument)?void 0:i.body),r=T(s),a=n?[r].concat(r.visualViewport||[],ut(s)?s:[]):s,o=e.concat(a);return n?o:o.concat(ft(G(a)))}function gt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function mt(t,e,i){return e===p?gt(function(t,e){var i=T(t),s=U(t),n=i.visualViewport,r=s.clientWidth,a=s.clientHeight,o=0,l=0;if(n){r=n.width,a=n.height;var h=B();(h||!h&&"fixed"===e)&&(o=n.offsetLeft,l=n.offsetTop)}return{width:r,height:a,x:o+dt(t),y:l}}(t,i)):M(e)?function(t,e){var i=H(t,!1,"fixed"===e);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(e,i):gt(function(t){var e,i=U(t),s=ct(t),n=null==(e=t.ownerDocument)?void 0:e.body,r=I(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),a=I(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-s.scrollLeft+dt(t),l=-s.scrollTop;return"rtl"===V(n||i).direction&&(o+=I(i.clientWidth,n?n.clientWidth:0)-r),{width:r,height:a,x:o,y:l}}(U(t)))}function vt(t,e,i,s){var n="clippingParents"===e?function(t){var e=ft(G(t)),i=["absolute","fixed"].indexOf(V(t).position)>=0&&D(t)?Y(t):t;return M(i)?e.filter((function(t){return M(t)&&z(t,i)&&"body"!==P(t)})):[]}(t):[].concat(e),r=[].concat(n,[i]),a=r[0],o=r.reduce((function(e,i){var n=mt(t,i,s);return e.top=I(n.top,e.top),e.right=F(n.right,e.right),e.bottom=F(n.bottom,e.bottom),e.left=I(n.left,e.left),e}),mt(t,a,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function bt(t){var e,i=t.reference,s=t.element,l=t.placement,h=l?O(l):null,u=l?tt(l):null,p=i.x+i.width/2-s.width/2,f=i.y+i.height/2-s.height/2;switch(h){case n:e={x:p,y:i.y-s.height};break;case r:e={x:p,y:i.y+i.height};break;case a:e={x:i.x+i.width,y:f};break;case o:e={x:i.x-s.width,y:f};break;default:e={x:i.x,y:i.y}}var g=h?X(h):null;if(null!=g){var m="y"===g?"height":"width";switch(u){case c:e[g]=e[g]-(i[m]/2-s[m]/2);break;case d:e[g]=e[g]+(i[m]/2-s[m]/2)}}return e}function yt(t,e){void 0===e&&(e={});var i=e,s=i.placement,o=void 0===s?t.placement:s,l=i.strategy,c=void 0===l?t.strategy:l,d=i.boundary,m=void 0===d?u:d,v=i.rootBoundary,b=void 0===v?p:v,y=i.elementContext,_=void 0===y?f:y,w=i.altBoundary,x=void 0!==w&&w,A=i.padding,E=void 0===A?0:A,k=Q("number"!==typeof E?E:J(E,h)),S=_===f?g:f,C=t.rects.popper,P=t.elements[x?S:_],T=vt(M(P)?P:P.contextElement||U(t.elements.popper),m,b,c),D=H(t.elements.reference),R=bt({reference:D,element:C,strategy:"absolute",placement:o}),L=gt(Object.assign({},C,R)),O=_===f?L:D,I={top:T.top-O.top+k.top,bottom:O.bottom-T.bottom+k.bottom,left:T.left-O.left+k.left,right:O.right-T.right+k.right},F=t.modifiersData.offset;if(_===f&&F){var N=F[o];Object.keys(I).forEach((function(t){var e=[a,r].indexOf(t)>=0?1:-1,i=[n,r].indexOf(t)>=0?"y":"x";I[t]+=N[i]*e}))}return I}const _t={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var d=i.mainAxis,u=void 0===d||d,p=i.altAxis,f=void 0===p||p,g=i.fallbackPlacements,b=i.padding,y=i.boundary,_=i.rootBoundary,w=i.altBoundary,x=i.flipVariations,A=void 0===x||x,E=i.allowedAutoPlacements,k=e.options.placement,S=O(k),C=g||(S===k||!A?[ot(k)]:function(t){if(O(t)===l)return[];var e=ot(t);return[ht(t),e,ht(e)]}(k)),P=[k].concat(C).reduce((function(t,i){return t.concat(O(i)===l?function(t,e){void 0===e&&(e={});var i=e,s=i.placement,n=i.boundary,r=i.rootBoundary,a=i.padding,o=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?v:l,d=tt(s),u=d?o?m:m.filter((function(t){return tt(t)===d})):h,p=u.filter((function(t){return c.indexOf(t)>=0}));0===p.length&&(p=u);var f=p.reduce((function(e,i){return e[i]=yt(t,{placement:i,boundary:n,rootBoundary:r,padding:a})[O(i)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}(e,{placement:i,boundary:y,rootBoundary:_,padding:b,flipVariations:A,allowedAutoPlacements:E}):i)}),[]),T=e.rects.reference,M=e.rects.popper,D=new Map,R=!0,L=P[0],I=0;I<P.length;I++){var F=P[I],N=O(F),j=tt(F)===c,B=[n,r].indexOf(N)>=0,H=B?"width":"height",W=yt(e,{placement:F,boundary:y,rootBoundary:_,altBoundary:w,padding:b}),z=B?j?a:o:j?r:n;T[H]>M[H]&&(z=ot(z));var V=ot(z),$=[];if(u&&$.push(W[N]<=0),f&&$.push(W[z]<=0,W[V]<=0),$.every((function(t){return t}))){L=F,R=!1;break}D.set(F,$)}if(R)for(var U=function(t){var e=P.find((function(e){var i=D.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return L=e,"break"},G=A?3:1;G>0;G--){if("break"===U(G))break}e.placement!==L&&(e.modifiersData[s]._skip=!0,e.placement=L,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function wt(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function xt(t){return[n,a,r,o].some((function(e){return t[e]>=0}))}const At={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,s=e.rects.reference,n=e.rects.popper,r=e.modifiersData.preventOverflow,a=yt(e,{elementContext:"reference"}),o=yt(e,{altBoundary:!0}),l=wt(a,s),h=wt(o,n,r),c=xt(l),d=xt(h);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}};const Et={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.options,s=t.name,r=i.offset,l=void 0===r?[0,0]:r,h=v.reduce((function(t,i){return t[i]=function(t,e,i){var s=O(t),r=[o,n].indexOf(s)>=0?-1:1,l="function"===typeof i?i(Object.assign({},e,{placement:t})):i,h=l[0],c=l[1];return h=h||0,c=(c||0)*r,[o,a].indexOf(s)>=0?{x:c,y:h}:{x:h,y:c}}(i,e.rects,l),t}),{}),c=h[e.placement],d=c.x,u=c.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=u),e.modifiersData[s]=h}};const kt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=bt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};const St={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,s=t.name,l=i.mainAxis,h=void 0===l||l,d=i.altAxis,u=void 0!==d&&d,p=i.boundary,f=i.rootBoundary,g=i.altBoundary,m=i.padding,v=i.tether,b=void 0===v||v,y=i.tetherOffset,_=void 0===y?0:y,w=yt(e,{boundary:p,rootBoundary:f,padding:m,altBoundary:g}),x=O(e.placement),A=tt(e.placement),E=!A,k=X(x),S="x"===k?"y":"x",C=e.modifiersData.popperOffsets,P=e.rects.reference,T=e.rects.popper,M="function"===typeof _?_(Object.assign({},e.rects,{placement:e.placement})):_,D="number"===typeof M?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(C){if(h){var N,j="y"===k?n:o,B="y"===k?r:a,H="y"===k?"height":"width",z=C[k],V=z+w[j],$=z-w[B],U=b?-T[H]/2:0,G=A===c?P[H]:T[H],q=A===c?-T[H]:-P[H],Q=e.elements.arrow,J=b&&Q?W(Q):{width:0,height:0},Z=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},et=Z[j],it=Z[B],st=K(0,P[H],J[H]),nt=E?P[H]/2-U-st-et-D.mainAxis:G-st-et-D.mainAxis,rt=E?-P[H]/2+U+st+it+D.mainAxis:q+st+it+D.mainAxis,at=e.elements.arrow&&Y(e.elements.arrow),ot=at?"y"===k?at.clientTop||0:at.clientLeft||0:0,lt=null!=(N=null==R?void 0:R[k])?N:0,ht=z+rt-lt,ct=K(b?F(V,z+nt-lt-ot):V,z,b?I($,ht):$);C[k]=ct,L[k]=ct-z}if(u){var dt,ut="x"===k?n:o,pt="x"===k?r:a,ft=C[S],gt="y"===S?"height":"width",mt=ft+w[ut],vt=ft-w[pt],bt=-1!==[n,o].indexOf(x),_t=null!=(dt=null==R?void 0:R[S])?dt:0,wt=bt?mt:ft-P[gt]-T[gt]-_t+D.altAxis,xt=bt?ft+P[gt]+T[gt]-_t-D.altAxis:vt,At=b&&bt?function(t,e,i){var s=K(t,e,i);return s>i?i:s}(wt,ft,xt):K(b?wt:mt,ft,b?xt:vt);C[S]=At,L[S]=At-ft}e.modifiersData[s]=L}},requiresIfExists:["offset"]};function Ct(t,e,i){void 0===i&&(i=!1);var s=D(e),n=D(e)&&function(t){var e=t.getBoundingClientRect(),i=N(e.width)/t.offsetWidth||1,s=N(e.height)/t.offsetHeight||1;return 1!==i||1!==s}(e),r=U(e),a=H(t,n,i),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!i)&&(("body"!==P(e)||ut(r))&&(o=function(t){return t!==T(t)&&D(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:ct(t);var e}(e)),D(e)?((l=H(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=dt(r))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function Pt(t){var e=new Map,i=new Set,s=[];function n(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var s=e.get(t);s&&n(s)}})),s.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||n(t)})),s}function Tt(t){var e;return function(){return e||(e=new Promise((function(i){Promise.resolve().then((function(){e=void 0,i(t())}))}))),e}}var Mt={placement:"bottom",modifiers:[],strategy:"absolute"};function Dt(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function Rt(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,s=void 0===i?[]:i,n=e.defaultOptions,r=void 0===n?Mt:n;return function(t,e,i){void 0===i&&(i=r);var n={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mt,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],o=!1,l={state:n,setOptions:function(i){var o="function"===typeof i?i(n.options):i;h(),n.options=Object.assign({},r,n.options,o),n.scrollParents={reference:M(t)?ft(t):t.contextElement?ft(t.contextElement):[],popper:ft(e)};var c=function(t){var e=Pt(t);return C.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}(function(t){var e=t.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(s,n.options.modifiers)));return n.orderedModifiers=c.filter((function(t){return t.enabled})),n.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,s=void 0===i?{}:i,r=t.effect;if("function"===typeof r){var o=r({state:n,name:e,instance:l,options:s}),h=function(){};a.push(o||h)}})),l.update()},forceUpdate:function(){if(!o){var t=n.elements,e=t.reference,i=t.popper;if(Dt(e,i)){n.rects={reference:Ct(e,Y(i),"fixed"===n.options.strategy),popper:W(i)},n.reset=!1,n.placement=n.options.placement,n.orderedModifiers.forEach((function(t){return n.modifiersData[t.name]=Object.assign({},t.data)}));for(var s=0;s<n.orderedModifiers.length;s++)if(!0!==n.reset){var r=n.orderedModifiers[s],a=r.fn,h=r.options,c=void 0===h?{}:h,d=r.name;"function"===typeof a&&(n=a({state:n,options:c,name:d,instance:l})||n)}else n.reset=!1,s=-1}}},update:Tt((function(){return new Promise((function(t){l.forceUpdate(),t(n)}))})),destroy:function(){h(),o=!0}};if(!Dt(t,e))return l;function h(){a.forEach((function(t){return t()})),a=[]}return l.setOptions(i).then((function(t){!o&&i.onFirstUpdate&&i.onFirstUpdate(t)})),l}}var Lt=Rt(),Ot=Rt({defaultModifiers:[rt,kt,st,L,Et,_t,St,Z,At]}),It=Rt({defaultModifiers:[rt,kt,st,L]});const Ft=new Map,Nt={set(t,e,i){Ft.has(t)||Ft.set(t,new Map);const s=Ft.get(t);s.has(e)||0===s.size?s.set(e,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(t,e)=>Ft.has(t)&&Ft.get(t).get(e)||null,remove(t,e){if(!Ft.has(t))return;const i=Ft.get(t);i.delete(e),0===i.size&&Ft.delete(t)}},jt="transitionend",Bt=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),Ht=t=>{t.dispatchEvent(new Event(jt))},Wt=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),zt=t=>Wt(t)?t.jquery?t[0]:t:"string"===typeof t&&t.length>0?document.querySelector(Bt(t)):null,Vt=t=>{if(!Wt(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),i=t.closest("details:not([open])");if(!i)return e;if(i!==t){const e=t.closest("summary");if(e&&e.parentNode!==i)return!1;if(null===e)return!1}return e},$t=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),Ut=t=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Ut(t.parentNode):null},Gt=()=>{},qt=t=>{t.offsetHeight},Yt=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Xt=[],Kt=()=>"rtl"===document.documentElement.dir,Qt=t=>{var e;e=()=>{const e=Yt();if(e){const i=t.NAME,s=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=s,t.jQueryInterface)}},"loading"===document.readyState?(Xt.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of Xt)t()})),Xt.push(e)):e()},Jt=function(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return"function"===typeof t?t(...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]):e},Zt=function(t,e){if(!(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]))return void Jt(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const s=Number.parseFloat(e),n=Number.parseFloat(i);return s||n?(e=e.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(e)+5;let s=!1;const n=i=>{let{target:r}=i;r===e&&(s=!0,e.removeEventListener(jt,n),Jt(t))};e.addEventListener(jt,n),setTimeout((()=>{s||Ht(e)}),i)},te=(t,e,i,s)=>{const n=t.length;let r=t.indexOf(e);return-1===r?!i&&s?t[n-1]:t[0]:(r+=i?1:-1,s&&(r=(r+n)%n),t[Math.max(0,Math.min(r,n-1))])},ee=/[^.]*(?=\..*)\.|.*/,ie=/\..*/,se=/::\d+$/,ne={};let re=1;const ae={mouseenter:"mouseover",mouseleave:"mouseout"},oe=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function le(t,e){return e&&`${e}::${re++}`||t.uidEvent||re++}function he(t){const e=le(t);return t.uidEvent=e,ne[e]=ne[e]||{},ne[e]}function ce(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===i))}function de(t,e,i){const s="string"===typeof e,n=s?i:e||i;let r=ge(t);return oe.has(r)||(r=t),[s,n,r]}function ue(t,e,i,s,n){if("string"!==typeof e||!t)return;let[r,a,o]=de(e,i,s);if(e in ae){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};a=t(a)}const l=he(t),h=l[o]||(l[o]={}),c=ce(h,a,r?i:null);if(c)return void(c.oneOff=c.oneOff&&n);const d=le(a,e.replace(ee,"")),u=r?function(t,e,i){return function s(n){const r=t.querySelectorAll(e);for(let{target:a}=n;a&&a!==this;a=a.parentNode)for(const o of r)if(o===a)return ve(n,{delegateTarget:a}),s.oneOff&&me.off(t,n.type,e,i),i.apply(a,[n])}}(t,i,a):function(t,e){return function i(s){return ve(s,{delegateTarget:t}),i.oneOff&&me.off(t,s.type,e),e.apply(t,[s])}}(t,a);u.delegationSelector=r?i:null,u.callable=a,u.oneOff=n,u.uidEvent=d,h[d]=u,t.addEventListener(o,u,r)}function pe(t,e,i,s,n){const r=ce(e[i],s,n);r&&(t.removeEventListener(i,r,Boolean(n)),delete e[i][r.uidEvent])}function fe(t,e,i,s){const n=e[i]||{};for(const[r,a]of Object.entries(n))r.includes(s)&&pe(t,e,i,a.callable,a.delegationSelector)}function ge(t){return t=t.replace(ie,""),ae[t]||t}const me={on(t,e,i,s){ue(t,e,i,s,!1)},one(t,e,i,s){ue(t,e,i,s,!0)},off(t,e,i,s){if("string"!==typeof e||!t)return;const[n,r,a]=de(e,i,s),o=a!==e,l=he(t),h=l[a]||{},c=e.startsWith(".");if("undefined"===typeof r){if(c)for(const i of Object.keys(l))fe(t,l,i,e.slice(1));for(const[i,s]of Object.entries(h)){const n=i.replace(se,"");o&&!e.includes(n)||pe(t,l,a,s.callable,s.delegationSelector)}}else{if(!Object.keys(h).length)return;pe(t,l,a,r,n?i:null)}},trigger(t,e,i){if("string"!==typeof e||!t)return null;const s=Yt();let n=null,r=!0,a=!0,o=!1;e!==ge(e)&&s&&(n=s.Event(e,i),s(t).trigger(n),r=!n.isPropagationStopped(),a=!n.isImmediatePropagationStopped(),o=n.isDefaultPrevented());const l=ve(new Event(e,{bubbles:r,cancelable:!0}),i);return o&&l.preventDefault(),a&&t.dispatchEvent(l),l.defaultPrevented&&n&&n.preventDefault(),l}};function ve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const[s,n]of Object.entries(e))try{t[s]=n}catch(i){Object.defineProperty(t,s,{configurable:!0,get:()=>n})}return t}function be(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!==typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function ye(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const _e={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${ye(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${ye(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const s of i){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=be(t.dataset[s])}return e},getDataAttribute:(t,e)=>be(t.getAttribute(`data-bs-${ye(e)}`))};class we{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const i=Wt(e)?_e.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"===typeof i?i:{},...Wt(e)?_e.getDataAttributes(e):{},..."object"===typeof t?t:{}}}_typeCheckConfig(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.DefaultType;for(const[s,n]of Object.entries(e)){const e=t[s],r=Wt(e)?"element":null===(i=e)||void 0===i?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(n).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${r}" but expected type "${n}".`)}var i}}class xe extends we{constructor(t,e){super(),(t=zt(t))&&(this._element=t,this._config=this._getConfig(e),Nt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Nt.remove(this._element,this.constructor.DATA_KEY),me.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e){Zt(t,e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Nt.get(zt(t),this.DATA_KEY)}static getOrCreateInstance(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(t)||new this(t,"object"===typeof e?e:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Ae=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&"#"!==i?i.trim():null}return e?e.split(",").map((t=>Bt(t))).join(","):null},Ee={find(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(e,t)},children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const i=[];let s=t.parentNode.closest(e);for(;s;)i.push(s),s=s.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!$t(t)&&Vt(t)))},getSelectorFromElement(t){const e=Ae(t);return e&&Ee.findOne(e)?e:null},getElementFromSelector(t){const e=Ae(t);return e?Ee.findOne(e):null},getMultipleElementsFromSelector(t){const e=Ae(t);return e?Ee.find(e):[]}},ke=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";const i=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;me.on(document,i,`[data-bs-dismiss="${s}"]`,(function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),$t(this))return;const n=Ee.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(n)[e]()}))},Se=".bs.alert",Ce=`close${Se}`,Pe=`closed${Se}`;class Te extends xe{static get NAME(){return"alert"}close(){if(me.trigger(this._element,Ce).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),me.trigger(this._element,Pe),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=Te.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ke(Te,"close"),Qt(Te);const Me='[data-bs-toggle="button"]';class De extends xe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=De.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}me.on(document,"click.bs.button.data-api",Me,(t=>{t.preventDefault();const e=t.target.closest(Me);De.getOrCreateInstance(e).toggle()})),Qt(De);const Re=".bs.swipe",Le=`touchstart${Re}`,Oe=`touchmove${Re}`,Ie=`touchend${Re}`,Fe=`pointerdown${Re}`,Ne=`pointerup${Re}`,je={endCallback:null,leftCallback:null,rightCallback:null},Be={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class He extends we{constructor(t,e){super(),this._element=t,t&&He.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return je}static get DefaultType(){return Be}static get NAME(){return"swipe"}dispose(){me.off(this._element,Re)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Jt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&Jt(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(me.on(this._element,Fe,(t=>this._start(t))),me.on(this._element,Ne,(t=>this._end(t))),this._element.classList.add("pointer-event")):(me.on(this._element,Le,(t=>this._start(t))),me.on(this._element,Oe,(t=>this._move(t))),me.on(this._element,Ie,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const We=".bs.carousel",ze=".data-api",Ve="ArrowLeft",$e="ArrowRight",Ue="next",Ge="prev",qe="left",Ye="right",Xe=`slide${We}`,Ke=`slid${We}`,Qe=`keydown${We}`,Je=`mouseenter${We}`,Ze=`mouseleave${We}`,ti=`dragstart${We}`,ei=`load${We}${ze}`,ii=`click${We}${ze}`,si="carousel",ni="active",ri=".active",ai=".carousel-item",oi=ri+ai,li={[Ve]:Ye,[$e]:qe},hi={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ci={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class di extends xe{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ee.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===si&&this.cycle()}static get Default(){return hi}static get DefaultType(){return ci}static get NAME(){return"carousel"}next(){this._slide(Ue)}nextWhenVisible(){!document.hidden&&Vt(this._element)&&this.next()}prev(){this._slide(Ge)}pause(){this._isSliding&&Ht(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?me.one(this._element,Ke,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void me.one(this._element,Ke,(()=>this.to(t)));const i=this._getItemIndex(this._getActive());if(i===t)return;const s=t>i?Ue:Ge;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&me.on(this._element,Qe,(t=>this._keydown(t))),"hover"===this._config.pause&&(me.on(this._element,Je,(()=>this.pause())),me.on(this._element,Ze,(()=>this._maybeEnableCycle()))),this._config.touch&&He.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of Ee.find(".carousel-item img",this._element))me.on(e,ti,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(qe)),rightCallback:()=>this._slide(this._directionToOrder(Ye)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new He(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=li[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=Ee.findOne(ri,this._indicatorsElement);e.classList.remove(ni),e.removeAttribute("aria-current");const i=Ee.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(ni),i.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isSliding)return;const i=this._getActive(),s=t===Ue,n=e||te(this._getItems(),i,s,this._config.wrap);if(n===i)return;const r=this._getItemIndex(n),a=e=>me.trigger(this._element,e,{relatedTarget:n,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:r});if(a(Xe).defaultPrevented)return;if(!i||!n)return;const o=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=n;const l=s?"carousel-item-start":"carousel-item-end",h=s?"carousel-item-next":"carousel-item-prev";n.classList.add(h),qt(n),i.classList.add(l),n.classList.add(l);this._queueCallback((()=>{n.classList.remove(l,h),n.classList.add(ni),i.classList.remove(ni,h,l),this._isSliding=!1,a(Ke)}),i,this._isAnimated()),o&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Ee.findOne(oi,this._element)}_getItems(){return Ee.find(ai,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Kt()?t===qe?Ge:Ue:t===qe?Ue:Ge}_orderToDirection(t){return Kt()?t===Ge?qe:Ye:t===Ge?Ye:qe}static jQueryInterface(t){return this.each((function(){const e=di.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}me.on(document,ii,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=Ee.getElementFromSelector(this);if(!e||!e.classList.contains(si))return;t.preventDefault();const i=di.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");return s?(i.to(s),void i._maybeEnableCycle()):"next"===_e.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())})),me.on(window,ei,(()=>{const t=Ee.find('[data-bs-ride="carousel"]');for(const e of t)di.getOrCreateInstance(e)})),Qt(di);const ui=".bs.collapse",pi=`show${ui}`,fi=`shown${ui}`,gi=`hide${ui}`,mi=`hidden${ui}`,vi=`click${ui}.data-api`,bi="show",yi="collapse",_i="collapsing",wi=`:scope .${yi} .${yi}`,xi='[data-bs-toggle="collapse"]',Ai={parent:null,toggle:!0},Ei={parent:"(null|element)",toggle:"boolean"};class ki extends xe{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const i=Ee.find(xi);for(const s of i){const t=Ee.getSelectorFromElement(s),e=Ee.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ai}static get DefaultType(){return Ei}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>ki.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(me.trigger(this._element,pi).defaultPrevented)return;for(const s of t)s.hide();const e=this._getDimension();this._element.classList.remove(yi),this._element.classList.add(_i),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(_i),this._element.classList.add(yi,bi),this._element.style[e]="",me.trigger(this._element,fi)}),this._element,!0),this._element.style[e]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(me.trigger(this._element,gi).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,qt(this._element),this._element.classList.add(_i),this._element.classList.remove(yi,bi);for(const e of this._triggerArray){const t=Ee.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(_i),this._element.classList.add(yi),me.trigger(this._element,mi)}),this._element,!0)}_isShown(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(bi)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=zt(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(xi);for(const e of t){const t=Ee.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=Ee.find(wi,this._config.parent);return Ee.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const i of t)i.classList.toggle("collapsed",!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const i=ki.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof i[t])throw new TypeError(`No method named "${t}"`);i[t]()}}))}}me.on(document,vi,xi,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const e of Ee.getMultipleElementsFromSelector(this))ki.getOrCreateInstance(e,{toggle:!1}).toggle()})),Qt(ki);const Si="dropdown",Ci=".bs.dropdown",Pi=".data-api",Ti="ArrowUp",Mi="ArrowDown",Di=`hide${Ci}`,Ri=`hidden${Ci}`,Li=`show${Ci}`,Oi=`shown${Ci}`,Ii=`click${Ci}${Pi}`,Fi=`keydown${Ci}${Pi}`,Ni=`keyup${Ci}${Pi}`,ji="show",Bi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Hi=`${Bi}.${ji}`,Wi=".dropdown-menu",zi=Kt()?"top-end":"top-start",Vi=Kt()?"top-start":"top-end",$i=Kt()?"bottom-end":"bottom-start",Ui=Kt()?"bottom-start":"bottom-end",Gi=Kt()?"left-start":"right-start",qi=Kt()?"right-start":"left-start",Yi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Xi={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ki extends xe{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=Ee.next(this._element,Wi)[0]||Ee.prev(this._element,Wi)[0]||Ee.findOne(Wi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Yi}static get DefaultType(){return Xi}static get NAME(){return Si}toggle(){return this._isShown()?this.hide():this.show()}show(){if($t(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!me.trigger(this._element,Li,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))me.on(t,"mouseover",Gt);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ji),this._element.classList.add(ji),me.trigger(this._element,Oi,t)}}hide(){if($t(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!me.trigger(this._element,Di,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))me.off(t,"mouseover",Gt);this._popper&&this._popper.destroy(),this._menu.classList.remove(ji),this._element.classList.remove(ji),this._element.setAttribute("aria-expanded","false"),_e.removeDataAttribute(this._menu,"popper"),me.trigger(this._element,Ri,t)}}_getConfig(t){if("object"===typeof(t=super._getConfig(t)).reference&&!Wt(t.reference)&&"function"!==typeof t.reference.getBoundingClientRect)throw new TypeError(`${Si.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){let t=this._element;"parent"===this._config.reference?t=this._parent:Wt(this._config.reference)?t=zt(this._config.reference):"object"===typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=Ot(t,this._menu,e)}_isShown(){return this._menu.classList.contains(ji)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return Gi;if(t.classList.contains("dropstart"))return qi;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?Vi:zi:e?Ui:$i}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(_e.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Jt(this._config.popperConfig,[t])}}_selectMenuItem(t){let{key:e,target:i}=t;const s=Ee.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>Vt(t)));s.length&&te(s,i,e===Mi,!s.includes(i)).focus()}static jQueryInterface(t){return this.each((function(){const e=Ki.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=Ee.find(Hi);for(const i of e){const e=Ki.getInstance(i);if(!e||!1===e._config.autoClose)continue;const s=t.composedPath(),n=s.includes(e._menu);if(s.includes(e._element)||"inside"===e._config.autoClose&&!n||"outside"===e._config.autoClose&&n)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const r={relatedTarget:e._element};"click"===t.type&&(r.clickEvent=t),e._completeHide(r)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),i="Escape"===t.key,s=[Ti,Mi].includes(t.key);if(!s&&!i)return;if(e&&!i)return;t.preventDefault();const n=this.matches(Bi)?this:Ee.prev(this,Bi)[0]||Ee.next(this,Bi)[0]||Ee.findOne(Bi,t.delegateTarget.parentNode),r=Ki.getOrCreateInstance(n);if(s)return t.stopPropagation(),r.show(),void r._selectMenuItem(t);r._isShown()&&(t.stopPropagation(),r.hide(),n.focus())}}me.on(document,Fi,Bi,Ki.dataApiKeydownHandler),me.on(document,Fi,Wi,Ki.dataApiKeydownHandler),me.on(document,Ii,Ki.clearMenus),me.on(document,Ni,Ki.clearMenus),me.on(document,Ii,Bi,(function(t){t.preventDefault(),Ki.getOrCreateInstance(this).toggle()})),Qt(Ki);const Qi="backdrop",Ji="show",Zi=`mousedown.bs.${Qi}`,ts={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},es={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class is extends we{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ts}static get DefaultType(){return es}static get NAME(){return Qi}show(t){if(!this._config.isVisible)return void Jt(t);this._append();const e=this._getElement();this._config.isAnimated&&qt(e),e.classList.add(Ji),this._emulateAnimation((()=>{Jt(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Ji),this._emulateAnimation((()=>{this.dispose(),Jt(t)}))):Jt(t)}dispose(){this._isAppended&&(me.off(this._element,Zi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=zt(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),me.on(t,Zi,(()=>{Jt(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){Zt(t,this._getElement(),this._config.isAnimated)}}const ss=".bs.focustrap",ns=`focusin${ss}`,rs=`keydown.tab${ss}`,as="backward",os={autofocus:!0,trapElement:null},ls={autofocus:"boolean",trapElement:"element"};class hs extends we{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return os}static get DefaultType(){return ls}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),me.off(document,ss),me.on(document,ns,(t=>this._handleFocusin(t))),me.on(document,rs,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,me.off(document,ss))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const i=Ee.focusableChildren(e);0===i.length?e.focus():this._lastTabNavDirection===as?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?as:"forward")}}const cs=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ds=".sticky-top",us="padding-right",ps="margin-right";class fs{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,us,(e=>e+t)),this._setElementAttributes(cs,us,(e=>e+t)),this._setElementAttributes(ds,ps,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,us),this._resetElementAttributes(cs,us),this._resetElementAttributes(ds,ps)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){const s=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+s)return;this._saveInitialAttribute(t,e);const n=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${i(Number.parseFloat(n))}px`)}))}_saveInitialAttribute(t,e){const i=t.style.getPropertyValue(e);i&&_e.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const i=_e.getDataAttribute(t,e);null!==i?(_e.removeDataAttribute(t,e),t.style.setProperty(e,i)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(Wt(t))e(t);else for(const i of Ee.find(t,this._element))e(i)}}const gs=".bs.modal",ms=`hide${gs}`,vs=`hidePrevented${gs}`,bs=`hidden${gs}`,ys=`show${gs}`,_s=`shown${gs}`,ws=`resize${gs}`,xs=`click.dismiss${gs}`,As=`mousedown.dismiss${gs}`,Es=`keydown.dismiss${gs}`,ks=`click${gs}.data-api`,Ss="modal-open",Cs="show",Ps="modal-static",Ts={backdrop:!0,focus:!0,keyboard:!0},Ms={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ds extends xe{constructor(t,e){super(t,e),this._dialog=Ee.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new fs,this._addEventListeners()}static get Default(){return Ts}static get DefaultType(){return Ms}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;me.trigger(this._element,ys,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ss),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;me.trigger(this._element,ms).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Cs),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){me.off(window,gs),me.off(this._dialog,gs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new is({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new hs({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=Ee.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),qt(this._element),this._element.classList.add(Cs);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,me.trigger(this._element,_s,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){me.on(this._element,Es,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),me.on(window,ws,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),me.on(this._element,As,(t=>{me.one(this._element,xs,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Ss),this._resetAdjustments(),this._scrollBar.reset(),me.trigger(this._element,bs)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(me.trigger(this._element,vs).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(Ps)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Ps),this._queueCallback((()=>{this._element.classList.remove(Ps),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){const t=Kt()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!i&&t){const t=Kt()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const i=Ds.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}me.on(document,ks,'[data-bs-toggle="modal"]',(function(t){const e=Ee.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),me.one(e,ys,(t=>{t.defaultPrevented||me.one(e,bs,(()=>{Vt(this)&&this.focus()}))}));const i=Ee.findOne(".modal.show");i&&Ds.getInstance(i).hide();Ds.getOrCreateInstance(e).toggle(this)})),ke(Ds),Qt(Ds);const Rs=".bs.offcanvas",Ls=".data-api",Os=`load${Rs}${Ls}`,Is="show",Fs="showing",Ns="hiding",js=".offcanvas.show",Bs=`show${Rs}`,Hs=`shown${Rs}`,Ws=`hide${Rs}`,zs=`hidePrevented${Rs}`,Vs=`hidden${Rs}`,$s=`resize${Rs}`,Us=`click${Rs}${Ls}`,Gs=`keydown.dismiss${Rs}`,qs={backdrop:!0,keyboard:!0,scroll:!1},Ys={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Xs extends xe{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return qs}static get DefaultType(){return Ys}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;if(me.trigger(this._element,Bs,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new fs).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Fs);this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Is),this._element.classList.remove(Fs),me.trigger(this._element,Hs,{relatedTarget:t})}),this._element,!0)}hide(){if(!this._isShown)return;if(me.trigger(this._element,Ws).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ns),this._backdrop.hide();this._queueCallback((()=>{this._element.classList.remove(Is,Ns),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new fs).reset(),me.trigger(this._element,Vs)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new is({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():me.trigger(this._element,zs)}:null})}_initializeFocusTrap(){return new hs({trapElement:this._element})}_addEventListeners(){me.on(this._element,Gs,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():me.trigger(this._element,zs))}))}static jQueryInterface(t){return this.each((function(){const e=Xs.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}me.on(document,Us,'[data-bs-toggle="offcanvas"]',(function(t){const e=Ee.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),$t(this))return;me.one(e,Vs,(()=>{Vt(this)&&this.focus()}));const i=Ee.findOne(js);i&&i!==e&&Xs.getInstance(i).hide();Xs.getOrCreateInstance(e).toggle(this)})),me.on(window,Os,(()=>{for(const t of Ee.find(js))Xs.getOrCreateInstance(t).show()})),me.on(window,$s,(()=>{for(const t of Ee.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&Xs.getOrCreateInstance(t).hide()})),ke(Xs),Qt(Xs);const Ks={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Qs=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Js=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Zs=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?!Qs.has(i)||Boolean(Js.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(i)))};const tn={allowList:Ks,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},en={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},sn={entry:"(string|element|function|null)",selector:"(string|element)"};class nn extends we{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return tn}static get DefaultType(){return en}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[s,n]of Object.entries(this._config.content))this._setContent(t,n,s);const e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},sn)}_setContent(t,e,i){const s=Ee.findOne(i,t);s&&((e=this._resolvePossibleFunction(e))?Wt(e)?this._putElementInTemplate(zt(e),s):this._config.html?s.innerHTML=this._maybeSanitize(e):s.textContent=e:s.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,i){if(!t.length)return t;if(i&&"function"===typeof i)return i(t);const s=(new window.DOMParser).parseFromString(t,"text/html"),n=[].concat(...s.body.querySelectorAll("*"));for(const r of n){const t=r.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){r.remove();continue}const i=[].concat(...r.attributes),s=[].concat(e["*"]||[],e[t]||[]);for(const e of i)Zs(e,s)||r.removeAttribute(e.nodeName)}return s.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Jt(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const rn=new Set(["sanitize","allowList","sanitizeFn"]),an="fade",on="show",ln=".tooltip-inner",hn=".modal",cn="hide.bs.modal",dn="hover",un="focus",pn={AUTO:"auto",TOP:"top",RIGHT:Kt()?"left":"right",BOTTOM:"bottom",LEFT:Kt()?"right":"left"},fn={allowList:Ks,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},gn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class mn extends xe{constructor(t,e){super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return fn}static get DefaultType(){return gn}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),me.off(this._element.closest(hn),cn,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=me.trigger(this._element,this.constructor.eventName("show")),e=(Ut(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),me.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(on),"ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))me.on(n,"mouseover",Gt);this._queueCallback((()=>{me.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(me.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove(on),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))me.off(t,"mouseover",Gt);this._activeTrigger.click=!1,this._activeTrigger[un]=!1,this._activeTrigger[dn]=!1,this._isHovered=null;this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),me.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(an,on),e.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(an),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new nn({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ln]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(an)}_isShown(){return this.tip&&this.tip.classList.contains(on)}_createPopper(t){const e=Jt(this._config.placement,[this,t,this._element]),i=pn[e.toUpperCase()];return Ot(this._element,t,this._getPopperConfig(i))}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Jt(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...Jt(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)me.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===dn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=e===dn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");me.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?un:dn]=!0,e._enter()})),me.on(this._element,i,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?un:dn]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},me.on(this._element.closest(hn),cn,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=_e.getDataAttributes(this._element);for(const i of Object.keys(e))rn.has(i)&&delete e[i];return t={...e,..."object"===typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:zt(t.container),"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=mn.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Qt(mn);const vn=".popover-header",bn=".popover-body",yn={...mn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},_n={...mn.DefaultType,content:"(null|string|element|function)"};class wn extends mn{static get Default(){return yn}static get DefaultType(){return _n}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[vn]:this._getTitle(),[bn]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=wn.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Qt(wn);const xn=".bs.scrollspy",An=`activate${xn}`,En=`click${xn}`,kn=`load${xn}.data-api`,Sn="active",Cn="[href]",Pn=".nav-link",Tn=`${Pn}, .nav-item > ${Pn}, .list-group-item`,Mn={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Dn={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Rn extends xe{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Mn}static get DefaultType(){return Dn}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=zt(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"===typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(me.off(this._config.target,En),me.on(this._config.target,En,Cn,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const i=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:s,behavior:"smooth"});i.scrollTop=s}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),i=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},s=(this._rootElement||document.documentElement).scrollTop,n=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const r of t){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(r));continue}const t=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&t){if(i(r),!s)return}else n||t||i(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=Ee.find(Cn,this._config.target);for(const e of t){if(!e.hash||$t(e))continue;const t=Ee.findOne(decodeURI(e.hash),this._element);Vt(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Sn),this._activateParents(t),me.trigger(this._element,An,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))Ee.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(Sn);else for(const e of Ee.parents(t,".nav, .list-group"))for(const t of Ee.prev(e,Tn))t.classList.add(Sn)}_clearActiveClass(t){t.classList.remove(Sn);const e=Ee.find(`${Cn}.${Sn}`,t);for(const i of e)i.classList.remove(Sn)}static jQueryInterface(t){return this.each((function(){const e=Rn.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}me.on(window,kn,(()=>{for(const t of Ee.find('[data-bs-spy="scroll"]'))Rn.getOrCreateInstance(t)})),Qt(Rn);const Ln=".bs.tab",On=`hide${Ln}`,In=`hidden${Ln}`,Fn=`show${Ln}`,Nn=`shown${Ln}`,jn=`click${Ln}`,Bn=`keydown${Ln}`,Hn=`load${Ln}`,Wn="ArrowLeft",zn="ArrowRight",Vn="ArrowUp",$n="ArrowDown",Un="Home",Gn="End",qn="active",Yn="fade",Xn="show",Kn=".dropdown-toggle",Qn=`:not(${Kn})`,Jn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Zn=`${`.nav-link${Qn}, .list-group-item${Qn}, [role="tab"]${Qn}`}, ${Jn}`,tr=`.${qn}[data-bs-toggle="tab"], .${qn}[data-bs-toggle="pill"], .${qn}[data-bs-toggle="list"]`;class er extends xe{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),me.on(this._element,Bn,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),i=e?me.trigger(e,On,{relatedTarget:t}):null;me.trigger(t,Fn,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(qn),this._activate(Ee.getElementFromSelector(t));this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),me.trigger(t,Nn,{relatedTarget:e})):t.classList.add(Xn)}),t,t.classList.contains(Yn))}_deactivate(t,e){if(!t)return;t.classList.remove(qn),t.blur(),this._deactivate(Ee.getElementFromSelector(t));this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),me.trigger(t,In,{relatedTarget:e})):t.classList.remove(Xn)}),t,t.classList.contains(Yn))}_keydown(t){if(![Wn,zn,Vn,$n,Un,Gn].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!$t(t)));let i;if([Un,Gn].includes(t.key))i=e[t.key===Un?0:e.length-1];else{const s=[zn,$n].includes(t.key);i=te(e,t.target,s,!0)}i&&(i.focus({preventScroll:!0}),er.getOrCreateInstance(i).show())}_getChildren(){return Ee.find(Zn,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const i of e)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=Ee.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const i=this._getOuterElement(t);if(!i.classList.contains("dropdown"))return;const s=(t,s)=>{const n=Ee.findOne(t,i);n&&n.classList.toggle(s,e)};s(Kn,qn),s(".dropdown-menu",Xn),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(qn)}_getInnerElement(t){return t.matches(Zn)?t:Ee.findOne(Zn,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=er.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}me.on(document,jn,Jn,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),$t(this)||er.getOrCreateInstance(this).show()})),me.on(window,Hn,(()=>{for(const t of Ee.find(tr))er.getOrCreateInstance(t)})),Qt(er);const ir=".bs.toast",sr=`mouseover${ir}`,nr=`mouseout${ir}`,rr=`focusin${ir}`,ar=`focusout${ir}`,or=`hide${ir}`,lr=`hidden${ir}`,hr=`show${ir}`,cr=`shown${ir}`,dr="hide",ur="show",pr="showing",fr={animation:"boolean",autohide:"boolean",delay:"number"},gr={animation:!0,autohide:!0,delay:5e3};class mr extends xe{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return gr}static get DefaultType(){return fr}static get NAME(){return"toast"}show(){if(me.trigger(this._element,hr).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(dr),qt(this._element),this._element.classList.add(ur,pr),this._queueCallback((()=>{this._element.classList.remove(pr),me.trigger(this._element,cr),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this.isShown())return;if(me.trigger(this._element,or).defaultPrevented)return;this._element.classList.add(pr),this._queueCallback((()=>{this._element.classList.add(dr),this._element.classList.remove(pr,ur),me.trigger(this._element,lr)}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ur),super.dispose()}isShown(){return this._element.classList.contains(ur)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){me.on(this._element,sr,(t=>this._onInteraction(t,!0))),me.on(this._element,nr,(t=>this._onInteraction(t,!1))),me.on(this._element,rr,(t=>this._onInteraction(t,!0))),me.on(this._element,ar,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=mr.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ke(mr),Qt(mr)},18400:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"}(i=e.ElementType||(e.ElementType={})),e.isTag=function(t){return t.type===i.Tag||t.type===i.Script||t.type===i.Style},e.Root=i.Root,e.Text=i.Text,e.Directive=i.Directive,e.Comment=i.Comment,e.Script=i.Script,e.Style=i.Style,e.Tag=i.Tag,e.CDATA=i.CDATA,e.Doctype=i.Doctype},32955:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce((function(t,e){return t[e.toLowerCase()]=e,t}),{})},64273:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,c,d=t.match(r),u=d&&d[1]?d[1].toLowerCase():"";switch(u){case i:var f=h(t);if(!a.test(t))null===(e=null===(m=f.querySelector(s))||void 0===m?void 0:m.parentNode)||void 0===e||e.removeChild(m);if(!o.test(t))null===(c=null===(m=f.querySelector(n))||void 0===m?void 0:m.parentNode)||void 0===c||c.removeChild(m);return f.querySelectorAll(i);case s:case n:var g=l(t).querySelectorAll(u);return o.test(t)&&a.test(t)?g[0].parentNode.childNodes:g;default:return p?p(t):(m=l(t,n).querySelector(n)).childNodes;var m}};var i="html",s="head",n="body",r=/<([a-zA-Z]+[0-9]?)/,a=/<head[^]*>/i,o=/<body[^]*>/i,l=function(t,e){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},h=function(t,e){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},c="object"===typeof window&&window.DOMParser;if("function"===typeof c){var d=new c;l=h=function(t,e){return e&&(t="<".concat(e,">").concat(t,"</").concat(e,">")),d.parseFromString(t,"text/html")}}if("object"===typeof document&&document.implementation){var u=document.implementation.createHTMLDocument();l=function(t,e){if(e){var i=u.documentElement.querySelector(e);return i&&(i.innerHTML=t),u}return u.documentElement.innerHTML=t,u}}var p,f="object"===typeof document&&document.createElement("template");f&&f.content&&(p=function(t){return f.innerHTML=t,f.content.childNodes})},70:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("string"!==typeof t)throw new TypeError("First argument must be a string");if(!t)return[];var e=t.match(a),i=e?e[1]:void 0;return(0,r.formatDOM)((0,n.default)(t),null,i)};var n=s(i(64273)),r=i(1454),a=/<(![a-zA-Z\s]+)>/},1454:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatAttributes=r,e.formatDOM=function t(e,i,n){void 0===i&&(i=null);for(var o,l=[],h=0,c=e.length;h<c;h++){var d=e[h];switch(d.nodeType){case 1:var u=a(d.nodeName);(o=new s.Element(u,r(d.attributes))).children=t("template"===u?d.content.childNodes:d.childNodes,o);break;case 3:o=new s.Text(d.nodeValue);break;case 8:o=new s.Comment(d.nodeValue);break;default:continue}var p=l[h-1]||null;p&&(p.next=o),o.parent=i,o.prev=p,o.next=null,l.push(o)}n&&((o=new s.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n)).next=l[0]||null,o.parent=i,l.unshift(o),l[1]&&(l[1].prev=l[0]));return l};var s=i(80196),n=i(32955);function r(t){for(var e={},i=0,s=t.length;i<s;i++){var n=t[i];e[n.name]=n.value}return e}function a(t){var e=function(t){return n.CASE_SENSITIVE_TAG_NAMES_MAP[t]}(t=t.toLowerCase());return e||t}},80196:function(t,e,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||s(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=i(18400),a=i(31538);n(i(31538),e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function t(t,e,i){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof e&&(i=e,e=o),"object"===typeof t&&(e=t,t=void 0),this.callback=null!==t&&void 0!==t?t:null,this.options=null!==e&&void 0!==e?e:o,this.elementCB=null!==i&&void 0!==i?i:null}return t.prototype.onparserinit=function(t){this.parser=t},t.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},t.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},t.prototype.onerror=function(t){this.handleCallback(t)},t.prototype.onclosetag=function(){this.lastNode=null;var t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)},t.prototype.onopentag=function(t,e){var i=this.options.xmlMode?r.ElementType.Tag:void 0,s=new a.Element(t,e,void 0,i);this.addNode(s),this.tagStack.push(s)},t.prototype.ontext=function(t){var e=this.lastNode;if(e&&e.type===r.ElementType.Text)e.data+=t,this.options.withEndIndices&&(e.endIndex=this.parser.endIndex);else{var i=new a.Text(t);this.addNode(i),this.lastNode=i}},t.prototype.oncomment=function(t){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment)this.lastNode.data+=t;else{var e=new a.Comment(t);this.addNode(e),this.lastNode=e}},t.prototype.oncommentend=function(){this.lastNode=null},t.prototype.oncdatastart=function(){var t=new a.Text(""),e=new a.CDATA([t]);this.addNode(e),t.parent=e,this.lastNode=t},t.prototype.oncdataend=function(){this.lastNode=null},t.prototype.onprocessinginstruction=function(t,e){var i=new a.ProcessingInstruction(t,e);this.addNode(i)},t.prototype.handleCallback=function(t){if("function"===typeof this.callback)this.callback(t,this.dom);else if(t)throw t},t.prototype.addNode=function(t){var e=this.tagStack[this.tagStack.length-1],i=e.children[e.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),e.children.push(t),i&&(t.prev=i,i.next=t),t.parent=e,this.lastNode=null},t}();e.DomHandler=l,e.default=l},31538:function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.cloneNode=e.hasChildren=e.isDocument=e.isDirective=e.isComment=e.isText=e.isCDATA=e.isTag=e.Element=e.Document=e.CDATA=e.NodeWithChildren=e.ProcessingInstruction=e.Comment=e.Text=e.DataNode=e.Node=void 0;var r=i(18400),a=function(){function t(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(t){return void 0===t&&(t=!1),w(this,t)},t}();e.Node=a;var o=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i}return s(e,t),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(a);e.DataNode=o;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Text,e}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(o);e.Text=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Comment,e}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(o);e.Comment=h;var c=function(t){function e(e,i){var s=t.call(this,i)||this;return s.name=e,s.type=r.ElementType.Directive,s}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(o);e.ProcessingInstruction=c;var d=function(t){function e(e){var i=t.call(this)||this;return i.children=e,i}return s(e,t),Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return null!==(t=this.children[0])&&void 0!==t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(a);e.NodeWithChildren=d;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.CDATA,e}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(d);e.CDATA=u;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Root,e}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(d);e.Document=p;var f=function(t){function e(e,i,s,n){void 0===s&&(s=[]),void 0===n&&(n="script"===e?r.ElementType.Script:"style"===e?r.ElementType.Style:r.ElementType.Tag);var a=t.call(this,s)||this;return a.name=e,a.attribs=i,a.type=n,a}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map((function(e){var i,s;return{name:e,value:t.attribs[e],namespace:null===(i=t["x-attribsNamespace"])||void 0===i?void 0:i[e],prefix:null===(s=t["x-attribsPrefix"])||void 0===s?void 0:s[e]}}))},enumerable:!1,configurable:!0}),e}(d);function g(t){return(0,r.isTag)(t)}function m(t){return t.type===r.ElementType.CDATA}function v(t){return t.type===r.ElementType.Text}function b(t){return t.type===r.ElementType.Comment}function y(t){return t.type===r.ElementType.Directive}function _(t){return t.type===r.ElementType.Root}function w(t,e){var i;if(void 0===e&&(e=!1),v(t))i=new l(t.data);else if(b(t))i=new h(t.data);else if(g(t)){var s=e?x(t.children):[],r=new f(t.name,n({},t.attribs),s);s.forEach((function(t){return t.parent=r})),null!=t.namespace&&(r.namespace=t.namespace),t["x-attribsNamespace"]&&(r["x-attribsNamespace"]=n({},t["x-attribsNamespace"])),t["x-attribsPrefix"]&&(r["x-attribsPrefix"]=n({},t["x-attribsPrefix"])),i=r}else if(m(t)){s=e?x(t.children):[];var a=new u(s);s.forEach((function(t){return t.parent=a})),i=a}else if(_(t)){s=e?x(t.children):[];var o=new p(s);s.forEach((function(t){return t.parent=o})),t["x-mode"]&&(o["x-mode"]=t["x-mode"]),i=o}else{if(!y(t))throw new Error("Not implemented yet: ".concat(t.type));var d=new c(t.name,t.data);null!=t["x-name"]&&(d["x-name"]=t["x-name"],d["x-publicId"]=t["x-publicId"],d["x-systemId"]=t["x-systemId"]),i=d}return i.startIndex=t.startIndex,i.endIndex=t.endIndex,null!=t.sourceCodeLocation&&(i.sourceCodeLocation=t.sourceCodeLocation),i}function x(t){for(var e=t.map((function(t){return w(t,!0)})),i=1;i<e.length;i++)e[i].prev=e[i-1],e[i-1].next=e[i];return e}e.Element=f,e.isTag=g,e.isCDATA=m,e.isText=v,e.isComment=b,e.isDirective=y,e.isDocument=_,e.hasChildren=function(t){return Object.prototype.hasOwnProperty.call(t,"children")},e.cloneNode=w},4495:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){void 0===t&&(t={});var i={},h=Boolean(t.type&&o[t.type]);for(var c in t){var d=t[c];if((0,s.isCustomAttribute)(c))i[c]=d;else{var u=c.toLowerCase(),p=l(u);if(p){var f=(0,s.getPropertyInfo)(p);switch(r.includes(p)&&a.includes(e)&&!h&&(p=l("default"+u)),i[p]=d,f&&f.type){case s.BOOLEAN:i[p]=!0;break;case s.OVERLOADED_BOOLEAN:""===d&&(i[p]=!0)}}else n.PRESERVE_CUSTOM_ATTRIBUTES&&(i[c]=d)}}return(0,n.setStyleProp)(t.style,i),i};var s=i(86311),n=i(28625),r=["checked","value"],a=["input","select","textarea"],o={reset:!0,submit:!0};function l(t){return s.possibleStandardNames[t]}},54789:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,i){void 0===i&&(i={});for(var s=[],n="function"===typeof i.replace,h=i.transform||a.returnFirstArg,c=i.library||o,d=c.cloneElement,u=c.createElement,p=c.isValidElement,f=e.length,g=0;g<f;g++){var m=e[g];if(n){var v=i.replace(m,g);if(p(v)){f>1&&(v=d(v,{key:v.key||g})),s.push(h(v,m,g));continue}}if("text"!==m.type){var b=m,y={};l(b)?((0,a.setStyleProp)(b.attribs.style,b.attribs),y=b.attribs):b.attribs&&(y=(0,r.default)(b.attribs,b.name));var _=void 0;switch(m.type){case"script":case"style":m.children[0]&&(y.dangerouslySetInnerHTML={__html:m.children[0].data});break;case"tag":"textarea"===m.name&&m.children[0]?y.defaultValue=m.children[0].data:m.children&&m.children.length&&(_=t(m.children,i));break;default:continue}f>1&&(y.key=g),s.push(h(u(m.name,y,_),m,g))}else{var w=!m.data.trim().length;if(w&&m.parent&&!(0,a.canTextBeChildOfNode)(m.parent))continue;if(i.trim&&w)continue;s.push(h(m.data,m,g))}}return 1===s.length?s[0]:s};var n=i(65043),r=s(i(4495)),a=i(28625),o={cloneElement:n.cloneElement,createElement:n.createElement,isValidElement:n.isValidElement};function l(t){return a.PRESERVE_CUSTOM_ATTRIBUTES&&"tag"===t.type&&(0,a.isCustomComponent)(t.name,t.attribs)}},61001:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0,e.default=function(t,e){if("string"!==typeof t)throw new TypeError("First argument must be a string");if(!t)return[];return(0,a.default)((0,n.default)(t,(null===e||void 0===e?void 0:e.htmlparser2)||l),e)};var n=s(i(70));e.htmlToDOM=n.default;var r=s(i(4495));e.attributesToProps=r.default;var a=s(i(54789));e.domToReact=a.default;var o=i(78801);Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return o.Text}});var l={lowerCaseAttributeNames:!1}},28625:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=void 0,e.isCustomComponent=function(t,e){if(!t.includes("-"))return Boolean(e&&"string"===typeof e.is);if(a.has(t))return!1;return!0},e.setStyleProp=function(t,e){if("string"!==typeof t)return;if(!t.trim())return void(e.style={});try{e.style=(0,r.default)(t,o)}catch(i){e.style={}}};var n=i(65043),r=s(i(77294)),a=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);var o={reactCompat:!0};e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);e.canTextBeChildOfNode=function(t){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(t.name)};e.returnFirstArg=function(t){return t}},78801:function(t,e,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||s(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=i(18400),a=i(80185);n(i(80185),e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function t(t,e,i){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof e&&(i=e,e=o),"object"===typeof t&&(e=t,t=void 0),this.callback=null!==t&&void 0!==t?t:null,this.options=null!==e&&void 0!==e?e:o,this.elementCB=null!==i&&void 0!==i?i:null}return t.prototype.onparserinit=function(t){this.parser=t},t.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},t.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},t.prototype.onerror=function(t){this.handleCallback(t)},t.prototype.onclosetag=function(){this.lastNode=null;var t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)},t.prototype.onopentag=function(t,e){var i=this.options.xmlMode?r.ElementType.Tag:void 0,s=new a.Element(t,e,void 0,i);this.addNode(s),this.tagStack.push(s)},t.prototype.ontext=function(t){var e=this.lastNode;if(e&&e.type===r.ElementType.Text)e.data+=t,this.options.withEndIndices&&(e.endIndex=this.parser.endIndex);else{var i=new a.Text(t);this.addNode(i),this.lastNode=i}},t.prototype.oncomment=function(t){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment)this.lastNode.data+=t;else{var e=new a.Comment(t);this.addNode(e),this.lastNode=e}},t.prototype.oncommentend=function(){this.lastNode=null},t.prototype.oncdatastart=function(){var t=new a.Text(""),e=new a.CDATA([t]);this.addNode(e),t.parent=e,this.lastNode=t},t.prototype.oncdataend=function(){this.lastNode=null},t.prototype.onprocessinginstruction=function(t,e){var i=new a.ProcessingInstruction(t,e);this.addNode(i)},t.prototype.handleCallback=function(t){if("function"===typeof this.callback)this.callback(t,this.dom);else if(t)throw t},t.prototype.addNode=function(t){var e=this.tagStack[this.tagStack.length-1],i=e.children[e.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),e.children.push(t),i&&(t.prev=i,i.next=t),t.parent=e,this.lastNode=null},t}();e.DomHandler=l,e.default=l},80185:function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.cloneNode=e.hasChildren=e.isDocument=e.isDirective=e.isComment=e.isText=e.isCDATA=e.isTag=e.Element=e.Document=e.CDATA=e.NodeWithChildren=e.ProcessingInstruction=e.Comment=e.Text=e.DataNode=e.Node=void 0;var r=i(18400),a=function(){function t(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(t){return void 0===t&&(t=!1),w(this,t)},t}();e.Node=a;var o=function(t){function e(e){var i=t.call(this)||this;return i.data=e,i}return s(e,t),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.data},set:function(t){this.data=t},enumerable:!1,configurable:!0}),e}(a);e.DataNode=o;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Text,e}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),e}(o);e.Text=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Comment,e}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),e}(o);e.Comment=h;var c=function(t){function e(e,i){var s=t.call(this,i)||this;return s.name=e,s.type=r.ElementType.Directive,s}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),e}(o);e.ProcessingInstruction=c;var d=function(t){function e(e){var i=t.call(this)||this;return i.children=e,i}return s(e,t),Object.defineProperty(e.prototype,"firstChild",{get:function(){var t;return null!==(t=this.children[0])&&void 0!==t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.children},set:function(t){this.children=t},enumerable:!1,configurable:!0}),e}(a);e.NodeWithChildren=d;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.CDATA,e}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(d);e.CDATA=u;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=r.ElementType.Root,e}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),e}(d);e.Document=p;var f=function(t){function e(e,i,s,n){void 0===s&&(s=[]),void 0===n&&(n="script"===e?r.ElementType.Script:"style"===e?r.ElementType.Style:r.ElementType.Tag);var a=t.call(this,s)||this;return a.name=e,a.attribs=i,a.type=n,a}return s(e,t),Object.defineProperty(e.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name},set:function(t){this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){var t=this;return Object.keys(this.attribs).map((function(e){var i,s;return{name:e,value:t.attribs[e],namespace:null===(i=t["x-attribsNamespace"])||void 0===i?void 0:i[e],prefix:null===(s=t["x-attribsPrefix"])||void 0===s?void 0:s[e]}}))},enumerable:!1,configurable:!0}),e}(d);function g(t){return(0,r.isTag)(t)}function m(t){return t.type===r.ElementType.CDATA}function v(t){return t.type===r.ElementType.Text}function b(t){return t.type===r.ElementType.Comment}function y(t){return t.type===r.ElementType.Directive}function _(t){return t.type===r.ElementType.Root}function w(t,e){var i;if(void 0===e&&(e=!1),v(t))i=new l(t.data);else if(b(t))i=new h(t.data);else if(g(t)){var s=e?x(t.children):[],r=new f(t.name,n({},t.attribs),s);s.forEach((function(t){return t.parent=r})),null!=t.namespace&&(r.namespace=t.namespace),t["x-attribsNamespace"]&&(r["x-attribsNamespace"]=n({},t["x-attribsNamespace"])),t["x-attribsPrefix"]&&(r["x-attribsPrefix"]=n({},t["x-attribsPrefix"])),i=r}else if(m(t)){s=e?x(t.children):[];var a=new u(s);s.forEach((function(t){return t.parent=a})),i=a}else if(_(t)){s=e?x(t.children):[];var o=new p(s);s.forEach((function(t){return t.parent=o})),t["x-mode"]&&(o["x-mode"]=t["x-mode"]),i=o}else{if(!y(t))throw new Error("Not implemented yet: ".concat(t.type));var d=new c(t.name,t.data);null!=t["x-name"]&&(d["x-name"]=t["x-name"],d["x-publicId"]=t["x-publicId"],d["x-systemId"]=t["x-systemId"]),i=d}return i.startIndex=t.startIndex,i.endIndex=t.endIndex,null!=t.sourceCodeLocation&&(i.sourceCodeLocation=t.sourceCodeLocation),i}function x(t){for(var e=t.map((function(t){return w(t,!0)})),i=1;i<e.length;i++)e[i].prev=e[i-1],e[i-1].next=e[i];return e}e.Element=f,e.isTag=g,e.isCDATA=m,e.isText=v,e.isComment=b,e.isDirective=y,e.isDocument=_,e.hasChildren=function(t){return Object.prototype.hasOwnProperty.call(t,"children")},e.cloneNode=w},94403:t=>{var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,i=/\n/g,s=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,h="";function c(t){return t?t.replace(l,h):h}t.exports=function(t,l){if("string"!==typeof t)throw new TypeError("First argument must be a string");if(!t)return[];l=l||{};var d=1,u=1;function p(t){var e=t.match(i);e&&(d+=e.length);var s=t.lastIndexOf("\n");u=~s?t.length-s:u+t.length}function f(){var t={line:d,column:u};return function(e){return e.position=new g(t),y(),e}}function g(t){this.start=t,this.end={line:d,column:u},this.source=l.source}g.prototype.content=t;var m=[];function v(e){var i=new Error(l.source+":"+d+":"+u+": "+e);if(i.reason=e,i.filename=l.source,i.line=d,i.column=u,i.source=t,!l.silent)throw i;m.push(i)}function b(e){var i=e.exec(t);if(i){var s=i[0];return p(s),t=t.slice(s.length),i}}function y(){b(s)}function _(t){var e;for(t=t||[];e=w();)!1!==e&&t.push(e);return t}function w(){var e=f();if("/"==t.charAt(0)&&"*"==t.charAt(1)){for(var i=2;h!=t.charAt(i)&&("*"!=t.charAt(i)||"/"!=t.charAt(i+1));)++i;if(i+=2,h===t.charAt(i-1))return v("End of comment missing");var s=t.slice(2,i-2);return u+=2,p(s),t=t.slice(i),u+=2,e({type:"comment",comment:s})}}function x(){var t=f(),i=b(n);if(i){if(w(),!b(r))return v("property missing ':'");var s=b(a),l=t({type:"declaration",property:c(i[0].replace(e,h)),value:s?c(s[0].replace(e,h)):h});return b(o),l}}return y(),function(){var t,e=[];for(_(e);t=x();)!1!==t&&(e.push(t),_(e));return e}()}},41497:(t,e,i)=>{"use strict";var s=i(13218);function n(){}function r(){}r.resetWarningCache=n,t.exports=function(){function t(t,e,i,n,r,a){if(a!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function e(){return t}t.isRequired=t;var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r,resetWarningCache:n};return i.PropTypes=i,i}},65173:(t,e,i)=>{t.exports=i(41497)()},13218:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},63632:(t,e,i)=>{"use strict";i.d(e,{tH:()=>a});var s=i(65043);const n=(0,s.createContext)(null),r={didCatch:!1,error:null};class a extends s.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=r}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(null!==t){for(var e,i,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];null===(e=(i=this.props).onReset)||void 0===e||e.call(i,{args:n,reason:"imperative-api"}),this.setState(r)}}componentDidCatch(t,e){var i,s;null===(i=(s=this.props).onError)||void 0===i||i.call(s,t,e)}componentDidUpdate(t,e){const{didCatch:i}=this.state,{resetKeys:s}=this.props;var n,a;i&&null!==e.error&&function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length!==e.length||t.some(((t,i)=>!Object.is(t,e[i])))}(t.resetKeys,s)&&(null===(n=(a=this.props).onReset)||void 0===n||n.call(a,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(r))}render(){const{children:t,fallbackRender:e,FallbackComponent:i,fallback:r}=this.props,{didCatch:a,error:o}=this.state;let l=t;if(a){const t={error:o,resetErrorBoundary:this.resetErrorBoundary};if("function"===typeof e)l=e(t);else if(i)l=(0,s.createElement)(i,t);else{if(null!==r&&!(0,s.isValidElement)(r))throw o;l=r}}return(0,s.createElement)(n.Provider,{value:{didCatch:a,error:o,resetErrorBoundary:this.resetErrorBoundary}},l)}}},62774:(t,e,i)=>{"use strict";i.d(e,{WCW:()=>d,oHA:()=>u,onj:()=>p});var s=i(65043),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=s.createContext&&s.createContext(n),a=function(){return a=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},a.apply(this,arguments)},o=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};function l(t){return t&&t.map((function(t,e){return s.createElement(t.tag,a({key:e},t.attr),l(t.child))}))}function h(t){return function(e){return s.createElement(c,a({attr:a({},t.attr)},e),l(t.child))}}function c(t){var e=function(e){var i,n=t.attr,r=t.size,l=t.title,h=o(t,["attr","size","title"]),c=r||e.size||"1em";return e.className&&(i=e.className),t.className&&(i=(i?i+" ":"")+t.className),s.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,h,{className:i,style:a(a({color:t.color||e.color},e.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),l&&s.createElement("title",null,l),t.children)};return void 0!==r?s.createElement(r.Consumer,null,(function(t){return e(t)})):e(n)}function d(t){return h({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(t)}function u(t){return h({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(t)}function p(t){return h({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(t)}},86311:(t,e,i)=>{"use strict";function s(t,e,i,s,n,r,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}const n={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach((t=>{n[t]=new s(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((t=>{let[e,i]=t;n[e]=new s(e,1,!1,i,null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((t=>{n[t]=new s(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((t=>{n[t]=new s(t,2,!1,t,null,!1,!1)})),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach((t=>{n[t]=new s(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((t=>{n[t]=new s(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((t=>{n[t]=new s(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((t=>{n[t]=new s(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((t=>{n[t]=new s(t,5,!1,t.toLowerCase(),null,!1,!1)}));const r=/[\-\:]([a-z])/g,a=t=>t[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach((t=>{const e=t.replace(r,a);n[e]=new s(e,1,!1,t,null,!1,!1)})),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach((t=>{const e=t.replace(r,a);n[e]=new s(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((t=>{const e=t.replace(r,a);n[e]=new s(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((t=>{n[t]=new s(t,1,!1,t.toLowerCase(),null,!1,!1)}));n.xlinkHref=new s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((t=>{n[t]=new s(t,1,!1,t.toLowerCase(),null,!0,!0)}));const{CAMELCASE:o,SAME:l,possibleStandardNames:h}=i(8952),c=RegExp.prototype.test.bind(new RegExp("^(data|aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$")),d=Object.keys(h).reduce(((t,e)=>{const i=h[e];return i===l?t[e]=e:i===o?t[e.toLowerCase()]=e:t[e]=i,t}),{});e.BOOLEAN=3,e.BOOLEANISH_STRING=2,e.NUMERIC=5,e.OVERLOADED_BOOLEAN=4,e.POSITIVE_NUMERIC=6,e.RESERVED=0,e.STRING=1,e.getPropertyInfo=function(t){return n.hasOwnProperty(t)?n[t]:null},e.isCustomAttribute=c,e.possibleStandardNames=d},8952:(t,e)=>{e.SAME=0;e.CAMELCASE=1,e.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1}},969:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>xs});var s=i(89379);function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function r(t,e){if(t){if("string"===typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var s,n,r=[],a=!0,o=!1;try{for(i=i.call(t);!(a=(s=i.next()).done)&&(r.push(s.value),!e||r.length!==e);a=!0);}catch(l){o=!0,n=l}finally{try{a||null==i.return||i.return()}finally{if(o)throw n}}return r}}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var o=i(98587);function l(t,e){if(null==t)return{};var i,s,n=(0,o.A)(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var h=i(65043),c=i.t(h,2),d=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];var u=i(58168);function p(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var f=i(63662);function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){if(e&&("object"===m(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function b(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=g(t);if(e){var n=g(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return v(this,i)}}function y(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(){function t(t){var e=this;this._insertTag=function(t){var i;i=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,i),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{i.insertRule(t,i.cssRules.length)}catch(s){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),w=Math.abs,x=String.fromCharCode,A=Object.assign;function E(t){return t.trim()}function k(t,e,i){return t.replace(e,i)}function S(t,e){return t.indexOf(e)}function C(t,e){return 0|t.charCodeAt(e)}function P(t,e,i){return t.slice(e,i)}function T(t){return t.length}function M(t){return t.length}function D(t,e){return e.push(t),t}var R=1,L=1,O=0,I=0,F=0,N="";function j(t,e,i,s,n,r,a){return{value:t,root:e,parent:i,type:s,props:n,children:r,line:R,column:L,length:a,return:""}}function B(t,e){return A(j("",null,null,"",null,null,0),t,{length:-t.length},e)}function H(){return F=I>0?C(N,--I):0,L--,10===F&&(L=1,R--),F}function W(){return F=I<O?C(N,I++):0,L++,10===F&&(L=1,R++),F}function z(){return C(N,I)}function V(){return I}function $(t,e){return P(N,t,e)}function U(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function G(t){return R=L=1,O=T(N=t),I=0,[]}function q(t){return N="",t}function Y(t){return E($(I-1,Q(91===t?t+2:40===t?t+1:t)))}function X(t){for(;(F=z())&&F<33;)W();return U(t)>2||U(F)>3?"":" "}function K(t,e){for(;--e&&W()&&!(F<48||F>102||F>57&&F<65||F>70&&F<97););return $(t,V()+(e<6&&32==z()&&32==W()))}function Q(t){for(;W();)switch(F){case t:return I;case 34:case 39:34!==t&&39!==t&&Q(F);break;case 40:41===t&&Q(t);break;case 92:W()}return I}function J(t,e){for(;W()&&t+F!==57&&(t+F!==84||47!==z()););return"/*"+$(e,I-1)+"*"+x(47===t?t:W())}function Z(t){for(;!U(z());)W();return $(t,I)}var tt="-ms-",et="-moz-",it="-webkit-",st="comm",nt="rule",rt="decl",at="@keyframes";function ot(t,e){for(var i="",s=M(t),n=0;n<s;n++)i+=e(t[n],n,t,e)||"";return i}function lt(t,e,i,s){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case rt:return t.return=t.return||t.value;case st:return"";case at:return t.return=t.value+"{"+ot(t.children,s)+"}";case nt:t.value=t.props.join(",")}return T(i=ot(t.children,s))?t.return=t.value+"{"+i+"}":""}function ht(t){return q(ct("",null,null,null,[""],t=G(t),0,[0],t))}function ct(t,e,i,s,n,r,a,o,l){for(var h=0,c=0,d=a,u=0,p=0,f=0,g=1,m=1,v=1,b=0,y="",_=n,w=r,A=s,E=y;m;)switch(f=b,b=W()){case 40:if(108!=f&&58==C(E,d-1)){-1!=S(E+=k(Y(b),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:E+=Y(b);break;case 9:case 10:case 13:case 32:E+=X(f);break;case 92:E+=K(V()-1,7);continue;case 47:switch(z()){case 42:case 47:D(ut(J(W(),V()),e,i),l);break;default:E+="/"}break;case 123*g:o[h++]=T(E)*v;case 125*g:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+c:-1==v&&(E=k(E,/\f/g,"")),p>0&&T(E)-d&&D(p>32?pt(E+";",s,i,d-1):pt(k(E," ","")+";",s,i,d-2),l);break;case 59:E+=";";default:if(D(A=dt(E,e,i,h,c,n,o,y,_=[],w=[],d),r),123===b)if(0===c)ct(E,e,A,A,_,r,d,o,w);else switch(99===u&&110===C(E,3)?100:u){case 100:case 108:case 109:case 115:ct(t,A,A,s&&D(dt(t,A,A,0,0,n,o,y,n,_=[],d),w),n,w,d,o,s?_:w);break;default:ct(E,A,A,A,[""],w,0,o,w)}}h=c=p=0,g=v=1,y=E="",d=a;break;case 58:d=1+T(E),p=f;default:if(g<1)if(123==b)--g;else if(125==b&&0==g++&&125==H())continue;switch(E+=x(b),b*g){case 38:v=c>0?1:(E+="\f",-1);break;case 44:o[h++]=(T(E)-1)*v,v=1;break;case 64:45===z()&&(E+=Y(W())),u=z(),c=d=T(y=E+=Z(V())),b++;break;case 45:45===f&&2==T(E)&&(g=0)}}return r}function dt(t,e,i,s,n,r,a,o,l,h,c){for(var d=n-1,u=0===n?r:[""],p=M(u),f=0,g=0,m=0;f<s;++f)for(var v=0,b=P(t,d+1,d=w(g=a[f])),y=t;v<p;++v)(y=E(g>0?u[v]+" "+b:k(b,/&\f/g,u[v])))&&(l[m++]=y);return j(t,e,i,0===n?nt:o,l,h,c)}function ut(t,e,i){return j(t,e,i,st,x(F),P(t,2,-2),0)}function pt(t,e,i,s){return j(t,e,i,rt,P(t,0,s),P(t,s+1,-1),s)}var ft=function(t,e,i){for(var s=0,n=0;s=n,n=z(),38===s&&12===n&&(e[i]=1),!U(n);)W();return $(t,I)},gt=function(t,e){return q(function(t,e){var i=-1,s=44;do{switch(U(s)){case 0:38===s&&12===z()&&(e[i]=1),t[i]+=ft(I-1,e,i);break;case 2:t[i]+=Y(s);break;case 4:if(44===s){t[++i]=58===z()?"&\f":"",e[i]=t[i].length;break}default:t[i]+=x(s)}}while(s=W());return t}(G(t),e))},mt=new WeakMap,vt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,i=t.parent,s=t.column===i.column&&t.line===i.line;"rule"!==i.type;)if(!(i=i.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||mt.get(i))&&!s){mt.set(t,!0);for(var n=[],r=gt(e,n),a=i.props,o=0,l=0;o<r.length;o++)for(var h=0;h<a.length;h++,l++)t.props[l]=n[o]?r[o].replace(/&\f/g,a[h]):a[h]+" "+r[o]}}},bt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function yt(t,e){switch(function(t,e){return 45^C(t,0)?(((e<<2^C(t,0))<<2^C(t,1))<<2^C(t,2))<<2^C(t,3):0}(t,e)){case 5103:return it+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return it+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return it+t+et+t+tt+t+t;case 6828:case 4268:return it+t+tt+t+t;case 6165:return it+t+tt+"flex-"+t+t;case 5187:return it+t+k(t,/(\w+).+(:[^]+)/,it+"box-$1$2"+tt+"flex-$1$2")+t;case 5443:return it+t+tt+"flex-item-"+k(t,/flex-|-self/,"")+t;case 4675:return it+t+tt+"flex-line-pack"+k(t,/align-content|flex-|-self/,"")+t;case 5548:return it+t+tt+k(t,"shrink","negative")+t;case 5292:return it+t+tt+k(t,"basis","preferred-size")+t;case 6060:return it+"box-"+k(t,"-grow","")+it+t+tt+k(t,"grow","positive")+t;case 4554:return it+k(t,/([^-])(transform)/g,"$1"+it+"$2")+t;case 6187:return k(k(k(t,/(zoom-|grab)/,it+"$1"),/(image-set)/,it+"$1"),t,"")+t;case 5495:case 3959:return k(t,/(image-set\([^]*)/,it+"$1$`$1");case 4968:return k(k(t,/(.+:)(flex-)?(.*)/,it+"box-pack:$3"+tt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+it+t+t;case 4095:case 3583:case 4068:case 2532:return k(t,/(.+)-inline(.+)/,it+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(T(t)-1-e>6)switch(C(t,e+1)){case 109:if(45!==C(t,e+4))break;case 102:return k(t,/(.+:)(.+)-([^]+)/,"$1"+it+"$2-$3$1"+et+(108==C(t,e+3)?"$3":"$2-$3"))+t;case 115:return~S(t,"stretch")?yt(k(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==C(t,e+1))break;case 6444:switch(C(t,T(t)-3-(~S(t,"!important")&&10))){case 107:return k(t,":",":"+it)+t;case 101:return k(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+it+(45===C(t,14)?"inline-":"")+"box$3$1"+it+"$2$3$1"+tt+"$2box$3")+t}break;case 5936:switch(C(t,e+11)){case 114:return it+t+tt+k(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return it+t+tt+k(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return it+t+tt+k(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return it+t+tt+t+t}return t}var _t=[function(t,e,i,s){if(t.length>-1&&!t.return)switch(t.type){case rt:t.return=yt(t.value,t.length);break;case at:return ot([B(t,{value:k(t.value,"@","@"+it)})],s);case nt:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ot([B(t,{props:[k(e,/:(read-\w+)/,":-moz-$1")]})],s);case"::placeholder":return ot([B(t,{props:[k(e,/:(plac\w+)/,":"+it+"input-$1")]}),B(t,{props:[k(e,/:(plac\w+)/,":-moz-$1")]}),B(t,{props:[k(e,/:(plac\w+)/,tt+"input-$1")]})],s)}return""}))}}],wt=function(t){var e=t.key;if("css"===e){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var s=t.stylisPlugins||_t;var n,r,a={},o=[];n=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),i=1;i<e.length;i++)a[e[i]]=!0;o.push(t)}));var l,h,c=[lt,(h=function(t){l.insert(t)},function(t){t.root||(t=t.return)&&h(t)})],d=function(t){var e=M(t);return function(i,s,n,r){for(var a="",o=0;o<e;o++)a+=t[o](i,s,n,r)||"";return a}}([vt,bt].concat(s,c));r=function(t,e,i,s){l=i,ot(ht(t?t+"{"+e.styles+"}":e.styles),d),s&&(u.inserted[e.name]=!0)};var u={key:e,sheet:new _({key:e,container:n,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:r};return u.sheet.hydrate(o),u};var xt=function(t,e,i){var s=t.key+"-"+e.name;!1===i&&void 0===t.registered[s]&&(t.registered[s]=e.styles)};var At={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Et(t){var e=Object.create(null);return function(i){return void 0===e[i]&&(e[i]=t(i)),e[i]}}var kt=/[A-Z]|^ms/g,St=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ct=function(t){return 45===t.charCodeAt(1)},Pt=function(t){return null!=t&&"boolean"!==typeof t},Tt=Et((function(t){return Ct(t)?t:t.replace(kt,"-$&").toLowerCase()})),Mt=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(St,(function(t,e,i){return Rt={name:e,styles:i,next:Rt},e}))}return 1===At[t]||Ct(t)||"number"!==typeof e||0===e?e:e+"px"};function Dt(t,e,i){if(null==i)return"";if(void 0!==i.__emotion_styles)return i;switch(typeof i){case"boolean":return"";case"object":if(1===i.anim)return Rt={name:i.name,styles:i.styles,next:Rt},i.name;if(void 0!==i.styles){var s=i.next;if(void 0!==s)for(;void 0!==s;)Rt={name:s.name,styles:s.styles,next:Rt},s=s.next;return i.styles+";"}return function(t,e,i){var s="";if(Array.isArray(i))for(var n=0;n<i.length;n++)s+=Dt(t,e,i[n])+";";else for(var r in i){var a=i[r];if("object"!==typeof a)null!=e&&void 0!==e[a]?s+=r+"{"+e[a]+"}":Pt(a)&&(s+=Tt(r)+":"+Mt(r,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var o=Dt(t,e,a);switch(r){case"animation":case"animationName":s+=Tt(r)+":"+o+";";break;default:s+=r+"{"+o+"}"}}else for(var l=0;l<a.length;l++)Pt(a[l])&&(s+=Tt(r)+":"+Mt(r,a[l])+";")}return s}(t,e,i);case"function":if(void 0!==t){var n=Rt,r=i(t);return Rt=n,Dt(t,e,r)}}if(null==e)return i;var a=e[i];return void 0!==a?a:i}var Rt,Lt=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Ot=function(t,e,i){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var s=!0,n="";Rt=void 0;var r=t[0];null==r||void 0===r.raw?(s=!1,n+=Dt(i,e,r)):n+=r[0];for(var a=1;a<t.length;a++)n+=Dt(i,e,t[a]),s&&(n+=r[a]);Lt.lastIndex=0;for(var o,l="";null!==(o=Lt.exec(n));)l+="-"+o[1];var h=function(t){for(var e,i=0,s=0,n=t.length;n>=4;++s,n-=4)e=1540483477*(65535&(e=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24))+(59797*(e>>>16)<<16),i=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&i)+(59797*(i>>>16)<<16);switch(n){case 3:i^=(255&t.charCodeAt(s+2))<<16;case 2:i^=(255&t.charCodeAt(s+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(s)))+(59797*(i>>>16)<<16)}return(((i=1540483477*(65535&(i^=i>>>13))+(59797*(i>>>16)<<16))^i>>>15)>>>0).toString(36)}(n)+l;return{name:h,styles:n,next:Rt}},It=!!c.useInsertionEffect&&c.useInsertionEffect,Ft=It||function(t){return t()},Nt=(It||h.useLayoutEffect,{}.hasOwnProperty),jt=h.createContext("undefined"!==typeof HTMLElement?wt({key:"css"}):null);jt.Provider;var Bt=function(t){return(0,h.forwardRef)((function(e,i){var s=(0,h.useContext)(jt);return t(e,s,i)}))};var Ht=h.createContext({});var Wt="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",zt=function(t){var e=t.cache,i=t.serialized,s=t.isStringTag;return xt(e,i,s),Ft((function(){return function(t,e,i){xt(t,e,i);var s=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var n=e;do{t.insert(e===n?"."+s:"",n,t.sheet,!0),n=n.next}while(void 0!==n)}}(e,i,s)})),null},Vt=Bt((function(t,e,i){var s=t.css;"string"===typeof s&&void 0!==e.registered[s]&&(s=e.registered[s]);var n=t[Wt],r=[s],a="";"string"===typeof t.className?a=function(t,e,i){var s="";return i.split(" ").forEach((function(i){void 0!==t[i]?e.push(t[i]+";"):s+=i+" "})),s}(e.registered,r,t.className):null!=t.className&&(a=t.className+" ");var o=Ot(r,void 0,h.useContext(Ht));a+=e.key+"-"+o.name;var l={};for(var c in t)Nt.call(t,c)&&"css"!==c&&c!==Wt&&(l[c]=t[c]);return l.ref=i,l.className=a,h.createElement(h.Fragment,null,h.createElement(zt,{cache:e,serialized:o,isStringTag:"string"===typeof n}),h.createElement(n,l))}));var $t=Vt,Ut=(i(80219),function(t,e){var i=arguments;if(null==e||!Nt.call(e,"css"))return h.createElement.apply(void 0,i);var s=i.length,n=new Array(s);n[0]=$t,n[1]=function(t,e){var i={};for(var s in e)Nt.call(e,s)&&(i[s]=e[s]);return i[Wt]=t,i}(t,e);for(var r=2;r<s;r++)n[r]=i[r];return h.createElement.apply(null,n)});function Gt(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Ot(e)}var qt=i(64467),Yt=i(97950);const Xt=Math.min,Kt=Math.max,Qt=Math.round,Jt=Math.floor,Zt=t=>({x:t,y:t});function te(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function ee(t){return ne(t)?(t.nodeName||"").toLowerCase():"#document"}function ie(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function se(t){var e;return null==(e=(ne(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function ne(t){return t instanceof Node||t instanceof ie(t).Node}function re(t){return t instanceof Element||t instanceof ie(t).Element}function ae(t){return t instanceof HTMLElement||t instanceof ie(t).HTMLElement}function oe(t){return"undefined"!==typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof ie(t).ShadowRoot)}function le(t){const{overflow:e,overflowX:i,overflowY:s,display:n}=de(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(n)}function he(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function ce(t){return["html","body","#document"].includes(ee(t))}function de(t){return ie(t).getComputedStyle(t)}function ue(t){if("html"===ee(t))return t;const e=t.assignedSlot||t.parentNode||oe(t)&&t.host||se(t);return oe(e)?e.host:e}function pe(t){const e=ue(t);return ce(e)?t.ownerDocument?t.ownerDocument.body:t.body:ae(e)&&le(e)?e:pe(e)}function fe(t,e,i){var s;void 0===e&&(e=[]),void 0===i&&(i=!0);const n=pe(t),r=n===(null==(s=t.ownerDocument)?void 0:s.body),a=ie(n);return r?e.concat(a,a.visualViewport||[],le(n)?n:[],a.frameElement&&i?fe(a.frameElement):[]):e.concat(n,fe(n,[],i))}function ge(t){const e=de(t);let i=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const n=ae(t),r=n?t.offsetWidth:i,a=n?t.offsetHeight:s,o=Qt(i)!==r||Qt(s)!==a;return o&&(i=r,s=a),{width:i,height:s,$:o}}function me(t){return re(t)?t:t.contextElement}function ve(t){const e=me(t);if(!ae(e))return Zt(1);const i=e.getBoundingClientRect(),{width:s,height:n,$:r}=ge(e);let a=(r?Qt(i.width):i.width)/s,o=(r?Qt(i.height):i.height)/n;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}const be=Zt(0);function ye(t){const e=ie(t);return he()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:be}function _e(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1);const n=t.getBoundingClientRect(),r=me(t);let a=Zt(1);e&&(s?re(s)&&(a=ve(s)):a=ve(t));const o=function(t,e,i){return void 0===e&&(e=!1),!(!i||e&&i!==ie(t))&&e}(r,i,s)?ye(r):Zt(0);let l=(n.left+o.x)/a.x,h=(n.top+o.y)/a.y,c=n.width/a.x,d=n.height/a.y;if(r){const t=ie(r),e=s&&re(s)?ie(s):s;let i=t,n=i.frameElement;for(;n&&s&&e!==i;){const t=ve(n),e=n.getBoundingClientRect(),s=de(n),r=e.left+(n.clientLeft+parseFloat(s.paddingLeft))*t.x,a=e.top+(n.clientTop+parseFloat(s.paddingTop))*t.y;l*=t.x,h*=t.y,c*=t.x,d*=t.y,l+=r,h+=a,i=ie(n),n=i.frameElement}}return te({width:c,height:d,x:l,y:h})}function we(t,e,i,s){void 0===s&&(s={});const{ancestorScroll:n=!0,ancestorResize:r=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:o="function"===typeof IntersectionObserver,animationFrame:l=!1}=s,h=me(t),c=n||r?[...h?fe(h):[],...fe(e)]:[];c.forEach((t=>{n&&t.addEventListener("scroll",i,{passive:!0}),r&&t.addEventListener("resize",i)}));const d=h&&o?function(t,e){let i,s=null;const n=se(t);function r(){var t;clearTimeout(i),null==(t=s)||t.disconnect(),s=null}return function a(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),r();const{left:h,top:c,width:d,height:u}=t.getBoundingClientRect();if(o||e(),!d||!u)return;const p={rootMargin:-Jt(c)+"px "+-Jt(n.clientWidth-(h+d))+"px "+-Jt(n.clientHeight-(c+u))+"px "+-Jt(h)+"px",threshold:Kt(0,Xt(1,l))||1};let f=!0;function g(t){const e=t[0].intersectionRatio;if(e!==l){if(!f)return a();e?a(!1,e):i=setTimeout((()=>{a(!1,1e-7)}),100)}f=!1}try{s=new IntersectionObserver(g,{...p,root:n.ownerDocument})}catch(m){s=new IntersectionObserver(g,p)}s.observe(t)}(!0),r}(h,i):null;let u,p=-1,f=null;a&&(f=new ResizeObserver((t=>{let[s]=t;s&&s.target===h&&f&&(f.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var t;null==(t=f)||t.observe(e)}))),i()})),h&&!l&&f.observe(h),f.observe(e));let g=l?_e(t):null;return l&&function e(){const s=_e(t);!g||s.x===g.x&&s.y===g.y&&s.width===g.width&&s.height===g.height||i();g=s,u=requestAnimationFrame(e)}(),i(),()=>{var t;c.forEach((t=>{n&&t.removeEventListener("scroll",i),r&&t.removeEventListener("resize",i)})),null==d||d(),null==(t=f)||t.disconnect(),f=null,l&&cancelAnimationFrame(u)}}const xe=h.useLayoutEffect;var Ae=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Ee=function(){};function ke(t,e){return e?"-"===e[0]?t+e:t+"__"+e:t}function Se(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];var r=[].concat(s);if(e&&t)for(var a in e)e.hasOwnProperty(a)&&e[a]&&r.push("".concat(ke(t,a)));return r.filter((function(t){return t})).map((function(t){return String(t).trim()})).join(" ")}var Ce=function(t){return e=t,Array.isArray(e)?t.filter(Boolean):"object"===m(t)&&null!==t?[t]:[];var e},Pe=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var e=l(t,Ae);return(0,s.A)({},e)},Te=function(t,e,i){var s=t.cx,n=t.getStyles,r=t.getClassNames,a=t.className;return{css:n(e,t),className:s(null!==i&&void 0!==i?i:{},r(e,t),a)}};function Me(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function De(t){return Me(t)?window.pageYOffset:t.scrollTop}function Re(t,e){Me(t)?window.scrollTo(0,e):t.scrollTop=e}function Le(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ee,n=De(t),r=e-n,a=0;!function e(){var o,l=r*((o=(o=a+=10)/i-1)*o*o+1)+n;Re(t,l),a<i?window.requestAnimationFrame(e):s(t)}()}function Oe(t,e){var i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),n=e.offsetHeight/3;s.bottom+n>i.bottom?Re(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+n,t.scrollHeight)):s.top-n<i.top&&Re(t,Math.max(e.offsetTop-n,0))}function Ie(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}var Fe=!1,Ne={get passive(){return Fe=!0}},je="undefined"!==typeof window?window:{};je.addEventListener&&je.removeEventListener&&(je.addEventListener("p",Ee,Ne),je.removeEventListener("p",Ee,!1));var Be=Fe;function He(t){return null!=t}function We(t,e,i){return t?e:i}var ze=["children","innerProps"],Ve=["children","innerProps"];function $e(t){var e=t.maxHeight,i=t.menuEl,s=t.minHeight,n=t.placement,r=t.shouldScroll,a=t.isFixedPosition,o=t.controlHeight,l=function(t){var e=getComputedStyle(t),i="absolute"===e.position,s=/(auto|scroll)/;if("fixed"===e.position)return document.documentElement;for(var n=t;n=n.parentElement;)if(e=getComputedStyle(n),(!i||"static"!==e.position)&&s.test(e.overflow+e.overflowY+e.overflowX))return n;return document.documentElement}(i),h={placement:"bottom",maxHeight:e};if(!i||!i.offsetParent)return h;var c,d=l.getBoundingClientRect().height,u=i.getBoundingClientRect(),p=u.bottom,f=u.height,g=u.top,m=i.offsetParent.getBoundingClientRect().top,v=a?window.innerHeight:Me(c=l)?window.innerHeight:c.clientHeight,b=De(l),y=parseInt(getComputedStyle(i).marginBottom,10),_=parseInt(getComputedStyle(i).marginTop,10),w=m-_,x=v-g,A=w+b,E=d-b-g,k=p-v+b+y,S=b+g-_,C=160;switch(n){case"auto":case"bottom":if(x>=f)return{placement:"bottom",maxHeight:e};if(E>=f&&!a)return r&&Le(l,k,C),{placement:"bottom",maxHeight:e};if(!a&&E>=s||a&&x>=s)return r&&Le(l,k,C),{placement:"bottom",maxHeight:a?x-y:E-y};if("auto"===n||a){var P=e,T=a?w:A;return T>=s&&(P=Math.min(T-y-o,e)),{placement:"top",maxHeight:P}}if("bottom"===n)return r&&Re(l,k),{placement:"bottom",maxHeight:e};break;case"top":if(w>=f)return{placement:"top",maxHeight:e};if(A>=f&&!a)return r&&Le(l,S,C),{placement:"top",maxHeight:e};if(!a&&A>=s||a&&w>=s){var M=e;return(!a&&A>=s||a&&w>=s)&&(M=a?w-_:A-_),r&&Le(l,S,C),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(n,'".'))}return h}var Ue,Ge=function(t){return"auto"===t?"bottom":t},qe=(0,h.createContext)(null),Ye=function(t){var e=t.children,i=t.minMenuHeight,n=t.maxMenuHeight,r=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,d=((0,h.useContext)(qe)||{}).setPortalPlacement,u=(0,h.useRef)(null),p=a((0,h.useState)(n),2),f=p[0],g=p[1],m=a((0,h.useState)(null),2),v=m[0],b=m[1],y=c.spacing.controlHeight;return xe((function(){var t=u.current;if(t){var e="fixed"===o,s=$e({maxHeight:n,menuEl:t,minHeight:i,placement:r,shouldScroll:l&&!e,isFixedPosition:e,controlHeight:y});g(s.maxHeight),b(s.placement),null===d||void 0===d||d(s.placement)}}),[n,r,o,l,i,d,y]),e({ref:u,placerProps:(0,s.A)((0,s.A)({},t),{},{placement:v||Ge(r),maxHeight:f})})},Xe=function(t){var e=t.children,i=t.innerRef,s=t.innerProps;return Ut("div",(0,u.A)({},Te(t,"menu",{menu:!0}),{ref:i},s),e)},Ke=function(t,e){var i=t.theme,n=i.spacing.baseUnit,r=i.colors;return(0,s.A)({textAlign:"center"},e?{}:{color:r.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},Qe=Ke,Je=Ke,Ze=["size"],ti=["innerProps","isRtl","size"];var ei,ii,si={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},ni=function(t){var e=t.size,i=l(t,Ze);return Ut("svg",(0,u.A)({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:si},i))},ri=function(t){return Ut(ni,(0,u.A)({size:20},t),Ut("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},ai=function(t){return Ut(ni,(0,u.A)({size:20},t),Ut("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},oi=function(t,e){var i=t.isFocused,n=t.theme,r=n.spacing.baseUnit,a=n.colors;return(0,s.A)({label:"indicatorContainer",display:"flex",transition:"color 150ms"},e?{}:{color:i?a.neutral60:a.neutral20,padding:2*r,":hover":{color:i?a.neutral80:a.neutral40}})},li=oi,hi=oi,ci=function(){var t=Gt.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(Ue||(ei=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],ii||(ii=ei.slice(0)),Ue=Object.freeze(Object.defineProperties(ei,{raw:{value:Object.freeze(ii)}})))),di=function(t){var e=t.delay,i=t.offset;return Ut("span",{css:Gt({animation:"".concat(ci," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ui=function(t){var e=t.children,i=t.isDisabled,s=t.isFocused,n=t.innerRef,r=t.innerProps,a=t.menuIsOpen;return Ut("div",(0,u.A)({ref:n},Te(t,"control",{control:!0,"control--is-disabled":i,"control--is-focused":s,"control--menu-is-open":a}),r,{"aria-disabled":i||void 0}),e)},pi=["data"],fi=function(t){var e=t.children,i=t.cx,s=t.getStyles,n=t.getClassNames,r=t.Heading,a=t.headingProps,o=t.innerProps,l=t.label,h=t.theme,c=t.selectProps;return Ut("div",(0,u.A)({},Te(t,"group",{group:!0}),o),Ut(r,(0,u.A)({},a,{selectProps:c,theme:h,getStyles:s,getClassNames:n,cx:i}),l),Ut("div",null,e))},gi=["innerRef","isDisabled","isHidden","inputClassName"],mi={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},vi={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":(0,s.A)({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},mi)},bi=function(t){return(0,s.A)({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},mi)},yi=function(t){var e=t.children,i=t.innerProps;return Ut("div",i,e)};var _i=function(t){var e=t.children,i=t.components,n=t.data,r=t.innerProps,a=t.isDisabled,o=t.removeProps,l=t.selectProps,h=i.Container,c=i.Label,d=i.Remove;return Ut(h,{data:n,innerProps:(0,s.A)((0,s.A)({},Te(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),r),selectProps:l},Ut(c,{data:n,innerProps:(0,s.A)({},Te(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},e),Ut(d,{data:n,innerProps:(0,s.A)((0,s.A)({},Te(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(e||"option")},o),selectProps:l}))},wi={ClearIndicator:function(t){var e=t.children,i=t.innerProps;return Ut("div",(0,u.A)({},Te(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),e||Ut(ri,null))},Control:ui,DropdownIndicator:function(t){var e=t.children,i=t.innerProps;return Ut("div",(0,u.A)({},Te(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),e||Ut(ai,null))},DownChevron:ai,CrossIcon:ri,Group:fi,GroupHeading:function(t){var e=Pe(t);e.data;var i=l(e,pi);return Ut("div",(0,u.A)({},Te(t,"groupHeading",{"group-heading":!0}),i))},IndicatorsContainer:function(t){var e=t.children,i=t.innerProps;return Ut("div",(0,u.A)({},Te(t,"indicatorsContainer",{indicators:!0}),i),e)},IndicatorSeparator:function(t){var e=t.innerProps;return Ut("span",(0,u.A)({},e,Te(t,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(t){var e=t.cx,i=t.value,s=Pe(t),n=s.innerRef,r=s.isDisabled,a=s.isHidden,o=s.inputClassName,h=l(s,gi);return Ut("div",(0,u.A)({},Te(t,"input",{"input-container":!0}),{"data-value":i||""}),Ut("input",(0,u.A)({className:e({input:!0},o),ref:n,style:bi(a),disabled:r},h)))},LoadingIndicator:function(t){var e=t.innerProps,i=t.isRtl,n=t.size,r=void 0===n?4:n,a=l(t,ti);return Ut("div",(0,u.A)({},Te((0,s.A)((0,s.A)({},a),{},{innerProps:e,isRtl:i,size:r}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),e),Ut(di,{delay:0,offset:i}),Ut(di,{delay:160,offset:!0}),Ut(di,{delay:320,offset:!i}))},Menu:Xe,MenuList:function(t){var e=t.children,i=t.innerProps,s=t.innerRef,n=t.isMulti;return Ut("div",(0,u.A)({},Te(t,"menuList",{"menu-list":!0,"menu-list--is-multi":n}),{ref:s},i),e)},MenuPortal:function(t){var e=t.appendTo,i=t.children,n=t.controlElement,r=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=(0,h.useRef)(null),d=(0,h.useRef)(null),p=a((0,h.useState)(Ge(o)),2),f=p[0],g=p[1],m=(0,h.useMemo)((function(){return{setPortalPlacement:g}}),[]),v=a((0,h.useState)(null),2),b=v[0],y=v[1],_=(0,h.useCallback)((function(){if(n){var t=function(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}(n),e="fixed"===l?0:window.pageYOffset,i=t[f]+e;i===(null===b||void 0===b?void 0:b.offset)&&t.left===(null===b||void 0===b?void 0:b.rect.left)&&t.width===(null===b||void 0===b?void 0:b.rect.width)||y({offset:i,rect:t})}}),[n,l,f,null===b||void 0===b?void 0:b.offset,null===b||void 0===b?void 0:b.rect.left,null===b||void 0===b?void 0:b.rect.width]);xe((function(){_()}),[_]);var w=(0,h.useCallback)((function(){"function"===typeof d.current&&(d.current(),d.current=null),n&&c.current&&(d.current=we(n,c.current,_,{elementResize:"ResizeObserver"in window}))}),[n,_]);xe((function(){w()}),[w]);var x=(0,h.useCallback)((function(t){c.current=t,w()}),[w]);if(!e&&"fixed"!==l||!b)return null;var A=Ut("div",(0,u.A)({ref:x},Te((0,s.A)((0,s.A)({},t),{},{offset:b.offset,position:l,rect:b.rect}),"menuPortal",{"menu-portal":!0}),r),i);return Ut(qe.Provider,{value:m},e?(0,Yt.createPortal)(A,e):A)},LoadingMessage:function(t){var e=t.children,i=void 0===e?"Loading...":e,n=t.innerProps,r=l(t,Ve);return Ut("div",(0,u.A)({},Te((0,s.A)((0,s.A)({},r),{},{children:i,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),i)},NoOptionsMessage:function(t){var e=t.children,i=void 0===e?"No options":e,n=t.innerProps,r=l(t,ze);return Ut("div",(0,u.A)({},Te((0,s.A)((0,s.A)({},r),{},{children:i,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),i)},MultiValue:_i,MultiValueContainer:yi,MultiValueLabel:yi,MultiValueRemove:function(t){var e=t.children,i=t.innerProps;return Ut("div",(0,u.A)({role:"button"},i),e||Ut(ri,{size:14}))},Option:function(t){var e=t.children,i=t.isDisabled,s=t.isFocused,n=t.isSelected,r=t.innerRef,a=t.innerProps;return Ut("div",(0,u.A)({},Te(t,"option",{option:!0,"option--is-disabled":i,"option--is-focused":s,"option--is-selected":n}),{ref:r,"aria-disabled":i},a),e)},Placeholder:function(t){var e=t.children,i=t.innerProps;return Ut("div",(0,u.A)({},Te(t,"placeholder",{placeholder:!0}),i),e)},SelectContainer:function(t){var e=t.children,i=t.innerProps,s=t.isDisabled,n=t.isRtl;return Ut("div",(0,u.A)({},Te(t,"container",{"--is-disabled":s,"--is-rtl":n}),i),e)},SingleValue:function(t){var e=t.children,i=t.isDisabled,s=t.innerProps;return Ut("div",(0,u.A)({},Te(t,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),s),e)},ValueContainer:function(t){var e=t.children,i=t.innerProps,s=t.isMulti,n=t.hasValue;return Ut("div",(0,u.A)({},Te(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":n}),i),e)}},xi=Number.isNaN||function(t){return"number"===typeof t&&t!==t};function Ai(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(s=t[i],n=e[i],!(s===n||xi(s)&&xi(n)))return!1;var s,n;return!0}for(var Ei={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ki=function(t){return Ut("span",(0,u.A)({css:Ei},t))},Si={guidance:function(t){var e=t.isSearchable,i=t.isMulti,s=t.tabSelectsValue,n=t.context,r=t.isInitialFocus;switch(n){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return r?"".concat(t["aria-label"]||"Select"," is focused ").concat(e?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var e=t.action,i=t.label,s=void 0===i?"":i,n=t.labels,r=t.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(n.length>1?"s":""," ").concat(n.join(","),", selected.");case"select-option":return"option ".concat(s,r?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(t){var e=t.context,i=t.focused,s=t.options,n=t.label,r=void 0===n?"":n,a=t.selectValue,o=t.isDisabled,l=t.isSelected,h=t.isAppleDevice,c=function(t,e){return t&&t.length?"".concat(t.indexOf(e)+1," of ").concat(t.length):""};if("value"===e&&a)return"value ".concat(r," focused, ").concat(c(a,i),".");if("menu"===e&&h){var d=o?" disabled":"",u="".concat(l?" selected":"").concat(d);return"".concat(r).concat(u,", ").concat(c(s,i),".")}return""},onFilter:function(t){var e=t.inputValue,i=t.resultsMessage;return"".concat(i).concat(e?" for search term "+e:"",".")}},Ci=function(t){var e=t.ariaSelection,i=t.focusedOption,n=t.focusedValue,r=t.focusableOptions,a=t.isFocused,o=t.selectValue,l=t.selectProps,c=t.id,d=t.isAppleDevice,u=l.ariaLiveMessages,p=l.getOptionLabel,f=l.inputValue,g=l.isMulti,m=l.isOptionDisabled,v=l.isSearchable,b=l.menuIsOpen,y=l.options,_=l.screenReaderStatus,w=l.tabSelectsValue,x=l.isLoading,A=l["aria-label"],E=l["aria-live"],k=(0,h.useMemo)((function(){return(0,s.A)((0,s.A)({},Si),u||{})}),[u]),S=(0,h.useMemo)((function(){var t,i="";if(e&&k.onChange){var n=e.option,r=e.options,a=e.removedValue,l=e.removedValues,h=e.value,c=a||n||(t=h,Array.isArray(t)?null:t),d=c?p(c):"",u=r||l||void 0,f=u?u.map(p):[],g=(0,s.A)({isDisabled:c&&m(c,o),label:d,labels:f},e);i=k.onChange(g)}return i}),[e,k,m,o,p]),C=(0,h.useMemo)((function(){var t="",e=i||n,s=!!(i&&o&&o.includes(i));if(e&&k.onFocus){var a={focused:e,label:p(e),isDisabled:m(e,o),isSelected:s,options:r,context:e===i?"menu":"value",selectValue:o,isAppleDevice:d};t=k.onFocus(a)}return t}),[i,n,p,m,k,r,o,d]),P=(0,h.useMemo)((function(){var t="";if(b&&y.length&&!x&&k.onFilter){var e=_({count:r.length});t=k.onFilter({inputValue:f,resultsMessage:e})}return t}),[r,f,b,k,y,_,x]),T="initial-input-focus"===(null===e||void 0===e?void 0:e.action),M=(0,h.useMemo)((function(){var t="";if(k.guidance){var e=n?"value":b?"menu":"input";t=k.guidance({"aria-label":A,context:e,isDisabled:i&&m(i,o),isMulti:g,isSearchable:v,tabSelectsValue:w,isInitialFocus:T})}return t}),[A,i,n,g,m,v,b,k,o,w,T]),D=Ut(h.Fragment,null,Ut("span",{id:"aria-selection"},S),Ut("span",{id:"aria-focused"},C),Ut("span",{id:"aria-results"},P),Ut("span",{id:"aria-guidance"},M));return Ut(h.Fragment,null,Ut(ki,{id:c},T&&D),Ut(ki,{"aria-live":E,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!T&&D))},Pi=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],Ti=new RegExp("["+Pi.map((function(t){return t.letters})).join("")+"]","g"),Mi={},Di=0;Di<Pi.length;Di++)for(var Ri=Pi[Di],Li=0;Li<Ri.letters.length;Li++)Mi[Ri.letters[Li]]=Ri.base;var Oi=function(t){return t.replace(Ti,(function(t){return Mi[t]}))},Ii=function(t,e){void 0===e&&(e=Ai);var i=null;function s(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];if(i&&i.lastThis===this&&e(s,i.lastArgs))return i.lastResult;var r=t.apply(this,s);return i={lastResult:r,lastArgs:s,lastThis:this},r}return s.clear=function(){i=null},s}(Oi),Fi=function(t){return t.replace(/^\s+|\s+$/g,"")},Ni=function(t){return"".concat(t.label," ").concat(t.value)},ji=["innerRef"];function Bi(t){var e=t.innerRef,i=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];var n=Object.entries(t).filter((function(t){var e=a(t,1)[0];return!i.includes(e)}));return n.reduce((function(t,e){var i=a(e,2),s=i[0],n=i[1];return t[s]=n,t}),{})}(l(t,ji),"onExited","in","enter","exit","appear");return Ut("input",(0,u.A)({ref:e},i,{css:Gt({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Hi=["boxSizing","height","overflow","paddingRight","position"],Wi={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function zi(t){t.preventDefault()}function Vi(t){t.stopPropagation()}function $i(){var t=this.scrollTop,e=this.scrollHeight,i=t+this.offsetHeight;0===t?this.scrollTop=1:i===e&&(this.scrollTop=t-1)}function Ui(){return"ontouchstart"in window||navigator.maxTouchPoints}var Gi=!("undefined"===typeof window||!window.document||!window.document.createElement),qi=0,Yi={capture:!1,passive:!1};var Xi=function(t){var e=t.target;return e.ownerDocument.activeElement&&e.ownerDocument.activeElement.blur()},Ki={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Qi(t){var e=t.children,i=t.lockEnabled,s=t.captureEnabled,n=function(t){var e=t.isEnabled,i=t.onBottomArrive,s=t.onBottomLeave,n=t.onTopArrive,r=t.onTopLeave,a=(0,h.useRef)(!1),o=(0,h.useRef)(!1),l=(0,h.useRef)(0),c=(0,h.useRef)(null),d=(0,h.useCallback)((function(t,e){if(null!==c.current){var l=c.current,h=l.scrollTop,d=l.scrollHeight,u=l.clientHeight,p=c.current,f=e>0,g=d-u-h,m=!1;g>e&&a.current&&(s&&s(t),a.current=!1),f&&o.current&&(r&&r(t),o.current=!1),f&&e>g?(i&&!a.current&&i(t),p.scrollTop=d,m=!0,a.current=!0):!f&&-e>h&&(n&&!o.current&&n(t),p.scrollTop=0,m=!0,o.current=!0),m&&function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()}(t)}}),[i,s,n,r]),u=(0,h.useCallback)((function(t){d(t,t.deltaY)}),[d]),p=(0,h.useCallback)((function(t){l.current=t.changedTouches[0].clientY}),[]),f=(0,h.useCallback)((function(t){var e=l.current-t.changedTouches[0].clientY;d(t,e)}),[d]),g=(0,h.useCallback)((function(t){if(t){var e=!!Be&&{passive:!1};t.addEventListener("wheel",u,e),t.addEventListener("touchstart",p,e),t.addEventListener("touchmove",f,e)}}),[f,p,u]),m=(0,h.useCallback)((function(t){t&&(t.removeEventListener("wheel",u,!1),t.removeEventListener("touchstart",p,!1),t.removeEventListener("touchmove",f,!1))}),[f,p,u]);return(0,h.useEffect)((function(){if(e){var t=c.current;return g(t),function(){m(t)}}}),[e,g,m]),function(t){c.current=t}}({isEnabled:void 0===s||s,onBottomArrive:t.onBottomArrive,onBottomLeave:t.onBottomLeave,onTopArrive:t.onTopArrive,onTopLeave:t.onTopLeave}),r=function(t){var e=t.isEnabled,i=t.accountForScrollbars,s=void 0===i||i,n=(0,h.useRef)({}),r=(0,h.useRef)(null),a=(0,h.useCallback)((function(t){if(Gi){var e=document.body,i=e&&e.style;if(s&&Hi.forEach((function(t){var e=i&&i[t];n.current[t]=e})),s&&qi<1){var r=parseInt(n.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,o=window.innerWidth-a+r||0;Object.keys(Wi).forEach((function(t){var e=Wi[t];i&&(i[t]=e)})),i&&(i.paddingRight="".concat(o,"px"))}e&&Ui()&&(e.addEventListener("touchmove",zi,Yi),t&&(t.addEventListener("touchstart",$i,Yi),t.addEventListener("touchmove",Vi,Yi))),qi+=1}}),[s]),o=(0,h.useCallback)((function(t){if(Gi){var e=document.body,i=e&&e.style;qi=Math.max(qi-1,0),s&&qi<1&&Hi.forEach((function(t){var e=n.current[t];i&&(i[t]=e)})),e&&Ui()&&(e.removeEventListener("touchmove",zi,Yi),t&&(t.removeEventListener("touchstart",$i,Yi),t.removeEventListener("touchmove",Vi,Yi)))}}),[s]);return(0,h.useEffect)((function(){if(e){var t=r.current;return a(t),function(){o(t)}}}),[e,a,o]),function(t){r.current=t}}({isEnabled:i});return Ut(h.Fragment,null,i&&Ut("div",{onClick:Xi,css:Ki}),e((function(t){n(t),r(t)})))}var Ji={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Zi=function(t){var e=t.name,i=t.onFocus;return Ut("input",{required:!0,name:e,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:Ji,value:"",onChange:function(){}})};function ts(t){var e;return"undefined"!==typeof window&&null!=window.navigator&&t.test((null===(e=window.navigator.userAgentData)||void 0===e?void 0:e.platform)||window.navigator.platform)}function es(){return ts(/^Mac/i)}function is(){return ts(/^iPhone/i)||ts(/^iPad/i)||es()&&navigator.maxTouchPoints>1}var ss={clearIndicator:hi,container:function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":void 0,pointerEvents:e?"none":void 0,position:"relative"}},control:function(t,e){var i=t.isDisabled,n=t.isFocused,r=t.theme,a=r.colors,o=r.borderRadius,l=r.spacing;return(0,s.A)({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},e?{}:{backgroundColor:i?a.neutral5:a.neutral0,borderColor:i?a.neutral10:n?a.primary:a.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:n?a.primary:a.neutral30}})},dropdownIndicator:li,group:function(t,e){var i=t.theme.spacing;return e?{}:{paddingBottom:2*i.baseUnit,paddingTop:2*i.baseUnit}},groupHeading:function(t,e){var i=t.theme,n=i.colors,r=i.spacing;return(0,s.A)({label:"group",cursor:"default",display:"block"},e?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*r.baseUnit,paddingRight:3*r.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(t,e){var i=t.isDisabled,n=t.theme,r=n.spacing.baseUnit,a=n.colors;return(0,s.A)({label:"indicatorSeparator",alignSelf:"stretch",width:1},e?{}:{backgroundColor:i?a.neutral10:a.neutral20,marginBottom:2*r,marginTop:2*r})},input:function(t,e){var i=t.isDisabled,n=t.value,r=t.theme,a=r.spacing,o=r.colors;return(0,s.A)((0,s.A)({visibility:i?"hidden":"visible",transform:n?"translateZ(0)":""},vi),e?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:o.neutral80})},loadingIndicator:function(t,e){var i=t.isFocused,n=t.size,r=t.theme,a=r.colors,o=r.spacing.baseUnit;return(0,s.A)({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},e?{}:{color:i?a.neutral60:a.neutral20,padding:2*o})},loadingMessage:Je,menu:function(t,e){var i,n=t.placement,r=t.theme,a=r.borderRadius,o=r.spacing,l=r.colors;return(0,s.A)((i={label:"menu"},(0,qt.A)(i,function(t){return t?{bottom:"top",top:"bottom"}[t]:"bottom"}(n),"100%"),(0,qt.A)(i,"position","absolute"),(0,qt.A)(i,"width","100%"),(0,qt.A)(i,"zIndex",1),i),e?{}:{backgroundColor:l.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(t,e){var i=t.maxHeight,n=t.theme.spacing.baseUnit;return(0,s.A)({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(t){var e=t.rect,i=t.offset,s=t.position;return{left:e.left,position:s,top:i,width:e.width,zIndex:1}},multiValue:function(t,e){var i=t.theme,n=i.spacing,r=i.borderRadius,a=i.colors;return(0,s.A)({label:"multiValue",display:"flex",minWidth:0},e?{}:{backgroundColor:a.neutral10,borderRadius:r/2,margin:n.baseUnit/2})},multiValueLabel:function(t,e){var i=t.theme,n=i.borderRadius,r=i.colors,a=t.cropWithEllipsis;return(0,s.A)({overflow:"hidden",textOverflow:a||void 0===a?"ellipsis":void 0,whiteSpace:"nowrap"},e?{}:{borderRadius:n/2,color:r.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(t,e){var i=t.theme,n=i.spacing,r=i.borderRadius,a=i.colors,o=t.isFocused;return(0,s.A)({alignItems:"center",display:"flex"},e?{}:{borderRadius:r/2,backgroundColor:o?a.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},noOptionsMessage:Qe,option:function(t,e){var i=t.isDisabled,n=t.isFocused,r=t.isSelected,a=t.theme,o=a.spacing,l=a.colors;return(0,s.A)({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},e?{}:{backgroundColor:r?l.primary:n?l.primary25:"transparent",color:i?l.neutral20:r?l.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:i?void 0:r?l.primary:l.primary50}})},placeholder:function(t,e){var i=t.theme,n=i.spacing,r=i.colors;return(0,s.A)({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},e?{}:{color:r.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(t,e){var i=t.isDisabled,n=t.theme,r=n.spacing,a=n.colors;return(0,s.A)({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e?{}:{color:i?a.neutral40:a.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},valueContainer:function(t,e){var i=t.theme.spacing,n=t.isMulti,r=t.hasValue,a=t.selectProps.controlShouldRenderValue;return(0,s.A)({alignItems:"center",display:n&&r&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},e?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(2*i.baseUnit,"px")})}};var ns,rs={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},as={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Ie(),captureMenuScroll:!Ie(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(t,e){if(t.data.__isNew__)return!0;var i=(0,s.A)({ignoreCase:!0,ignoreAccents:!0,stringify:Ni,trim:!0,matchFrom:"any"},ns),n=i.ignoreCase,r=i.ignoreAccents,a=i.stringify,o=i.trim,l=i.matchFrom,h=o?Fi(e):e,c=o?Fi(a(t)):a(t);return n&&(h=h.toLowerCase(),c=c.toLowerCase()),r&&(h=Ii(h),c=Oi(c)),"start"===l?c.substr(0,h.length)===h:c.indexOf(h)>-1},formatGroupLabel:function(t){return t.label},getOptionLabel:function(t){return t.label},getOptionValue:function(t){return t.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(t){return!!t.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(1!==e?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function os(t,e,i,s){return{type:"option",data:e,isDisabled:gs(t,e,i),isSelected:ms(t,e,i),label:ps(t,e),value:fs(t,e),index:s}}function ls(t,e){return t.options.map((function(i,s){if("options"in i){var n=i.options.map((function(i,s){return os(t,i,e,s)})).filter((function(e){return ds(t,e)}));return n.length>0?{type:"group",data:i,options:n,index:s}:void 0}var r=os(t,i,e,s);return ds(t,r)?r:void 0})).filter(He)}function hs(t){return t.reduce((function(t,e){return"group"===e.type?t.push.apply(t,y(e.options.map((function(t){return t.data})))):t.push(e.data),t}),[])}function cs(t,e){return t.reduce((function(t,i){return"group"===i.type?t.push.apply(t,y(i.options.map((function(t){return{data:t.data,id:"".concat(e,"-").concat(i.index,"-").concat(t.index)}})))):t.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),t}),[])}function ds(t,e){var i=t.inputValue,s=void 0===i?"":i,n=e.data,r=e.isSelected,a=e.label,o=e.value;return(!bs(t)||!r)&&vs(t,{label:a,value:o,data:n},s)}var us=function(t,e){var i;return(null===(i=t.find((function(t){return t.data===e})))||void 0===i?void 0:i.id)||null},ps=function(t,e){return t.getOptionLabel(e)},fs=function(t,e){return t.getOptionValue(e)};function gs(t,e,i){return"function"===typeof t.isOptionDisabled&&t.isOptionDisabled(e,i)}function ms(t,e,i){if(i.indexOf(e)>-1)return!0;if("function"===typeof t.isOptionSelected)return t.isOptionSelected(e,i);var s=fs(t,e);return i.some((function(e){return fs(t,e)===s}))}function vs(t,e,i){return!t.filterOption||t.filterOption(e,i)}var bs=function(t){var e=t.hideSelectedOptions,i=t.isMulti;return void 0===e?i:e},ys=1,_s=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,f.A)(t,e)}(a,t);var e,i,n,r=b(a);function a(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this,t)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},e.blockOptionHover=!1,e.isComposing=!1,e.commonProps=void 0,e.initialTouchX=0,e.initialTouchY=0,e.openAfterFocus=!1,e.scrollToFocusedOptionOnUpdate=!1,e.userIsDragging=void 0,e.isAppleDevice=es()||is(),e.controlRef=null,e.getControlRef=function(t){e.controlRef=t},e.focusedOptionRef=null,e.getFocusedOptionRef=function(t){e.focusedOptionRef=t},e.menuListRef=null,e.getMenuListRef=function(t){e.menuListRef=t},e.inputRef=null,e.getInputRef=function(t){e.inputRef=t},e.focus=e.focusInput,e.blur=e.blurInput,e.onChange=function(t,i){var s=e.props,n=s.onChange,r=s.name;i.name=r,e.ariaOnChange(t,i),n(t,i)},e.setValue=function(t,i,s){var n=e.props,r=n.closeMenuOnSelect,a=n.isMulti,o=n.inputValue;e.onInputChange("",{action:"set-value",prevInputValue:o}),r&&(e.setState({inputIsHiddenAfterUpdate:!a}),e.onMenuClose()),e.setState({clearFocusValueOnUpdate:!0}),e.onChange(t,{action:i,option:s})},e.selectOption=function(t){var i=e.props,s=i.blurInputOnSelect,n=i.isMulti,r=i.name,a=e.state.selectValue,o=n&&e.isOptionSelected(t,a),l=e.isOptionDisabled(t,a);if(o){var h=e.getOptionValue(t);e.setValue(a.filter((function(t){return e.getOptionValue(t)!==h})),"deselect-option",t)}else{if(l)return void e.ariaOnChange(t,{action:"select-option",option:t,name:r});n?e.setValue([].concat(y(a),[t]),"select-option",t):e.setValue(t,"select-option")}s&&e.blurInput()},e.removeValue=function(t){var i=e.props.isMulti,s=e.state.selectValue,n=e.getOptionValue(t),r=s.filter((function(t){return e.getOptionValue(t)!==n})),a=We(i,r,r[0]||null);e.onChange(a,{action:"remove-value",removedValue:t}),e.focusInput()},e.clearValue=function(){var t=e.state.selectValue;e.onChange(We(e.props.isMulti,[],null),{action:"clear",removedValues:t})},e.popValue=function(){var t=e.props.isMulti,i=e.state.selectValue,s=i[i.length-1],n=i.slice(0,i.length-1),r=We(t,n,n[0]||null);e.onChange(r,{action:"pop-value",removedValue:s})},e.getFocusedOptionId=function(t){return us(e.state.focusableOptionsWithIds,t)},e.getFocusableOptionsWithIds=function(){return cs(ls(e.props,e.state.selectValue),e.getElementId("option"))},e.getValue=function(){return e.state.selectValue},e.cx=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Se.apply(void 0,[e.props.classNamePrefix].concat(i))},e.getOptionLabel=function(t){return ps(e.props,t)},e.getOptionValue=function(t){return fs(e.props,t)},e.getStyles=function(t,i){var s=e.props.unstyled,n=ss[t](i,s);n.boxSizing="border-box";var r=e.props.styles[t];return r?r(n,i):n},e.getClassNames=function(t,i){var s,n;return null===(s=(n=e.props.classNames)[t])||void 0===s?void 0:s.call(n,i)},e.getElementId=function(t){return"".concat(e.state.instancePrefix,"-").concat(t)},e.getComponents=function(){return t=e.props,(0,s.A)((0,s.A)({},wi),t.components);var t},e.buildCategorizedOptions=function(){return ls(e.props,e.state.selectValue)},e.getCategorizedOptions=function(){return e.props.menuIsOpen?e.buildCategorizedOptions():[]},e.buildFocusableOptions=function(){return hs(e.buildCategorizedOptions())},e.getFocusableOptions=function(){return e.props.menuIsOpen?e.buildFocusableOptions():[]},e.ariaOnChange=function(t,i){e.setState({ariaSelection:(0,s.A)({value:t},i)})},e.onMenuMouseDown=function(t){0===t.button&&(t.stopPropagation(),t.preventDefault(),e.focusInput())},e.onMenuMouseMove=function(t){e.blockOptionHover=!1},e.onControlMouseDown=function(t){if(!t.defaultPrevented){var i=e.props.openMenuOnClick;e.state.isFocused?e.props.menuIsOpen?"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&e.onMenuClose():i&&e.openMenu("first"):(i&&(e.openAfterFocus=!0),e.focusInput()),"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&t.preventDefault()}},e.onDropdownIndicatorMouseDown=function(t){if((!t||"mousedown"!==t.type||0===t.button)&&!e.props.isDisabled){var i=e.props,s=i.isMulti,n=i.menuIsOpen;e.focusInput(),n?(e.setState({inputIsHiddenAfterUpdate:!s}),e.onMenuClose()):e.openMenu("first"),t.preventDefault()}},e.onClearIndicatorMouseDown=function(t){t&&"mousedown"===t.type&&0!==t.button||(e.clearValue(),t.preventDefault(),e.openAfterFocus=!1,"touchend"===t.type?e.focusInput():setTimeout((function(){return e.focusInput()})))},e.onScroll=function(t){"boolean"===typeof e.props.closeMenuOnScroll?t.target instanceof HTMLElement&&Me(t.target)&&e.props.onMenuClose():"function"===typeof e.props.closeMenuOnScroll&&e.props.closeMenuOnScroll(t)&&e.props.onMenuClose()},e.onCompositionStart=function(){e.isComposing=!0},e.onCompositionEnd=function(){e.isComposing=!1},e.onTouchStart=function(t){var i=t.touches,s=i&&i.item(0);s&&(e.initialTouchX=s.clientX,e.initialTouchY=s.clientY,e.userIsDragging=!1)},e.onTouchMove=function(t){var i=t.touches,s=i&&i.item(0);if(s){var n=Math.abs(s.clientX-e.initialTouchX),r=Math.abs(s.clientY-e.initialTouchY);e.userIsDragging=n>5||r>5}},e.onTouchEnd=function(t){e.userIsDragging||(e.controlRef&&!e.controlRef.contains(t.target)&&e.menuListRef&&!e.menuListRef.contains(t.target)&&e.blurInput(),e.initialTouchX=0,e.initialTouchY=0)},e.onControlTouchEnd=function(t){e.userIsDragging||e.onControlMouseDown(t)},e.onClearIndicatorTouchEnd=function(t){e.userIsDragging||e.onClearIndicatorMouseDown(t)},e.onDropdownIndicatorTouchEnd=function(t){e.userIsDragging||e.onDropdownIndicatorMouseDown(t)},e.handleInputChange=function(t){var i=e.props.inputValue,s=t.currentTarget.value;e.setState({inputIsHiddenAfterUpdate:!1}),e.onInputChange(s,{action:"input-change",prevInputValue:i}),e.props.menuIsOpen||e.onMenuOpen()},e.onInputFocus=function(t){e.props.onFocus&&e.props.onFocus(t),e.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(e.openAfterFocus||e.props.openMenuOnFocus)&&e.openMenu("first"),e.openAfterFocus=!1},e.onInputBlur=function(t){var i=e.props.inputValue;e.menuListRef&&e.menuListRef.contains(document.activeElement)?e.inputRef.focus():(e.props.onBlur&&e.props.onBlur(t),e.onInputChange("",{action:"input-blur",prevInputValue:i}),e.onMenuClose(),e.setState({focusedValue:null,isFocused:!1}))},e.onOptionHover=function(t){if(!e.blockOptionHover&&e.state.focusedOption!==t){var i=e.getFocusableOptions().indexOf(t);e.setState({focusedOption:t,focusedOptionId:i>-1?e.getFocusedOptionId(t):null})}},e.shouldHideSelectedOptions=function(){return bs(e.props)},e.onValueInputFocus=function(t){t.preventDefault(),t.stopPropagation(),e.focus()},e.onKeyDown=function(t){var i=e.props,s=i.isMulti,n=i.backspaceRemovesValue,r=i.escapeClearsValue,a=i.inputValue,o=i.isClearable,l=i.isDisabled,h=i.menuIsOpen,c=i.onKeyDown,d=i.tabSelectsValue,u=i.openMenuOnFocus,p=e.state,f=p.focusedOption,g=p.focusedValue,m=p.selectValue;if(!l&&("function"!==typeof c||(c(t),!t.defaultPrevented))){switch(e.blockOptionHover=!0,t.key){case"ArrowLeft":if(!s||a)return;e.focusValue("previous");break;case"ArrowRight":if(!s||a)return;e.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(g)e.removeValue(g);else{if(!n)return;s?e.popValue():o&&e.clearValue()}break;case"Tab":if(e.isComposing)return;if(t.shiftKey||!h||!d||!f||u&&e.isOptionSelected(f,m))return;e.selectOption(f);break;case"Enter":if(229===t.keyCode)break;if(h){if(!f)return;if(e.isComposing)return;e.selectOption(f);break}return;case"Escape":h?(e.setState({inputIsHiddenAfterUpdate:!1}),e.onInputChange("",{action:"menu-close",prevInputValue:a}),e.onMenuClose()):o&&r&&e.clearValue();break;case" ":if(a)return;if(!h){e.openMenu("first");break}if(!f)return;e.selectOption(f);break;case"ArrowUp":h?e.focusOption("up"):e.openMenu("last");break;case"ArrowDown":h?e.focusOption("down"):e.openMenu("first");break;case"PageUp":if(!h)return;e.focusOption("pageup");break;case"PageDown":if(!h)return;e.focusOption("pagedown");break;case"Home":if(!h)return;e.focusOption("first");break;case"End":if(!h)return;e.focusOption("last");break;default:return}t.preventDefault()}},e.state.instancePrefix="react-select-"+(e.props.instanceId||++ys),e.state.selectValue=Ce(t.value),t.menuIsOpen&&e.state.selectValue.length){var i=e.getFocusableOptionsWithIds(),n=e.buildFocusableOptions(),o=n.indexOf(e.state.selectValue[0]);e.state.focusableOptionsWithIds=i,e.state.focusedOption=n[o],e.state.focusedOptionId=us(i,n[o])}return e}return e=a,i=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Oe(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=e.isDisabled,s=e.menuIsOpen,n=this.state.isFocused;(n&&!i&&t.isDisabled||n&&s&&!t.menuIsOpen)&&this.focusInput(),n&&i&&!t.isDisabled?this.setState({isFocused:!1},this.onMenuClose):n||i||!t.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Oe(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,e){this.props.onInputChange(t,e)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var e=this,i=this.state,s=i.selectValue,n=i.isFocused,r=this.buildFocusableOptions(),a="first"===t?0:r.length-1;if(!this.props.isMulti){var o=r.indexOf(s[0]);o>-1&&(a=o)}this.scrollToFocusedOptionOnUpdate=!(n&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:r[a],focusedOptionId:this.getFocusedOptionId(r[a])},(function(){return e.onMenuOpen()}))}},{key:"focusValue",value:function(t){var e=this.state,i=e.selectValue,s=e.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var n=i.indexOf(s);s||(n=-1);var r=i.length-1,a=-1;if(i.length){switch(t){case"previous":a=0===n?0:-1===n?r:n-1;break;case"next":n>-1&&n<r&&(a=n+1)}this.setState({inputIsHidden:-1!==a,focusedValue:i[a]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",e=this.props.pageSize,i=this.state.focusedOption,s=this.getFocusableOptions();if(s.length){var n=0,r=s.indexOf(i);i||(r=-1),"up"===t?n=r>0?r-1:s.length-1:"down"===t?n=(r+1)%s.length:"pageup"===t?(n=r-e)<0&&(n=0):"pagedown"===t?(n=r+e)>s.length-1&&(n=s.length-1):"last"===t&&(n=s.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:s[n],focusedValue:null,focusedOptionId:this.getFocusedOptionId(s[n])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(rs):(0,s.A)((0,s.A)({},rs),this.props.theme):rs}},{key:"getCommonProps",value:function(){var t=this.clearValue,e=this.cx,i=this.getStyles,s=this.getClassNames,n=this.getValue,r=this.selectOption,a=this.setValue,o=this.props,l=o.isMulti,h=o.isRtl,c=o.options;return{clearValue:t,cx:e,getStyles:i,getClassNames:s,getValue:n,hasValue:this.hasValue(),isMulti:l,isRtl:h,options:c,selectOption:r,selectProps:o,setValue:a,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var t=this.props,e=t.isClearable,i=t.isMulti;return void 0===e?i:e}},{key:"isOptionDisabled",value:function(t,e){return gs(this.props,t,e)}},{key:"isOptionSelected",value:function(t,e){return ms(this.props,t,e)}},{key:"filterOption",value:function(t,e){return vs(this.props,t,e)}},{key:"formatOptionLabel",value:function(t,e){if("function"===typeof this.props.formatOptionLabel){var i=this.props.inputValue,s=this.state.selectValue;return this.props.formatOptionLabel(t,{context:e,inputValue:i,selectValue:s})}return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var t=this.props,e=t.isDisabled,i=t.isSearchable,n=t.inputId,r=t.inputValue,a=t.tabIndex,o=t.form,l=t.menuIsOpen,c=t.required,d=this.getComponents().Input,p=this.state,f=p.inputIsHidden,g=p.ariaSelection,m=this.commonProps,v=n||this.getElementId("input"),b=(0,s.A)((0,s.A)((0,s.A)({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},l&&{"aria-controls":this.getElementId("listbox")}),!i&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===g||void 0===g?void 0:g.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return i?h.createElement(d,(0,u.A)({},m,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:v,innerRef:this.getInputRef,isDisabled:e,isHidden:f,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:a,form:o,type:"text",value:r},b)):h.createElement(Bi,(0,u.A)({id:v,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Ee,onFocus:this.onInputFocus,disabled:e,tabIndex:a,inputMode:"none",form:o,value:""},b))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,e=this.getComponents(),i=e.MultiValue,s=e.MultiValueContainer,n=e.MultiValueLabel,r=e.MultiValueRemove,a=e.SingleValue,o=e.Placeholder,l=this.commonProps,c=this.props,d=c.controlShouldRenderValue,p=c.isDisabled,f=c.isMulti,g=c.inputValue,m=c.placeholder,v=this.state,b=v.selectValue,y=v.focusedValue,_=v.isFocused;if(!this.hasValue()||!d)return g?null:h.createElement(o,(0,u.A)({},l,{key:"placeholder",isDisabled:p,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),m);if(f)return b.map((function(e,a){var o=e===y,c="".concat(t.getOptionLabel(e),"-").concat(t.getOptionValue(e));return h.createElement(i,(0,u.A)({},l,{components:{Container:s,Label:n,Remove:r},isFocused:o,isDisabled:p,key:c,index:a,removeProps:{onClick:function(){return t.removeValue(e)},onTouchEnd:function(){return t.removeValue(e)},onMouseDown:function(t){t.preventDefault()}},data:e}),t.formatOptionLabel(e,"value"))}));if(g)return null;var w=b[0];return h.createElement(a,(0,u.A)({},l,{data:w,isDisabled:p}),this.formatOptionLabel(w,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.getComponents().ClearIndicator,e=this.commonProps,i=this.props,s=i.isDisabled,n=i.isLoading,r=this.state.isFocused;if(!this.isClearable()||!t||s||!this.hasValue()||n)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return h.createElement(t,(0,u.A)({},e,{innerProps:a,isFocused:r}))}},{key:"renderLoadingIndicator",value:function(){var t=this.getComponents().LoadingIndicator,e=this.commonProps,i=this.props,s=i.isDisabled,n=i.isLoading,r=this.state.isFocused;return t&&n?h.createElement(t,(0,u.A)({},e,{innerProps:{"aria-hidden":"true"},isDisabled:s,isFocused:r})):null}},{key:"renderIndicatorSeparator",value:function(){var t=this.getComponents(),e=t.DropdownIndicator,i=t.IndicatorSeparator;if(!e||!i)return null;var s=this.commonProps,n=this.props.isDisabled,r=this.state.isFocused;return h.createElement(i,(0,u.A)({},s,{isDisabled:n,isFocused:r}))}},{key:"renderDropdownIndicator",value:function(){var t=this.getComponents().DropdownIndicator;if(!t)return null;var e=this.commonProps,i=this.props.isDisabled,s=this.state.isFocused,n={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return h.createElement(t,(0,u.A)({},e,{innerProps:n,isDisabled:i,isFocused:s}))}},{key:"renderMenu",value:function(){var t=this,e=this.getComponents(),i=e.Group,s=e.GroupHeading,n=e.Menu,r=e.MenuList,a=e.MenuPortal,o=e.LoadingMessage,l=e.NoOptionsMessage,c=e.Option,d=this.commonProps,p=this.state.focusedOption,f=this.props,g=f.captureMenuScroll,m=f.inputValue,v=f.isLoading,b=f.loadingMessage,y=f.minMenuHeight,_=f.maxMenuHeight,w=f.menuIsOpen,x=f.menuPlacement,A=f.menuPosition,E=f.menuPortalTarget,k=f.menuShouldBlockScroll,S=f.menuShouldScrollIntoView,C=f.noOptionsMessage,P=f.onMenuScrollToTop,T=f.onMenuScrollToBottom;if(!w)return null;var M,D=function(e,i){var s=e.type,n=e.data,r=e.isDisabled,a=e.isSelected,o=e.label,l=e.value,f=p===n,g=r?void 0:function(){return t.onOptionHover(n)},m=r?void 0:function(){return t.selectOption(n)},v="".concat(t.getElementId("option"),"-").concat(i),b={id:v,onClick:m,onMouseMove:g,onMouseOver:g,tabIndex:-1,role:"option","aria-selected":t.isAppleDevice?void 0:a};return h.createElement(c,(0,u.A)({},d,{innerProps:b,data:n,isDisabled:r,isSelected:a,key:v,label:o,type:s,value:l,isFocused:f,innerRef:f?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(e.data,"menu"))};if(this.hasOptions())M=this.getCategorizedOptions().map((function(e){if("group"===e.type){var n=e.data,r=e.options,a=e.index,o="".concat(t.getElementId("group"),"-").concat(a),l="".concat(o,"-heading");return h.createElement(i,(0,u.A)({},d,{key:o,data:n,options:r,Heading:s,headingProps:{id:l,data:e.data},label:t.formatGroupLabel(e.data)}),e.options.map((function(t){return D(t,"".concat(a,"-").concat(t.index))})))}if("option"===e.type)return D(e,"".concat(e.index))}));else if(v){var R=b({inputValue:m});if(null===R)return null;M=h.createElement(o,d,R)}else{var L=C({inputValue:m});if(null===L)return null;M=h.createElement(l,d,L)}var O={minMenuHeight:y,maxMenuHeight:_,menuPlacement:x,menuPosition:A,menuShouldScrollIntoView:S},I=h.createElement(Ye,(0,u.A)({},d,O),(function(e){var i=e.ref,s=e.placerProps,a=s.placement,o=s.maxHeight;return h.createElement(n,(0,u.A)({},d,O,{innerRef:i,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:v,placement:a}),h.createElement(Qi,{captureEnabled:g,onTopArrive:P,onBottomArrive:T,lockEnabled:k},(function(e){return h.createElement(r,(0,u.A)({},d,{innerRef:function(i){t.getMenuListRef(i),e(i)},innerProps:{role:"listbox","aria-multiselectable":d.isMulti,id:t.getElementId("listbox")},isLoading:v,maxHeight:o,focusedOption:p}),M)})))}));return E||"fixed"===A?h.createElement(a,(0,u.A)({},d,{appendTo:E,controlElement:this.controlRef,menuPlacement:x,menuPosition:A}),I):I}},{key:"renderFormField",value:function(){var t=this,e=this.props,i=e.delimiter,s=e.isDisabled,n=e.isMulti,r=e.name,a=e.required,o=this.state.selectValue;if(a&&!this.hasValue()&&!s)return h.createElement(Zi,{name:r,onFocus:this.onValueInputFocus});if(r&&!s){if(n){if(i){var l=o.map((function(e){return t.getOptionValue(e)})).join(i);return h.createElement("input",{name:r,type:"hidden",value:l})}var c=o.length>0?o.map((function(e,i){return h.createElement("input",{key:"i-".concat(i),name:r,type:"hidden",value:t.getOptionValue(e)})})):h.createElement("input",{name:r,type:"hidden",value:""});return h.createElement("div",null,c)}var d=o[0]?this.getOptionValue(o[0]):"";return h.createElement("input",{name:r,type:"hidden",value:d})}}},{key:"renderLiveRegion",value:function(){var t=this.commonProps,e=this.state,i=e.ariaSelection,s=e.focusedOption,n=e.focusedValue,r=e.isFocused,a=e.selectValue,o=this.getFocusableOptions();return h.createElement(Ci,(0,u.A)({},t,{id:this.getElementId("live-region"),ariaSelection:i,focusedOption:s,focusedValue:n,isFocused:r,selectValue:a,focusableOptions:o,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var t=this.getComponents(),e=t.Control,i=t.IndicatorsContainer,s=t.SelectContainer,n=t.ValueContainer,r=this.props,a=r.className,o=r.id,l=r.isDisabled,c=r.menuIsOpen,d=this.state.isFocused,p=this.commonProps=this.getCommonProps();return h.createElement(s,(0,u.A)({},p,{className:a,innerProps:{id:o,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:d}),this.renderLiveRegion(),h.createElement(e,(0,u.A)({},p,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:d,menuIsOpen:c}),h.createElement(n,(0,u.A)({},p,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),h.createElement(i,(0,u.A)({},p,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(t,e){var i=e.prevProps,n=e.clearFocusValueOnUpdate,r=e.inputIsHiddenAfterUpdate,a=e.ariaSelection,o=e.isFocused,l=e.prevWasFocused,h=e.instancePrefix,c=t.options,d=t.value,u=t.menuIsOpen,p=t.inputValue,f=t.isMulti,g=Ce(d),m={};if(i&&(d!==i.value||c!==i.options||u!==i.menuIsOpen||p!==i.inputValue)){var v=u?function(t,e){return hs(ls(t,e))}(t,g):[],b=u?cs(ls(t,g),"".concat(h,"-option")):[],y=n?function(t,e){var i=t.focusedValue,s=t.selectValue.indexOf(i);if(s>-1){if(e.indexOf(i)>-1)return i;if(s<e.length)return e[s]}return null}(e,g):null,_=function(t,e){var i=t.focusedOption;return i&&e.indexOf(i)>-1?i:e[0]}(e,v);m={selectValue:g,focusedOption:_,focusedOptionId:us(b,_),focusableOptionsWithIds:b,focusedValue:y,clearFocusValueOnUpdate:!1}}var w=null!=r&&t!==i?{inputIsHidden:r,inputIsHiddenAfterUpdate:void 0}:{},x=a,A=o&&l;return o&&!A&&(x={value:We(f,g,g[0]||null),options:g,action:"initial-input-focus"},A=!l),"initial-input-focus"===(null===a||void 0===a?void 0:a.action)&&(x=null),(0,s.A)((0,s.A)((0,s.A)({},m),w),{},{prevProps:t,ariaSelection:x,prevWasFocused:A})}}],i&&p(e.prototype,i),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(h.Component);_s.defaultProps=as;var ws=(0,h.forwardRef)((function(t,e){var i=function(t){var e=t.defaultInputValue,i=void 0===e?"":e,n=t.defaultMenuIsOpen,r=void 0!==n&&n,o=t.defaultValue,c=void 0===o?null:o,u=t.inputValue,p=t.menuIsOpen,f=t.onChange,g=t.onInputChange,m=t.onMenuClose,v=t.onMenuOpen,b=t.value,y=l(t,d),_=a((0,h.useState)(void 0!==u?u:i),2),w=_[0],x=_[1],A=a((0,h.useState)(void 0!==p?p:r),2),E=A[0],k=A[1],S=a((0,h.useState)(void 0!==b?b:c),2),C=S[0],P=S[1],T=(0,h.useCallback)((function(t,e){"function"===typeof f&&f(t,e),P(t)}),[f]),M=(0,h.useCallback)((function(t,e){var i;"function"===typeof g&&(i=g(t,e)),x(void 0!==i?i:t)}),[g]),D=(0,h.useCallback)((function(){"function"===typeof v&&v(),k(!0)}),[v]),R=(0,h.useCallback)((function(){"function"===typeof m&&m(),k(!1)}),[m]),L=void 0!==u?u:w,O=void 0!==p?p:E,I=void 0!==b?b:C;return(0,s.A)((0,s.A)({},y),{},{inputValue:L,menuIsOpen:O,onChange:T,onInputChange:M,onMenuClose:R,onMenuOpen:D,value:I})}(t);return h.createElement(_s,(0,u.A)({ref:e},i))})),xs=ws},77294:function(t,e,i){"use strict";var s=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(i(84222)),n=i(48146);function r(t,e){var i={};return t&&"string"===typeof t?((0,s.default)(t,(function(t,s){t&&s&&(i[(0,n.camelCase)(t,e)]=s)})),i):i}r.default=r,t.exports=r},48146:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.camelCase=void 0;var i=/^--[a-zA-Z0-9-]+$/,s=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(t,e){return e.toUpperCase()},l=function(t,e){return"".concat(e,"-")};e.camelCase=function(t,e){return void 0===e&&(e={}),function(t){return!t||n.test(t)||i.test(t)}(t)?t:(t=t.toLowerCase(),(t=e.reactCompat?t.replace(a,l):t.replace(r,l)).replace(s,o))}},84222:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(94403));e.default=function(t,e){var i=null;if(!t||"string"!==typeof t)return i;var s=(0,n.default)(t),r="function"===typeof e;return s.forEach((function(t){if("declaration"===t.type){var s=t.property,n=t.value;r?e(s,n,t):n&&((i=i||{})[s]=n)}})),i}},96440:t=>{"use strict";var e=function(){};t.exports=e},78460:(t,e,i)=>{"use strict";var s=i(70579),n=i(65043),r=Object.defineProperty,a=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!=typeof e?e+"":e,i),i),o=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},l=(t,e,i)=>(o(t,e,"read from private field"),i?i.call(t):e.get(t)),h=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},c=(t,e,i,s)=>(o(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i),d=(t,e,i,s)=>({set _(s){c(t,e,s,i)},get _(){return l(t,e,s)}}),u=(t,e,i)=>(o(t,e,"access private method"),i),p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g=function(t){return t&&t.Math===Math&&t},m=g("object"==typeof globalThis&&globalThis)||g("object"==typeof window&&window)||g("object"==typeof self&&self)||g("object"==typeof p&&p)||g("object"==typeof p&&p)||function(){return this}()||Function("return this")(),v={},b=function(t){try{return!!t()}catch{return!0}},y=!b((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),_=!b((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),w=_,x=Function.prototype.call,A=w?x.bind(x):function(){return x.apply(x,arguments)},E={},k={}.propertyIsEnumerable,S=Object.getOwnPropertyDescriptor,C=S&&!k.call({1:2},1);E.f=C?function(t){var e=S(this,t);return!!e&&e.enumerable}:k;var P,T,M=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},D=_,R=Function.prototype,L=R.call,O=D&&R.bind.bind(L,L),I=D?O:function(t){return function(){return L.apply(t,arguments)}},F=I,N=F({}.toString),j=F("".slice),B=b,H=function(t){return j(N(t),8,-1)},W=Object,z=I("".split),V=B((function(){return!W("z").propertyIsEnumerable(0)}))?function(t){return"String"===H(t)?z(t,""):W(t)}:W,$=function(t){return null==t},U=$,G=TypeError,q=function(t){if(U(t))throw new G("Can't call method on "+t);return t},Y=V,X=q,K=function(t){return Y(X(t))},Q="object"==typeof document&&document.all,J=typeof Q>"u"&&void 0!==Q?function(t){return"function"==typeof t||t===Q}:function(t){return"function"==typeof t},Z=J,tt=function(t){return"object"==typeof t?null!==t:Z(t)},et=m,it=J,st=function(t,e){return arguments.length<2?function(t){return it(t)?t:void 0}(et[t]):et[t]&&et[t][e]},nt=I({}.isPrototypeOf),rt=m,at=typeof navigator<"u"&&String(navigator.userAgent)||"",ot=rt.process,lt=rt.Deno,ht=ot&&ot.versions||lt&&lt.version,ct=ht&&ht.v8;ct&&(T=(P=ct.split("."))[0]>0&&P[0]<4?1:+(P[0]+P[1])),!T&&at&&((!(P=at.match(/Edge\/(\d+)/))||P[1]>=74)&&((P=at.match(/Chrome\/(\d+)/))&&(T=+P[1])));var dt=T,ut=b,pt=m.String,ft=!!Object.getOwnPropertySymbols&&!ut((function(){var t=Symbol("symbol detection");return!pt(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&dt&&dt<41})),gt=ft&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,mt=st,vt=J,bt=nt,yt=Object,_t=gt?function(t){return"symbol"==typeof t}:function(t){var e=mt("Symbol");return vt(e)&&bt(e.prototype,yt(t))},wt=String,xt=J,At=function(t){try{return wt(t)}catch{return"Object"}},Et=TypeError,kt=function(t){if(xt(t))return t;throw new Et(At(t)+" is not a function")},St=kt,Ct=$,Pt=A,Tt=J,Mt=tt,Dt=TypeError,Rt={exports:{}},Lt=m,Ot=Object.defineProperty,It=function(t,e){try{Ot(Lt,t,{value:e,configurable:!0,writable:!0})}catch{Lt[t]=e}return e},Ft=m,Nt=It,jt="__core-js_shared__",Bt=Rt.exports=Ft[jt]||Nt(jt,{});(Bt.versions||(Bt.versions=[])).push({version:"3.37.1",mode:"global",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Ht=Rt.exports,Wt=Ht,zt=function(t,e){return Wt[t]||(Wt[t]=e||{})},Vt=q,$t=Object,Ut=function(t){return $t(Vt(t))},Gt=I({}.hasOwnProperty),qt=Object.hasOwn||function(t,e){return Gt(Ut(t),e)},Yt=I,Xt=0,Kt=Math.random(),Qt=Yt(1..toString),Jt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Qt(++Xt+Kt,36)},Zt=zt,te=qt,ee=Jt,ie=ft,se=gt,ne=m.Symbol,re=Zt("wks"),ae=se?ne.for||ne:ne&&ne.withoutSetter||ee,oe=A,le=tt,he=_t,ce=function(t,e){var i=t[e];return Ct(i)?void 0:St(i)},de=function(t,e){var i,s;if("string"===e&&Tt(i=t.toString)&&!Mt(s=Pt(i,t))||Tt(i=t.valueOf)&&!Mt(s=Pt(i,t))||"string"!==e&&Tt(i=t.toString)&&!Mt(s=Pt(i,t)))return s;throw new Dt("Can't convert object to primitive value")},ue=function(t){return te(re,t)||(re[t]=ie&&te(ne,t)?ne[t]:ae("Symbol."+t)),re[t]},pe=TypeError,fe=ue("toPrimitive"),ge=function(t,e){if(!le(t)||he(t))return t;var i,s=ce(t,fe);if(s){if(void 0===e&&(e="default"),i=oe(s,t,e),!le(i)||he(i))return i;throw new pe("Can't convert object to primitive value")}return void 0===e&&(e="number"),de(t,e)},me=_t,ve=function(t){var e=ge(t,"string");return me(e)?e:e+""},be=tt,ye=m.document,_e=be(ye)&&be(ye.createElement),we=function(t){return _e?ye.createElement(t):{}},xe=!y&&!b((function(){return 7!==Object.defineProperty(we("div"),"a",{get:function(){return 7}}).a})),Ae=y,Ee=A,ke=E,Se=M,Ce=K,Pe=ve,Te=qt,Me=xe,De=Object.getOwnPropertyDescriptor;v.f=Ae?De:function(t,e){if(t=Ce(t),e=Pe(e),Me)try{return De(t,e)}catch{}if(Te(t,e))return Se(!Ee(ke.f,t,e),t[e])};var Re={},Le=y&&b((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Oe=tt,Ie=String,Fe=TypeError,Ne=function(t){if(Oe(t))return t;throw new Fe(Ie(t)+" is not an object")},je=y,Be=xe,He=Le,We=Ne,ze=ve,Ve=TypeError,$e=Object.defineProperty,Ue=Object.getOwnPropertyDescriptor,Ge="enumerable",qe="configurable",Ye="writable";Re.f=je?He?function(t,e,i){if(We(t),e=ze(e),We(i),"function"==typeof t&&"prototype"===e&&"value"in i&&Ye in i&&!i[Ye]){var s=Ue(t,e);s&&s[Ye]&&(t[e]=i.value,i={configurable:qe in i?i[qe]:s[qe],enumerable:Ge in i?i[Ge]:s[Ge],writable:!1})}return $e(t,e,i)}:$e:function(t,e,i){if(We(t),e=ze(e),We(i),Be)try{return $e(t,e,i)}catch{}if("get"in i||"set"in i)throw new Ve("Accessors not supported");return"value"in i&&(t[e]=i.value),t};var Xe=Re,Ke=M,Qe=y?function(t,e,i){return Xe.f(t,e,Ke(1,i))}:function(t,e,i){return t[e]=i,t},Je={exports:{}},Ze=y,ti=qt,ei=Function.prototype,ii=Ze&&Object.getOwnPropertyDescriptor,si=ti(ei,"name"),ni={EXISTS:si,PROPER:si&&"something"===function(){}.name,CONFIGURABLE:si&&(!Ze||Ze&&ii(ei,"name").configurable)},ri=J,ai=Ht,oi=I(Function.toString);ri(ai.inspectSource)||(ai.inspectSource=function(t){return oi(t)});var li,hi,ci,di=ai.inspectSource,ui=J,pi=m.WeakMap,fi=ui(pi)&&/native code/.test(String(pi)),gi=Jt,mi=zt("keys"),vi={},bi=fi,yi=m,_i=tt,wi=Qe,xi=qt,Ai=Ht,Ei=function(t){return mi[t]||(mi[t]=gi(t))},ki=vi,Si="Object already initialized",Ci=yi.TypeError,Pi=yi.WeakMap;if(bi||Ai.state){var Ti=Ai.state||(Ai.state=new Pi);Ti.get=Ti.get,Ti.has=Ti.has,Ti.set=Ti.set,li=function(t,e){if(Ti.has(t))throw new Ci(Si);return e.facade=t,Ti.set(t,e),e},hi=function(t){return Ti.get(t)||{}},ci=function(t){return Ti.has(t)}}else{var Mi=Ei("state");ki[Mi]=!0,li=function(t,e){if(xi(t,Mi))throw new Ci(Si);return e.facade=t,wi(t,Mi,e),e},hi=function(t){return xi(t,Mi)?t[Mi]:{}},ci=function(t){return xi(t,Mi)}}var Di={set:li,get:hi,has:ci,enforce:function(t){return ci(t)?hi(t):li(t,{})},getterFor:function(t){return function(e){var i;if(!_i(e)||(i=hi(e)).type!==t)throw new Ci("Incompatible receiver, "+t+" required");return i}}},Ri=I,Li=b,Oi=J,Ii=qt,Fi=y,Ni=ni.CONFIGURABLE,ji=di,Bi=Di.enforce,Hi=Di.get,Wi=String,zi=Object.defineProperty,Vi=Ri("".slice),$i=Ri("".replace),Ui=Ri([].join),Gi=Fi&&!Li((function(){return 8!==zi((function(){}),"length",{value:8}).length})),qi=String(String).split("String"),Yi=Je.exports=function(t,e,i){"Symbol("===Vi(Wi(e),0,7)&&(e="["+$i(Wi(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!Ii(t,"name")||Ni&&t.name!==e)&&(Fi?zi(t,"name",{value:e,configurable:!0}):t.name=e),Gi&&i&&Ii(i,"arity")&&t.length!==i.arity&&zi(t,"length",{value:i.arity});try{i&&Ii(i,"constructor")&&i.constructor?Fi&&zi(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var s=Bi(t);return Ii(s,"source")||(s.source=Ui(qi,"string"==typeof e?e:"")),t};Function.prototype.toString=Yi((function(){return Oi(this)&&Hi(this).source||ji(this)}),"toString");var Xi=Je.exports,Ki=J,Qi=Re,Ji=Xi,Zi=It,ts={},es=Math.ceil,is=Math.floor,ss=Math.trunc||function(t){var e=+t;return(e>0?is:es)(e)},ns=function(t){var e=+t;return e!==e||0===e?0:ss(e)},rs=ns,as=Math.max,os=Math.min,ls=ns,hs=Math.min,cs=function(t){var e=ls(t);return e>0?hs(e,9007199254740991):0},ds=K,us=function(t,e){var i=rs(t);return i<0?as(i+e,0):os(i,e)},ps=function(t){return cs(t.length)},fs=function(t){return function(e,i,s){var n=ds(e),r=ps(n);if(0===r)return!t&&-1;var a,o=us(s,r);if(t&&i!==i){for(;r>o;)if((a=n[o++])!==a)return!0}else for(;r>o;o++)if((t||o in n)&&n[o]===i)return t||o||0;return!t&&-1}},gs={includes:fs(!0),indexOf:fs(!1)},ms=qt,vs=K,bs=gs.indexOf,ys=vi,_s=I([].push),ws=function(t,e){var i,s=vs(t),n=0,r=[];for(i in s)!ms(ys,i)&&ms(s,i)&&_s(r,i);for(;e.length>n;)ms(s,i=e[n++])&&(~bs(r,i)||_s(r,i));return r},xs=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");ts.f=Object.getOwnPropertyNames||function(t){return ws(t,xs)};var As={};As.f=Object.getOwnPropertySymbols;var Es=st,ks=ts,Ss=As,Cs=Ne,Ps=I([].concat),Ts=Es("Reflect","ownKeys")||function(t){var e=ks.f(Cs(t)),i=Ss.f;return i?Ps(e,i(t)):e},Ms=qt,Ds=Ts,Rs=v,Ls=Re,Os=b,Is=J,Fs=/#|\.prototype\./,Ns=function(t,e){var i=Bs[js(t)];return i===Ws||i!==Hs&&(Is(e)?Os(e):!!e)},js=Ns.normalize=function(t){return String(t).replace(Fs,".").toLowerCase()},Bs=Ns.data={},Hs=Ns.NATIVE="N",Ws=Ns.POLYFILL="P",zs=Ns,Vs=m,$s=v.f,Us=Qe,Gs=function(t,e,i,s){s||(s={});var n=s.enumerable,r=void 0!==s.name?s.name:e;if(Ki(i)&&Ji(i,r,s),s.global)n?t[e]=i:Zi(e,i);else{try{s.unsafe?t[e]&&(n=!0):delete t[e]}catch{}n?t[e]=i:Qi.f(t,e,{value:i,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t},qs=It,Ys=function(t,e,i){for(var s=Ds(e),n=Ls.f,r=Rs.f,a=0;a<s.length;a++){var o=s[a];!Ms(t,o)&&(!i||!Ms(i,o))&&n(t,o,r(e,o))}},Xs=zs,Ks={},Qs=kt,Js=TypeError,Zs=function(t){var e,i;this.promise=new t((function(t,s){if(void 0!==e||void 0!==i)throw new Js("Bad Promise constructor");e=t,i=s})),this.resolve=Qs(e),this.reject=Qs(i)};Ks.f=function(t){return new Zs(t)};var tn=function(t,e){var i,s,n,r,a,o=t.target,l=t.global,h=t.stat;if(i=l?Vs:h?Vs[o]||qs(o,{}):Vs[o]&&Vs[o].prototype)for(s in e){if(r=e[s],t.dontCallGetSet?n=(a=$s(i,s))&&a.value:n=i[s],!Xs(l?s:o+(h?".":"#")+s,t.forced)&&void 0!==n){if(typeof r==typeof n)continue;Ys(r,n)}(t.sham||n&&n.sham)&&Us(r,"sham",!0),Gs(i,s,r,t)}},en=Ks;function sn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}tn({target:"Promise",stat:!0},{withResolvers:function(){var t=en.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}});var nn,rn,an={exports:{}},on=an.exports={};function ln(){throw new Error("setTimeout has not been defined")}function hn(){throw new Error("clearTimeout has not been defined")}function cn(t){if(nn===setTimeout)return setTimeout(t,0);if((nn===ln||!nn)&&setTimeout)return nn=setTimeout,setTimeout(t,0);try{return nn(t,0)}catch{try{return nn.call(null,t,0)}catch{return nn.call(this,t,0)}}}!function(){try{nn="function"==typeof setTimeout?setTimeout:ln}catch{nn=ln}try{rn="function"==typeof clearTimeout?clearTimeout:hn}catch{rn=hn}}();var dn,un=[],pn=!1,fn=-1;function gn(){!pn||!dn||(pn=!1,dn.length?un=dn.concat(un):fn=-1,un.length&&mn())}function mn(){if(!pn){var t=cn(gn);pn=!0;for(var e=un.length;e;){for(dn=un,un=[];++fn<e;)dn&&dn[fn].run();fn=-1,e=un.length}dn=null,pn=!1,function(t){if(rn===clearTimeout)return clearTimeout(t);if((rn===hn||!rn)&&clearTimeout)return rn=clearTimeout,clearTimeout(t);try{return rn(t)}catch{try{return rn.call(null,t)}catch{return rn.call(this,t)}}}(t)}}function vn(t,e){this.fun=t,this.array=e}function bn(){}on.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];un.push(new vn(t,e)),1===un.length&&!pn&&cn(mn)},vn.prototype.run=function(){this.fun.apply(null,this.array)},on.title="browser",on.browser=!0,on.env={},on.argv=[],on.version="",on.versions={},on.on=bn,on.addListener=bn,on.once=bn,on.off=bn,on.removeListener=bn,on.removeAllListeners=bn,on.emit=bn,on.prependListener=bn,on.prependOnceListener=bn,on.listeners=function(t){return[]},on.binding=function(t){throw new Error("process.binding is not supported")},on.cwd=function(){return"/"},on.chdir=function(t){throw new Error("process.chdir is not supported")},on.umask=function(){return 0};const yn=sn(an.exports);var _n=function(){return _n=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},_n.apply(this,arguments)};function wn(t,e,i){if(i||2===arguments.length)for(var s,n=0,r=e.length;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function xn(t){var e=Object.create(null);return function(i){return void 0===e[i]&&(e[i]=t(i)),e[i]}}var An=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,En=xn((function(t){return An.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),kn="-ms-",Sn="-moz-",Cn="-webkit-",Pn="comm",Tn="rule",Mn="decl",Dn="@keyframes",Rn=Math.abs,Ln=String.fromCharCode,On=Object.assign;function In(t){return t.trim()}function Fn(t,e){return(t=e.exec(t))?t[0]:t}function Nn(t,e,i){return t.replace(e,i)}function jn(t,e,i){return t.indexOf(e,i)}function Bn(t,e){return 0|t.charCodeAt(e)}function Hn(t,e,i){return t.slice(e,i)}function Wn(t){return t.length}function zn(t){return t.length}function Vn(t,e){return e.push(t),t}function $n(t,e){return t.filter((function(t){return!Fn(t,e)}))}var Un=1,Gn=1,qn=0,Yn=0,Xn=0,Kn="";function Qn(t,e,i,s,n,r,a,o){return{value:t,root:e,parent:i,type:s,props:n,children:r,line:Un,column:Gn,length:a,return:"",siblings:o}}function Jn(t,e){return On(Qn("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Zn(t){for(;t.root;)t=Jn(t.root,{children:[t]});Vn(t,t.siblings)}function tr(){return Xn=Yn<qn?Bn(Kn,Yn++):0,Gn++,10===Xn&&(Gn=1,Un++),Xn}function er(){return Bn(Kn,Yn)}function ir(){return Yn}function sr(t,e){return Hn(Kn,t,e)}function nr(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rr(t){return In(sr(Yn-1,lr(91===t?t+2:40===t?t+1:t)))}function ar(t){for(;(Xn=er())&&Xn<33;)tr();return nr(t)>2||nr(Xn)>3?"":" "}function or(t,e){for(;--e&&tr()&&!(Xn<48||Xn>102||Xn>57&&Xn<65||Xn>70&&Xn<97););return sr(t,ir()+(e<6&&32==er()&&32==tr()))}function lr(t){for(;tr();)switch(Xn){case t:return Yn;case 34:case 39:34!==t&&39!==t&&lr(Xn);break;case 40:41===t&&lr(t);break;case 92:tr()}return Yn}function hr(t,e){for(;tr()&&t+Xn!==57&&(t+Xn!==84||47!==er()););return"/*"+sr(e,Yn-1)+"*"+Ln(47===t?t:tr())}function cr(t){for(;!nr(er());)tr();return sr(t,Yn)}function dr(t){return function(t){return Kn="",t}(ur("",null,null,null,[""],t=function(t){return Un=Gn=1,qn=Wn(Kn=t),Yn=0,[]}(t),0,[0],t))}function ur(t,e,i,s,n,r,a,o,l){for(var h=0,c=0,d=a,u=0,p=0,f=0,g=1,m=1,v=1,b=0,y="",_=n,w=r,x=s,A=y;m;)switch(f=b,b=tr()){case 40:if(108!=f&&58==Bn(A,d-1)){-1!=jn(A+=Nn(rr(b),"&","&\f"),"&\f",Rn(h?o[h-1]:0))&&(v=-1);break}case 34:case 39:case 91:A+=rr(b);break;case 9:case 10:case 13:case 32:A+=ar(f);break;case 92:A+=or(ir()-1,7);continue;case 47:switch(er()){case 42:case 47:Vn(fr(hr(tr(),ir()),e,i,l),l);break;default:A+="/"}break;case 123*g:o[h++]=Wn(A)*v;case 125*g:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+c:-1==v&&(A=Nn(A,/\f/g,"")),p>0&&Wn(A)-d&&Vn(p>32?gr(A+";",s,i,d-1,l):gr(Nn(A," ","")+";",s,i,d-2,l),l);break;case 59:A+=";";default:if(Vn(x=pr(A,e,i,h,c,n,o,y,_=[],w=[],d,r),r),123===b)if(0===c)ur(A,e,x,x,_,r,d,o,w);else switch(99===u&&110===Bn(A,3)?100:u){case 100:case 108:case 109:case 115:ur(t,x,x,s&&Vn(pr(t,x,x,0,0,n,o,y,n,_=[],d,w),w),n,w,d,o,s?_:w);break;default:ur(A,x,x,x,[""],w,0,o,w)}}h=c=p=0,g=v=1,y=A="",d=a;break;case 58:d=1+Wn(A),p=f;default:if(g<1)if(123==b)--g;else if(125==b&&0==g++&&125==(Xn=Yn>0?Bn(Kn,--Yn):0,Gn--,10===Xn&&(Gn=1,Un--),Xn))continue;switch(A+=Ln(b),b*g){case 38:v=c>0?1:(A+="\f",-1);break;case 44:o[h++]=(Wn(A)-1)*v,v=1;break;case 64:45===er()&&(A+=rr(tr())),u=er(),c=d=Wn(y=A+=cr(ir())),b++;break;case 45:45===f&&2==Wn(A)&&(g=0)}}return r}function pr(t,e,i,s,n,r,a,o,l,h,c,d){for(var u=n-1,p=0===n?r:[""],f=zn(p),g=0,m=0,v=0;g<s;++g)for(var b=0,y=Hn(t,u+1,u=Rn(m=a[g])),_=t;b<f;++b)(_=In(m>0?p[b]+" "+y:Nn(y,/&\f/g,p[b])))&&(l[v++]=_);return Qn(t,e,i,0===n?Tn:o,l,h,c,d)}function fr(t,e,i,s){return Qn(t,e,i,Pn,Ln(Xn),Hn(t,2,-2),0,s)}function gr(t,e,i,s,n){return Qn(t,e,i,Mn,Hn(t,0,s),Hn(t,s+1,-1),s,n)}function mr(t,e,i){switch(function(t,e){return 45^Bn(t,0)?(((e<<2^Bn(t,0))<<2^Bn(t,1))<<2^Bn(t,2))<<2^Bn(t,3):0}(t,e)){case 5103:return Cn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Cn+t+t;case 4789:return Sn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Cn+t+Sn+t+kn+t+t;case 5936:switch(Bn(t,e+11)){case 114:return Cn+t+kn+Nn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Cn+t+kn+Nn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Cn+t+kn+Nn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Cn+t+kn+t+t;case 6165:return Cn+t+kn+"flex-"+t+t;case 5187:return Cn+t+Nn(t,/(\w+).+(:[^]+)/,Cn+"box-$1$2"+kn+"flex-$1$2")+t;case 5443:return Cn+t+kn+"flex-item-"+Nn(t,/flex-|-self/g,"")+(Fn(t,/flex-|baseline/)?"":kn+"grid-row-"+Nn(t,/flex-|-self/g,""))+t;case 4675:return Cn+t+kn+"flex-line-pack"+Nn(t,/align-content|flex-|-self/g,"")+t;case 5548:return Cn+t+kn+Nn(t,"shrink","negative")+t;case 5292:return Cn+t+kn+Nn(t,"basis","preferred-size")+t;case 6060:return Cn+"box-"+Nn(t,"-grow","")+Cn+t+kn+Nn(t,"grow","positive")+t;case 4554:return Cn+Nn(t,/([^-])(transform)/g,"$1"+Cn+"$2")+t;case 6187:return Nn(Nn(Nn(t,/(zoom-|grab)/,Cn+"$1"),/(image-set)/,Cn+"$1"),t,"")+t;case 5495:case 3959:return Nn(t,/(image-set\([^]*)/,Cn+"$1$`$1");case 4968:return Nn(Nn(t,/(.+:)(flex-)?(.*)/,Cn+"box-pack:$3"+kn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Cn+t+t;case 4200:if(!Fn(t,/flex-|baseline/))return kn+"grid-column-align"+Hn(t,e)+t;break;case 2592:case 3360:return kn+Nn(t,"template-","")+t;case 4384:case 3616:return i&&i.some((function(t,i){return e=i,Fn(t.props,/grid-\w+-end/)}))?~jn(t+(i=i[e].value),"span",0)?t:kn+Nn(t,"-start","")+t+kn+"grid-row-span:"+(~jn(i,"span",0)?Fn(i,/\d+/):+Fn(i,/\d+/)-+Fn(t,/\d+/))+";":kn+Nn(t,"-start","")+t;case 4896:case 4128:return i&&i.some((function(t){return Fn(t.props,/grid-\w+-start/)}))?t:kn+Nn(Nn(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Nn(t,/(.+)-inline(.+)/,Cn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wn(t)-1-e>6)switch(Bn(t,e+1)){case 109:if(45!==Bn(t,e+4))break;case 102:return Nn(t,/(.+:)(.+)-([^]+)/,"$1"+Cn+"$2-$3$1"+Sn+(108==Bn(t,e+3)?"$3":"$2-$3"))+t;case 115:return~jn(t,"stretch",0)?mr(Nn(t,"stretch","fill-available"),e,i)+t:t}break;case 5152:case 5920:return Nn(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(e,i,s,n,r,a,o){return kn+i+":"+s+o+(n?kn+i+"-span:"+(r?a:+a-+s)+o:"")+t}));case 4949:if(121===Bn(t,e+6))return Nn(t,":",":"+Cn)+t;break;case 6444:switch(Bn(t,45===Bn(t,14)?18:11)){case 120:return Nn(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Cn+(45===Bn(t,14)?"inline-":"")+"box$3$1"+Cn+"$2$3$1"+kn+"$2box$3")+t;case 100:return Nn(t,":",":"+kn)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Nn(t,"scroll-","scroll-snap-")+t}return t}function vr(t,e){for(var i="",s=0;s<t.length;s++)i+=e(t[s],s,t,e)||"";return i}function br(t,e,i,s){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case Mn:return t.return=t.return||t.value;case Pn:return"";case Dn:return t.return=t.value+"{"+vr(t.children,s)+"}";case Tn:if(!Wn(t.value=t.props.join(",")))return""}return Wn(i=vr(t.children,s))?t.return=t.value+"{"+i+"}":""}function yr(t,e,i,s){if(t.length>-1&&!t.return)switch(t.type){case Mn:return void(t.return=mr(t.value,t.length,i));case Dn:return vr([Jn(t,{value:Nn(t.value,"@","@"+Cn)})],s);case Tn:if(t.length)return function(t,e){return t.map(e).join("")}(i=t.props,(function(e){switch(Fn(e,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Zn(Jn(t,{props:[Nn(e,/:(read-\w+)/,":-moz-$1")]})),Zn(Jn(t,{props:[e]})),On(t,{props:$n(i,s)});break;case"::placeholder":Zn(Jn(t,{props:[Nn(e,/:(plac\w+)/,":"+Cn+"input-$1")]})),Zn(Jn(t,{props:[Nn(e,/:(plac\w+)/,":-moz-$1")]})),Zn(Jn(t,{props:[Nn(e,/:(plac\w+)/,kn+"input-$1")]})),Zn(Jn(t,{props:[e]})),On(t,{props:$n(i,s)})}return""}))}}var _r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},wr=typeof yn<"u"&&void 0!==yn.env&&(yn.env.REACT_APP_SC_ATTR||yn.env.SC_ATTR)||"data-styled",xr="active",Ar="data-styled-version",Er="6.1.11",kr="/*!sc*/\n",Sr=typeof window<"u"&&"HTMLElement"in window,Cr=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:typeof yn<"u"&&void 0!==yn.env&&void 0!==yn.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==yn.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==yn.env.REACT_APP_SC_DISABLE_SPEEDY&&yn.env.REACT_APP_SC_DISABLE_SPEEDY:typeof yn<"u"&&void 0!==yn.env&&void 0!==yn.env.SC_DISABLE_SPEEDY&&""!==yn.env.SC_DISABLE_SPEEDY?"false"!==yn.env.SC_DISABLE_SPEEDY&&yn.env.SC_DISABLE_SPEEDY:"production"!==yn.env.NODE_ENV),Pr=/invalid hook call/i,Tr=new Set,Mr=Object.freeze([]),Dr=Object.freeze({});var Rr=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Lr=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Or=/(^-|-$)/g;function Ir(t){return t.replace(Lr,"-").replace(Or,"")}var Fr=/(a)(d)/gi,Nr=function(t){return String.fromCharCode(t+(t>25?39:97))};function jr(t){var e,i="";for(e=Math.abs(t);e>52;e=e/52|0)i=Nr(e%52)+i;return(Nr(e%52)+i).replace(Fr,"$1-$2")}var Br,Hr=function(t,e){for(var i=e.length;i;)t=33*t^e.charCodeAt(--i);return t},Wr=function(t){return Hr(5381,t)};function zr(t){return jr(Wr(t)>>>0)}function Vr(t){return"production"!==yn.env.NODE_ENV&&"string"==typeof t&&t||t.displayName||t.name||"Component"}function $r(t){return"string"==typeof t&&("production"===yn.env.NODE_ENV||t.charAt(0)===t.charAt(0).toLowerCase())}var Ur="function"==typeof Symbol&&Symbol.for,Gr=Ur?Symbol.for("react.memo"):60115,qr=Ur?Symbol.for("react.forward_ref"):60112,Yr={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Xr={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Kr={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Qr=((Br={})[qr]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Br[Gr]=Kr,Br);function Jr(t){return("type"in(e=t)&&e.type.$$typeof)===Gr?Kr:"$$typeof"in t?Qr[t.$$typeof]:Yr;var e}var Zr=Object.defineProperty,ta=Object.getOwnPropertyNames,ea=Object.getOwnPropertySymbols,ia=Object.getOwnPropertyDescriptor,sa=Object.getPrototypeOf,na=Object.prototype;function ra(t,e,i){if("string"!=typeof e){if(na){var s=sa(e);s&&s!==na&&ra(t,s,i)}var n=ta(e);ea&&(n=n.concat(ea(e)));for(var r=Jr(t),a=Jr(e),o=0;o<n.length;++o){var l=n[o];if(!(l in Xr||i&&i[l]||a&&l in a||r&&l in r)){var h=ia(e,l);try{Zr(t,l,h)}catch{}}}}return t}function aa(t){return"function"==typeof t}function oa(t){return"object"==typeof t&&"styledComponentId"in t}function la(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function ha(t,e){if(0===t.length)return"";for(var i=t[0],s=1;s<t.length;s++)i+=t[s];return i}function ca(t){return null!==t&&"object"==typeof t&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function da(t,e,i){if(void 0===i&&(i=!1),!i&&!ca(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var s=0;s<e.length;s++)t[s]=da(t[s],e[s]);else if(ca(e))for(var s in e)t[s]=da(t[s],e[s]);return t}function ua(t,e){Object.defineProperty(t,"toString",{value:e})}var pa="production"!==yn.env.NODE_ENV?{1:"Cannot create styled-component for component: %s.\n\n",2:"Can't collect styles once you've consumed a `ServerStyleSheet`'s styles! `ServerStyleSheet` is a one off instance for each server-side render cycle.\n\n- Are you trying to reuse it across renders?\n- Are you accidentally calling collectStyles twice?\n\n",3:"Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.\n\n",4:"The `StyleSheetManager` expects a valid target or sheet prop!\n\n- Does this error occur on the client and is your target falsy?\n- Does this error occur on the server and is the sheet falsy?\n\n",5:"The clone method cannot be used on the client!\n\n- Are you running in a client-like environment on the server?\n- Are you trying to run SSR on the client?\n\n",6:"Trying to insert a new style tag, but the given Node is unmounted!\n\n- Are you using a custom target that isn't mounted?\n- Does your document not have a valid head element?\n- Have you accidentally removed a style tag manually?\n\n",7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:'ThemeProvider: Please make your "theme" prop an object.\n\n',9:"Missing document `<head>`\n\n",10:"Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021\n\n",11:"_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.\n\n",12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:"%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\n\n",14:'ThemeProvider: "theme" prop is required.\n\n',15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:"Reached the limit of how many styled components may be created at group %s.\nYou may only create up to 1,073,741,824 components. If you're creating components dynamically,\nas for instance in your render method then you may be running into this limitation.\n\n",17:"CSSStyleSheet could not be found on HTMLStyleElement.\nHas styled-components' style tag been unmounted or altered by another script?\n",18:"ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`"}:{};function fa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t[0],s=[],n=1,r=t.length;n<r;n+=1)s.push(t[n]);return s.forEach((function(t){i=i.replace(/%[a-z]/,t)})),i}function ga(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return"production"===yn.env.NODE_ENV?new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):"")):new Error(fa.apply(void 0,wn([pa[t]],e,!1)).trim())}var ma=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return t.prototype.indexOfGroup=function(t){for(var e=0,i=0;i<t;i++)e+=this.groupSizes[i];return e},t.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,n=s;t>=n;)if((n<<=1)<0)throw ga(16,"".concat(t));this.groupSizes=new Uint32Array(n),this.groupSizes.set(i),this.length=n;for(var r=s;r<n;r++)this.groupSizes[r]=0}for(var a=this.indexOfGroup(t+1),o=(r=0,e.length);r<o;r++)this.tag.insertRule(a,e[r])&&(this.groupSizes[t]++,a++)},t.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],i=this.indexOfGroup(t),s=i+e;this.groupSizes[t]=0;for(var n=i;n<s;n++)this.tag.deleteRule(i)}},t.prototype.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var i=this.groupSizes[t],s=this.indexOfGroup(t),n=s+i,r=s;r<n;r++)e+="".concat(this.tag.getRule(r)).concat(kr);return e},t}(),va=1<<30,ba=new Map,ya=new Map,_a=1,wa=function(t){if(ba.has(t))return ba.get(t);for(;ya.has(_a);)_a++;var e=_a++;if("production"!==yn.env.NODE_ENV&&((0|e)<0||e>va))throw ga(16,"".concat(e));return ba.set(t,e),ya.set(e,t),e},xa=function(t,e){_a=e+1,ba.set(t,e),ya.set(e,t)},Aa="style[".concat(wr,"][").concat(Ar,'="').concat(Er,'"]'),Ea=new RegExp("^".concat(wr,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),ka=function(t,e,i){for(var s,n=i.split(","),r=0,a=n.length;r<a;r++)(s=n[r])&&t.registerName(e,s)},Sa=function(t,e){for(var i,s=(null!==(i=e.textContent)&&void 0!==i?i:"").split(kr),n=[],r=0,a=s.length;r<a;r++){var o=s[r].trim();if(o){var l=o.match(Ea);if(l){var h=0|parseInt(l[1],10),c=l[2];0!==h&&(xa(c,h),ka(t,c,l[3]),t.getTag().insertRules(h,n)),n.length=0}else n.push(o)}}};var Ca=function(t){var e=document.head,s=t||e,n=document.createElement("style"),r=function(t){var e=Array.from(t.querySelectorAll("style[".concat(wr,"]")));return e[e.length-1]}(s),a=void 0!==r?r.nextSibling:null;n.setAttribute(wr,xr),n.setAttribute(Ar,Er);var o=i.nc;return o&&n.setAttribute("nonce",o),s.insertBefore(n,a),n},Pa=function(){function t(t){this.element=Ca(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,i=0,s=e.length;i<s;i++){var n=e[i];if(n.ownerNode===t)return n}throw ga(17)}(this.element),this.length=0}return t.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},t.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},t}(),Ta=function(){function t(t){this.element=Ca(t),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var i=document.createTextNode(e);return this.element.insertBefore(i,this.nodes[t]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},t.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),Ma=function(){function t(t){this.rules=[],this.length=0}return t.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},t.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},t.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),Da=Sr,Ra={isServer:!Sr,useCSSOMInjection:!Cr},La=function(){function t(t,e,i){void 0===t&&(t=Dr),void 0===e&&(e={});var s=this;this.options=_n(_n({},Ra),t),this.gs=e,this.names=new Map(i),this.server=!!t.isServer,!this.server&&Sr&&Da&&(Da=!1,function(t){for(var e=document.querySelectorAll(Aa),i=0,s=e.length;i<s;i++){var n=e[i];n&&n.getAttribute(wr)!==xr&&(Sa(t,n),n.parentNode&&n.parentNode.removeChild(n))}}(this)),ua(this,(function(){return function(t){for(var e=t.getTag(),i=e.length,s="",n=function(i){var n,r=(n=i,ya.get(n));if(void 0===r)return"continue";var a=t.names.get(r),o=e.getGroup(i);if(void 0===a||0===o.length)return"continue";var l="".concat(wr,".g").concat(i,'[id="').concat(r,'"]'),h="";void 0!==a&&a.forEach((function(t){t.length>0&&(h+="".concat(t,","))})),s+="".concat(o).concat(l,'{content:"').concat(h,'"}').concat(kr)},r=0;r<i;r++)n(r);return s}(s)}))}return t.registerId=function(t){return wa(t)},t.prototype.reconstructWithOptions=function(e,i){return void 0===i&&(i=!0),new t(_n(_n({},this.options),e),this.gs,i&&this.names||void 0)},t.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(t=function(t){var e=t.useCSSOMInjection,i=t.target;return t.isServer?new Ma(i):e?new Pa(i):new Ta(i)}(this.options),new ma(t)));var t},t.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},t.prototype.registerName=function(t,e){if(wa(t),this.names.has(t))this.names.get(t).add(e);else{var i=new Set;i.add(e),this.names.set(t,i)}},t.prototype.insertRules=function(t,e,i){this.registerName(t,e),this.getTag().insertRules(wa(t),i)},t.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},t.prototype.clearRules=function(t){this.getTag().clearGroup(wa(t)),this.clearNames(t)},t.prototype.clearTag=function(){this.tag=void 0},t}(),Oa=/&/g,Ia=/^\s*\/\/.*$/gm;function Fa(t,e){return t.map((function(t){return"rule"===t.type&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map((function(t){return"".concat(e," ").concat(t)}))),Array.isArray(t.children)&&"@keyframes"!==t.type&&(t.children=Fa(t.children,e)),t}))}var Na=new La,ja=function(){var t,e,i,s=Dr,n=s.options,r=void 0===n?Dr:n,a=s.plugins,o=void 0===a?Mr:a,l=function(i,s,n){return n.startsWith(e)&&n.endsWith(e)&&n.replaceAll(e,"").length>0?".".concat(t):i},h=o.slice();h.push((function(t){t.type===Tn&&t.value.includes("&")&&(t.props[0]=t.props[0].replace(Oa,e).replace(i,l))})),r.prefix&&h.push(yr),h.push(br);var c=function(s,n,a,o){void 0===n&&(n=""),void 0===a&&(a=""),void 0===o&&(o="&"),t=o,e=n,i=new RegExp("\\".concat(e,"\\b"),"g");var l=s.replace(Ia,""),c=dr(a||n?"".concat(a," ").concat(n," { ").concat(l," }"):l);r.namespace&&(c=Fa(c,r.namespace));var d=[];return vr(c,function(t){var e=zn(t);return function(i,s,n,r){for(var a="",o=0;o<e;o++)a+=t[o](i,s,n,r)||"";return a}}(h.concat(function(t){return function(e){e.root||(e=e.return)&&t(e)}}((function(t){return d.push(t)}))))),d};return c.hash=o.length?o.reduce((function(t,e){return e.name||ga(15),Hr(t,e.name)}),5381).toString():"",c}(),Ba=n.createContext({shouldForwardProp:void 0,styleSheet:Na,stylis:ja});function Ha(){return(0,n.useContext)(Ba)}Ba.Consumer,n.createContext(void 0);var Wa=function(){function t(t,e){var i=this;this.inject=function(t,e){void 0===e&&(e=ja);var s=i.name+e.hash;t.hasNameForId(i.id,s)||t.insertRules(i.id,s,e(i.rules,s,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,ua(this,(function(){throw ga(12,String(i.name))}))}return t.prototype.getName=function(t){return void 0===t&&(t=ja),this.name+t.hash},t}(),za=function(t){return t>="A"&&t<="Z"};function Va(t){for(var e="",i=0;i<t.length;i++){var s=t[i];if(1===i&&"-"===s&&"-"===t[0])return t;za(s)?e+="-"+s.toLowerCase():e+=s}return e.startsWith("ms-")?"-"+e:e}var $a=function(t){return null==t||!1===t||""===t},Ua=function(t){var e,i,s=[];for(var n in t){var r=t[n];t.hasOwnProperty(n)&&!$a(r)&&(Array.isArray(r)&&r.isCss||aa(r)?s.push("".concat(Va(n),":"),r,";"):ca(r)?s.push.apply(s,wn(wn(["".concat(n," {")],Ua(r),!1),["}"],!1)):s.push("".concat(Va(n),": ").concat((e=n,null==(i=r)||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||e in _r||e.startsWith("--")?String(i).trim():"".concat(i,"px")),";")))}return s};function Ga(t,e,i,s){if($a(t))return[];if(oa(t))return[".".concat(t.styledComponentId)];if(aa(t)){if(!aa(r=t)||r.prototype&&r.prototype.isReactComponent||!e)return[t];var n=t(e);return"production"===yn.env.NODE_ENV||"object"!=typeof n||Array.isArray(n)||n instanceof Wa||ca(n)||null===n||console.error("".concat(Vr(t)," is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.")),Ga(n,e,i,s)}var r;return t instanceof Wa?i?(t.inject(i,s),[t.getName(s)]):[t]:ca(t)?Ua(t):Array.isArray(t)?Array.prototype.concat.apply(Mr,t.map((function(t){return Ga(t,e,i,s)}))):[t.toString()]}var qa=Wr(Er),Ya=function(){function t(t,e,i){this.rules=t,this.staticRulesId="",this.isStatic="production"===yn.env.NODE_ENV&&(void 0===i||i.isStatic)&&function(t){for(var e=0;e<t.length;e+=1){var i=t[e];if(aa(i)&&!oa(i))return!1}return!0}(t),this.componentId=e,this.baseHash=Hr(qa,e),this.baseStyle=i,La.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,i){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))s=la(s,this.staticRulesId);else{var n=ha(Ga(this.rules,t,e,i)),r=jr(Hr(this.baseHash,n)>>>0);if(!e.hasNameForId(this.componentId,r)){var a=i(n,".".concat(r),void 0,this.componentId);e.insertRules(this.componentId,r,a)}s=la(s,r),this.staticRulesId=r}else{for(var o=Hr(this.baseHash,i.hash),l="",h=0;h<this.rules.length;h++){var c=this.rules[h];if("string"==typeof c)l+=c,"production"!==yn.env.NODE_ENV&&(o=Hr(o,c));else if(c){var d=ha(Ga(c,t,e,i));o=Hr(o,d+h),l+=d}}if(l){var u=jr(o>>>0);e.hasNameForId(this.componentId,u)||e.insertRules(this.componentId,u,i(l,".".concat(u),void 0,this.componentId)),s=la(s,u)}}return s},t}(),Xa=n.createContext(void 0);function Ka(t){var e=n.useContext(Xa),i=(0,n.useMemo)((function(){return function(t,e){if(!t)throw ga(14);if(aa(t)){var i=t(e);if("production"!==yn.env.NODE_ENV&&(null===i||Array.isArray(i)||"object"!=typeof i))throw ga(7);return i}if(Array.isArray(t)||"object"!=typeof t)throw ga(8);return e?_n(_n({},e),t):t}(t.theme,e)}),[t.theme,e]);return t.children?n.createElement(Xa.Provider,{value:i},t.children):null}Xa.Consumer;var Qa={},Ja=new Set;function Za(t,e,i){var s,r=oa(t),a=t,o=!$r(t),l=e.attrs,h=void 0===l?Mr:l,c=e.componentId,d=void 0===c?function(t,e){var i="string"!=typeof t?"sc":Ir(t);Qa[i]=(Qa[i]||0)+1;var s="".concat(i,"-").concat(zr(Er+i+Qa[i]));return e?"".concat(e,"-").concat(s):s}(e.displayName,e.parentComponentId):c,u=e.displayName,p=void 0===u?$r(s=t)?"styled.".concat(s):"Styled(".concat(Vr(s),")"):u,f=e.displayName&&e.componentId?"".concat(Ir(e.displayName),"-").concat(e.componentId):e.componentId||d,g=r&&a.attrs?a.attrs.concat(h).filter(Boolean):h,m=e.shouldForwardProp;if(r&&a.shouldForwardProp){var v=a.shouldForwardProp;if(e.shouldForwardProp){var b=e.shouldForwardProp;m=function(t,e){return v(t,e)&&b(t,e)}}else m=v}var y=new Ya(i,f,r?a.componentStyle:void 0);function _(t,e){return function(t,e,i){var s=t.attrs,r=t.componentStyle,a=t.defaultProps,o=t.foldedComponentIds,l=t.styledComponentId,h=t.target,c=n.useContext(Xa),d=Ha(),u=t.shouldForwardProp||d.shouldForwardProp;"production"!==yn.env.NODE_ENV&&(0,n.useDebugValue)(l);var p=function(t,e,i){return void 0===i&&(i=Dr),t.theme!==i.theme&&t.theme||e||i.theme}(e,c,a)||Dr,f=function(t,e,i){for(var s,n=_n(_n({},e),{className:void 0,theme:i}),r=0;r<t.length;r+=1){var a=aa(s=t[r])?s(n):s;for(var o in a)n[o]="className"===o?la(n[o],a[o]):"style"===o?_n(_n({},n[o]),a[o]):a[o]}return e.className&&(n.className=la(n.className,e.className)),n}(s,e,p),g=f.as||h,m={};for(var v in f)void 0===f[v]||"$"===v[0]||"as"===v||"theme"===v&&f.theme===p||("forwardedAs"===v?m.as=f.forwardedAs:u&&!u(v,g)||(m[v]=f[v],u||"development"!==yn.env.NODE_ENV||En(v)||Ja.has(v)||!Rr.has(g)||(Ja.add(v),console.warn('styled-components: it looks like an unknown prop "'.concat(v,'" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via `<StyleSheetManager shouldForwardProp={...}>` (connect an API like `@emotion/is-prop-valid`) or consider using transient props (`$` prefix for automatic filtering.)')))));var b=function(t,e){var i=Ha(),s=t.generateAndInjectStyles(e,i.styleSheet,i.stylis);return"production"!==yn.env.NODE_ENV&&(0,n.useDebugValue)(s),s}(r,f);"production"!==yn.env.NODE_ENV&&t.warnTooManyClasses&&t.warnTooManyClasses(b);var y=la(o,l);return b&&(y+=" "+b),f.className&&(y+=" "+f.className),m[$r(g)&&!Rr.has(g)?"class":"className"]=y,m.ref=i,(0,n.createElement)(g,m)}(w,t,e)}_.displayName=p;var w=n.forwardRef(_);return w.attrs=g,w.componentStyle=y,w.displayName=p,w.shouldForwardProp=m,w.foldedComponentIds=r?la(a.foldedComponentIds,a.styledComponentId):"",w.styledComponentId=f,w.target=r?a.target:t,Object.defineProperty(w,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var s=0,n=e;s<n.length;s++)da(t,n[s],!0);return t}({},a.defaultProps,t):t}}),"production"!==yn.env.NODE_ENV&&(function(t,e){if("production"!==yn.env.NODE_ENV){var i=e?' with the id of "'.concat(e,'"'):"",s="The component ".concat(t).concat(i," has been created dynamically.\n")+"You may see this warning because you've called styled inside another component.\nTo resolve this only create new StyledComponents outside of any render method and function component.",r=console.error;try{var a=!0;console.error=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];Pr.test(t)?(a=!1,Tr.delete(s)):r.apply(void 0,wn([t],e,!1))},(0,n.useRef)(),a&&!Tr.has(s)&&(console.warn(s),Tr.add(s))}catch(l){Pr.test(l.message)&&Tr.delete(s)}finally{console.error=r}}}(p,f),w.warnTooManyClasses=function(t,e){var i={},s=!1;return function(n){if(!s&&(i[n]=!0,Object.keys(i).length>=200)){var r=e?' with the id of "'.concat(e,'"'):"";console.warn("Over ".concat(200," classes were generated for component ").concat(t).concat(r,".\n")+"Consider using the attrs method, together with a style object for frequently changed styles.\nExample:\n  const Component = styled.div.attrs(props => ({\n    style: {\n      background: props.background,\n    },\n  }))`width: 100%;`\n\n  <Component />"),s=!0,i={}}}}(p,f)),ua(w,(function(){return".".concat(w.styledComponentId)})),o&&ra(w,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),w}function to(t,e){for(var i=[t[0]],s=0,n=e.length;s<n;s+=1)i.push(e[s],t[s+1]);return i}var eo=function(t){return Object.assign(t,{isCss:!0})};function io(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(aa(t)||ca(t))return eo(Ga(to(Mr,wn([t],e,!0))));var s=t;return 0===e.length&&1===s.length&&"string"==typeof s[0]?Ga(s):eo(Ga(to(s,e)))}function so(t,e,i){if(void 0===i&&(i=Dr),!e)throw ga(1,e);var s=function(s){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t(e,i,io.apply(void 0,wn([s],n,!1)))};return s.attrs=function(s){return so(t,e,_n(_n({},i),{attrs:Array.prototype.concat(i.attrs,s).filter(Boolean)}))},s.withConfig=function(s){return so(t,e,_n(_n({},i),s))},s}var no=function(t){return so(Za,t)},ro=no;Rr.forEach((function(t){ro[t]=no(t)})),"production"!==yn.env.NODE_ENV&&typeof navigator<"u"&&"ReactNative"===navigator.product&&console.warn("It looks like you've imported 'styled-components' on React Native.\nPerhaps you're looking to import 'styled-components/native'?\nRead more about this at https://www.styled-components.com/docs/basics#react-native");var ao="__sc-".concat(wr,"__");"production"!==yn.env.NODE_ENV&&"test"!==yn.env.NODE_ENV&&typeof window<"u"&&(window[ao]||(window[ao]=0),1===window[ao]&&console.warn("It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.\n\nSee https://s-c.sh/2BAXzed for more info."),window[ao]+=1);const oo={en:{documentNavInfo:"Document {{ currentFileNo }} of {{ allFilesCount }}",noRendererMessage:"No renderer for file type: {{{ fileType }}}",downloadButtonLabel:"Download file",brokenFile:"Your file is broken. Please check it on your machine.",msgPluginRecipients:"Recipients",msgPluginSender:"Sender",pdfPluginLoading:"Loading...",pdfPluginPageNumber:"Page {{ currentPage }}/{{ allPagesCount }}"},pl:{documentNavInfo:"Dokument {{ currentFileNo }} z {{ allFilesCount }}",noRendererMessage:"Brak funckji renderuj\u0105cej dla: {{{ fileType }}}",downloadButtonLabel:"Pobierz plik",brokenFile:"Tw\xf3j plik jest uszkodzony. Sprawd\u017a go na swoim komputerze.",msgPluginRecipients:"Odbiorcy",msgPluginSender:"Nadawca",pdfPluginLoading:"Wczytywanie...",pdfPluginPageNumber:"Strona {{ currentPage }}/{{ allPagesCount }}"},es:{documentNavInfo:"Documento {{ currentFileNo }} de {{ allFilesCount }}",noRendererMessage:"No hay procesador para el tipo de archivo: {{{ fileType }}}",downloadButtonLabel:"Descargar archivo",brokenFile:"Tu archivo est\xe1 roto. Compru\xe9balo en tu m\xe1quina.",msgPluginRecipients:"Destinatarios",msgPluginSender:"Remitente",pdfPluginLoading:"Cargando...",pdfPluginPageNumber:"P\xe1gina {{ currentPage }}/{{ allPagesCount }}"},de:{documentNavInfo:"Dokument {{ currentFileNo }} von {{ allFilesCount }}",noRendererMessage:"Kein Renderer f\xfcr Dateityp: {{{ fileType }}}",downloadButtonLabel:"Datei herunterladen",brokenFile:"Ihre Datei ist defekt. Bitte \xfcberpr\xfcfen Sie sie auf Ihrem Rechner.",msgPluginRecipients:"Empf\xe4nger",msgPluginSender:"Absender",pdfPluginLoading:"Wird geladen...",pdfPluginPageNumber:"Seite {{ currentPage }}/{{ allPagesCount }}"},it:{documentNavInfo:"Documento {{ currentFileNo }} di {{ allFilesCount }}",noRendererMessage:"Nessun renderer per il tipo di file: {{{ fileType }}}",downloadButtonLabel:"Scarica file",brokenFile:"Il tuo file \xe8 danneggiato. Controllalo sul tuo computer.",msgPluginRecipients:"Destinatari",msgPluginSender:"Mittente",pdfPluginLoading:"Caricamento in corso...",pdfPluginPageNumber:"Pagina {{ currentPage }}/{{ allPagesCount }}"},pt:{documentNavInfo:"Documento {{ currentFileNo }} de {{ allFilesCount }}",noRendererMessage:"Nenhum renderizador para o tipo de arquivo: {{{ fileType }}}",downloadButtonLabel:"Baixar arquivo",brokenFile:"Seu arquivo est\xe1 quebrado. Por favor, verifique-o em sua m\xe1quina.",msgPluginRecipients:"Destinat\xe1rios",msgPluginSender:"Remetente",pdfPluginLoading:"Carregando...",pdfPluginPageNumber:"P\xe1gina {{ currentPage }}/{{ allPagesCount }}"},fr:{documentNavInfo:"Document {{ currentFileNo }} de {{ allFilesCount }}",noRendererMessage:"Aucun moteur de rendu pour le type de fichier : {{{ fileType }}}",downloadButtonLabel:"T\xe9l\xe9charger le fichier",brokenFile:"Votre fichier est cass\xe9. Veuillez le v\xe9rifier sur votre machine.",msgPluginRecipients:"Destinataires",msgPluginSender:"Exp\xe9diteur",pdfPluginLoading:"Chargement...",pdfPluginPageNumber:"Page {{ currentPage }}/{{ allPagesCount }}"},ar:{documentNavInfo:"\u0645\u0633\u062a\u0646\u062f {{ currentFileNo }} \u0645\u0646 {{ allFilesCount }}",noRendererMessage:"{{{ fileType }}} : \u0644\u0627 \u064a\u0645\u0643\u0646\u0646\u0627 \u0639\u0631\u0636 \u0647\u0630\u0627 \u0627\u0644\u0646\u0648\u0639 \u0645\u0646 \u0627\u0644\u0645\u0644\u0641\u0627\u062a",downloadButtonLabel:"\u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0644\u0641",brokenFile:"\u0627\u0644\u0645\u0644\u0641 \u062a\u0627\u0644\u0641\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646\u0647 \u0639\u0644\u0649 \u062c\u0647\u0627\u0632\u0643 \u0627\u0644\u062e\u0627\u0635.",msgPluginRecipients:"\u0627\u0644\u0645\u0633\u062a\u0644\u0645\u064a\u0646",msgPluginSender:"\u0627\u0644\u0645\u0631\u0633\u0644",pdfPluginLoading:"\u062a\u062d\u0645\u064a\u0644 ...",pdfPluginPageNumber:" {{ allPagesCount }} \\ {{ currentPage }} \u0635\u0641\u062d\u0629 "},sr:{documentNavInfo:"Dokument {{ currentFileNo }} od {{ allFilesCount }}",noRendererMessage:"Ne postoji pregleda\u010d za tip fajla: {{ fileType }}",downloadButtonLabel:"Preuzimanje fajla",brokenFile:"Va\u0161 fajl nije dobar. Molimo Vas da probate da ga otvorite na va\u0161em ra\u010dunaru.",msgPluginRecipients:"Primaoci",msgPluginSender:"Po\u0161iljalac",pdfPluginLoading:"U\u010ditavanje...",pdfPluginPageNumber:"Strana {{ currentPage }}/{{ allPagesCount }}"},sr_cyr:{documentNavInfo:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 {{ currentFileNo }} od {{ allFilesCount }}",noRendererMessage:"\u041d\u0435 \u043f\u043e\u0441\u0442\u043e\u0458\u0438 \u043f\u0440\u0435\u0433\u043b\u0435\u0434\u0430\u0447 \u0437\u0430 \u0442\u0438\u043f \u0444\u0430\u0458\u043b\u0430: {{ fileType }}",downloadButtonLabel:"\u041f\u0440\u0435\u0443\u0437\u0438\u043c\u0430\u045a\u0435 \u0444\u0430\u0458\u043b\u0430",brokenFile:"\u0412\u0430\u0448 \u0444\u0430\u0458\u043b \u043d\u0438\u0458\u0435 \u0434\u043e\u0431\u0430\u0440. \u041c\u043e\u043b\u0438\u043c\u043e \u0412\u0430\u0441 \u0434\u0430 \u043f\u0440\u043e\u0431\u0430\u0442\u0435 \u0434\u0430 \u0433\u0430 \u043e\u0442\u0432\u043e\u0440\u0438\u0442\u0435 \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0440\u0430\u0447\u0443\u043d\u0430\u0440\u0443.",msgPluginRecipients:"\u041f\u0440\u0438\u043c\u0430\u043e\u0446\u0438",msgPluginSender:"\u041f\u043e\u0448\u0438\u0459\u0430\u043b\u0430\u0446",pdfPluginLoading:"\u0423\u0447\u0438\u0442\u0430\u0432\u0430\u045a\u0435...",pdfPluginPageNumber:"\u0421\u0442\u0440\u0430\u043d\u0430 {{ currentPage }}/{{ allPagesCount }}"},ja:{documentNavInfo:"\u30d5\u30a1\u30a4\u30eb {{ currentFileNo }} / {{ allFilesCount }}",noRendererMessage:"\u30d5\u30a1\u30a4\u30eb\u30bf\u30a4\u30d7\u306b\u5bfe\u5fdc\u3057\u305f\u30ec\u30f3\u30c0\u30e9\u30fc\u306f\u3042\u308a\u307e\u305b\u3093: {{ fileType }}",downloadButtonLabel:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",brokenFile:"\u30d5\u30a1\u30a4\u30eb\u304c\u58ca\u308c\u3066\u3044\u307e\u3059\u3002\u3042\u306a\u305f\u306e\u30de\u30b7\u30f3\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002",msgPluginRecipients:"\u53d7\u4fe1\u8005",msgPluginSender:"\u9001\u4fe1\u8005",pdfPluginLoading:"\u30ed\u30fc\u30c6\u30a3\u30f3\u30b0\u4e2d...",pdfPluginPageNumber:"\u30da\u30fc\u30b8 {{ currentPage }}/{{ allPagesCount }}"},ru:{documentNavInfo:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442 {{ currentFileNo }} \u0438\u0437 {{ allFilesCount }}",noRendererMessage:"\u0414\u0430\u043d\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0440\u0435\u043d\u0434\u0435\u0440\u043e\u043c: {{{ fileType }}}",downloadButtonLabel:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0444\u0430\u0439\u043b",brokenFile:"\u0412\u0430\u0448 \u0444\u0430\u0439\u043b \u0441\u043b\u043e\u043c\u0430\u043d. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0435\u0433\u043e \u043d\u0430 \u0441\u0432\u043e\u0451\u043c \u043a\u043e\u043c\u044c\u044e\u0442\u0435\u0440\u0435.",msgPluginRecipients:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0438",msgPluginSender:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c",pdfPluginLoading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",pdfPluginPageNumber:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 {{ currentPage }}/{{ allPagesCount }}"},se:{documentNavInfo:"Dokument {{ currentFileNo }} av {{ allFilesCount }}",noRendererMessage:"Ingen renderare f\xf6r filtypen: {{{ fileType }}}",downloadButtonLabel:"Ladda ner",brokenFile:"Filen \xe4r trasig. Var v\xe4nlig kontrollera den p\xe5 din maskin.",msgPluginRecipients:"Mottagare",msgPluginSender:"Avs\xe4ndare",pdfPluginLoading:"Laddar...",pdfPluginPageNumber:"Sida {{ currentPage }}/{{ allPagesCount }}"}},lo=(Object.keys(oo),"en"),ho="SET_ALL_DOCUMENTS",co="SET_DOCUMENT_LOADING",uo="NEXT_DOCUMENT",po="PREVIOUS_DOCUMENT",fo="UPDATE_CURRENT_DOCUMENT",go="SET_RENDERER_RECT",mo="SET_MAIN_CONFIG",vo=t=>({type:co,value:t}),bo=()=>({type:uo}),yo=()=>({type:po}),_o=t=>({type:fo,document:t}),wo={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[],language:lo},xo=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wo,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ho:{const{documents:i,initialActiveDocument:s}=e;return{...t,documents:i,currentDocument:s||i[0]||null,currentFileNo:s&&i.includes(s)?i.indexOf(s):wo.currentFileNo}}case co:{const{value:i}=e;return{...t,documentLoading:i}}case uo:{if(t.currentFileNo>=t.documents.length-1)return t;const e=t.currentFileNo+1;return t.onDocumentChange&&t.onDocumentChange(t.documents[e]),{...t,currentFileNo:e,currentDocument:t.documents[e],documentLoading:!0}}case po:{if(t.currentFileNo<=0)return t;const e=t.currentFileNo-1;return t.onDocumentChange&&t.onDocumentChange(t.documents[e]),{...t,currentFileNo:t.currentFileNo-1,currentDocument:t.documents[e],documentLoading:!0}}case fo:{const{document:i}=e;return{...t,currentDocument:i,currentFileNo:t.documents.findIndex((t=>t.uri===i.uri))}}case go:{const{rect:i}=e;return{...t,rendererRect:i}}case mo:{const{config:i}=e;return{...t,config:i}}default:return t}},Ao=(0,n.createContext)({state:wo,dispatch:()=>null}),Eo=(0,n.forwardRef)(((t,e)=>{const{children:i,documents:r,config:a,pluginRenderers:o,prefetchMethod:l,requestHeaders:h,initialActiveDocument:c,language:d,activeDocument:u,onDocumentChange:p}=t,[f,g]=(0,n.useReducer)(xo,{...wo,documents:r||[],currentDocument:r&&r.length?c||r[0]:void 0,config:a,pluginRenderers:o,prefetchMethod:l,requestHeaders:h,currentFileNo:c?r.findIndex((t=>t===c))??0:0,language:d&&oo[d]?d:lo,activeDocument:u,onDocumentChange:p});return(0,n.useEffect)((()=>{g(((t,e)=>({type:ho,documents:t,initialActiveDocument:e}))(r,c)),a&&g((t=>({type:mo,config:t}))(a))}),[r,a,c]),(0,n.useEffect)((()=>{u&&g(_o(u))}),[u]),(0,n.useImperativeHandle)(e,(()=>({prev(){g(yo())},next(){g(bo())}})),[g]),(0,s.jsx)(Ao.Provider,{value:{state:f,dispatch:g},children:i})})),ko=io`
  background-color: ${t=>t.theme.primary};
  color: ${t=>t.theme.textPrimary};
`,So=io`
  background-color: ${t=>t.theme.secondary};
  color: ${t=>t.theme.textSecondary};
`,Co=ro.button`
  ${ko}
  display: flex;
  justify-content: center;
  align-items: center;
  width: 35px;
  height: 35px;
  padding: 0;
  margin: 0 0 0 5px;
  text-align: center;
  font-size: 18px;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  opacity: ${t=>t.disabled?.4:1};
  pointer-events: ${t=>t.disabled?"none":"all"};
  box-shadow: 2px 2px 3px #00000033;

  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`,Po=ro.a`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  background-color: ${t=>t.theme.primary};
  color: ${t=>t.theme.textPrimary};
  box-shadow: 2px 2px 3px #00000033;

  width: 35px;
  height: 35px;
  font-size: 18px;
  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`;ro(Co)``;const To=ro(Co)`
  ${So}
`,Mo=t=>(0,s.jsx)(Ro,{...t}),Do=t=>(0,s.jsx)(Ro,{...t,reverse:!0}),Ro=t=>{let{color:e,size:i,reverse:n}=t;return(0,s.jsx)("svg",{width:i||"100%",height:i||"100%",style:{transform:""+(n?"rotate(180deg)":"")},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve",children:(0,s.jsx)("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:e||"#aaa",fillRule:"evenodd",id:"Arrow_Back"})})},Lo=t=>{const{color:e,size:i}=t;return(0,s.jsx)("svg",{width:i||"100%",height:i||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"},children:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fill:e||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),(0,s.jsx)("path",{fill:e||"#aaa",d:"M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1\n\t\tz"}),(0,s.jsx)("path",{fill:e||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),(0,s.jsx)("path",{fill:e||"#aaa",d:"M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4\n\t\tS10,20.6,9.6,20.9z"}),(0,s.jsx)("path",{fill:e||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),(0,s.jsx)("path",{fill:e||"#aaa",d:"M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4\n\t\tL22.4,20.9z"}),(0,s.jsx)("path",{fill:e||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),(0,s.jsx)("path",{fill:e||"#aaa",d:"M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4\n\t\tC21.1,11.2,21.4,11.3,21.7,11.3z"})]})})};var Oo=Object.prototype.toString,Io=Array.isArray||function(t){return"[object Array]"===Oo.call(t)};function Fo(t){return"function"==typeof t}function No(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function jo(t,e){return null!=t&&"object"==typeof t&&e in t}function Bo(t,e){return null!=t&&"object"!=typeof t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var Ho=RegExp.prototype.test;var Wo=/\S/;function zo(t){return!function(t,e){return Ho.call(t,e)}(Wo,t)}var Vo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var $o=/\s*/,Uo=/\s+/,Go=/\s*=/,qo=/\s*\}/,Yo=/#|\^|\/|>|\{|&|=|!/;function Xo(t){this.string=t,this.tail=t,this.pos=0}function Ko(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function Qo(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}Xo.prototype.eos=function(){return""===this.tail},Xo.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},Xo.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},Ko.prototype.push=function(t){return new Ko(t,this)},Ko.prototype.lookup=function(t){var e,i=this.cache;if(i.hasOwnProperty(t))e=i[t];else{for(var s,n,r,a=this,o=!1;a;){if(t.indexOf(".")>0)for(s=a.view,n=t.split("."),r=0;null!=s&&r<n.length;)r===n.length-1&&(o=jo(s,n[r])||Bo(s,n[r])),s=s[n[r++]];else s=a.view[t],o=jo(a.view,t);if(o){e=s;break}a=a.parent}i[t]=e}return Fo(e)&&(e=e.call(this.view)),e},Qo.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},Qo.prototype.parse=function(t,e){var i=this.templateCache,s=t+":"+(e||Jo.tags).join(":"),n=typeof i<"u",r=n?i.get(s):void 0;return null==r&&(r=function(t,e){if(!t)return[];var i,s,n,r=!1,a=[],o=[],l=[],h=!1,c=!1,d="",u=0;function p(){if(h&&!c)for(;l.length;)delete o[l.pop()];else l=[];h=!1,c=!1}function f(t){if("string"==typeof t&&(t=t.split(Uo,2)),!Io(t)||2!==t.length)throw new Error("Invalid tags: "+t);i=new RegExp(No(t[0])+"\\s*"),s=new RegExp("\\s*"+No(t[1])),n=new RegExp("\\s*"+No("}"+t[1]))}f(e||Jo.tags);for(var g,m,v,b,y,_,w=new Xo(t);!w.eos();){if(g=w.pos,v=w.scanUntil(i))for(var x=0,A=v.length;x<A;++x)zo(b=v.charAt(x))?(l.push(o.length),d+=b):(c=!0,r=!0,d+=" "),o.push(["text",b,g,g+1]),g+=1,"\n"===b&&(p(),d="",u=0,r=!1);if(!w.scan(i))break;if(h=!0,m=w.scan(Yo)||"name",w.scan($o),"="===m?(v=w.scanUntil(Go),w.scan(Go),w.scanUntil(s)):"{"===m?(v=w.scanUntil(n),w.scan(qo),w.scanUntil(s),m="&"):v=w.scanUntil(s),!w.scan(s))throw new Error("Unclosed tag at "+w.pos);if(y=">"==m?[m,v,g,w.pos,d,u,r]:[m,v,g,w.pos],u++,o.push(y),"#"===m||"^"===m)a.push(y);else if("/"===m){if(!(_=a.pop()))throw new Error('Unopened section "'+v+'" at '+g);if(_[1]!==v)throw new Error('Unclosed section "'+_[1]+'" at '+g)}else"name"===m||"{"===m||"&"===m?c=!0:"="===m&&f(v)}if(p(),_=a.pop())throw new Error('Unclosed section "'+_[1]+'" at '+w.pos);return function(t){for(var e,i=[],s=i,n=[],r=0,a=t.length;r<a;++r)switch(e=t[r],e[0]){case"#":case"^":s.push(e),n.push(e),s=e[4]=[];break;case"/":n.pop()[5]=e[2],s=n.length>0?n[n.length-1][4]:i;break;default:s.push(e)}return i}(function(t){for(var e,i,s=[],n=0,r=t.length;n<r;++n)(e=t[n])&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(s.push(e),i=e));return s}(o))}(t,e),n&&i.set(s,r)),r},Qo.prototype.render=function(t,e,i,s){var n=this.getConfigTags(s),r=this.parse(t,n),a=e instanceof Ko?e:new Ko(e,void 0);return this.renderTokens(r,a,i,t,s)},Qo.prototype.renderTokens=function(t,e,i,s,n){for(var r,a,o,l="",h=0,c=t.length;h<c;++h)o=void 0,"#"===(a=(r=t[h])[0])?o=this.renderSection(r,e,i,s,n):"^"===a?o=this.renderInverted(r,e,i,s,n):">"===a?o=this.renderPartial(r,e,i,n):"&"===a?o=this.unescapedValue(r,e):"name"===a?o=this.escapedValue(r,e,n):"text"===a&&(o=this.rawValue(r)),void 0!==o&&(l+=o);return l},Qo.prototype.renderSection=function(t,e,i,s,n){var r=this,a="",o=e.lookup(t[1]);if(o){if(Io(o))for(var l=0,h=o.length;l<h;++l)a+=this.renderTokens(t[4],e.push(o[l]),i,s,n);else if("object"==typeof o||"string"==typeof o||"number"==typeof o)a+=this.renderTokens(t[4],e.push(o),i,s,n);else if(Fo(o)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");null!=(o=o.call(e.view,s.slice(t[3],t[5]),(function(t){return r.render(t,e,i,n)})))&&(a+=o)}else a+=this.renderTokens(t[4],e,i,s,n);return a}},Qo.prototype.renderInverted=function(t,e,i,s,n){var r=e.lookup(t[1]);if(!r||Io(r)&&0===r.length)return this.renderTokens(t[4],e,i,s,n)},Qo.prototype.indentPartial=function(t,e,i){for(var s=e.replace(/[^ \t]/g,""),n=t.split("\n"),r=0;r<n.length;r++)n[r].length&&(r>0||!i)&&(n[r]=s+n[r]);return n.join("\n")},Qo.prototype.renderPartial=function(t,e,i,s){if(i){var n=this.getConfigTags(s),r=Fo(i)?i(t[1]):i[t[1]];if(null!=r){var a=t[6],o=t[5],l=t[4],h=r;0==o&&l&&(h=this.indentPartial(r,l,a));var c=this.parse(h,n);return this.renderTokens(c,e,i,h,s)}}},Qo.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);if(null!=i)return i},Qo.prototype.escapedValue=function(t,e,i){var s=this.getConfigEscape(i)||Jo.escape,n=e.lookup(t[1]);if(null!=n)return"number"==typeof n&&s===Jo.escape?String(n):s(n)},Qo.prototype.rawValue=function(t){return t[1]},Qo.prototype.getConfigTags=function(t){return Io(t)?t:t&&"object"==typeof t?t.tags:void 0},Qo.prototype.getConfigEscape=function(t){if(t&&"object"==typeof t&&!Io(t))return t.escape};var Jo={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){Zo.templateCache=t},get templateCache(){return Zo.templateCache}},Zo=new Qo;Jo.clearCache=function(){return Zo.clearCache()},Jo.parse=function(t,e){return Zo.parse(t,e)},Jo.render=function(t,e,i,s){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+((Io(n=t)?"array":typeof n)+'" was given as the first argument for mustache#render(template, view, partials)'));var n;return Zo.render(t,e,i,s)},Jo.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return Vo[t]}))},Jo.Scanner=Xo,Jo.Context=Ko,Jo.Writer=Qo;const tl=()=>{const{state:{language:t}}=(0,n.useContext)(Ao),e=oo[lo];return{t:(0,n.useCallback)(((i,s)=>{const n=oo[t];return n[i]?Jo.render(n[i],s):e[i]?Jo.render(e[i],s):i}),[t,e])}},el=()=>{const{state:{currentDocument:t,currentFileNo:e,documents:i},dispatch:r}=(0,n.useContext)(Ao),{t:a}=tl();if(i.length<=1||!t)return null;let o=t.uri||"";const l=null==o?void 0:o.split("/");return l.length&&(o=l[l.length-1]),(0,s.jsxs)(il,{id:"doc-nav",children:[(0,s.jsx)("p",{id:"doc-nav-info",children:a("documentNavInfo",{currentFileNo:e+1,allFilesCount:i.length})}),(0,s.jsx)(sl,{id:"doc-nav-prev",onClick:()=>r(yo()),disabled:0===e,children:(0,s.jsx)(Mo,{color:"#fff",size:"60%"})}),(0,s.jsx)(nl,{id:"doc-nav-next",onClick:()=>r(bo()),disabled:e>=i.length-1,children:(0,s.jsx)(Do,{color:"#fff",size:"60%"})})]})},il=ro.div`
  min-width: 150px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  margin: 0 10px;
  color: ${t=>t.theme.textPrimary};
`,sl=ro(To)`
  width: 30px;
  height: 30px;
  margin: 0 5px 0 10px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,nl=ro(sl)`
  margin: 0 5px;
`,rl=(t,e)=>{var i;if(!t)return"";let s="";if(t.fileName)s=t.fileName;else{s=t.uri||"",s=decodeURI(s),e||(s=null==(i=null==s?void 0:s.split("?"))?void 0:i[0]);const n=null==s?void 0:s.split("/");n.length&&(s=n[n.length-1])}return s},al=()=>{var t,e;const{state:{config:i,currentDocument:r}}=(0,n.useContext)(Ao);if(!r||null!=(t=null==i?void 0:i.header)&&t.disableFileName)return null;const a=rl(r,(null==(e=null==i?void 0:i.header)?void 0:e.retainURLParams)||!1);return(0,s.jsx)(ol,{id:"file-name","data-testid":"file-name",children:a})},ol=ro.div`
  flex: 1;
  text-align: left;
  color: ${t=>t.theme.textPrimary};
  font-weight: bold;
  margin: 0 10px;
  overflow: hidden;
`,ll=()=>{var t,e,i;const{state:r,dispatch:a}=(0,n.useContext)(Ao),{config:o}=r;if(null!=(t=null==o?void 0:o.header)&&t.disableHeader)return null;return(null==(i=null==(e=null==o?void 0:o.header)?void 0:e.overrideComponent)?void 0:i.call(e,r,(()=>a(yo())),(()=>a(bo()))))||(0,s.jsxs)(hl,{id:"header-bar","data-testid":"header-bar",children:[(0,s.jsx)(al,{}),(0,s.jsx)(el,{})]})},hl=ro.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1;
  padding: 0 10px;
  background-color: ${t=>t.theme.primary};
  font-size: 16px;
  min-height: 50px;

  @media (max-width: 768px) {
    min-height: 30px;
    padding: 5px;
    font-size: 10px;
  }
`,cl=t=>{let{documentURI:e,signal:i,fileLoaderComplete:s,readerTypeFunction:n,headers:r}=t;return fetch(e,{signal:i,headers:r}).then((async t=>{const e=await t.blob(),i=new FileReader;switch(i.addEventListener("loadend",(()=>s(i))),n){case"arrayBuffer":i.readAsArrayBuffer(e);break;case"binaryString":i.readAsBinaryString(e);break;case"dataURL":i.readAsDataURL(e);break;case"text":i.readAsText(e)}})).catch((t=>t))},dl=t=>cl({...t,readerTypeFunction:"dataURL"}),ul=t=>cl({...t,readerTypeFunction:"text"}),pl=dl,fl=()=>{const{state:t,dispatch:e}=(0,n.useContext)(Ao),{currentFileNo:i,currentDocument:s,prefetchMethod:r}=t,{CurrentRenderer:a}=(()=>{const{state:{currentDocument:t,pluginRenderers:e}}=(0,n.useContext)(Ao),[i,s]=(0,n.useState)();return(0,n.useEffect)((()=>{if(!t)return;if(!t.fileType)return void s(void 0);const i=[];null==e||e.forEach((e=>{void 0!==t.fileType&&e.fileTypes.indexOf(t.fileType)>=0&&i.push(e)}));const[n]=i.sort(((t,e)=>e.weight-t.weight));s(n&&void 0!==n?()=>n:null)}),[t,e]),{CurrentRenderer:i}})(),o=(null==s?void 0:s.uri)||"";return(0,n.useEffect)((()=>{if(!s||void 0!==s.fileType)return;const i=new AbortController,{signal:n}=i;return fetch(o,{method:r||o.startsWith("blob:")?"GET":"HEAD",signal:n,headers:null==t?void 0:t.requestHeaders}).then((t=>{const i=t.headers.get("content-type"),n=(null==i?void 0:i.split(";"))||[],r=n.length?n[0]:void 0;e(_o({...s,fileType:r||void 0}))})).catch((t=>{if("AbortError"!==(null==t?void 0:t.name))throw t})),()=>{i.abort()}}),[i,o,s]),(0,n.useEffect)((()=>{var i;if(!s||void 0===a)return;const n=new AbortController,{signal:r}=n,l={documentURI:o,signal:r,fileLoaderComplete:t=>{if(!s||!t)return void e(vo(!1));const i={...s};null!==t.result&&(i.fileData=t.result),e(_o(i)),e(vo(!1))},headers:null==t?void 0:t.requestHeaders};return null===a?e(vo(!1)):void 0!==a.fileLoader?null==(i=a.fileLoader)||i.call(a,l):pl(l),()=>{n.abort()}}),[a,i]),{state:t,dispatch:e,CurrentRenderer:a}},gl=t=>{let{children:e}=t;var i,r;const{state:a}=(0,n.useContext)(Ao),{config:o}=a,[l,h]=(0,n.useState)(!1===(null==(i=null==o?void 0:o.loadingRenderer)?void 0:i.showLoadingTimeout));return(0,n.useEffect)((()=>{var t;setTimeout((()=>{h(!0)}),"number"==typeof(null==(t=null==o?void 0:o.loadingRenderer)?void 0:t.showLoadingTimeout)?o.loadingRenderer.showLoadingTimeout:500)}),[null==(r=null==o?void 0:o.loadingRenderer)?void 0:r.showLoadingTimeout]),l?(0,s.jsx)(s.Fragment,{children:e}):null},ml=t=>{let{documents:e,documentLoading:i,config:n,currentDocument:r,fileName:a,CurrentRenderer:o,state:l,t:h}=t;var c,d;if(e.length){if(i){if(n&&null!=(c=null==n?void 0:n.loadingRenderer)&&c.overrideComponent){const t=n.loadingRenderer.overrideComponent;return(0,s.jsx)(gl,{children:(0,s.jsx)(t,{document:r,fileName:a})})}return(0,s.jsx)(gl,{children:(0,s.jsx)(bl,{id:"loading-renderer","data-testid":"loading-renderer",children:(0,s.jsx)(_l,{children:(0,s.jsx)(Lo,{color:"#444",size:40})})})})}if(o)return(0,s.jsx)(o,{mainState:l});if(void 0===o)return null;if(n&&null!=(d=null==n?void 0:n.noRenderer)&&d.overrideComponent){const t=n.noRenderer.overrideComponent;return(0,s.jsx)(t,{document:r,fileName:a})}return(0,s.jsxs)("div",{id:"no-renderer","data-testid":"no-renderer",children:[h("noRendererMessage",{fileType:(null==r?void 0:r.fileType)??""}),(0,s.jsx)(wl,{id:"no-renderer-download",href:null==r?void 0:r.uri,download:null==r?void 0:r.uri,children:h("downloadButtonLabel")})]})}return(0,s.jsx)("div",{id:"no-documents"})},vl=()=>{var t;const{state:e,dispatch:i,CurrentRenderer:r}=fl(),{documents:a,documentLoading:o,currentDocument:l,config:h}=e,c=(()=>{const[t,e]=(0,n.useState)({width:void 0,height:void 0});return(0,n.useEffect)((()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)}),[]),t})(),{t:d}=tl(),u=(0,n.useCallback)((t=>{t&&i((t=>({type:go,rect:t}))(null==t?void 0:t.getBoundingClientRect()))}),[c,i]),p=rl(l,(null==(t=null==h?void 0:h.header)?void 0:t.retainURLParams)||!1);return(0,s.jsx)("div",{id:"proxy-renderer","data-testid":"proxy-renderer",ref:u,children:(0,s.jsx)(ml,{state:e,documents:a,documentLoading:o,config:h,currentDocument:l,fileName:p,CurrentRenderer:r,t:d})})},bl=ro.div`
  display: flex;
  flex: 1;
  height: 75px;
  align-items: center;
  justify-content: center;
`,yl=(function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];"production"!==yn.env.NODE_ENV&&typeof navigator<"u"&&"ReactNative"===navigator.product&&console.warn("`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.");var s=ha(io.apply(void 0,wn([t],e,!1))),n=zr(s);return new Wa(n,s)})`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,_l=ro.div`
  animation-name: ${yl};
  animation-duration: 4s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
`,wl=ro(Po)`
  width: 130px;
  height: 30px;
  background-color: ${t=>t.theme.primary};
  @media (max-width: 768px) {
    width: 125px;
    height: 25px;
  }
`,xl={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",textPrimary:"#000",textSecondary:"#fff",textTertiary:"#00000044",disableThemeScrollbar:!1},Al=t=>{const{mainState:{currentDocument:e},children:i}=t;return e?(0,s.jsx)(El,{id:"image-renderer",...t,children:i||(0,s.jsx)(kl,{id:"image-img",src:e.fileData})}):null};Al.fileTypes=[],Al.weight=0;const El=ro.div`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #fff;
`,kl=ro.img`
  max-width: 95%;
  max-height: 95%;
`,Sl=t=>(0,s.jsx)(Al,{...t});Sl.fileTypes=["bmp","image/bmp"],Sl.weight=0;const Cl=t=>{let{mainState:{currentDocument:e}}=t;return(0,n.useEffect)((()=>{const t=null==e?void 0:e.fileData;let i="";const s=(null==t?void 0:t.replace(/^data:text\/html;(?:charset=([^;]*);)?base64,/,((t,e)=>(i=e,""))))||"";let n=window.atob(s);if(i){const t=new Uint8Array(n.length);for(let e=0;e<n.length;e++)t[e]=n.charCodeAt(e);n=new TextDecoder(i).decode(t)}const r=document.getElementById("html-body"),a=(null==r?void 0:r.contentWindow)&&r.contentWindow;if(!a)return;const o=a.document;o.open(),o.write(`${n}`),o.close()}),[e]),(0,s.jsx)(Pl,{id:"html-renderer",children:(0,s.jsx)(Tl,{id:"html-body",sandbox:"allow-same-origin"})})};Cl.fileTypes=["htm","html","text/htm","text/html"],Cl.weight=0,Cl.fileLoader=dl;const Pl=ro.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`,Tl=ro.iframe`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid ${t=>t.theme.secondary};
`,Ml=t=>(0,s.jsx)(Al,{...t});Ml.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"],Ml.weight=0;const Dl=t=>{let{mainState:{currentDocument:e}}=t;return e?(0,s.jsx)(Ll,{id:"msdoc-renderer",children:(0,s.jsx)(Ol,{id:"msdoc-iframe",title:"msdoc-iframe",src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.uri)}`,frameBorder:"0"})}):null},Rl={odt:["odt","application/vnd.oasis.opendocument.text"],doc:["doc","application/msword"],docx:["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/octet-stream"],xls:["xls","application/vnd.ms-excel"],xlsx:["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["ppt","application/vnd.ms-powerpoint"],pptx:["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"]};Dl.fileTypes=[...Rl.odt,...Rl.doc,...Rl.docx,...Rl.xls,...Rl.xlsx,...Rl.ppt,...Rl.pptx],Dl.weight=0,Dl.fileLoader=t=>{let{fileLoaderComplete:e}=t;return e()};const Ll=ro.div`
  width: 100%;
`,Ol=ro.iframe`
  width: 100%;
  height: 100%;
  border: 0;
`;for(var Il={},Fl={byteLength:function(t){var e=zl(t),i=e[0],s=e[1];return 3*(i+s)/4-s},toByteArray:function(t){var e,i,s=zl(t),n=s[0],r=s[1],a=new Bl(function(t,e,i){return 3*(e+i)/4-i}(0,n,r)),o=0,l=r>0?n-4:n;for(i=0;i<l;i+=4)e=jl[t.charCodeAt(i)]<<18|jl[t.charCodeAt(i+1)]<<12|jl[t.charCodeAt(i+2)]<<6|jl[t.charCodeAt(i+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=255&e;return 2===r&&(e=jl[t.charCodeAt(i)]<<2|jl[t.charCodeAt(i+1)]>>4,a[o++]=255&e),1===r&&(e=jl[t.charCodeAt(i)]<<10|jl[t.charCodeAt(i+1)]<<4|jl[t.charCodeAt(i+2)]>>2,a[o++]=e>>8&255,a[o++]=255&e),a},fromByteArray:function(t){for(var e,i=t.length,s=i%3,n=[],r=16383,a=0,o=i-s;a<o;a+=r)n.push($l(t,a,a+r>o?o:a+r));return 1===s?(e=t[i-1],n.push(Nl[e>>2]+Nl[e<<4&63]+"==")):2===s&&(e=(t[i-2]<<8)+t[i-1],n.push(Nl[e>>10]+Nl[e>>4&63]+Nl[e<<2&63]+"=")),n.join("")}},Nl=[],jl=[],Bl=typeof Uint8Array<"u"?Uint8Array:Array,Hl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wl=0;Wl<64;++Wl)Nl[Wl]=Hl[Wl],jl[Hl.charCodeAt(Wl)]=Wl;function zl(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function Vl(t){return Nl[t>>18&63]+Nl[t>>12&63]+Nl[t>>6&63]+Nl[63&t]}function $l(t,e,i){for(var s,n=[],r=e;r<i;r+=3)s=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),n.push(Vl(s));return n.join("")}jl[45]=62,jl[95]=63;var Ul={read:function(t,e,i,s,n){var r,a,o=8*n-s-1,l=(1<<o)-1,h=l>>1,c=-7,d=i?n-1:0,u=i?-1:1,p=t[e+d];for(d+=u,r=p&(1<<-c)-1,p>>=-c,c+=o;c>0;r=256*r+t[e+d],d+=u,c-=8);for(a=r&(1<<-c)-1,r>>=-c,c+=s;c>0;a=256*a+t[e+d],d+=u,c-=8);if(0===r)r=1-h;else{if(r===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,s),r-=h}return(p?-1:1)*a*Math.pow(2,r-s)},write:function(t,e,i,s,n,r){var a,o,l,h=8*r-n-1,c=(1<<h)-1,d=c>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:r-1,f=s?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+d>=1?u/l:u*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(o=0,a=c):a+d>=1?(o=(e*l-1)*Math.pow(2,n),a+=d):(o=e*Math.pow(2,d-1)*Math.pow(2,n),a=0));n>=8;t[i+p]=255&o,p+=f,o/=256,n-=8);for(a=a<<n|o,h+=n;h>0;t[i+p]=255&a,p+=f,a/=256,h-=8);t[i+p-f]|=128*g}};!function(t){const e=Fl,i=Ul,s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=function(t){return+t!=t&&(t=0),h.alloc(+t)},t.INSPECT_MAX_BYTES=50;const n=2147483647;t.kMaxLength=n;const{Uint8Array:r,ArrayBuffer:a,SharedArrayBuffer:o}=globalThis;function l(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new r(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return c(t,e,i)}function c(t,e,i){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|m(t,e);let s=l(i);const n=s.write(t,e);return n!==i&&(s=s.slice(0,n)),s}(t,e);if(a.isView(t))return function(t){if(K(t,r)){const e=new r(t);return f(e.buffer,e.byteOffset,e.byteLength)}return p(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(K(t,a)||t&&K(t.buffer,a)||typeof o<"u"&&(K(t,o)||t&&K(t.buffer,o)))return f(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return h.from(s,e,i);const n=function(t){if(h.isBuffer(t)){const e=0|g(t.length),i=l(e);return 0===i.length||t.copy(i,0,0,e),i}if(void 0!==t.length)return"number"!=typeof t.length||Q(t.length)?l(0):p(t);if("Buffer"===t.type&&Array.isArray(t.data))return p(t.data)}(t);if(n)return n;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function d(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return d(t),l(t<0?0:0|g(t))}function p(t){const e=t.length<0?0:0|g(t.length),i=l(e);for(let s=0;s<e;s+=1)i[s]=255&t[s];return i}function f(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let s;return s=void 0===e&&void 0===i?new r(t):void 0===i?new r(t,e):new r(t,e,i),Object.setPrototypeOf(s,h.prototype),s}function g(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function m(t,e){if(h.isBuffer(t))return t.length;if(a.isView(t)||K(t,a))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return s?-1:q(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,i){let s=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return T(this,e,i);case"latin1":case"binary":return M(this,e,i);case"base64":return S(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,i);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function b(t,e,i){const s=t[e];t[e]=t[i],t[i]=s}function y(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),Q(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=h.from(e,s)),h.isBuffer(e))return 0===e.length?-1:_(t,e,i,s,n);if("number"==typeof e)return e&=255,"function"==typeof r.prototype.indexOf?n?r.prototype.indexOf.call(t,e,i):r.prototype.lastIndexOf.call(t,e,i):_(t,[e],i,s,n);throw new TypeError("val must be string, number or Buffer")}function _(t,e,i,s,n){let r,a=1,o=t.length,l=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;a=2,o/=2,l/=2,i/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){let s=-1;for(r=i;r<o;r++)if(h(t,r)===h(e,-1===s?0:r-s)){if(-1===s&&(s=r),r-s+1===l)return s*a}else-1!==s&&(r-=r-s),s=-1}else for(i+l>o&&(i=o-l),r=i;r>=0;r--){let i=!0;for(let s=0;s<l;s++)if(h(t,r+s)!==h(e,s)){i=!1;break}if(i)return r}return-1}function w(t,e,i,s){i=Number(i)||0;const n=t.length-i;s?(s=Number(s))>n&&(s=n):s=n;const r=e.length;let a;for(s>r/2&&(s=r/2),a=0;a<s;++a){const s=parseInt(e.substr(2*a,2),16);if(Q(s))return a;t[i+a]=s}return a}function x(t,e,i,s){return X(q(e,t.length-i),t,i,s)}function A(t,e,i,s){return X(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function E(t,e,i,s){return X(Y(e),t,i,s)}function k(t,e,i,s){return X(function(t,e){let i,s,n;const r=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),s=i>>8,n=i%256,r.push(n),r.push(s);return r}(e,t.length-i),t,i,s)}function S(t,i,s){return 0===i&&s===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(i,s))}function C(t,e,i){i=Math.min(t.length,i);const s=[];let n=e;for(;n<i;){const e=t[n];let r=null,a=e>239?4:e>223?3:e>191?2:1;if(n+a<=i){let i,s,o,l;switch(a){case 1:e<128&&(r=e);break;case 2:i=t[n+1],128===(192&i)&&(l=(31&e)<<6|63&i,l>127&&(r=l));break;case 3:i=t[n+1],s=t[n+2],128===(192&i)&&128===(192&s)&&(l=(15&e)<<12|(63&i)<<6|63&s,l>2047&&(l<55296||l>57343)&&(r=l));break;case 4:i=t[n+1],s=t[n+2],o=t[n+3],128===(192&i)&&128===(192&s)&&128===(192&o)&&(l=(15&e)<<18|(63&i)<<12|(63&s)<<6|63&o,l>65535&&l<1114112&&(r=l))}}null===r?(r=65533,a=1):r>65535&&(r-=65536,s.push(r>>>10&1023|55296),r=56320|1023&r),s.push(r),n+=a}return function(t){const e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);let i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=P));return i}(s)}h.TYPED_ARRAY_SUPPORT=function(){try{const t=new r(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,r.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch{return!1}}(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,i){return c(t,e,i)},Object.setPrototypeOf(h.prototype,r.prototype),Object.setPrototypeOf(h,r),h.alloc=function(t,e,i){return function(t,e,i){return d(t),t<=0?l(t):void 0!==e?"string"==typeof i?l(t).fill(e,i):l(t).fill(e):l(t)}(t,e,i)},h.allocUnsafe=function(t){return u(t)},h.allocUnsafeSlow=function(t){return u(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(K(t,r)&&(t=h.from(t,t.offset,t.byteLength)),K(e,r)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,s=e.length;for(let n=0,r=Math.min(i,s);n<r;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const s=h.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(K(e,r))n+e.length>s.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(s,n)):r.prototype.set.call(s,e,n);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(s,n)}n+=e.length}return s},h.byteLength=m,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)b(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?C(this,0,t):v.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let e="";const i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,i,s,n){if(K(t,r)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let a=(n>>>=0)-(s>>>=0),o=(i>>>=0)-(e>>>=0);const l=Math.min(a,o),c=this.slice(s,n),d=t.slice(e,i);for(let r=0;r<l;++r)if(c[r]!==d[r]){a=c[r],o=d[r];break}return a<o?-1:o<a?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return y(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return y(this,t,e,i,!1)},h.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let r=!1;for(;;)switch(s){case"hex":return w(this,t,e,i);case"utf8":case"utf-8":return x(this,t,e,i);case"ascii":case"latin1":case"binary":return A(this,t,e,i);case"base64":return E(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,i);default:if(r)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),r=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function T(t,e,i){let s="";i=Math.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function M(t,e,i){let s="";i=Math.min(t.length,i);for(let n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function D(t,e,i){const s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);let n="";for(let r=e;r<i;++r)n+=J[t[r]];return n}function R(t,e,i){const s=t.slice(e,i);let n="";for(let r=0;r<s.length-1;r+=2)n+=String.fromCharCode(s[r]+256*s[r+1]);return n}function L(t,e,i){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,s,n,r){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function I(t,e,i,s,n){V(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r,r>>=8,t[i++]=r;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,i}function F(t,e,i,s,n){V(e,s,n,t,i,7);let r=Number(e&BigInt(4294967295));t[i+7]=r,r>>=8,t[i+6]=r,r>>=8,t[i+5]=r,r>>=8,t[i+4]=r;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=a,a>>=8,t[i+2]=a,a>>=8,t[i+1]=a,a>>=8,t[i]=a,i+8}function N(t,e,i,s,n,r){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function j(t,e,s,n,r){return e=+e,s>>>=0,r||N(t,0,s,4),i.write(t,e,s,n,23,4),s+4}function B(t,e,s,n,r){return e=+e,s>>>=0,r||N(t,0,s,8),i.write(t,e,s,n,52,8),s+8}h.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const s=this.subarray(t,e);return Object.setPrototypeOf(s,h.prototype),s},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||L(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return s},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||L(t,e,this.length);let s=this[t+--e],n=1;for(;e>0&&(n*=256);)s+=this[t+--e]*n;return s},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=Z((function(t){$(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&U(t,this.length-8);const s=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(s)+(BigInt(n)<<BigInt(32))})),h.prototype.readBigUInt64BE=Z((function(t){$(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&U(t,this.length-8);const s=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(s)<<BigInt(32))+BigInt(n)})),h.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||L(t,e,this.length);let s=this[t],n=1,r=0;for(;++r<e&&(n*=256);)s+=this[t+r]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},h.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||L(t,e,this.length);let s=e,n=1,r=this[t+--s];for(;s>0&&(n*=256);)r+=this[t+--s]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},h.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=Z((function(t){$(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&U(t,this.length-8);const s=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(s)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=Z((function(t){$(t>>>=0,"offset");const e=this[t],i=this[t+7];(void 0===e||void 0===i)&&U(t,this.length-8);const s=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),i.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),i.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),i.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),i.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,Math.pow(2,8*i)-1,0)}let n=1,r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,i,s){if(t=+t,e>>>=0,i>>>=0,!s){O(this,t,e,i,Math.pow(2,8*i)-1,0)}let n=i-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+i},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=Z((function(t){return I(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=Z((function(t){return F(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=Math.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=0,r=1,a=0;for(this[e]=255&t;++n<i&&(r*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/r|0)-a&255;return e+i},h.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e>>>=0,!s){const s=Math.pow(2,8*i-1);O(this,t,e,i,s-1,-s)}let n=i-1,r=1,a=0;for(this[e+n]=255&t;--n>=0&&(r*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/r|0)-a&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=Z((function(t){return I(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=Z((function(t){return F(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,i){return j(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return j(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return B(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return B(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,s){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!s&&0!==s&&(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);const n=s-i;return this===t&&"function"==typeof r.prototype.copyWithin?this.copyWithin(e,i,s):r.prototype.set.call(t,this.subarray(i,s),e),n},h.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!h.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===t.length){const e=t.charCodeAt(0);("utf8"===s&&e<128||"latin1"===s)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const r=h.isBuffer(t)?t:h.from(t,s),a=r.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=r[n%a]}return this};const H={};function W(t,e,i){H[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function z(t){let e="",i=t.length;const s="-"===t[0]?1:0;for(;i>=s+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function V(t,e,i,s,n,r){if(t>i||t<e){const i="bigint"==typeof e?"n":"";let s;throw s=0===e||e===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(r+1)}${i}`:`>= -(2${i} ** ${8*(r+1)-1}${i}) and < 2 ** ${8*(r+1)-1}${i}`,new H.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,i){$(e,"offset"),(void 0===t[e]||void 0===t[e+i])&&U(e,t.length-(i+1))}(s,n,r)}function $(t,e){if("number"!=typeof t)throw new H.ERR_INVALID_ARG_TYPE(e,"number",t)}function U(t,e,i){throw Math.floor(t)!==t?($(t,i),new H.ERR_OUT_OF_RANGE("offset","an integer",t)):e<0?new H.ERR_BUFFER_OUT_OF_BOUNDS:new H.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,t)}W("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),W("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),W("ERR_OUT_OF_RANGE",(function(t,e,i){let s=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=z(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=z(n)),n+="n"),s+=` It must be ${e}. Received ${n}`,s}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function q(t,e){let i;e=e||1/0;const s=t.length;let n=null;const r=[];for(let a=0;a<s;++a){if(i=t.charCodeAt(a),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===s){(e-=3)>-1&&r.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function Y(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function X(t,e,i,s){let n;for(n=0;n<s&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function K(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Q(t){return t!==t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const s=16*i;for(let n=0;n<16;++n)e[s+n]=t[i]+t[n]}return e}();function Z(t){return typeof BigInt>"u"?tt:t}function tt(){throw new Error("BigInt not supported")}}(Il);const Gl=Il.Buffer,ql=Il.Blob,Yl=Il.BlobOptions,Xl=Il.Buffer,Kl=Il.File,Ql=Il.FileOptions,Jl=Il.INSPECT_MAX_BYTES,Zl=Il.SlowBuffer,th=Il.TranscodeEncoding,eh=Il.atob,ih=Il.btoa,sh=Il.constants,nh=Il.isAscii,rh=Il.isUtf8,ah=Il.kMaxLength,oh=Il.kStringMaxLength,lh=Il.resolveObjectURL,hh=Il.transcode;Symbol.toStringTag;var ch={d:(t,e)=>{for(var i in e)ch.o(e,i)&&!ch.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},dh=globalThis.pdfjsLib={};ch.d(dh,{AbortException:()=>xc,AnnotationEditorLayer:()=>ES,AnnotationEditorParamsType:()=>kh,AnnotationEditorType:()=>Eh,AnnotationEditorUIManager:()=>Af,AnnotationLayer:()=>lw,AnnotationMode:()=>Ah,CMapCompressionType:()=>nc,ColorPicker:()=>hA,DOMSVGFactory:()=>Dd,DrawLayer:()=>FS,FeatureTest:()=>Sc,GlobalWorkerOptions:()=>Lm,ImageKind:()=>Lh,InvalidPDFException:()=>bc,MissingPDFException:()=>yc,OPS:()=>rc,Outliner:()=>yx,PDFDataRangeTransport:()=>Ob,PDFDateString:()=>Vd,PDFWorker:()=>Qb,PasswordResponses:()=>ac,PermissionFlag:()=>Sh,PixelsPerInch:()=>Zc,RenderingCancelledException:()=>Ld,TextLayer:()=>_b,UnexpectedResponseException:()=>_c,Util:()=>Rc,VerbosityLevel:()=>sc,XfaLayer:()=>wy,build:()=>vy,createValidAbsoluteUrl:()=>pc,fetchData:()=>Pd,getDocument:()=>Tb,getFilenameFromUrl:()=>Fd,getPdfFilenameFromUrl:()=>Nd,getXfaPageViewport:()=>$d,isDataScheme:()=>Od,isPdfFile:()=>Id,noContextMenu:()=>Hd,normalizeUnicode:()=>Ic,renderTextLayer:()=>wb,setLayerDimensions:()=>Yd,shadow:()=>fc,updateTextLayer:()=>xb,version:()=>my});const uh="object"==typeof yn&&yn+""=="[object process]"&&!yn.versions.nw&&!(yn.versions.electron&&yn.type&&"browser"!==yn.type),ph=[1,0,0,1,0,0],fh=[.001,0,0,.001,0,0],gh=1.35,mh=1,vh=2,bh=4,yh=16,_h=32,wh=64,xh=256,Ah={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Eh={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},kh={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Sh={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ch=0,Ph=1,Th=2,Mh=3,Dh=3,Rh=4,Lh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Oh=1,Ih=2,Fh=3,Nh=4,jh=5,Bh=6,Hh=7,Wh=8,zh=9,Vh=10,$h=11,Uh=12,Gh=13,qh=14,Yh=15,Xh=16,Kh=17,Qh=20,Jh=1,Zh=2,tc=3,ec=4,ic=5,sc={ERRORS:0,WARNINGS:1,INFOS:5},nc={NONE:0,BINARY:1},rc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},ac={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let oc=sc.WARNINGS;function lc(){return oc}function hc(t){oc>=sc.INFOS&&console.log(`Info: ${t}`)}function cc(t){oc>=sc.WARNINGS&&console.log(`Warning: ${t}`)}function dc(t){throw new Error(t)}function uc(t,e){t||dc(e)}function pc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);(null==e?void 0:e.length)>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=function(t){return decodeURIComponent(escape(t))}(t)}catch{}}const s=e?new URL(t,e):new URL(t);if(function(t){switch(null==t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(s))return s}catch{}return null}function fc(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const gc=function(){function t(e,i){this.constructor===t&&dc("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class mc extends gc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class vc extends gc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class bc extends gc{constructor(t){super(t,"InvalidPDFException")}}class yc extends gc{constructor(t){super(t,"MissingPDFException")}}class _c extends gc{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class wc extends gc{constructor(t){super(t,"FormatError")}}class xc extends gc{constructor(t){super(t,"AbortException")}}function Ac(t){("object"!=typeof t||void 0===(null==t?void 0:t.length))&&dc("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const s=[];for(let n=0;n<e;n+=i){const r=Math.min(n+i,e),a=t.subarray(n,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Ec(t){"string"!=typeof t&&dc("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let s=0;s<e;++s)i[s]=255&t.charCodeAt(s);return i}function kc(t){const e=Object.create(null);for(const[i,s]of t)e[i]=s;return e}class Sc{static get isLittleEndian(){return fc(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return fc(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return fc(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&"string"==typeof(null==navigator?void 0:navigator.platform)?fc(this,"platform",{isMac:navigator.platform.includes("Mac")}):fc(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return fc(this,"isCSSRoundSupported",null==(e=null==(t=globalThis.CSS)?void 0:t.supports)?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Cc=Array.from(Array(256).keys(),(t=>t.toString(16).padStart(2,"0")));var Pc,Tc,Mc,Dc;class Rc{static makeHexColor(t,e,i){return`#${Cc[t]}${Cc[e]}${Cc[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),n=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],n[0],r[0]),Math.min(i[1],s[1],n[1],r[1]),Math.max(i[0],s[0],n[0],r[0]),Math.max(i[1],s[1],n[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],n=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],a=(i+r)/2,o=Math.sqrt((i+r)**2-4*(i*r-n*s))/2,l=a+o||1,h=a-o||1;return[Math.sqrt(l),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>r?null:[i,n,s,r]}static bezierBoundingBox(t,e,i,s,n,r,a,o,l){return l?(l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o)):l=[Math.min(t,a),Math.min(e,o),Math.max(t,a),Math.max(e,o)],u(this,Mc,Dc).call(this,t,i,n,a,e,s,r,o,3*(3*(i-n)-t+a),6*(t-2*i+n),3*(i-t),l),u(this,Mc,Dc).call(this,t,i,n,a,e,s,r,o,3*(3*(s-r)-e+o),6*(e-2*s+r),3*(s-e),l),l}}Pc=new WeakSet,Tc=function(t,e,i,s,n,r,a,o,l,h){if(l<=0||l>=1)return;const c=1-l,d=l*l,u=d*l,p=c*(c*(c*t+3*l*e)+3*d*i)+u*s,f=c*(c*(c*n+3*l*r)+3*d*a)+u*o;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)},Mc=new WeakSet,Dc=function(t,e,i,s,n,r,a,o,l,h,c,d){if(Math.abs(l)<1e-12)return void(Math.abs(h)>=1e-12&&u(this,Pc,Tc).call(this,t,e,i,s,n,r,a,o,-c/h,d));const p=h**2-4*c*l;if(p<0)return;const f=Math.sqrt(p),g=2*l;u(this,Pc,Tc).call(this,t,e,i,s,n,r,a,o,(-h+f)/g,d),u(this,Pc,Tc).call(this,t,e,i,s,n,r,a,o,(-h-f)/g,d)},h(Rc,Pc),h(Rc,Mc);let Lc=null,Oc=null;function Ic(t){return Lc||(Lc=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Oc=new Map([["\ufb05","\u017ft"]])),t.replaceAll(Lc,((t,e,i)=>e?e.normalize("NFKC"):Oc.get(i)))}const Fc="pdfjs_internal_id_",Nc=0,jc=1,Bc=2,Hc=3,Wc=4,zc=5,Vc=6,$c=7,Uc=8;class Gc{constructor(){this.constructor===Gc&&dc("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,n){return"none"}destroy(){}}class qc{constructor(){this.constructor===qc&&dc("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d")}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){dc("Abstract method `_createCanvas` called.")}}class Yc{constructor(t){let{baseUrl:e=null,isCompressed:i=!0}=t;this.constructor===Yc&&dc("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=i}async fetch(t){let{name:e}=t;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const i=this.baseUrl+e+(this.isCompressed?".bcmap":""),s=this.isCompressed?nc.BINARY:nc.NONE;return this._fetchData(i,s).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)}))}_fetchData(t,e){dc("Abstract method `_fetchData` called.")}}class Xc{constructor(t){let{baseUrl:e=null}=t;this.constructor===Xc&&dc("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${e}`;return this._fetchData(i).catch((t=>{throw new Error(`Unable to load font data at: ${i}`)}))}_fetchData(t){dc("Abstract method `_fetchData` called.")}}class Kc{constructor(){this.constructor===Kc&&dc("Cannot initialize BaseSVGFactory.")}create(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){dc("Abstract method `_createSVG` called.")}}const Qc="http://www.w3.org/2000/svg",Jc=class{};a(Jc,"CSS",96),a(Jc,"PDF",72),a(Jc,"PDF_TO_CSS_UNITS",Jc.CSS/Jc.PDF);let Zc=Jc;var td,ed,id,sd,nd,rd,ad,od,ld,hd,cd,dd,ud,pd,fd,gd,md,vd,bd,yd,_d,wd,xd,Ad,Ed,kd,Sd,Cd;td=new WeakMap,ed=new WeakMap,id=new WeakMap,sd=new WeakMap,nd=new WeakMap,rd=new WeakMap,ad=new WeakSet,od=function(){return l(this,td)||c(this,td,new Map)},ld=new WeakSet,hd=function(){return l(this,nd)||c(this,nd,new Map)},cd=new WeakSet,dd=function(){if(!l(this,ed)){const t=l(this,sd).createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=l(this,sd).createElementNS(Qc,"svg");i.setAttribute("width",0),i.setAttribute("height",0),c(this,ed,l(this,sd).createElementNS(Qc,"defs")),t.append(i),i.append(l(this,ed)),l(this,sd).body.append(t)}return l(this,ed)},ud=new WeakSet,pd=function(t){if(1===t.length){const e=t[0],i=new Array(256);for(let t=0;t<256;t++)i[t]=e[t]/255;const s=i.join(",");return[s,s,s]}const[e,i,s]=t,n=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)n[o]=e[o]/255,r[o]=i[o]/255,a[o]=s[o]/255;return[n.join(","),r.join(","),a.join(",")]},fd=new WeakSet,gd=function(t){const e=l(this,sd).createElementNS(Qc,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)},md=new WeakSet,vd=function(t){const e=l(this,sd).createElementNS(Qc,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)},bd=new WeakSet,yd=function(t){const e=l(this,sd).createElementNS(Qc,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),l(this,cd,dd).append(e),e},_d=new WeakSet,wd=function(t,e,i){const s=l(this,sd).createElementNS(Qc,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},xd=new WeakSet,Ad=function(t,e,i,s){const n=l(this,sd).createElementNS(Qc,"feComponentTransfer");s.append(n),u(this,_d,wd).call(this,n,"feFuncR",t),u(this,_d,wd).call(this,n,"feFuncG",e),u(this,_d,wd).call(this,n,"feFuncB",i)},Ed=new WeakSet,kd=function(t,e){const i=l(this,sd).createElementNS(Qc,"feComponentTransfer");e.append(i),u(this,_d,wd).call(this,i,"feFuncA",t)},Sd=new WeakSet,Cd=function(t){return l(this,cd,dd).style.color=t,Ud(getComputedStyle(l(this,cd,dd)).getPropertyValue("color"))};async function Pd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Bd(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise(((i,s)=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(200===n.status||0===n.status){switch(e){case"arraybuffer":case"blob":case"json":return void i(n.response)}return void i(n.responseText)}s(new Error(n.statusText))}},n.send(null)}))}class Td extends Yc{_fetchData(t,e){return Pd(t,this.isCompressed?"arraybuffer":"text").then((t=>({cMapData:t instanceof ArrayBuffer?new Uint8Array(t):Ec(t),compressionType:e})))}}class Md extends Xc{_fetchData(t){return Pd(t,"arraybuffer").then((t=>new Uint8Array(t)))}}class Dd extends Kc{_createSVG(t){return document.createElementNS(Qc,t)}}class Rd{constructor(t){let{viewBox:e,scale:i,rotation:s,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}=t;this.viewBox=e,this.scale=i,this.rotation=s,this.offsetX=n,this.offsetY=r;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let h,c,d,u,p,f,g,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,c=0,d=0,u=1;break;case 90:h=0,c=1,d=1,u=0;break;case 270:h=0,c=-1,d=-1,u=0;break;case 0:h=1,c=0,d=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,u=-u),0===h?(p=Math.abs(l-e[1])*i+n,f=Math.abs(o-e[0])*i+r,g=(e[3]-e[1])*i,m=(e[2]-e[0])*i):(p=Math.abs(o-e[0])*i+n,f=Math.abs(l-e[1])*i+r,g=(e[2]-e[0])*i,m=(e[3]-e[1])*i),this.transform=[h*i,c*i,d*i,u*i,p-h*i*o-d*i*l,f-c*i*o-u*i*l],this.width=g,this.height=m}get rawDims(){const{viewBox:t}=this;return fc(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Rd({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}convertToViewportPoint(t,e){return Rc.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Rc.applyTransform([t[0],t[1]],this.transform),i=Rc.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return Rc.applyInverseTransform([t,e],this.transform)}}class Ld extends gc{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t,"RenderingCancelledException"),this.extraDelay=e}}function Od(t){const e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function Id(t){return"string"==typeof t&&/\.pdf$/i.test(t)}function Fd(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function Nd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return e;if(Od(t))return cc('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let n=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(n&&(n=n[0],n.includes("%")))try{n=i.exec(decodeURIComponent(n))[0]}catch{}return n||e}class jd{constructor(){a(this,"started",Object.create(null)),a(this,"times",[])}time(t){t in this.started&&cc(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||cc(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:n}of this.times)t.push(`${i.padEnd(e)} ${n-s}ms\n`);return t.join("")}}function Bd(t,e){try{const{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch{return!1}}function Hd(t){t.preventDefault()}function Wd(t){console.log("Deprecated API usage: "+t)}let zd;class Vd{static toDateObject(t){if(!t||"string"!=typeof t)return null;zd||(zd=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=zd.exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let n=parseInt(e[3],10);n=n>=1&&n<=31?n:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(e[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===l?(r+=h,a+=c):"+"===l&&(r-=h,a-=c),new Date(Date.UTC(i,s,n,r,a,o))}}function $d(t,e){let{scale:i=1,rotation:s=0}=e;const{width:n,height:r}=t.attributes.style,a=[0,0,parseInt(n),parseInt(r)];return new Rd({viewBox:a,scale:i,rotation:s})}function Ud(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):(cc(`Not a valid color format: "${t}"`),[0,0,0])}function Gd(t){const{a:e,b:i,c:s,d:n,e:r,f:a}=t.getTransform();return[e,i,s,n,r,a]}function qd(t){const{a:e,b:i,c:s,d:n,e:r,f:a}=t.getTransform().invertSelf();return[e,i,s,n,r,a]}function Yd(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof Rd){const{pageWidth:s,pageHeight:n}=e.rawDims,{style:r}=t,a=Sc.isCSSRoundSupported,o=`var(--scale-factor) * ${s}px`,l=`var(--scale-factor) * ${n}px`,h=a?`round(${o}, 1px)`:`calc(${o})`,c=a?`round(${l}, 1px)`:`calc(${l})`;i&&e.rotation%180!==0?(r.width=c,r.height=h):(r.width=h,r.height=c)}s&&t.setAttribute("data-main-rotation",e.rotation)}var Xd,Kd,Qd,Jd,Zd,tu,eu,iu,su,nu,ru,au,ou,lu,hu,cu;const du=class t{constructor(t){h(this,eu),h(this,su),h(this,ru),h(this,ou),h(this,hu),h(this,Xd,null),h(this,Kd,null),h(this,Qd,void 0),h(this,Jd,null),c(this,Qd,t)}render(){const e=c(this,Xd,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Hd),e.addEventListener("pointerdown",u(t,Zd,tu));const i=c(this,Jd,document.createElement("div"));i.className="buttons",e.append(i);const s=l(this,Qd).toolbarPosition;if(s){const{style:t}=e,i="ltr"===l(this,Qd)._uiManager.direction?1-s[0]:s[0];t.insetInlineEnd=100*i+"%",t.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return u(this,ou,lu).call(this),e}hide(){var t;l(this,Xd).classList.add("hidden"),null==(t=l(this,Kd))||t.hideDropdown()}show(){l(this,Xd).classList.remove("hidden")}addAltTextButton(t){u(this,ru,au).call(this,t),l(this,Jd).prepend(t,l(this,hu,cu))}addColorPicker(t){c(this,Kd,t);const e=t.renderButton();u(this,ru,au).call(this,e),l(this,Jd).prepend(e,l(this,hu,cu))}remove(){var t;l(this,Xd).remove(),null==(t=l(this,Kd))||t.destroy(),c(this,Kd,null)}};Xd=new WeakMap,Kd=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Zd=new WeakSet,tu=function(t){t.stopPropagation()},eu=new WeakSet,iu=function(t){l(this,Qd)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},su=new WeakSet,nu=function(t){l(this,Qd)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},ru=new WeakSet,au=function(t){t.addEventListener("focusin",u(this,eu,iu).bind(this),{capture:!0}),t.addEventListener("focusout",u(this,su,nu).bind(this),{capture:!0}),t.addEventListener("contextmenu",Hd)},ou=new WeakSet,lu=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${l(this,Qd).editorType}-button`),u(this,ru,au).call(this,t),t.addEventListener("click",(t=>{l(this,Qd)._uiManager.delete()})),l(this,Jd).append(t)},hu=new WeakSet,cu=function(){const t=document.createElement("div");return t.className="divider",t},h(du,Zd);let uu=du;var pu,fu,gu,mu,vu,bu,yu,_u,wu,xu,Au,Eu,ku,Su,Cu;class Pu{constructor(t){h(this,mu),h(this,bu),h(this,_u),h(this,pu,null),h(this,fu,null),h(this,gu,void 0),c(this,gu,t)}show(t,e,i){const[s,n]=u(this,bu,yu).call(this,e,i),{style:r}=l(this,fu)||c(this,fu,u(this,mu,vu).call(this));t.append(l(this,fu)),r.insetInlineEnd=100*s+"%",r.top=`calc(${100*n}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,fu).remove()}}function Tu(t,e,i){for(const s of i)e.addEventListener(s,t[s].bind(t))}pu=new WeakMap,fu=new WeakMap,gu=new WeakMap,mu=new WeakSet,vu=function(){const t=c(this,fu,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Hd);const e=c(this,pu,document.createElement("div"));return e.className="buttons",t.append(e),u(this,_u,wu).call(this),t},bu=new WeakSet,yu=function(t,e){let i=0,s=0;for(const n of t){const t=n.y+n.height;if(t<i)continue;const r=n.x+(e?n.width:0);t>i?(s=r,i=t):e?r>s&&(s=r):r<s&&(s=r)}return[e?1-s:s,i]},_u=new WeakSet,wu=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),t.addEventListener("contextmenu",Hd),t.addEventListener("click",(()=>{l(this,gu).highlightSelection("floating_button")})),l(this,pu).append(t)};class Mu{constructor(){h(this,xu,0)}get id(){return"pdfjs_internal_editor_"+d(this,xu)._++}}xu=new WeakMap;const Du=class{constructor(){h(this,Su),h(this,Au,function(){if(typeof crypto<"u"&&"function"==typeof(null==crypto?void 0:crypto.randomUUID))return crypto.randomUUID();const t=new Uint8Array(32);if(typeof crypto<"u"&&"function"==typeof(null==crypto?void 0:crypto.getRandomValues))crypto.getRandomValues(t);else for(let e=0;e<32;e++)t[e]=Math.floor(255*Math.random());return Ac(t)}()),h(this,Eu,0),h(this,ku,null)}static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d"),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return fc(this,"_isSVGFittingCanvas",e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]))))}async getFromFile(t){const{lastModified:e,name:i,size:s,type:n}=t;return u(this,Su,Cu).call(this,`${e}_${i}_${s}_${n}`,t)}async getFromUrl(t){return u(this,Su,Cu).call(this,t,t)}async getFromId(t){l(this,ku)||c(this,ku,new Map);const e=l(this,ku).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=l(this,ku).get(t);return null!=e&&e.isSvg?e.svgUrl:null}deleteId(t){l(this,ku)||c(this,ku,new Map);const e=l(this,ku).get(t);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${l(this,Au)}_`)}};Au=new WeakMap,Eu=new WeakMap,ku=new WeakMap,Su=new WeakSet,Cu=async function(t,e){l(this,ku)||c(this,ku,new Map);let i=l(this,ku).get(t);if(null===i)return null;if(null!=i&&i.bitmap)return i.refCounter+=1,i;try{let t;if(i||(i={bitmap:null,id:`image_${l(this,Au)}_${d(this,Eu)._++}`,refCounter:0,isSvg:!1}),"string"==typeof e?(i.url=e,t=await Pd(e,"blob")):t=i.file=e,"image/svg+xml"===t.type){const e=Du._isSVGFittingCanvas,s=new FileReader,n=new Image,r=new Promise(((t,r)=>{n.onload=()=>{i.bitmap=n,i.isSvg=!0,t()},s.onload=async()=>{const t=i.svgUrl=s.result;n.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},n.onerror=s.onerror=r}));s.readAsDataURL(t),await r}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(s){console.error(s),i=null}return l(this,ku).set(t,i),i&&l(this,ku).set(i.id,i),i};let Ru=Du;var Lu,Ou,Iu,Fu,Nu,ju;class Bu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;h(this,Lu,[]),h(this,Ou,!1),h(this,Iu,void 0),h(this,Fu,-1),c(this,Iu,t)}add(t){let{cmd:e,undo:i,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=t;if(n&&e(),l(this,Ou))return;const h={cmd:e,undo:i,post:s,type:r};if(-1===l(this,Fu))return l(this,Lu).length>0&&(l(this,Lu).length=0),c(this,Fu,0),void l(this,Lu).push(h);if(a&&l(this,Lu)[l(this,Fu)].type===r)return o&&(h.undo=l(this,Lu)[l(this,Fu)].undo),void(l(this,Lu)[l(this,Fu)]=h);const d=l(this,Fu)+1;d===l(this,Iu)?l(this,Lu).splice(0,1):(c(this,Fu,d),d<l(this,Lu).length&&l(this,Lu).splice(d)),l(this,Lu).push(h)}undo(){if(-1===l(this,Fu))return;c(this,Ou,!0);const{undo:t,post:e}=l(this,Lu)[l(this,Fu)];t(),null==e||e(),c(this,Ou,!1),c(this,Fu,l(this,Fu)-1)}redo(){if(l(this,Fu)<l(this,Lu).length-1){c(this,Fu,l(this,Fu)+1),c(this,Ou,!0);const{cmd:t,post:e}=l(this,Lu)[l(this,Fu)];t(),null==e||e(),c(this,Ou,!1)}}hasSomethingToUndo(){return-1!==l(this,Fu)}hasSomethingToRedo(){return l(this,Fu)<l(this,Lu).length-1}destroy(){c(this,Lu,null)}}Lu=new WeakMap,Ou=new WeakMap,Iu=new WeakMap,Fu=new WeakMap;class Hu{constructor(t){h(this,Nu),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Sc.platform;for(const[i,s,n={}]of t)for(const t of i){const i=t.startsWith("mac+");e&&i?(this.callbacks.set(t.slice(4),{callback:s,options:n}),this.allKeys.add(t.split("+").at(-1))):!e&&!i&&(this.callbacks.set(t,{callback:s,options:n}),this.allKeys.add(t.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(u(this,Nu,ju).call(this,e));if(!i)return;const{callback:s,options:{bubbles:n=!1,args:r=[],checker:a=null}}=i;a&&!a(t,e)||(s.bind(t,...r,e)(),n||(e.stopPropagation(),e.preventDefault()))}}Nu=new WeakSet,ju=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Wu=class t{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const i of t.keys()){e.style.color=i;const s=window.getComputedStyle(e).color;t.set(i,Ud(s))}e.remove()}(t),fc(this,"_colors",t)}convert(e){const i=Ud(e);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,n]of this._colors)if(n.every(((t,e)=>t===i[e])))return t._colorsMapping.get(s);return i}getHexCode(t){const e=this._colors.get(t);return e?Rc.makeHexColor(...e):t}};a(Wu,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let zu=Wu;var Vu,$u,Uu,Gu,qu,Yu,Xu,Ku,Qu,Ju,Zu,tp,ep,ip,sp,np,rp,ap,op,lp,hp,cp,dp,up,pp,fp,gp,mp,vp,bp,yp,_p,wp,xp,Ap,Ep,kp,Sp,Cp,Pp,Tp,Mp,Dp,Rp,Lp,Op,Ip,Fp,Np,jp,Bp,Hp,Wp,zp,Vp,$p,Up,Gp,qp,Yp,Xp,Kp,Qp,Jp,Zp,tf,ef,sf,nf,rf,af,of,lf,hf,cf,df,uf,pf,ff,gf,mf,vf,bf,yf,_f,wf;const xf=class t{constructor(t,e,i,s,n,r,a,o,d){h(this,Ip),h(this,Np),h(this,Bp),h(this,Wp),h(this,Vp),h(this,Up),h(this,qp),h(this,Xp),h(this,Qp),h(this,Zp),h(this,ef),h(this,nf),h(this,af),h(this,lf),h(this,cf),h(this,uf),h(this,ff),h(this,mf),h(this,bf),h(this,_f),h(this,Vu,null),h(this,$u,new Map),h(this,Uu,new Map),h(this,Gu,null),h(this,qu,null),h(this,Yu,null),h(this,Xu,new Bu),h(this,Ku,0),h(this,Qu,new Set),h(this,Ju,null),h(this,Zu,null),h(this,tp,new Set),h(this,ep,!1),h(this,ip,null),h(this,sp,null),h(this,np,null),h(this,rp,!1),h(this,ap,null),h(this,op,new Mu),h(this,lp,!1),h(this,hp,!1),h(this,cp,null),h(this,dp,null),h(this,up,null),h(this,pp,Eh.NONE),h(this,fp,new Set),h(this,gp,null),h(this,mp,null),h(this,vp,null),h(this,bp,this.blur.bind(this)),h(this,yp,this.focus.bind(this)),h(this,_p,this.copy.bind(this)),h(this,wp,this.cut.bind(this)),h(this,xp,this.paste.bind(this)),h(this,Ap,this.keydown.bind(this)),h(this,Ep,this.keyup.bind(this)),h(this,kp,this.onEditingAction.bind(this)),h(this,Sp,this.onPageChanging.bind(this)),h(this,Cp,this.onScaleChanging.bind(this)),h(this,Pp,u(this,Bp,Hp).bind(this)),h(this,Tp,this.onRotationChanging.bind(this)),h(this,Mp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),h(this,Dp,[0,0]),h(this,Rp,null),h(this,Lp,null),h(this,Op,null),c(this,Lp,t),c(this,Op,e),c(this,Gu,i),this._eventBus=s,this._eventBus._on("editingaction",l(this,kp)),this._eventBus._on("pagechanging",l(this,Sp)),this._eventBus._on("scalechanging",l(this,Cp)),this._eventBus._on("rotationchanging",l(this,Tp)),u(this,Vp,$p).call(this),u(this,Qp,Jp).call(this),c(this,qu,n.annotationStorage),c(this,ip,n.filterFactory),c(this,mp,r),c(this,np,a||null),c(this,ep,o),c(this,up,d||null),this.viewParameters={realScale:Zc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=t.prototype,i=t=>l(t,Lp).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),s=(t,e)=>{let{target:i}=e;if(i instanceof HTMLInputElement){const{type:t}=i;return"text"!==t&&"number"!==t}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return fc(this,"_keyboardManager",new Hu([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:i}=e;return!(i instanceof HTMLButtonElement)&&l(t,Lp).contains(i)&&!t.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:i}=e;return!(i instanceof HTMLButtonElement)&&l(t,Lp).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:i}]]))}destroy(){var t,e;u(this,Zp,tf).call(this),u(this,Xp,Kp).call(this),this._eventBus._off("editingaction",l(this,kp)),this._eventBus._off("pagechanging",l(this,Sp)),this._eventBus._off("scalechanging",l(this,Cp)),this._eventBus._off("rotationchanging",l(this,Tp));for(const i of l(this,Uu).values())i.destroy();l(this,Uu).clear(),l(this,$u).clear(),l(this,tp).clear(),c(this,Vu,null),l(this,fp).clear(),l(this,Xu).destroy(),null==(t=l(this,Gu))||t.destroy(),null==(e=l(this,ap))||e.hide(),c(this,ap,null),l(this,sp)&&(clearTimeout(l(this,sp)),c(this,sp,null)),l(this,Rp)&&(clearTimeout(l(this,Rp)),c(this,Rp,null)),u(this,Up,Gp).call(this)}async mlGuess(t){var e;return(null==(e=l(this,up))?void 0:e.guess(t))||null}get hasMLManager(){return!!l(this,up)}get hcmFilter(){return fc(this,"hcmFilter",l(this,mp)?l(this,ip).addHCMFilter(l(this,mp).foreground,l(this,mp).background):"none")}get direction(){return fc(this,"direction",getComputedStyle(l(this,Lp)).direction)}get highlightColors(){return fc(this,"highlightColors",l(this,np)?new Map(l(this,np).split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}get highlightColorNames(){return fc(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(t=>t.reverse()))):null)}setMainHighlightColorPicker(t){c(this,dp,t)}editAltText(t){var e;null==(e=l(this,Gu))||e.editAltText(this,t)}onPageChanging(t){let{pageNumber:e}=t;c(this,Ku,e-1)}focusMainContainer(){l(this,Lp).focus()}findParent(t,e){for(const i of l(this,Uu).values()){const{x:s,y:n,width:r,height:a}=i.div.getBoundingClientRect();if(t>=s&&t<=s+r&&e>=n&&e<=n+a)return i}return null}disableUserSelect(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l(this,Op).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,tp).add(t)}removeShouldRescale(t){l(this,tp).delete(t)}onScaleChanging(t){let{scale:e}=t;this.commitOrRemove(),this.viewParameters.realScale=e*Zc.PDF_TO_CSS_UNITS;for(const i of l(this,tp))i.onScaleChanging()}onRotationChanging(t){let{pagesRotation:e}=t;this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:r}=e,a=e.toString(),o=u(this,Ip,Fp).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(o);if(h){e.empty(),l(this,pp)===Eh.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Eh.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const e of l(this,Uu).values())if(e.hasTextLayer(o)){e.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:r,text:a});break}}}addToAnnotationStorage(t){!t.isEmpty()&&l(this,qu)&&!l(this,qu).has(t.id)&&l(this,qu).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,l(this,rp)&&(c(this,rp,!1),u(this,Wp,zp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,fp))if(e.div.contains(t)){c(this,cp,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,cp))return;const[t,e]=l(this,cp);c(this,cp,null),e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus()}addEditListeners(){u(this,Qp,Jp).call(this),u(this,ef,sf).call(this)}removeEditListeners(){u(this,Zp,tf).call(this),u(this,nf,rf).call(this)}copy(t){var e;if(t.preventDefault(),null==(e=l(this,Vu))||e.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of l(this,fp)){const t=s.serialize(!0);t&&i.push(t)}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const t of l(this,Zu))if(t.isHandlingMimeForPasting(r.type))return void t.paste(r,this.currentLayer);let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(n){return void cc(`paste: "${n.message}".`)}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const t=[];for(const r of i){const e=s.deserialize(r);if(!e)return;t.push(e)}const e=()=>{for(const e of t)u(this,ff,gf).call(this,e);u(this,_f,wf).call(this,t)},n=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:n,mustExec:!0})}catch(n){cc(`paste: "${n.message}".`)}}keydown(e){!this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!0),l(this,pp)!==Eh.NONE&&!this.isEditorHandlingKeyboard&&t._keyboardManager.exec(this,e)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,l(this,rp)&&(c(this,rp,!1),u(this,Wp,zp).call(this,"main_toolbar")))}onEditingAction(t){let{name:e}=t;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(t){t?(u(this,qp,Yp).call(this),u(this,ef,sf).call(this),u(this,af,of).call(this,{isEditing:l(this,pp)!==Eh.NONE,isEmpty:u(this,bf,yf).call(this),hasSomethingToUndo:l(this,Xu).hasSomethingToUndo(),hasSomethingToRedo:l(this,Xu).hasSomethingToRedo(),hasSelectedEditor:!1})):(u(this,Xp,Kp).call(this),u(this,nf,rf).call(this),u(this,af,of).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,Zu)){c(this,Zu,t);for(const t of l(this,Zu))u(this,lf,hf).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,op).id}get currentLayer(){return l(this,Uu).get(l(this,Ku))}getLayer(t){return l(this,Uu).get(t)}get currentPageIndex(){return l(this,Ku)}addLayer(t){l(this,Uu).set(t.pageIndex,t),l(this,lp)?t.enable():t.disable()}removeLayer(t){l(this,Uu).delete(t.pageIndex)}updateMode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(l(this,pp)!==t){if(c(this,pp,t),t===Eh.NONE)return this.setEditingState(!1),void u(this,uf,pf).call(this);this.setEditingState(!0),u(this,cf,df).call(this),this.unselectAll();for(const e of l(this,Uu).values())e.updateMode(t);if(!e&&i)return void this.addNewEditorFromKeyboard();if(e)for(const t of l(this,$u).values())if(t.annotationElementId===e){this.setSelected(t),t.enterInEditMode();break}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==l(this,pp)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(l(this,Zu)){switch(t){case kh.CREATE:return void this.currentLayer.addNewEditor();case kh.HIGHLIGHT_DEFAULT_COLOR:null==(i=l(this,dp))||i.updateColor(e);break;case kh.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,vp)||c(this,vp,new Map)).set(t,e),this.showAllEditors("highlight",e)}for(const i of l(this,fp))i.updateParams(t,e);for(const i of l(this,Zu))i.updateDefaultParams(t,e)}}showAllEditors(t,e){var i;for(const s of l(this,$u).values())s.editorType===t&&s.show(e);((null==(i=l(this,vp))?void 0:i.get(kh.HIGHLIGHT_SHOW_ALL))??!0)!==e&&u(this,lf,hf).call(this,[[kh.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(l(this,hp)!==t){c(this,hp,t);for(const e of l(this,Uu).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of l(this,$u).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return l(this,$u).get(t)}addEditor(t){l(this,$u).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(l(this,sp)&&clearTimeout(l(this,sp)),c(this,sp,setTimeout((()=>{this.focusMainContainer(),c(this,sp,null)}),0))),l(this,$u).delete(t.id),this.unselect(t),(!t.annotationElementId||!l(this,Qu).has(t.annotationElementId))&&(null==(e=l(this,qu))||e.remove(t.id))}addDeletedAnnotationElement(t){l(this,Qu).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,Qu).has(t)}removeDeletedAnnotationElement(t){l(this,Qu).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,Vu)!==t&&(c(this,Vu,t),t&&u(this,lf,hf).call(this,t.propertiesToUpdate))}updateUI(t){l(this,mf,vf)===t&&u(this,lf,hf).call(this,t.propertiesToUpdate)}toggleSelected(t){if(l(this,fp).has(t))return l(this,fp).delete(t),t.unselect(),void u(this,af,of).call(this,{hasSelectedEditor:this.hasSelection});l(this,fp).add(t),t.select(),u(this,lf,hf).call(this,t.propertiesToUpdate),u(this,af,of).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of l(this,fp))e!==t&&e.unselect();l(this,fp).clear(),l(this,fp).add(t),t.select(),u(this,lf,hf).call(this,t.propertiesToUpdate),u(this,af,of).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,fp).has(t)}get firstSelectedEditor(){return l(this,fp).values().next().value}unselect(t){t.unselect(),l(this,fp).delete(t),u(this,af,of).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==l(this,fp).size}get isEnterHandled(){return 1===l(this,fp).size&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Xu).undo(),u(this,af,of).call(this,{hasSomethingToUndo:l(this,Xu).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:u(this,bf,yf).call(this)})}redo(){l(this,Xu).redo(),u(this,af,of).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Xu).hasSomethingToRedo(),isEmpty:u(this,bf,yf).call(this)})}addCommands(t){l(this,Xu).add(t),u(this,af,of).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:u(this,bf,yf).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...l(this,fp)];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)u(this,ff,gf).call(this,e)},mustExec:!0})}commitOrRemove(){var t;null==(t=l(this,Vu))||t.commitOrRemove()}hasSomethingToControl(){return l(this,Vu)||this.hasSelection}selectAll(){for(const t of l(this,fp))t.commit();u(this,_f,wf).call(this,l(this,$u).values())}unselectAll(){if((!l(this,Vu)||(l(this,Vu).commitOrRemove(),l(this,pp)===Eh.NONE))&&this.hasSelection){for(const t of l(this,fp))t.unselect();l(this,fp).clear(),u(this,af,of).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;l(this,Dp)[0]+=t,l(this,Dp)[1]+=e;const[i,s]=l(this,Dp),n=[...l(this,fp)];l(this,Rp)&&clearTimeout(l(this,Rp)),c(this,Rp,setTimeout((()=>{c(this,Rp,null),l(this,Dp)[0]=l(this,Dp)[1]=0,this.addCommands({cmd:()=>{for(const t of n)l(this,$u).has(t.id)&&t.translateInPage(i,s)},undo:()=>{for(const t of n)l(this,$u).has(t.id)&&t.translateInPage(-i,-s)},mustExec:!1})}),1e3));for(const r of n)r.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),c(this,Ju,new Map);for(const t of l(this,fp))l(this,Ju).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ju))return!1;this.disableUserSelect(!1);const t=l(this,Ju);c(this,Ju,null);let e=!1;for(const[{x:s,y:n,pageIndex:r},a]of t)a.newX=s,a.newY=n,a.newPageIndex=r,e||(e=s!==a.savedX||n!==a.savedY||r!==a.savedPageIndex);if(!e)return!1;const i=(t,e,i,s)=>{if(l(this,$u).has(t.id)){const n=l(this,Uu).get(s);n?t._setParentAndPosition(n,e,i):(t.pageIndex=s,t.x=e,t.y=i)}};return this.addCommands({cmd:()=>{for(const[e,{newX:s,newY:n,newPageIndex:r}]of t)i(e,s,n,r)},undo:()=>{for(const[e,{savedX:s,savedY:n,savedPageIndex:r}]of t)i(e,s,n,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,Ju))for(const i of l(this,Ju).keys())i.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return(null==(t=this.getActive())?void 0:t.shouldGetKeyboardEvents())||1===l(this,fp).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,Vu)===t}getActive(){return l(this,Vu)}getMode(){return l(this,pp)}get imageManager(){return fc(this,"imageManager",new Ru)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,h=e.rangeCount;l<h;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:i,y:s,width:n,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-s)/r,y:1-(t+a-i)/n,width:o/r,height:a/n});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-i)/n,y:1-(e+o-s)/r,width:a/n,height:o/r});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-s)/r,y:(t-i)/n,width:o/r,height:a/n});break;default:a=(t,e,a,o)=>({x:(t-i)/n,y:(e-s)/r,width:a/n,height:o/r})}const o=[];for(let l=0,h=e.rangeCount;l<h;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:i,width:s,height:n}of t.getClientRects())0===s||0===n||o.push(a(e,i,s,n))}return 0===o.length?null:o}addChangedExistingAnnotation(t){let{annotationElementId:e,id:i}=t;(l(this,Yu)||c(this,Yu,new Map)).set(e,i)}removeChangedExistingAnnotation(t){let{annotationElementId:e}=t;var i;null==(i=l(this,Yu))||i.delete(e)}renderAnnotationElement(t){var e;const i=null==(e=l(this,Yu))?void 0:e.get(t.data.id);if(!i)return;const s=l(this,qu).getRawValue(i);s&&(l(this,pp)===Eh.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};Vu=new WeakMap,$u=new WeakMap,Uu=new WeakMap,Gu=new WeakMap,qu=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,Ku=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,tp=new WeakMap,ep=new WeakMap,ip=new WeakMap,sp=new WeakMap,np=new WeakMap,rp=new WeakMap,ap=new WeakMap,op=new WeakMap,lp=new WeakMap,hp=new WeakMap,cp=new WeakMap,dp=new WeakMap,up=new WeakMap,pp=new WeakMap,fp=new WeakMap,gp=new WeakMap,mp=new WeakMap,vp=new WeakMap,bp=new WeakMap,yp=new WeakMap,_p=new WeakMap,wp=new WeakMap,xp=new WeakMap,Ap=new WeakMap,Ep=new WeakMap,kp=new WeakMap,Sp=new WeakMap,Cp=new WeakMap,Pp=new WeakMap,Tp=new WeakMap,Mp=new WeakMap,Dp=new WeakMap,Rp=new WeakMap,Lp=new WeakMap,Op=new WeakMap,Ip=new WeakSet,Fp=function(t){let{anchorNode:e}=t;return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Np=new WeakSet,jp=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=u(this,Ip,Fp).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(e);i&&(l(this,ap)||c(this,ap,new Pu(this)),l(this,ap).show(e,i,"ltr"===this.direction))},Bp=new WeakSet,Hp=function(){var t,e,i;const s=document.getSelection();if(!s||s.isCollapsed)return void(l(this,gp)&&(null==(t=l(this,ap))||t.hide(),c(this,gp,null),u(this,af,of).call(this,{hasSelectedText:!1})));const{anchorNode:n}=s;if(n!==l(this,gp))if(u(this,Ip,Fp).call(this,s).closest(".textLayer")){if(null==(i=l(this,ap))||i.hide(),c(this,gp,n),u(this,af,of).call(this,{hasSelectedText:!0}),(l(this,pp)===Eh.HIGHLIGHT||l(this,pp)===Eh.NONE)&&(l(this,pp)===Eh.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),c(this,rp,this.isShiftKeyDown),!this.isShiftKeyDown)){const t=e=>{"pointerup"===e.type&&0!==e.button||(window.removeEventListener("pointerup",t),window.removeEventListener("blur",t),"pointerup"===e.type&&u(this,Wp,zp).call(this,"main_toolbar"))};window.addEventListener("pointerup",t),window.addEventListener("blur",t)}}else l(this,gp)&&(null==(e=l(this,ap))||e.hide(),c(this,gp,null),u(this,af,of).call(this,{hasSelectedText:!1}))},Wp=new WeakSet,zp=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";l(this,pp)===Eh.HIGHLIGHT?this.highlightSelection(t):l(this,ep)&&u(this,Np,jp).call(this)},Vp=new WeakSet,$p=function(){document.addEventListener("selectionchange",l(this,Pp))},Up=new WeakSet,Gp=function(){document.removeEventListener("selectionchange",l(this,Pp))},qp=new WeakSet,Yp=function(){window.addEventListener("focus",l(this,yp)),window.addEventListener("blur",l(this,bp))},Xp=new WeakSet,Kp=function(){window.removeEventListener("focus",l(this,yp)),window.removeEventListener("blur",l(this,bp))},Qp=new WeakSet,Jp=function(){window.addEventListener("keydown",l(this,Ap)),window.addEventListener("keyup",l(this,Ep))},Zp=new WeakSet,tf=function(){window.removeEventListener("keydown",l(this,Ap)),window.removeEventListener("keyup",l(this,Ep))},ef=new WeakSet,sf=function(){document.addEventListener("copy",l(this,_p)),document.addEventListener("cut",l(this,wp)),document.addEventListener("paste",l(this,xp))},nf=new WeakSet,rf=function(){document.removeEventListener("copy",l(this,_p)),document.removeEventListener("cut",l(this,wp)),document.removeEventListener("paste",l(this,xp))},af=new WeakSet,of=function(t){Object.entries(t).some((t=>{let[e,i]=t;return l(this,Mp)[e]!==i}))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Mp),t)}),l(this,pp)===Eh.HIGHLIGHT&&!1===t.hasSelectedEditor&&u(this,lf,hf).call(this,[[kh.HIGHLIGHT_FREE,!0]]))},lf=new WeakSet,hf=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},cf=new WeakSet,df=function(){if(!l(this,lp)){c(this,lp,!0);for(const t of l(this,Uu).values())t.enable();for(const t of l(this,$u).values())t.enable()}},uf=new WeakSet,pf=function(){if(this.unselectAll(),l(this,lp)){c(this,lp,!1);for(const t of l(this,Uu).values())t.disable();for(const t of l(this,$u).values())t.disable()}},ff=new WeakSet,gf=function(t){const e=l(this,Uu).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},mf=new WeakSet,vf=function(){let t=null;for(t of l(this,fp));return t},bf=new WeakSet,yf=function(){if(0===l(this,$u).size)return!0;if(1===l(this,$u).size)for(const t of l(this,$u).values())return t.isEmpty();return!1},_f=new WeakSet,wf=function(t){for(const e of l(this,fp))e.unselect();l(this,fp).clear();for(const e of t)e.isEmpty()||(l(this,fp).add(e),e.select());u(this,af,of).call(this,{hasSelectedEditor:this.hasSelection})},a(xf,"TRANSLATE_SMALL",1),a(xf,"TRANSLATE_BIG",10);let Af=xf;var Ef,kf,Sf,Cf,Pf,Tf,Mf,Df,Rf;const Lf=class t{constructor(t){h(this,Df),h(this,Ef,""),h(this,kf,!1),h(this,Sf,null),h(this,Cf,null),h(this,Pf,null),h(this,Tf,!1),h(this,Mf,null),c(this,Mf,t)}static initialize(e){t._l10nPromise||(t._l10nPromise=e)}async render(){const e=c(this,Sf,document.createElement("button"));e.className="altText";const i=await t._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=i,e.setAttribute("aria-label",i),e.tabIndex="0",e.addEventListener("contextmenu",Hd),e.addEventListener("pointerdown",(t=>t.stopPropagation()));const s=t=>{t.preventDefault(),l(this,Mf)._uiManager.editAltText(l(this,Mf))};return e.addEventListener("click",s,{capture:!0}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(c(this,Tf,!0),s(t))})),await u(this,Df,Rf).call(this),e}finish(){l(this,Sf)&&(l(this,Sf).focus({focusVisible:l(this,Tf)}),c(this,Tf,!1))}isEmpty(){return!l(this,Ef)&&!l(this,kf)}get data(){return{altText:l(this,Ef),decorative:l(this,kf)}}set data(t){let{altText:e,decorative:i}=t;l(this,Ef)===e&&l(this,kf)===i||(c(this,Ef,e),c(this,kf,i),u(this,Df,Rf).call(this))}toggle(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l(this,Sf)&&(!t&&l(this,Pf)&&(clearTimeout(l(this,Pf)),c(this,Pf,null)),l(this,Sf).disabled=!t)}destroy(){var t;null==(t=l(this,Sf))||t.remove(),c(this,Sf,null),c(this,Cf,null)}};Ef=new WeakMap,kf=new WeakMap,Sf=new WeakMap,Cf=new WeakMap,Pf=new WeakMap,Tf=new WeakMap,Mf=new WeakMap,Df=new WeakSet,Rf=async function(){var t;const e=l(this,Sf);if(!e)return;if(!l(this,Ef)&&!l(this,kf))return e.classList.remove("done"),void(null==(t=l(this,Cf))||t.remove());e.classList.add("done"),Lf._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((t=>{e.setAttribute("aria-label",t)}));let i=l(this,Cf);if(!i){c(this,Cf,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip");const t=i.id=`alt-text-tooltip-${l(this,Mf).id}`;e.setAttribute("aria-describedby",t);const s=100;e.addEventListener("mouseenter",(()=>{c(this,Pf,setTimeout((()=>{c(this,Pf,null),l(this,Cf).classList.add("show"),l(this,Mf)._reportTelemetry({action:"alt_text_tooltip"})}),s))})),e.addEventListener("mouseleave",(()=>{var t;l(this,Pf)&&(clearTimeout(l(this,Pf)),c(this,Pf,null)),null==(t=l(this,Cf))||t.classList.remove("show")}))}i.innerText=l(this,kf)?await Lf._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):l(this,Ef),i.parentNode||e.append(i);const s=l(this,Mf).getImageForAltText();null==s||s.setAttribute("aria-describedby",i.id)},a(Lf,"_l10nPromise",null);let Of=Lf;var If,Ff,Nf,jf,Bf,Hf,Wf,zf,Vf,$f,Uf,Gf,qf,Yf,Xf,Kf,Qf,Jf,Zf,tg,eg,ig,sg,ng,rg,ag,og,lg,hg,cg,dg,ug,pg,fg,gg,mg,vg,bg,yg,_g,wg,xg,Ag,Eg,kg,Sg,Cg,Pg,Tg;const Mg=class t{constructor(e){h(this,ig),h(this,ag),h(this,lg),h(this,cg),h(this,ug),h(this,fg),h(this,mg),h(this,bg),h(this,_g),h(this,xg),h(this,Eg),h(this,Sg),h(this,Pg),h(this,If,null),h(this,Ff,null),h(this,Nf,!1),h(this,jf,!1),h(this,Bf,null),h(this,Hf,null),h(this,Wf,this.focusin.bind(this)),h(this,zf,this.focusout.bind(this)),h(this,Vf,null),h(this,$f,""),h(this,Uf,!1),h(this,Gf,null),h(this,qf,!1),h(this,Yf,!1),h(this,Xf,!1),h(this,Kf,null),h(this,Qf,0),h(this,Jf,0),h(this,Zf,null),a(this,"_initialOptions",Object.create(null)),a(this,"_isVisible",!0),a(this,"_uiManager",null),a(this,"_focusEventsAllowed",!0),a(this,"_l10nPromise",null),h(this,tg,!1),h(this,eg,t._zIndex++),this.constructor===t&&dc("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:i,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=t.prototype._resizeWithKeyboard,i=Af.TRANSLATE_SMALL,s=Af.TRANSLATE_BIG;return fc(this,"_resizerKeyboardManager",new Hu([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],t.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return fc(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Rg({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(e,i,s){if(t._l10nPromise||(t._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((t=>[t,e.get(t.replaceAll(/([A-Z])/g,(t=>`-${t.toLowerCase()}`)))])))),null!=s&&s.strings)for(const r of s.strings)t._l10nPromise.set(r,e.get(r));if(-1!==t._borderLineWidth)return;const n=getComputedStyle(document.documentElement);t._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){dc("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,tg)}set _isDraggable(t){var e;c(this,tg,t),null==(e=this.div)||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,eg)}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):u(this,Pg,Tg).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Uf)?c(this,Uf,!1):this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const i=t.relatedTarget;null!=i&&i.closest(`#${this.id}`)||(t.preventDefault(),null!=(e=this.parent)&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[n,r]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/n,this.y=(e+s)/r,this.fixAndSetPosition()}translate(t,e){u(this,ig,sg).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,Gf)||c(this,Gf,[this.x,this.y]),u(this,ig,sg).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){l(this,Gf)||c(this,Gf,[this.x,this.y]);const[i,s]=this.parentDimensions;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:n,y:r}=this;const[a,o]=this.getBaseTranslation();n+=a,r+=o,this.div.style.left=`${(100*n).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Gf)&&(l(this,Gf)[0]!==this.x||l(this,Gf)[1]!==this.y)}getBaseTranslation(){const[e,i]=this.parentDimensions,{_borderLineWidth:s}=t,n=s/e,r=s/i;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[e,i]=this.pageDimensions;let{x:s,y:n,width:r,height:a}=this;if(r*=e,a*=i,s*=e,n*=i,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-r,s)),n=Math.max(0,Math.min(i-a,n));break;case 90:s=Math.max(0,Math.min(e-a,s)),n=Math.min(i,Math.max(r,n));break;case 180:s=Math.min(e,Math.max(r,s)),n=Math.min(i,Math.max(a,n));break;case 270:s=Math.min(e,Math.max(a,s)),n=Math.max(0,Math.min(i-r,n))}this.x=s/=e,this.y=n/=i;const[o,l]=this.getBaseTranslation();s+=o,n+=l;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*n).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,i){var s;return u(s=t,ng,rg).call(s,e,i,this.parentRotation)}pageTranslationToScreen(e,i){var s;return u(s=t,ng,rg).call(s,e,i,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,s=e*t,n=i*t;return Sc.isCSSRoundSupported?[Math.round(s),Math.round(n)]:[s,n]}setDims(t,e){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,l(this,jf)||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),n=!l(this,jf)&&e.endsWith("%");if(s&&n)return;const[r,a]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),!l(this,jf)&&!n&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;null==(t=l(this,Ff))||t.finish()}async addEditToolbar(){return l(this,Vf)||l(this,Yf)||(c(this,Vf,new uu(this)),this.div.append(l(this,Vf).render()),l(this,Ff)&&l(this,Vf).addAltTextButton(await l(this,Ff).render())),l(this,Vf)}removeEditToolbar(){var t;l(this,Vf)&&(l(this,Vf).remove(),c(this,Vf,null),null==(t=l(this,Ff))||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Ff)||(Of.initialize(t._l10nPromise),c(this,Ff,new Of(this)),await this.addEditToolbar())}get altTextData(){var t;return null==(t=l(this,Ff))?void 0:t.data}set altTextData(t){l(this,Ff)&&(l(this,Ff).data=t)}hasAltText(){var t;return!(null!=(t=l(this,Ff))&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Nf)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",l(this,Wf)),this.div.addEventListener("focusout",l(this,zf));const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),Tu(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Sc.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(c(this,Uf,!0),this._isDraggable?u(this,bg,yg).call(this,t):u(this,mg,vg).call(this,t))}moveInDOM(){l(this,Kf)&&clearTimeout(l(this,Kf)),c(this,Kf,setTimeout((()=>{var t;c(this,Kf,null),null==(t=this.parent)||t.moveEditorInDOM(this)}),0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const s=this.parentScale,[n,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/s,h=e/s,c=this.x*n,d=this.y*r,u=this.width*n,p=this.height*r;switch(i){case 0:return[c+l+a,r-d-h-p+o,c+l+u+a,r-d-h+o];case 90:return[c+h+a,r-d+l+o,c+h+p+a,r-d+l+u+o];case 180:return[c-l-u+a,r-d+h+o,c-l+a,r-d+h+p+o];case 270:return[c-h-p+a,r-d-l-u+o,c-h+a,r-d-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,n,r]=t,a=n-i,o=r-s;switch(this.rotation){case 0:return[i,e-r,a,o];case 90:return[i,e-s,o,a];case 180:return[n,e-s,a,o];case 270:return[n,e-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){c(this,Yf,!0)}disableEditMode(){c(this,Yf,!1)}isInEditMode(){return l(this,Yf)}shouldGetKeyboardEvents(){return l(this,Xf)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,e;null==(t=this.div)||t.addEventListener("focusin",l(this,Wf)),null==(e=this.div)||e.addEventListener("focusout",l(this,zf))}rotate(t){}serialize(){dc("An editor must be serializable")}static deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation;const[n,r]=s.pageDimensions,[a,o,l,h]=s.getRectInCurrentCoords(t.rect,r);return s.x=a/n,s.y=o/r,s.width=l/n,s.height=h/r,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",l(this,Wf)),this.div.removeEventListener("focusout",l(this,zf)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Kf)&&(clearTimeout(l(this,Kf)),c(this,Kf,null)),u(this,Pg,Tg).call(this),this.removeEditToolbar(),l(this,Zf)){for(const t of l(this,Zf).values())clearTimeout(t);c(this,Zf,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(u(this,lg,hg).call(this),l(this,Bf).classList.remove("hidden"),Tu(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),c(this,Hf,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const i=l(this,Bf).children;if(!l(this,If)){c(this,If,Array.from(i));const e=u(this,_g,wg).bind(this),s=u(this,xg,Ag).bind(this);for(const i of l(this,If)){const n=i.getAttribute("data-resizer-name");i.setAttribute("role","spinbutton"),i.addEventListener("keydown",e),i.addEventListener("blur",s),i.addEventListener("focus",u(this,Eg,kg).bind(this,n)),t._l10nPromise.get(`pdfjs-editor-resizer-label-${n}`).then((t=>i.setAttribute("aria-label",t)))}}const s=l(this,If)[0];let n=0;for(const t of i){if(t===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,If).length/4);if(r!==n){if(r<n)for(let t=0;t<n-r;t++)l(this,Bf).append(l(this,Bf).firstChild);else if(r>n)for(let t=0;t<r-n;t++)l(this,Bf).firstChild.before(l(this,Bf).lastChild);let e=0;for(const s of i){const i=l(this,If)[e++].getAttribute("data-resizer-name");t._l10nPromise.get(`pdfjs-editor-resizer-label-${i}`).then((t=>s.setAttribute("aria-label",t)))}}u(this,Sg,Cg).call(this,0),c(this,Xf,!0),l(this,Bf).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Xf)&&u(this,fg,gg).call(this,l(this,$f),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){u(this,Pg,Tg).call(this),this.div.focus()}select(){var t,e;this.makeResizable(),null==(t=this.div)||t.classList.add("selectedEditor"),l(this,Vf)?null==(e=l(this,Vf))||e.show():this.addEditToolbar().then((()=>{var t,e;null!=(t=this.div)&&t.classList.contains("selectedEditor")&&(null==(e=l(this,Vf))||e.show())}))}unselect(){var t,e,i,s;null==(t=l(this,Bf))||t.classList.add("hidden"),null==(e=this.div)||e.classList.remove("selectedEditor"),null!=(i=this.div)&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null==(s=l(this,Vf))||s.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,qf)}set isEditing(t){c(this,qf,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){c(this,jf,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){l(this,Zf)||c(this,Zf,new Map);const{action:i}=e;let s=l(this,Zf).get(i);return s&&clearTimeout(s),s=setTimeout((()=>{this._reportTelemetry(e),l(this,Zf).delete(i),0===l(this,Zf).size&&c(this,Zf,null)}),t._telemetryTimeout),void l(this,Zf).set(i,s)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),c(this,Nf,!1)}disable(){this.div&&(this.div.tabIndex=-1),c(this,Nf,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===e.nodeName&&e.classList.contains("annotationContent")&&e.remove()}};If=new WeakMap,Ff=new WeakMap,Nf=new WeakMap,jf=new WeakMap,Bf=new WeakMap,Hf=new WeakMap,Wf=new WeakMap,zf=new WeakMap,Vf=new WeakMap,$f=new WeakMap,Uf=new WeakMap,Gf=new WeakMap,qf=new WeakMap,Yf=new WeakMap,Xf=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,tg=new WeakMap,eg=new WeakMap,ig=new WeakSet,sg=function(t,e,i){let[s,n]=t;[e,i]=this.screenToPageTranslation(e,i),this.x+=e/s,this.y+=i/n,this.fixAndSetPosition()},ng=new WeakSet,rg=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},ag=new WeakSet,og=function(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}},lg=new WeakSet,hg=function(){if(l(this,Bf))return;c(this,Bf,document.createElement("div")),l(this,Bf).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const e of t){const t=document.createElement("div");l(this,Bf).append(t),t.classList.add("resizer",e),t.setAttribute("data-resizer-name",e),t.addEventListener("pointerdown",u(this,cg,dg).bind(this,e)),t.addEventListener("contextmenu",Hd),t.tabIndex=-1}this.div.prepend(l(this,Bf))},cg=new WeakSet,dg=function(t,e){var i;e.preventDefault();const{isMac:s}=Sc.platform;if(0!==e.button||e.ctrlKey&&s)return;null==(i=l(this,Ff))||i.toggle(!1);const n=u(this,fg,gg).bind(this,t),r=this._isDraggable;this._isDraggable=!1;const a={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",n,a),window.addEventListener("contextmenu",Hd);const o=this.x,h=this.y,c=this.width,d=this.height,p=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const g=()=>{var t;this.parent.togglePointerEvents(!0),null==(t=l(this,Ff))||t.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",n,a),window.removeEventListener("contextmenu",Hd),this.parent.div.style.cursor=p,this.div.style.cursor=f,u(this,ug,pg).call(this,o,h,c,d)};window.addEventListener("pointerup",g),window.addEventListener("blur",g)},ug=new WeakSet,pg=function(t,e,i,s){const n=this.x,r=this.y,a=this.width,o=this.height;n===t&&r===e&&a===i&&o===s||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=n,this.y=r;const[t,e]=this.parentDimensions;this.setDims(t*a,e*o),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=t,this.y=e;const[n,r]=this.parentDimensions;this.setDims(n*i,r*s),this.fixAndSetPosition()},mustExec:!0})},fg=new WeakSet,gg=function(t,e){const[i,s]=this.parentDimensions,n=this.x,r=this.y,a=this.width,o=this.height,l=Mg.MIN_SIZE/i,h=Mg.MIN_SIZE/s,c=t=>Math.round(1e4*t)/1e4,d=u(this,ag,og).call(this,this.rotation),p=(t,e)=>[d[0]*t+d[2]*e,d[1]*t+d[3]*e],f=u(this,ag,og).call(this,360-this.rotation);let g,m,v=!1,b=!1;switch(t){case"topLeft":v=!0,g=(t,e)=>[0,0],m=(t,e)=>[t,e];break;case"topMiddle":g=(t,e)=>[t/2,0],m=(t,e)=>[t/2,e];break;case"topRight":v=!0,g=(t,e)=>[t,0],m=(t,e)=>[0,e];break;case"middleRight":b=!0,g=(t,e)=>[t,e/2],m=(t,e)=>[0,e/2];break;case"bottomRight":v=!0,g=(t,e)=>[t,e],m=(t,e)=>[0,0];break;case"bottomMiddle":g=(t,e)=>[t/2,e],m=(t,e)=>[t/2,0];break;case"bottomLeft":v=!0,g=(t,e)=>[0,e],m=(t,e)=>[t,0];break;case"middleLeft":b=!0,g=(t,e)=>[0,e/2],m=(t,e)=>[t,e/2]}const y=g(a,o),_=m(a,o);let w=p(..._);const x=c(n+w[0]),A=c(r+w[1]);let E=1,k=1,[S,C]=this.screenToPageTranslation(e.movementX,e.movementY);if([S,C]=(P=S/i,T=C/s,[f[0]*P+f[2]*T,f[1]*P+f[3]*T]),v){const t=Math.hypot(a,o);E=k=Math.max(Math.min(Math.hypot(_[0]-y[0]-S,_[1]-y[1]-C)/t,1/a,1/o),l/a,h/o)}else b?E=Math.max(l,Math.min(1,Math.abs(_[0]-y[0]-S)))/a:k=Math.max(h,Math.min(1,Math.abs(_[1]-y[1]-C)))/o;var P,T;const M=c(a*E),D=c(o*k);w=p(...m(M,D));const R=x-w[0],L=A-w[1];this.width=M,this.height=D,this.x=R,this.y=L,this.setDims(i*M,s*D),this.fixAndSetPosition()},mg=new WeakSet,vg=function(t){const{isMac:e}=Sc.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},bg=new WeakSet,yg=function(t){const e=this._uiManager.isSelected(this);let i,s;this._uiManager.setUpDragSession(),e&&(this.div.classList.add("moving"),i={passive:!0,capture:!0},c(this,Qf,t.clientX),c(this,Jf,t.clientY),s=t=>{const{clientX:e,clientY:i}=t,[s,n]=this.screenToPageTranslation(e-l(this,Qf),i-l(this,Jf));c(this,Qf,e),c(this,Jf,i),this._uiManager.dragSelectedEditors(s,n)},window.addEventListener("pointermove",s,i));const n=()=>{window.removeEventListener("pointerup",n),window.removeEventListener("blur",n),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,i)),c(this,Uf,!1),this._uiManager.endDragSession()||u(this,mg,vg).call(this,t)};window.addEventListener("pointerup",n),window.addEventListener("blur",n)},_g=new WeakSet,wg=function(t){Mg._resizerKeyboardManager.exec(this,t)},xg=new WeakSet,Ag=function(t){var e;l(this,Xf)&&(null==(e=t.relatedTarget)?void 0:e.parentNode)!==l(this,Bf)&&u(this,Pg,Tg).call(this)},Eg=new WeakSet,kg=function(t){c(this,$f,l(this,Xf)?t:"")},Sg=new WeakSet,Cg=function(t){if(l(this,If))for(const e of l(this,If))e.tabIndex=t},Pg=new WeakSet,Tg=function(){if(c(this,Xf,!1),u(this,Sg,Cg).call(this,-1),l(this,Hf)){const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=l(this,Hf);u(this,ug,pg).call(this,t,e,i,s),c(this,Hf,null)}},h(Mg,ng),a(Mg,"_borderLineWidth",-1),a(Mg,"_colorManager",new zu),a(Mg,"_zIndex",1),a(Mg,"_telemetryTimeout",1e3);let Dg=Mg;class Rg extends Dg{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Lg=3285377520,Og=4294901760,Ig=65535;class Fg{constructor(t){this.h1=t?4294967295&t:Lg,this.h2=t?4294967295&t:Lg}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let s=0,n=t.length;s<n;s++){const n=t.charCodeAt(s);n<=255?e[i++]=n:(e[i++]=n>>>8,e[i++]=255&n)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),i=e.byteLength}const s=i>>2,n=i-4*s,r=new Uint32Array(e.buffer,0,s);let a=0,o=0,l=this.h1,h=this.h2;const c=3432918353,d=461845907,u=c&Ig,p=d&Ig;for(let f=0;f<s;f++)1&f?(a=r[f],a=a*c&Og|a*u&Ig,a=a<<15|a>>>17,a=a*d&Og|a*p&Ig,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[f],o=o*c&Og|o*u&Ig,o=o<<15|o>>>17,o=o*d&Og|o*p&Ig,h^=o,h=h<<13|h>>>19,h=5*h+3864292196);switch(a=0,n){case 3:a^=e[4*s+2]<<16;case 2:a^=e[4*s+1]<<8;case 1:a^=e[4*s],a=a*c&Og|a*u&Ig,a=a<<15|a>>>17,a=a*d&Og|a*p&Ig,1&s?l^=a:h^=a}this.h1=l,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&Og|36045*t&Ig,e=4283543511*e&Og|(2950163797*(e<<16|t>>>16)&Og)>>>16,t^=e>>>1,t=444984403*t&Og|60499*t&Ig,e=3301882366*e&Og|(3120437893*(e<<16|t>>>16)&Og)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ng=Object.freeze({map:null,hash:"",transfer:void 0});var jg,Bg,Hg,Wg,zg,Vg;class $g{constructor(){h(this,Hg),h(this,jg,!1),h(this,Bg,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=l(this,Bg).get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return l(this,Bg).get(t)}remove(t){if(l(this,Bg).delete(t),0===l(this,Bg).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of l(this,Bg).values())if(t instanceof Dg)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=l(this,Bg).get(t);let s=!1;if(void 0!==i)for(const[n,r]of Object.entries(e))i[n]!==r&&(s=!0,i[n]=r);else s=!0,l(this,Bg).set(t,e);s&&u(this,Hg,Wg).call(this),e instanceof Dg&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return l(this,Bg).has(t)}getAll(){return l(this,Bg).size>0?kc(l(this,Bg)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return l(this,Bg).size}resetModified(){l(this,jg)&&(c(this,jg,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new Ug(this)}get serializable(){if(0===l(this,Bg).size)return Ng;const t=new Map,e=new Fg,i=[],s=Object.create(null);let n=!1;for(const[r,a]of l(this,Bg)){const i=a instanceof Dg?a.serialize(!1,s):a;i&&(t.set(r,i),e.update(`${r}:${JSON.stringify(i)}`),n||(n=!!i.bitmap))}if(n)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Ng}get editorStats(){let t=null;const e=new Map;for(const i of l(this,Bg).values()){if(!(i instanceof Dg))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:n}=s;e.has(n)||e.set(n,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const r=t[n]||(t[n]=new Map);for(const[t,e]of Object.entries(s)){if("type"===t)continue;let i=r.get(t);i||(i=new Map,r.set(t,i));const s=i.get(e)??0;i.set(e,s+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}}jg=new WeakMap,Bg=new WeakMap,Hg=new WeakSet,Wg=function(){l(this,jg)||(c(this,jg,!0),"function"==typeof this.onSetModified&&this.onSetModified())};class Ug extends $g{constructor(t){super(),h(this,zg,void 0);const{map:e,hash:i,transfer:s}=t.serializable,n=structuredClone(e,s?{transfer:s}:null);c(this,zg,{map:n,hash:i,transfer:s})}get print(){dc("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,zg)}}zg=new WeakMap;class Gg{constructor(t){let{ownerDocument:e=globalThis.document,styleElement:i=null}=t;h(this,Vg,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,Vg).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){let{systemFontInfo:e,_inspectFont:i}=t;if(e&&!l(this,Vg).has(e.loadedName)){if(uc(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:s,style:n}=e,r=new FontFace(t,s,n);this.addNativeFontFace(r);try{await r.load(),l(this,Vg).add(t),null==i||i(e)}catch{cc(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}dc("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw cc(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((e=>{const i=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,i)}))}}get isFontLoadingAPISupported(){var t;return fc(this,"isFontLoadingAPISupported",!(null==(t=this._document)||!t.fonts))}get isSyncFontLoadingSupported(){let t=!1;return(uh||typeof navigator<"u"&&"string"==typeof(null==navigator?void 0:navigator.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),fc(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const{loadingRequests:e}=this,i={done:!1,complete:function(){for(uc(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(i),i}get _loadTestFont(){return fc(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function i(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function s(t,e,i,s){return t.substring(0,e)+s+t.substring(e+i)}let n,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=s(c,976,h.length,h);const d=1482184792;let u=i(c,16);for(n=0,r=h.length-3;n<r;n+=4)u=u-d+i(h,n)|0;var p;n<h.length&&(u=u-d+i(h+"XXX",n)|0),c=s(c,16,4,(p=u,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f=`@font-face {font-family:"${h}";src:${`url(data:font/opentype;base64,${btoa(c)});`}}`;this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const m of[t.loadedName,h]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=m,g.append(t)}this._document.body.append(g),function t(e,i){if(++l>30)return cc("Load test font never loaded."),void i();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(h,(()=>{g.remove(),e.complete()}))}}Vg=new WeakMap;class qg{constructor(t,e){let{disableFontFace:i=!1,inspectFont:s=null}=e;this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=!0===i,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return null==(t=this._inspectFont)||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e=Ac(this.data),i=`url(data:${this.mimetype};base64,${btoa(e)});`;let s;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${i}}`}else s=`@font-face {font-family:"${this.loadedName}";src:${i}}`;return null==(t=this._inspectFont)||t.call(this,this,i),s}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(n){cc(`getPathGenerator - ignoring character: "${n}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[e]=function(t,e){};const s=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case Nc:{const[t,e,n,a,o,l]=i.slice(r,r+6);s.push((i=>i.bezierCurveTo(t,e,n,a,o,l))),r+=6}break;case jc:{const[t,e]=i.slice(r,r+2);s.push((i=>i.moveTo(t,e))),r+=2}break;case Bc:{const[t,e]=i.slice(r,r+2);s.push((i=>i.lineTo(t,e))),r+=2}break;case Hc:{const[t,e,n,a]=i.slice(r,r+4);s.push((i=>i.quadraticCurveTo(t,e,n,a))),r+=4}break;case Wc:s.push((t=>t.restore()));break;case zc:s.push((t=>t.save()));break;case Vc:uc(2===s.length,"Scale command is only valid at the third position.");break;case $c:{const[t,e,n,a,o,l]=i.slice(r,r+6);s.push((i=>i.transform(t,e,n,a,o,l))),r+=6}break;case Uc:{const[t,e]=i.slice(r,r+2);s.push((i=>i.translate(t,e))),r+=2}}return this.compiledGlyphs[e]=function(t,e){s[0](t),s[1](t),t.scale(e,-e);for(let i=2,n=s.length;i<n;i++)s[i](t)}}}if(uh){var Yg=Promise.withResolvers(),Xg=null;(async()=>{const t=await import("./empty-GlqisfcO.js"),e=await import("./index-4HENfCPg.js").then((t=>t.i)),i=await import("./index-BepDdkdq.js").then((t=>t.i)),s=await import("./url-DQYFKQ_E.js").then((t=>t.u));return new Map(Object.entries({fs:t,http:e,https:i,url:s,canvas:undefined,path2d:undefined}))})().then((t=>{Xg=t,Yg.resolve()}),(t=>{cc(`loadPackages: ${t}`),Xg=new Map,Yg.resolve()}))}class Kg{static get promise(){return Yg.promise}static get(t){return null==Xg?void 0:Xg.get(t)}}const Qg=function(t){return Kg.get("fs").promises.readFile(t).then((t=>new Uint8Array(t)))};const Jg="Fill",Zg="Stroke",tm="Shading";function em(t,e){if(!e)return;const i=e[2]-e[0],s=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],i,s),t.clip(n)}class im{constructor(){this.constructor===im&&dc("Cannot initialize BaseShadingPattern.")}getPattern(){dc("Abstract method `getPattern` called.")}}class sm extends im{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let n;if(s===Zg||s===Jg){const r=e.current.getClippedPathBoundingBox(s,Gd(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o,!0),h=l.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-r[0],-r[1]),i=Rc.transform(i,[1,0,0,1,r[0],r[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),em(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),n=t.createPattern(l.canvas,"no-repeat");const c=new DOMMatrix(i);n.setTransform(c)}else em(t,this._bbox),n=this._createGradient(t);return n}}function nm(t,e,i,s,n,r,a,o){const l=e.coords,h=e.colors,c=t.data,d=4*t.width;let u;l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=r,r=a,a=u),l[s+1]>l[n+1]&&(u=s,s=n,n=u,u=a,a=o,o=u),l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=r,r=a,a=u);const p=(l[i]+e.offsetX)*e.scaleX,f=(l[i+1]+e.offsetY)*e.scaleY,g=(l[s]+e.offsetX)*e.scaleX,m=(l[s+1]+e.offsetY)*e.scaleY,v=(l[n]+e.offsetX)*e.scaleX,b=(l[n+1]+e.offsetY)*e.scaleY;if(f>=b)return;const y=h[r],_=h[r+1],w=h[r+2],x=h[a],A=h[a+1],E=h[a+2],k=h[o],S=h[o+1],C=h[o+2],P=Math.round(f),T=Math.round(b);let M,D,R,L,O,I,F,N;for(let j=P;j<=T;j++){if(j<m){const t=j<f?0:(f-j)/(f-m);M=p-(p-g)*t,D=y-(y-x)*t,R=_-(_-A)*t,L=w-(w-E)*t}else{let t;t=j>b?1:m===b?0:(m-j)/(m-b),M=g-(g-v)*t,D=x-(x-k)*t,R=A-(A-S)*t,L=E-(E-C)*t}let t;t=j<f?0:j>b?1:(f-j)/(f-b),O=p-(p-v)*t,I=y-(y-k)*t,F=_-(_-S)*t,N=w-(w-C)*t;const e=Math.round(Math.min(M,O)),i=Math.round(Math.max(M,O));let s=d*j+4*e;for(let n=e;n<=i;n++)t=(M-n)/(M-O),t<0?t=0:t>1&&(t=1),c[s++]=D-(D-I)*t|0,c[s++]=R-(R-F)*t|0,c[s++]=L-(L-N)*t|0,c[s++]=255}}function rm(t,e,i){const s=e.coords,n=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(s.length/o)-1,h=o-1;for(r=0;r<l;r++){let e=r*o;for(let r=0;r<h;r++,e++)nm(t,i,s[e],s[e+1],s[e+o],n[e],n[e+1],n[e+o]),nm(t,i,s[e+o+1],s[e+1],s[e+o],n[e+o+1],n[e+1],n[e+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)nm(t,i,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class am extends im{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const s=Math.floor(this._bounds[0]),n=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-s,a=Math.ceil(this._bounds[3])-n,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),h=r/o,c=a/l,d={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-n,scaleX:1/h,scaleY:1/c},u=o+4,p=l+4,f=i.getCanvas("mesh",u,p,!1),g=f.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let i=0,s=t.length;i<s;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const v of this._figures)rm(m,v,d);return g.putImageData(m,2,2),{canvas:f.canvas,offsetX:s-2*h,offsetY:n-2*c,scaleX:h,scaleY:c}}getPattern(t,e,i,s){let n;if(em(t,this._bbox),s===tm)n=Rc.singularValueDecompose2dScale(Gd(t));else if(n=Rc.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=Rc.singularValueDecompose2dScale(this.matrix);n=[n[0]*t[0],n[1]*t[1]]}const r=this._createMeshCanvas(n,s===tm?null:this._background,e.cachedCanvases);return s!==tm&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class om extends im{getPattern(){return"hotpink"}}const lm=1,hm=2,cm=class t{constructor(t,e,i,s,n){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,s=this.xstep,n=this.ystep,r=this.paintType,a=this.tilingType,o=this.color,l=this.canvasGraphicsFactory;hc("TilingType: "+a);const h=i[0],c=i[1],d=i[2],u=i[3],p=Rc.singularValueDecompose2dScale(this.matrix),f=Rc.singularValueDecompose2dScale(this.baseTransform),g=[p[0]*f[0],p[1]*f[1]],m=this.getSizeAndScale(s,this.ctx.canvas.width,g[0]),v=this.getSizeAndScale(n,this.ctx.canvas.height,g[1]),b=t.cachedCanvases.getCanvas("pattern",m.size,v.size,!0),y=b.context,_=l.createCanvasGraphics(y);_.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(_,r,o);let w=h,x=c,A=d,E=u;return h<0&&(w=0,A+=Math.abs(h)),c<0&&(x=0,E+=Math.abs(c)),y.translate(-m.scale*w,-v.scale*x),_.transform(m.scale,0,0,v.scale,0,0),y.save(),this.clipBbox(_,w,x,A,E),_.baseTransform=Gd(_.ctx),_.executeOperatorList(e),_.endDrawing(),{canvas:b.canvas,scaleX:m.scale,scaleY:v.scale,offsetX:w,offsetY:x}}getSizeAndScale(e,i,s){e=Math.abs(e);const n=Math.max(t.MAX_PATTERN_SIZE,i);let r=Math.ceil(e*s);return r>=n?r=n:s=r/e,{scale:s,size:r}}clipBbox(t,e,i,s,n){const r=s-e,a=n-i;t.ctx.rect(e,i,r,a),t.current.updateRectMinMax(Gd(t.ctx),[e,i,s,n]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,n=t.current;switch(e){case lm:const t=this.ctx;s.fillStyle=t.fillStyle,s.strokeStyle=t.strokeStyle,n.fillColor=t.fillStyle,n.strokeColor=t.strokeStyle;break;case hm:const r=Rc.makeHexColor(i[0],i[1],i[2]);s.fillStyle=r,s.strokeStyle=r,n.fillColor=r,n.strokeColor=r;break;default:throw new wc(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,s){let n=i;s!==tm&&(n=Rc.transform(n,e.baseTransform),this.matrix&&(n=Rc.transform(n,this.matrix)));const r=this.createPatternCanvas(e);let a=new DOMMatrix(n);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=t.createPattern(r.canvas,"repeat");return o.setTransform(a),o}};a(cm,"MAX_PATTERN_SIZE",3e3);let dm=cm;function um(t){let{src:e,srcPos:i=0,dest:s,width:n,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}=t;const l=Sc.isLittleEndian?4278190080:255,[h,c]=o?[a,l]:[l,a],d=n>>3,u=7&n,p=e.length;s=new Uint32Array(s.buffer);let f=0;for(let g=0;g<r;g++){for(const n=i+d;i<n;i++){const t=i<p?e[i]:255;s[f++]=128&t?c:h,s[f++]=64&t?c:h,s[f++]=32&t?c:h,s[f++]=16&t?c:h,s[f++]=8&t?c:h,s[f++]=4&t?c:h,s[f++]=2&t?c:h,s[f++]=1&t?c:h}if(0===u)continue;const t=i<p?e[i++]:255;for(let e=0;e<u;e++)s[f++]=t&1<<7-e?c:h}return{srcPos:i,destPos:f}}const pm=16;class fm{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return void 0!==this.cache[t]?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function gm(t,e,i,s,n,r,a,o,l,h){const[c,d,u,p,f,g]=Gd(t);if(0===d&&0===u){const m=a*c+f,v=Math.round(m),b=o*p+g,y=Math.round(b),_=(a+l)*c+f,w=Math.abs(Math.round(_)-v)||1,x=(o+h)*p+g,A=Math.abs(Math.round(x)-y)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(p),v,y),t.drawImage(e,i,s,n,r,0,0,w,A),t.setTransform(c,d,u,p,f,g),[w,A]}if(0===c&&0===p){const m=o*u+f,v=Math.round(m),b=a*d+g,y=Math.round(b),_=(o+h)*u+f,w=Math.abs(Math.round(_)-v)||1,x=(a+l)*d+g,A=Math.abs(Math.round(x)-y)||1;return t.setTransform(0,Math.sign(d),Math.sign(u),0,v,y),t.drawImage(e,i,s,n,r,0,0,A,w),t.setTransform(c,d,u,p,f,g),[A,w]}t.drawImage(e,i,s,n,r,a,o,l,h);return[Math.hypot(c,d)*l,Math.hypot(u,p)*h]}class mm{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=ph,this.textMatrixScale=1,this.fontMatrix=fh,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ch,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=Rc.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=Rc.applyTransform(e,t),s=Rc.applyTransform(e.slice(2),t),n=Rc.applyTransform([e[0],e[3]],t),r=Rc.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],n[0],r[0]),this.minY=Math.min(this.minY,i[1],s[1],n[1],r[1]),this.maxX=Math.max(this.maxX,i[0],s[0],n[0],r[0]),this.maxY=Math.max(this.maxY,i[1],s[1],n[1],r[1])}updateScalingPathMinMax(t,e){Rc.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,s,n,r,a,o,l,h){const c=Rc.bezierBoundingBox(e,i,s,n,r,a,o,l,h);h||this.updateRectMinMax(t,c)}getPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jg,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===Zg){e||dc("Stroke bounding box must include transform.");const t=Rc.singularValueDecompose2dScale(e),s=t[0]*this.lineWidth/2,n=t[1]*this.lineWidth/2;i[0]-=s,i[1]-=n,i[2]+=s,i[3]+=n}return i}updateClipFromPath(){const t=Rc.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jg,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Rc.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function vm(t,e){if(typeof ImageData<"u"&&e instanceof ImageData)return void t.putImageData(e,0,0);const i=e.height,s=e.width,n=i%pm,r=(i-n)/pm,a=0===n?r:r+1,o=t.createImageData(s,pm);let l,h=0;const c=e.data,d=o.data;let u,p,f,g;if(e.kind===Lh.GRAYSCALE_1BPP){const e=c.byteLength,i=new Uint32Array(d.buffer,0,d.byteLength>>2),g=i.length,m=s+7>>3,v=4294967295,b=Sc.isLittleEndian?4278190080:255;for(u=0;u<a;u++){for(f=u<r?pm:n,l=0,p=0;p<f;p++){const t=e-h;let n=0;const r=t>m?s:8*t-7,a=-8&r;let o=0,d=0;for(;n<a;n+=8)d=c[h++],i[l++]=128&d?v:b,i[l++]=64&d?v:b,i[l++]=32&d?v:b,i[l++]=16&d?v:b,i[l++]=8&d?v:b,i[l++]=4&d?v:b,i[l++]=2&d?v:b,i[l++]=1&d?v:b;for(;n<r;n++)0===o&&(d=c[h++],o=128),i[l++]=d&o?v:b,o>>=1}for(;l<g;)i[l++]=0;t.putImageData(o,0,u*pm)}}else if(e.kind===Lh.RGBA_32BPP){for(p=0,g=s*pm*4,u=0;u<r;u++)d.set(c.subarray(h,h+g)),h+=g,t.putImageData(o,0,p),p+=pm;u<a&&(g=s*n*4,d.set(c.subarray(h,h+g)),t.putImageData(o,0,p))}else{if(e.kind!==Lh.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(f=pm,g=s*f,u=0;u<a;u++){for(u>=r&&(f=n,g=s*f),l=0,p=g;p--;)d[l++]=c[h++],d[l++]=c[h++],d[l++]=c[h++],d[l++]=255;t.putImageData(o,0,u*pm)}}}function bm(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,s=e.width,n=i%pm,r=(i-n)/pm,a=0===n?r:r+1,o=t.createImageData(s,pm);let l=0;const h=e.data,c=o.data;for(let d=0;d<a;d++){const e=d<r?pm:n;({srcPos:l}=um({src:h,srcPos:l,dest:c,width:s,height:e,nonBlackColor:0})),t.putImageData(o,0,d*pm)}}function ym(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)void 0!==t[s]&&(e[s]=t[s]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function _m(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!uh){const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}}function wm(t,e){if(e)return!0;const i=Rc.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Zc.PDF_TO_CSS_UNITS);return i[0]<=s&&i[1]<=s}const xm=["butt","round","square"],Am=["miter","round","bevel"],Em={},km={};var Sm,Cm,Pm,Tm;Sm=new WeakSet,Cm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Pm=new WeakSet,Tm=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let Mm=class t{constructor(t,e,i,s,n,r,a,o){let{optionalContentConfig:l,markedContentStack:c=null}=r;h(this,Sm),h(this,Pm),this.ctx=t,this.current=new mm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new fm(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing(t){let{transform:e,viewport:i,transparency:s=!1,background:n=null}=t;const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const t=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...Gd(this.compositeCtx))}this.ctx.save(),_m(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Gd(this.ctx)}executeOperatorList(t,e,i,s){const n=t.argsArray,r=t.fnArray;let a=e||0;const o=n.length;if(o===a)return a;const l=o-a>10&&"function"==typeof i,h=l?Date.now()+15:0;let c=0;const d=this.commonObjs,u=this.objs;let p;for(;;){if(void 0!==s&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(p=r[a],p!==rc.dependency)this[p].apply(this,n[a]);else for(const t of n[a]){const e=t.startsWith("g_")?d:u;if(!e.has(t))return e.get(t,i),a}if(a++,a===o)return a;if(l&&++c>10){if(Date.now()>h)return i(),a;c=0}}}endDrawing(){u(this,Sm,Cm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),u(this,Pm,Tm).call(this)}_scaleImage(t,e){const i=t.width,s=t.height;let n,r,a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,h=s,c="prescale1";for(;a>2&&l>1||o>2&&h>1;){let e=l,i=h;a>2&&l>1&&(e=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/e),o>2&&h>1&&(i=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/i),n=this.cachedCanvases.getCanvas(c,e,i),r=n.context,r.clearRect(0,0,e,i),r.drawImage(t,0,0,l,h,0,0,e,i),t=n.canvas,l=e,h=i,c="prescale1"===c?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,n=this.current.fillColor,r=this.current.patternFill,a=Gd(e);let o,l,h,c;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),n]),o=this._cachedBitmapsMap.get(e),o||(o=new Map,this._cachedBitmapsMap.set(e,o));const i=o.get(l);if(i&&!r){return{canvas:i,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}h=i}h||(c=this.cachedCanvases.getCanvas("maskCanvas",i,s),bm(c.context,t));let d=Rc.transform(a,[1/i,0,0,-1/s,0,0]);d=Rc.transform(d,[1,0,0,1,0,-s]);const[u,p,f,g]=Rc.getAxialAlignedBoundingBox([0,0,i,s],d),m=Math.round(f-u)||1,v=Math.round(g-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",m,v),y=b.context,_=u,w=p;y.translate(-_,-w),y.transform(...d),h||(h=this._scaleImage(c.canvas,qd(y)),h=h.img,o&&r&&o.set(l,h)),y.imageSmoothingEnabled=wm(Gd(y),t.interpolate),gm(y,h,0,0,h.width,h.height,0,0,i,s),y.globalCompositeOperation="source-in";const x=Rc.transform(qd(y),[1,0,0,1,-_,-w]);return y.fillStyle=r?n.getPattern(e,this,x,Jg):n,y.fillRect(0,0,i,s),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(_),offsetY:Math.round(w)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=xm[t]}setLineJoin(t){this.ctx.lineJoin=Am[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const n=this.ctx;n.setTransform(...Gd(this.suspendedCtx)),ym(this.suspendedCtx,n),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,s,n,r,a){e.transform(t,i,s,n,r,a),this.__originalTransform(t,i,s,n,r,a)},t.setTransform=function(t,i,s,n,r,a){e.setTransform(t,i,s,n,r,a),this.__originalSetTransform(t,i,s,n,r,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,s,n,r,a){e.bezierCurveTo(t,i,s,n,r,a),this.__originalBezierCurveTo(t,i,s,n,r,a)},t.rect=function(t,i,s,n){e.rect(t,i,s,n),this.__originalRect(t,i,s,n)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ym(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const n=s[0],r=s[1],a=s[2]-n,o=s[3]-r;0===a||0===o||(this.genericComposeSMask(e.context,i,a,o,e.subtype,e.backdrop,e.transferMap,n,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,n,r,a,o,l,h,c){let d=t.canvas,u=o-h,p=l-c;if(r)if(u<0||p<0||u+i>d.width||p+s>d.height){const t=this.cachedCanvases.getCanvas("maskExtension",i,s),e=t.context;e.drawImage(d,-u,-p),r.some((t=>0!==t))&&(e.globalCompositeOperation="destination-atop",e.fillStyle=Rc.makeHexColor(...r),e.fillRect(0,0,i,s),e.globalCompositeOperation="source-over"),d=t.canvas,u=p=0}else if(r.some((t=>0!==t))){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(u,p,i,s),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=Rc.makeHexColor(...r),t.fillRect(u,p,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===n&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===n&&(e.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,i,s),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(d,u,p,i,s,o,l,i,s),e.restore()}save(){this.inSMaskMode?(ym(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ym(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,n,r){this.ctx.transform(t,e,i,s,n,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const s=this.ctx,n=this.current;let r,a,o=n.x,l=n.y;const h=Gd(s),c=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],d=c?i.slice(0):null;for(let u=0,p=0,f=t.length;u<f;u++)switch(0|t[u]){case rc.rectangle:o=e[p++],l=e[p++];const t=e[p++],i=e[p++],u=o+t,f=l+i;s.moveTo(o,l),0===t||0===i?s.lineTo(u,f):(s.lineTo(u,l),s.lineTo(u,f),s.lineTo(o,f)),c||n.updateRectMinMax(h,[o,l,u,f]),s.closePath();break;case rc.moveTo:o=e[p++],l=e[p++],s.moveTo(o,l),c||n.updatePathMinMax(h,o,l);break;case rc.lineTo:o=e[p++],l=e[p++],s.lineTo(o,l),c||n.updatePathMinMax(h,o,l);break;case rc.curveTo:r=o,a=l,o=e[p+4],l=e[p+5],s.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],o,l),n.updateCurvePathMinMax(h,r,a,e[p],e[p+1],e[p+2],e[p+3],o,l,d),p+=6;break;case rc.curveTo2:r=o,a=l,s.bezierCurveTo(o,l,e[p],e[p+1],e[p+2],e[p+3]),n.updateCurvePathMinMax(h,r,a,o,l,e[p],e[p+1],e[p+2],e[p+3],d),o=e[p+2],l=e[p+3],p+=4;break;case rc.curveTo3:r=o,a=l,o=e[p+2],l=e[p+3],s.bezierCurveTo(e[p],e[p+1],o,l,o,l),n.updateCurvePathMinMax(h,r,a,e[p],e[p+1],o,l,o,l,d),p+=4;break;case rc.closePath:s.closePath()}c&&n.updateScalingPathMinMax(h,d),n.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&null!=i&&i.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,qd(e),Zg),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.ctx,i=this.current.fillColor;let s=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,qd(e),Jg),s=!0);const n=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==n&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),s&&e.restore(),t&&this.consumePath(n)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Em}eoClip(){this.pendingClip=km}beginText(){this.current.textMatrix=ph,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var i;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||fh,(0===n.fontMatrix[0]||0===n.fontMatrix[3])&&cc("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=(null==(i=s.systemFontInfo)?void 0:i.css)||`"${r}", ${s.fallbackName}`;let o="normal";s.black?o="900":s.bold&&(o="bold");const l=s.italic?"italic":"normal";let h=e;e<16?h=16:e>100&&(h=100),this.current.fontSizeScale=e/h,this.ctx.font=`${l} ${o} ${h}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,n,r){this.current.textMatrix=[t,e,i,s,n,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s){const n=this.ctx,r=this.current,a=r.font,o=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,h=o&Dh,c=!!(o&Rh),d=r.patternFill&&!a.missingFile;let u;(a.disableFontFace||c||d)&&(u=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||d?(n.save(),n.translate(e,i),n.beginPath(),u(n,l),s&&n.setTransform(...s),(h===Ch||h===Th)&&n.fill(),(h===Ph||h===Th)&&n.stroke(),n.restore()):((h===Ch||h===Th)&&n.fillText(t,e,i),(h===Ph||h===Th)&&n.strokeText(t,e,i)),c&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Gd(n),x:e,y:i,fontSize:l,addToPath:u})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return fc(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(0===s)return;const n=this.ctx,r=e.fontSizeScale,a=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,h=e.textHScale*l,c=t.length,d=i.vertical,u=d?1:-1,p=i.defaultVMetrics,f=s*e.fontMatrix[0],g=e.textRenderingMode===Ch&&!i.disableFontFace&&!e.patternFill;let m;if(n.save(),n.transform(...e.textMatrix),n.translate(e.x,e.y+e.textRise),l>0?n.scale(h,-1):n.scale(h,1),e.patternFill){n.save();const t=e.fillColor.getPattern(n,this,qd(n),Jg);m=Gd(n),n.restore(),n.fillStyle=t}let v=e.lineWidth;const b=e.textMatrixScale;if(0===b||0===v){const t=e.textRenderingMode&Dh;(t===Ph||t===Th)&&(v=this.getSinglePixelWidth())}else v/=b;if(1!==r&&(n.scale(r,r),v/=r),n.lineWidth=v,i.isInvalidPDFjsFont){const i=[];let s=0;for(const e of t)i.push(e.unicode),s+=e.width;return n.fillText(i.join(""),0,0),e.x+=s*f*h,n.restore(),void this.compose()}let y,_=0;for(y=0;y<c;++y){const e=t[y];if("number"==typeof e){_+=u*e*s/1e3;continue}let h=!1;const c=(e.isSpace?o:0)+a,v=e.fontChar,b=e.accent;let w,x,A=e.width;if(d){const t=e.vmetric||p,i=-(e.vmetric?t[1]:.5*A)*f,s=t[2]*f;A=t?-t[0]:A,w=i/r,x=(_+s)/r}else w=_/r,x=0;if(i.remeasure&&A>0){const t=1e3*n.measureText(v).width/s*r;if(A<t&&this.isFontSubpixelAAEnabled){const e=A/t;h=!0,n.save(),n.scale(e,1),w/=e}else A!==t&&(w+=(A-t)/2e3*s/r)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(g&&!b)n.fillText(v,w,x);else if(this.paintChar(v,w,x,m),b){const t=w+s*b.offset.x/r,e=x-s*b.offset.y/r;this.paintChar(b.fontChar,t,e,m)}_+=d?A*f-c*l:A*f+c*l,h&&n.restore()}d?e.y-=_:e.x+=_*h,n.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,n=i.fontSize,r=i.fontDirection,a=s.vertical?1:-1,o=i.charSpacing,l=i.wordSpacing,h=i.textHScale*r,c=i.fontMatrix||fh,d=t.length;let u,p,f,g;if(!(i.textRenderingMode===Mh)&&0!==n){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(h,r),u=0;u<d;++u){if(p=t[u],"number"==typeof p){g=a*p*n/1e3,this.ctx.translate(g,0),i.x+=g*h;continue}const r=(p.isSpace?l:0)+o,d=s.charProcOperatorList[p.operatorListId];d?(this.contentVisible&&(this.processingType3=p,this.save(),e.scale(n,n),e.transform(...c),this.executeOperatorList(d),this.restore()),f=Rc.applyTransform([p.width,0],c)[0]*n+r,e.translate(f,0),i.x+=f*h):cc(`Type3 character "${p.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,n,r){this.ctx.rect(i,s,n-i,r-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let i;if("TilingPattern"===e[0]){const s=e[1],n=this.baseTransform||Gd(this.ctx),r={createCanvasGraphics:e=>new t(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new dm(e,s,this.ctx,r,n)}else i=this._getPattern(e[1],e[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const s=Rc.makeHexColor(t,e,i);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(t,e,i){const s=Rc.makeHexColor(t,e,i);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=function(t){switch(t[0]){case"RadialAxial":return new sm(t);case"Mesh":return new am(t);case"Dummy":return new om}throw new Error(`Unknown IR type: ${t[0]}`)}(this.getObject(t)),this.cachedPatterns.set(t,e)),i&&(e.matrix=i),e}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,qd(e),tm);const s=qd(e);if(s){const{width:t,height:i}=e.canvas,[n,r,a,o]=Rc.getAxialAlignedBoundingBox([0,0,t,i],s);this.ctx.fillRect(n,r,a-n,o-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){dc("Should not call beginInlineImage")}beginImageData(){dc("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Gd(this.ctx),e)){const t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax(Gd(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||hc("TODO: Support non-isolated groups."),t.knockout&&cc("Knockout groups not supported.");const i=Gd(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Rc.getAxialAlignedBoundingBox(t.bbox,Gd(e));const n=[0,0,e.canvas.width,e.canvas.height];s=Rc.intersect(s,n)||[0,0,0,0];const r=Math.floor(s[0]),a=Math.floor(s[1]),o=Math.max(Math.ceil(s[2])-r,1),l=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const c=this.cachedCanvases.getCanvas(h,o,l),d=c.context;d.translate(-r,-a),d.transform(...i),t.smask?this.smaskStack.push({canvas:c.canvas,context:d,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,a),e.save()),ym(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=Gd(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const i=Rc.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,i,s,n){if(u(this,Sm,Cm).call(this),_m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const s=e[2]-e[0],r=e[3]-e[1];if(n&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=s,e[3]=r;const[n,a]=Rc.singularValueDecompose2dScale(Gd(this.ctx)),{viewportScale:o}=this,l=Math.ceil(s*this.outputScaleX*o),h=Math.ceil(r*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,h);const{canvas:c,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(t,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(n,0,0,-a,0,r*a),_m(this.ctx)}else _m(this.ctx),this.ctx.rect(e[0],e[1],s,r),this.ctx.clip(),this.endPath()}this.current=new mm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),u(this,Pm,Tm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const i=this.ctx,s=this.processingType3;if(s&&(void 0===s.compiled&&(s.compiled=function(t){const{width:e,height:i}=t;if(e>1e3||i>1e3)return null;const s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),n=e+1;let r,a,o,l=new Uint8Array(n*(i+1));const h=e+7&-8;let c=new Uint8Array(h*i),d=0;for(const g of t.data){let t=128;for(;t>0;)c[d++]=g&t?0:255,t>>=1}let u=0;for(d=0,0!==c[d]&&(l[0]=1,++u),a=1;a<e;a++)c[d]!==c[d+1]&&(l[a]=c[d]?2:1,++u),d++;for(0!==c[d]&&(l[a]=2,++u),r=1;r<i;r++){d=r*h,o=r*n,c[d-h]!==c[d]&&(l[o]=c[d]?1:8,++u);let t=(c[d]?4:0)+(c[d-h]?8:0);for(a=1;a<e;a++)t=(t>>2)+(c[d+1]?4:0)+(c[d-h+1]?8:0),s[t]&&(l[o+a]=s[t],++u),d++;if(c[d-h]!==c[d]&&(l[o+a]=c[d]?2:4,++u),u>1e3)return null}for(d=h*(i-1),o=r*n,0!==c[d]&&(l[o]=8,++u),a=1;a<e;a++)c[d]!==c[d+1]&&(l[o+a]=c[d]?4:8,++u),d++;if(0!==c[d]&&(l[o+a]=4,++u),u>1e3)return null;const p=new Int32Array([0,n,-1,0,-n,0,0,0,1]),f=new Path2D;for(r=0;u&&r<=i;r++){let t=r*n;const i=t+e;for(;t<i&&!l[t];)t++;if(t===i)continue;f.moveTo(t%n,r);const s=t;let a=l[t];do{const e=p[a];do{t+=e}while(!l[t]);const i=l[t];5!==i&&10!==i?(a=i,l[t]=0):(a=i&51*a>>4,l[t]&=a>>2|a<<2),f.lineTo(t%n,t/n|0),l[t]||--u}while(s!==t);--r}return c=null,l=null,function(t){t.save(),t.scale(1/e,-1/i),t.translate(0,-i),t.fill(f),t.beginPath(),t.restore()}}(t)),s.compiled))return void s.compiled(i);const n=this._createMaskCanvas(t),r=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const o=Gd(a);a.transform(e,i,s,n,0,0);const l=this._createMaskCanvas(t);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let h=0,c=r.length;h<c;h+=2){const t=Rc.transform(o,[e,i,s,n,r[h],r[h+1]]),[c,d]=Rc.applyTransform([0,0],t);a.drawImage(l.canvas,c,d)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const n of t){const{data:t,width:r,height:a,transform:o}=n,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),h=l.context;h.save();bm(h,this.getObject(t,n)),h.globalCompositeOperation="source-in",h.fillStyle=s?i.getPattern(h,this,qd(e),Jg):i,h.fillRect(0,0,r,a),h.restore(),e.save(),e.transform(...o),e.scale(1,-1),gm(e,l.canvas,0,0,r,a,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):cc("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const n=this.getObject(t);if(!n)return void cc("Dependent image isn't ready yet");const r=n.width,a=n.height,o=[];for(let l=0,h=s.length;l<h;l+=2)o.push({transform:[e,0,0,i,s[l],s[l+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(n,o)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:i,height:s}=t,n=this.cachedCanvases.getCanvas("inlineImage",i,s),r=n.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",n.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;if(this.save(),!uh){const{filter:t}=s;"none"!==t&&""!==t&&(s.filter="none")}let n;if(s.scale(1/e,-1/i),t.bitmap)n=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)n=t;else{const s=this.cachedCanvases.getCanvas("inlineImage",e,i).context;vm(s,t),n=this.applyTransferMapsToCanvas(s)}const r=this._scaleImage(n,qd(s));s.imageSmoothingEnabled=wm(Gd(s),t.interpolate),gm(s,r.img,0,0,r.paintWidth,r.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const e=t.width,i=t.height,n=this.cachedCanvases.getCanvas("inlineImage",e,i).context;vm(n,t),s=this.applyTransferMapsToCanvas(n)}for(const n of e)i.save(),i.transform(...n.transform),i.scale(1,-1),gm(i,s,n.x,n.y,n.w,n.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===km?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Gd(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:n}=this.ctx.getTransform();let r,a;if(0===i&&0===s){const i=Math.abs(e),s=Math.abs(n);if(i===s)if(0===t)r=a=1/i;else{const e=i*t;r=a=e<1?1/e:1}else if(0===t)r=1/i,a=1/s;else{const e=i*t,n=s*t;r=e<1?1/e:1,a=n<1?1/n:1}}else{const o=Math.abs(e*n-i*s),l=Math.hypot(e,i),h=Math.hypot(s,n);if(0===t)r=h/o,a=l/o;else{const e=t*o;r=h>e?h/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[s,n]=this.getScaleForStroking();if(e.lineWidth=i||1,1===s&&1===n)return void e.stroke();const r=e.getLineDash();if(t&&e.save(),e.scale(s,n),r.length>0){const t=Math.max(s,n);e.setLineDash(r.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(const XT in rc)void 0!==Mm.prototype[XT]&&(Mm.prototype[rc[XT]]=Mm.prototype[XT]);var Dm,Rm;class Lm{static get workerPort(){return l(this,Dm)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");c(this,Dm,t)}static get workerSrc(){return l(this,Rm)}static set workerSrc(t){if("string"!=typeof t)throw new Error("Invalid `workerSrc` type.");c(this,Rm,t)}}Dm=new WeakMap,Rm=new WeakMap,h(Lm,Dm,null),h(Lm,Rm,"");const Om=1,Im=2,Fm=1,Nm=2,jm=3,Bm=4,Hm=5,Wm=6,zm=7,Vm=8;function $m(t){switch(t instanceof Error||"object"==typeof t&&null!==t||dc('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new xc(t.message);case"MissingPDFException":return new yc(t.message);case"PasswordException":return new mc(t.message,t.code);case"UnexpectedResponseException":return new _c(t.message,t.status);case"UnknownErrorException":return new vc(t.message,t.details);default:return new vc(t.message,t.toString())}}var Um,Gm,qm,Ym,Xm,Km,Qm,Jm;class Zm{constructor(t,e,i){h(this,Um),h(this,qm),h(this,Xm),this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void u(this,qm,Ym).call(this,e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===Om)i.resolve(e.data);else{if(e.callback!==Im)throw new Error("Unexpected callback case");i.reject($m(e.reason))}return}const s=this.actionHandler[e.action];if(!s)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,n=e.sourceName;new Promise((function(t){t(s(e.data))})).then((function(s){i.postMessage({sourceName:t,targetName:n,callback:Om,callbackId:e.callbackId,data:s})}),(function(s){i.postMessage({sourceName:t,targetName:n,callback:Im,callbackId:e.callbackId,reason:$m(s)})}))}else e.streamId?u(this,Um,Gm).call(this,e):s(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,n=Promise.withResolvers();this.callbackCapabilities[s]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(r){n.reject(r)}return n.promise}sendWithStream(t,e,i,s){const n=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:i=>{const l=Promise.withResolvers();return this.streamControllers[n]={controller:i,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:t,streamId:n,data:e,desiredSize:i.desiredSize},s),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[n].pullCall=e,o.postMessage({sourceName:r,targetName:a,stream:Wm,streamId:n,desiredSize:t.desiredSize}),e.promise},cancel:t=>{uc(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[n].cancelCall=e,this.streamControllers[n].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:Fm,streamId:n,reason:$m(t)}),e.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Um=new WeakSet,Gm=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,r=this,a=this.actionHandler[t.action],o={enqueue(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),n.postMessage({sourceName:i,targetName:s,stream:Bm,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:jm,streamId:e}),delete r.streamSinks[e])},error(t){uc(t instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:Hm,streamId:e,reason:$m(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,new Promise((function(e){e(a(t.data,o))})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:Vm,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:Vm,streamId:e,reason:$m(t)})}))},qm=new WeakSet,Ym=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,r=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Vm:t.success?r.startCall.resolve():r.startCall.reject($m(t.reason));break;case zm:t.success?r.pullCall.resolve():r.pullCall.reject($m(t.reason));break;case Wm:if(!a){n.postMessage({sourceName:i,targetName:s,stream:zm,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise((function(t){var e;t(null==(e=a.onPull)?void 0:e.call(a))})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:zm,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:zm,streamId:e,reason:$m(t)})}));break;case Bm:if(uc(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case jm:if(uc(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),u(this,Xm,Km).call(this,r,e);break;case Hm:uc(r,"error should have stream controller"),r.controller.error($m(t.reason)),u(this,Xm,Km).call(this,r,e);break;case Nm:t.success?r.cancelCall.resolve():r.cancelCall.reject($m(t.reason)),u(this,Xm,Km).call(this,r,e);break;case Fm:if(!a)break;new Promise((function(e){var i;e(null==(i=a.onCancel)?void 0:i.call(a,$m(t.reason)))})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:Nm,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:Nm,streamId:e,reason:$m(t)})})),a.sinkCapability.reject($m(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Xm=new WeakSet,Km=async function(t,e){var i,s,n;await Promise.allSettled([null==(i=t.startCall)?void 0:i.promise,null==(s=t.pullCall)?void 0:s.promise,null==(n=t.cancelCall)?void 0:n.promise]),delete this.streamControllers[e]};class tv{constructor(t){let{parsedData:e,rawData:i}=t;h(this,Qm,void 0),h(this,Jm,void 0),c(this,Qm,e),c(this,Jm,i)}getRaw(){return l(this,Jm)}get(t){return l(this,Qm).get(t)??null}getAll(){return kc(l(this,Qm))}has(t){return l(this,Qm).has(t)}}Qm=new WeakMap,Jm=new WeakMap;const ev=Symbol("INTERNAL");var iv,sv,nv,rv,av,ov,lv,hv,cv,dv;class uv{constructor(t,e){let{name:i,intent:s,usage:n}=e;h(this,iv,!1),h(this,sv,!1),h(this,nv,!1),h(this,rv,!0),c(this,iv,!!(t&vh)),c(this,sv,!!(t&bh)),this.name=i,this.intent=s,this.usage=n}get visible(){if(l(this,nv))return l(this,rv);if(!l(this,rv))return!1;const{print:t,view:e}=this.usage;return l(this,iv)?"OFF"!==(null==e?void 0:e.viewState):!l(this,sv)||"OFF"!==(null==t?void 0:t.printState)}_setVisible(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==ev&&dc("Internal method `_setVisible` called."),c(this,nv,i),c(this,rv,e)}}iv=new WeakMap,sv=new WeakMap,nv=new WeakMap,rv=new WeakMap;class pv{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vh;if(h(this,cv),h(this,av,null),h(this,ov,new Map),h(this,lv,null),h(this,hv,null),this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,c(this,hv,t.order);for(const i of t.groups)l(this,ov).set(i.id,new uv(e,i));if("OFF"===t.baseState)for(const t of l(this,ov).values())t._setVisible(ev,!1);for(const e of t.on)l(this,ov).get(e)._setVisible(ev,!0);for(const e of t.off)l(this,ov).get(e)._setVisible(ev,!1);c(this,lv,this.getHash())}}isVisible(t){if(0===l(this,ov).size)return!0;if(!t)return hc("Optional content group not defined."),!0;if("OCG"===t.type)return l(this,ov).has(t.id)?l(this,ov).get(t.id).visible:(cc(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return u(this,cv,dv).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!l(this,ov).has(e))return cc(`Optional content group not found: ${e}`),!0;if(l(this,ov).get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!l(this,ov).has(e))return cc(`Optional content group not found: ${e}`),!0;if(!l(this,ov).get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!l(this,ov).has(e))return cc(`Optional content group not found: ${e}`),!0;if(!l(this,ov).get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!l(this,ov).has(e))return cc(`Optional content group not found: ${e}`),!0;if(l(this,ov).get(e).visible)return!1}return!0}return cc(`Unknown optional content policy ${t.policy}.`),!0}return cc(`Unknown group type ${t.type}.`),!0}setVisibility(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=l(this,ov).get(t);i?(i._setVisible(ev,!!e,!0),c(this,av,null)):cc(`Optional content group not found: ${t}`)}setOCGState(t){let e,{state:i,preserveRB:s}=t;for(const n of i){switch(n){case"ON":case"OFF":case"Toggle":e=n;continue}const t=l(this,ov).get(n);if(t)switch(e){case"ON":t._setVisible(ev,!0);break;case"OFF":t._setVisible(ev,!1);break;case"Toggle":t._setVisible(ev,!t.visible)}}c(this,av,null)}get hasInitialVisibility(){return null===l(this,lv)||this.getHash()===l(this,lv)}getOrder(){return l(this,ov).size?l(this,hv)?l(this,hv).slice():[...l(this,ov).keys()]:null}getGroups(){return l(this,ov).size>0?kc(l(this,ov)):null}getGroup(t){return l(this,ov).get(t)||null}getHash(){if(null!==l(this,av))return l(this,av);const t=new Fg;for(const[e,i]of l(this,ov))t.update(`${e}:${i.visible}`);return c(this,av,t.hexdigest())}}av=new WeakMap,ov=new WeakMap,lv=new WeakMap,hv=new WeakMap,cv=new WeakSet,dv=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const e=t[s];let n;if(Array.isArray(e))n=u(this,cv,dv).call(this,e);else{if(!l(this,ov).has(e))return cc(`Optional content group not found: ${e}`),!0;n=l(this,ov).get(e).visible}switch(i){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return"And"===i};class fv{constructor(t,e){let{disableRange:i=!1,disableStream:s=!1}=e;uc(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null==r?void 0:r.length)>0){const t=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),t.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),t.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),t.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),t.transportReady()}_onReceiveData(t){let{begin:e,chunk:i}=t;const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{uc(this._rangeReaders.some((function(t){return t._begin===e&&(t._enqueue(s),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return(null==(t=this._fullRequestReader)?void 0:t._loaded)??0}_onProgress(t){var e,i,s,n;void 0===t.total?null==(i=null==(e=this._rangeReaders[0])?void 0:e.onProgress)||i.call(e,{loaded:t.loaded}):null==(n=null==(s=this._fullRequestReader)?void 0:s.onProgress)||n.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;null==(t=this._fullRequestReader)||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){uc(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new gv(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new mv(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;null==(e=this._fullRequestReader)||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class gv{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=t,this._done=i||!1,this._filename=Id(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mv{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function vv(t){let{getResponseHeader:e,isHttp:i,rangeChunkSize:s,disableRange:n}=t;const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*s)||n||!i||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function bv(t){const e=t("Content-Disposition");if(e){let t=function(t){let e=!0,i=s("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=o(t),t=l(t),r(t)}if(i=function(t){const e=[];let i;const n=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=n.exec(t));){let[,t,s,n]=i;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[s,n]}const r=[];for(let s=0;s<e.length&&s in e;++s){let[t,i]=e[s];i=a(i),t&&(i=unescape(i),0===s&&(i=o(i))),r.push(i)}return r.join("")}(t),i)return r(l(i));if(i=s("filename","i").exec(t),i){i=i[1];let t=a(i);return t=l(t),r(t)}function s(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function n(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const s=new TextDecoder(t,{fatal:!0}),n=Ec(i);i=s.decode(n),e=!1}catch{}}return i}function r(t){return e&&/[\x80-\xff]/.test(t)&&(t=n("utf-8",t),e&&(t=n("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:n(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,s){if("q"===i||"Q"===i)return n(e,s=(s=s.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{s=atob(s)}catch{}return n(e,s)}))}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Id(t))return t}return null}function yv(t,e){return 404===t||0===t&&e.startsWith("file:")?new yc('Missing PDF "'+e+'".'):new _c(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function _v(t){return 200===t||206===t}function wv(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function xv(t){const e=new Headers;for(const i in t){const s=t[i];void 0!==s&&e.append(i,s)}return e}function Av(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(cc(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class Ev{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return(null==(t=this._fullRequestReader)?void 0:t._loaded)??0}getFullReader(){return uc(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new kv(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Sv(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null==(e=this._fullRequestReader)||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class kv{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=xv(this._stream.httpHeaders);const i=e.url;fetch(i,wv(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!_v(t.status))throw yv(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:s,suggestedLength:n}=vv({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=n||this._contentLength,this._filename=bv(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xc("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Av(e),done:!1})}cancel(t){var e;null==(e=this._reader)||e.cancel(t),this._abortController.abort()}}class Sv{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=xv(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const n=s.url;fetch(n,wv(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!_v(t.status))throw yv(t.status,n);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded}),{value:Av(e),done:!1})}cancel(t){var e;null==(e=this._reader)||e.cancel(t),this._abortController.abort()}}class Cv{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const s={begin:t,end:e};for(const n in i)s[n]=i[n];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const n in this.httpHeaders){const t=this.httpHeaders[n];void 0!==t&&e.setRequestHeader(n,t)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=206):s.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var i;const s=this.pendingRequests[t];s&&(null==(i=s.onProgress)||i.call(s,e))}onStateChange(t,e){var i,s,n;const r=this.pendingRequests[t];if(!r)return;const a=r.xhr;if(a.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4!==a.readyState||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===a.status&&this.isHttp)return void(null==(i=r.onError)||i.call(r,a.status));const o=a.status||200;if((200!==o||206!==r.expectedStatus)&&o!==r.expectedStatus)return void(null==(s=r.onError)||s.call(r,a.status));const l=function(t){const e=t.response;return"string"!=typeof e?e:Ec(e).buffer}(a);if(206===o){const t=a.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);r.onDone({begin:parseInt(e[1],10),chunk:l})}else l?r.onDone({begin:0,chunk:l}):null==(n=r.onError)||n.call(r,a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Pv{constructor(t){this._source=t,this._manager=new Cv(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return uc(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Tv(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Mv(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null==(e=this._fullRequestReader)||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Tv{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=t=>e.getResponseHeader(t),{allowRangeRequests:s,suggestedLength:n}=vv({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=bv(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=yv(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;null==(e=this.onProgress)||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Mv{constructor(t,e,i){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;null==(t=this.onClosed)||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=yv(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||null==(e=this.onProgress)||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Dv=/^file:\/\/\/[a-zA-Z]:\//;class Rv{constructor(t){this.source=t,this.url=function(t){const e=Kg.get("url"),i=e.parse(t);return"file:"===i.protocol||i.host?i:/^[a-z]:[/\\]/i.test(t)?e.parse(`file:///${t}`):(i.host||(i.protocol="file:"),i)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return(null==(t=this._fullRequestReader)?void 0:t._loaded)??0}getFullReader(){return uc(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new jv(this):new Fv(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new Bv(this,t,e):new Nv(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null==(e=this._fullRequestReader)||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Lv{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ov{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function Iv(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class Fv extends Lv{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new yc(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const i=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:s,suggestedLength:n}=vv({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=n||this._contentLength,this._filename=bv(i)};if(this._request=null,"http:"===this._url.protocol){const i=Kg.get("http");this._request=i.request(Iv(this._url,t.httpHeaders),e)}else{const i=Kg.get("https");this._request=i.request(Iv(this._url,t.httpHeaders),e)}this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class Nv extends Ov{constructor(t,e,i){super(t),this._httpHeaders={};for(const n in t.httpHeaders){const e=t.httpHeaders[n];void 0!==e&&(this._httpHeaders[n]=e)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const s=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new yc(`Missing PDF "${this._url}".`);this._storedError=t}};if(this._request=null,"http:"===this._url.protocol){const t=Kg.get("http");this._request=t.request(Iv(this._url,this._httpHeaders),s)}else{const t=Kg.get("https");this._request=t.request(Iv(this._url,this._httpHeaders),s)}this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class jv extends Lv{constructor(t){super(t);let e=decodeURIComponent(this._url.path);Dv.test(this._url.href)&&(e=e.replace(/^\//,""));const i=Kg.get("fs");i.promises.lstat(e).then((t=>{this._contentLength=t.size,this._setReadableStream(i.createReadStream(e)),this._headersCapability.resolve()}),(t=>{"ENOENT"===t.code&&(t=new yc(`Missing PDF "${e}".`)),this._storedError=t,this._headersCapability.reject(t)}))}}class Bv extends Ov{constructor(t,e,i){super(t);let s=decodeURIComponent(this._url.path);Dv.test(this._url.href)&&(s=s.replace(/^\//,""));const n=Kg.get("fs");this._setReadableStream(n.createReadStream(s,{start:e,end:i-1}))}}const Hv=30;var Wv,zv,Vv,$v,Uv,Gv,qv,Yv,Xv,Kv,Qv,Jv,Zv,tb,eb,ib,sb,nb,rb,ab,ob,lb,hb,cb,db,ub,pb,fb,gb,mb,vb,bb,yb;let _b=(ab=class{constructor(t){let{textContentSource:e,container:i,viewport:s}=t;if(h(this,cb),h(this,ub),h(this,fb),h(this,zv,Promise.withResolvers()),h(this,Vv,null),h(this,$v,!1),h(this,Uv,!(null==(Wv=globalThis.FontInspector)||!Wv.enabled)),h(this,Gv,null),h(this,qv,null),h(this,Yv,0),h(this,Xv,0),h(this,Kv,null),h(this,Qv,null),h(this,Jv,0),h(this,Zv,0),h(this,tb,Object.create(null)),h(this,eb,[]),h(this,ib,null),h(this,sb,[]),h(this,nb,new WeakMap),h(this,rb,null),e instanceof ReadableStream)c(this,ib,e);else{if("object"!=typeof e)throw new Error('No "textContentSource" parameter specified.');c(this,ib,new ReadableStream({start(t){t.enqueue(e),t.close()}}))}c(this,Vv,c(this,Qv,i)),c(this,Zv,s.scale*(globalThis.devicePixelRatio||1)),c(this,Jv,s.rotation),c(this,qv,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:a,pageY:o}=s.rawDims;c(this,rb,[1,0,0,-1,-a,o+r]),c(this,Xv,n),c(this,Yv,r),Yd(i,s),l(this,zv).promise.catch((()=>{})).then((()=>{l(ab,hb).delete(this),c(this,qv,null),c(this,tb,null)}))}render(){const t=()=>{l(this,Kv).read().then((e=>{let{value:i,done:s}=e;s?l(this,zv).resolve():(l(this,Gv)??c(this,Gv,i.lang),Object.assign(l(this,tb),i.styles),u(this,cb,db).call(this,i.items),t())}),l(this,zv).reject)};return c(this,Kv,l(this,ib).getReader()),l(ab,hb).add(this),t(),l(this,zv).promise}update(t){let{viewport:e,onBefore:i=null}=t;var s;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==l(this,Jv)&&(null==i||i(),c(this,Jv,r),Yd(l(this,Qv),{rotation:r})),n!==l(this,Zv)){null==i||i(),c(this,Zv,n);const t={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:u(s=ab,mb,vb).call(s,l(this,Gv))};for(const e of l(this,sb))t.properties=l(this,nb).get(e),t.div=e,u(this,fb,gb).call(this,t)}}cancel(){var t;const e=new xc("TextLayer task cancelled.");null==(t=l(this,Kv))||t.cancel(e).catch((()=>{})),c(this,Kv,null),l(this,zv).reject(e)}get textDivs(){return l(this,sb)}get textContentItemsStr(){return l(this,eb)}static cleanup(){if(!(l(this,hb).size>0)){l(this,ob).clear();for(const{canvas:t}of l(this,lb).values())t.remove();l(this,lb).clear()}}},zv=new WeakMap,Vv=new WeakMap,$v=new WeakMap,Uv=new WeakMap,Gv=new WeakMap,qv=new WeakMap,Yv=new WeakMap,Xv=new WeakMap,Kv=new WeakMap,Qv=new WeakMap,Jv=new WeakMap,Zv=new WeakMap,tb=new WeakMap,eb=new WeakMap,ib=new WeakMap,sb=new WeakMap,nb=new WeakMap,rb=new WeakMap,ob=new WeakMap,lb=new WeakMap,hb=new WeakMap,cb=new WeakSet,db=function(t){var e,i;if(l(this,$v))return;(i=l(this,qv)).ctx||(i.ctx=u(e=ab,mb,vb).call(e,l(this,Gv)));const s=l(this,sb),n=l(this,eb);for(const r of t){if(s.length>1e5)return cc("Ignoring additional textDivs for performance reasons."),void c(this,$v,!0);if(void 0!==r.str)n.push(r.str),u(this,ub,pb).call(this,r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const t=l(this,Vv);c(this,Vv,document.createElement("span")),l(this,Vv).classList.add("markedContent"),null!==r.id&&l(this,Vv).setAttribute("id",`${r.id}`),t.append(l(this,Vv))}else"endMarkedContent"===r.type&&c(this,Vv,l(this,Vv).parentNode)}},ub=new WeakSet,pb=function(t){var e;const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};l(this,sb).push(i);const n=Rc.transform(l(this,rb),t.transform);let r=Math.atan2(n[1],n[0]);const a=l(this,tb)[t.fontName];a.vertical&&(r+=Math.PI/2);const o=l(this,Uv)&&a.fontSubstitution||a.fontFamily,h=Math.hypot(n[2],n[3]),c=h*u(e=ab,bb,yb).call(e,o,l(this,Gv));let d,p;0===r?(d=n[4],p=n[5]-c):(d=n[4]+c*Math.sin(r),p=n[5]-c*Math.cos(r));const f="calc(var(--scale-factor)*",g=i.style;l(this,Vv)===l(this,Qv)?(g.left=`${(100*d/l(this,Xv)).toFixed(2)}%`,g.top=`${(100*p/l(this,Yv)).toFixed(2)}%`):(g.left=`${f}${d.toFixed(2)}px)`,g.top=`${f}${p.toFixed(2)}px)`),g.fontSize=`${f}${h.toFixed(2)}px)`,g.fontFamily=o,s.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,l(this,Uv)&&(i.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),0!==r&&(s.angle=r*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(m=!0)}if(m&&(s.canvasWidth=a.vertical?t.height:t.width),l(this,nb).set(i,s),l(this,qv).div=i,l(this,qv).properties=s,u(this,fb,gb).call(this,l(this,qv)),s.hasText&&l(this,Vv).append(i),s.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),l(this,Vv).append(t)}},fb=new WeakSet,gb=function(t){const{div:e,properties:i,ctx:s,prevFontSize:n,prevFontFamily:r}=t,{style:a}=e;let o="";if(0!==i.canvasWidth&&i.hasText){const{fontFamily:h}=a,{canvasWidth:c,fontSize:d}=i;(n!==d||r!==h)&&(s.font=`${d*l(this,Zv)}px ${h}`,t.prevFontSize=d,t.prevFontFamily=h);const{width:u}=s.measureText(e.textContent);u>0&&(o=`scaleX(${c*l(this,Zv)/u})`)}0!==i.angle&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(a.transform=o)},mb=new WeakSet,vb=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=l(this,lb).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1}),l(this,lb).set(t,e)}return e},bb=new WeakSet,yb=function(t,e){const i=l(this,ob).get(t);if(i)return i;const s=u(this,mb,vb).call(this,e),n=s.font;s.canvas.width=s.canvas.height=Hv,s.font=`30px ${t}`;const r=s.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const e=a/(a+o);return l(this,ob).set(t,e),s.canvas.width=s.canvas.height=0,s.font=n,e}s.strokeStyle="red",s.clearRect(0,0,Hv,Hv),s.strokeText("g",0,0);let h=s.getImageData(0,0,Hv,Hv).data;o=0;for(let l=h.length-1-3;l>=0;l-=4)if(h[l]>0){o=Math.ceil(l/4/Hv);break}s.clearRect(0,0,Hv,Hv),s.strokeText("A",0,Hv),h=s.getImageData(0,0,Hv,Hv).data,a=0;for(let l=0,d=h.length;l<d;l+=4)if(h[l]>0){a=Hv-Math.floor(l/4/Hv);break}s.canvas.width=s.canvas.height=0,s.font=n;const c=a?a/(a+o):.8;return l(this,ob).set(t,c),c},h(ab,mb),h(ab,bb),h(ab,ob,new Map),h(ab,lb,new Map),h(ab,hb,new Set),ab);function wb(){Wd("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:t,container:e,viewport:i,...s}=arguments[0],n=Object.keys(s);n.length>0&&cc("Ignoring `renderTextLayer` parameters: "+n.join(", "));const r=new _b({textContentSource:t,container:e,viewport:i}),{textDivs:a,textContentItemsStr:o}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:o}}function xb(){Wd("`updateTextLayer`, please use `TextLayer` instead.")}class Ab{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};return function t(i){var s;if(!i)return;let n=null;const r=i.name;if("#text"===r)n=i.value;else{if(!Ab.shouldBuildText(r))return;null!=(s=null==i?void 0:i.attributes)&&s.textContent?n=i.attributes.textContent:i.value&&(n=i.value)}if(null!==n&&e.push({str:n}),i.children)for(const e of i.children)t(e)}(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}const Eb=65536,kb=uh?class extends qc{_createCanvas(t,e){return Kg.get("canvas").createCanvas(t,e)}}:class extends qc{constructor(){let{ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},Sb=uh?class extends Yc{_fetchData(t,e){return Qg(t).then((t=>({cMapData:t,compressionType:e})))}}:Td,Cb=uh?class extends Gc{}:class extends Gc{constructor(){let{docId:t,ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),h(this,ad),h(this,ld),h(this,cd),h(this,ud),h(this,fd),h(this,md),h(this,bd),h(this,_d),h(this,xd),h(this,Ed),h(this,Sd),h(this,td,void 0),h(this,ed,void 0),h(this,id,void 0),h(this,sd,void 0),h(this,nd,void 0),h(this,rd,0),c(this,id,t),c(this,sd,e)}addFilter(t){if(!t)return"none";let e=l(this,ad,od).get(t);if(e)return e;const[i,s,n]=u(this,ud,pd).call(this,t),r=1===t.length?i:`${i}${s}${n}`;if(e=l(this,ad,od).get(r),e)return l(this,ad,od).set(t,e),e;const a=`g_${l(this,id)}_transfer_map_${d(this,rd)._++}`,o=`url(#${a})`;l(this,ad,od).set(t,o),l(this,ad,od).set(r,o);const h=u(this,bd,yd).call(this,a);return u(this,xd,Ad).call(this,i,s,n,h),o}addHCMFilter(t,e){var i;const s=`${t}-${e}`,n="base";let r=l(this,ld,hd).get(n);if((null==r?void 0:r.key)===s||(r?(null==(i=r.filter)||i.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},l(this,ld,hd).set(n,r)),!t||!e))return r.url;const a=u(this,Sd,Cd).call(this,t);t=Rc.makeHexColor(...a);const o=u(this,Sd,Cd).call(this,e);if(e=Rc.makeHexColor(...o),l(this,cd,dd).style.color="","#000000"===t&&"#ffffff"===e||t===e)return r.url;const h=new Array(256);for(let l=0;l<=255;l++){const t=l/255;h[l]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const c=h.join(","),d=`g_${l(this,id)}_hcm_filter`,p=r.filter=u(this,bd,yd).call(this,d);u(this,xd,Ad).call(this,c,c,c,p),u(this,md,vd).call(this,p);const f=(t,e)=>{const i=a[t]/255,s=o[t]/255,n=new Array(e+1);for(let r=0;r<=e;r++)n[r]=i+r/e*(s-i);return n.join(",")};return u(this,xd,Ad).call(this,f(0,5),f(1,5),f(2,5),p),r.url=`url(#${d})`,r.url}addAlphaFilter(t){let e=l(this,ad,od).get(t);if(e)return e;const[i]=u(this,ud,pd).call(this,[t]),s=`alpha_${i}`;if(e=l(this,ad,od).get(s),e)return l(this,ad,od).set(t,e),e;const n=`g_${l(this,id)}_alpha_map_${d(this,rd)._++}`,r=`url(#${n})`;l(this,ad,od).set(t,r),l(this,ad,od).set(s,r);const a=u(this,bd,yd).call(this,n);return u(this,Ed,kd).call(this,i,a),r}addLuminosityFilter(t){let e,i,s=l(this,ad,od).get(t||"luminosity");if(s)return s;if(t?([e]=u(this,ud,pd).call(this,[t]),i=`luminosity_${e}`):i="luminosity",s=l(this,ad,od).get(i),s)return l(this,ad,od).set(t,s),s;const n=`g_${l(this,id)}_luminosity_map_${d(this,rd)._++}`,r=`url(#${n})`;l(this,ad,od).set(t,r),l(this,ad,od).set(i,r);const a=u(this,bd,yd).call(this,n);return u(this,fd,gd).call(this,a),t&&u(this,Ed,kd).call(this,e,a),r}addHighlightHCMFilter(t,e,i,s,n){var r;const a=`${e}-${i}-${s}-${n}`;let o=l(this,ld,hd).get(t);if((null==o?void 0:o.key)===a||(o?(null==(r=o.filter)||r.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},l(this,ld,hd).set(t,o)),!e||!i))return o.url;const[h,c]=[e,i].map(u(this,Sd,Cd).bind(this));let d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[f,g]=[s,n].map(u(this,Sd,Cd).bind(this));p<d&&([d,p,f,g]=[p,d,g,f]),l(this,cd,dd).style.color="";const m=(t,e,i)=>{const s=new Array(256),n=(p-d)/i,r=t/255,a=(e-t)/(255*i);let o=0;for(let l=0;l<=i;l++){const t=Math.round(d+l*n),e=r+l*a;for(let i=o;i<=t;i++)s[i]=e;o=t+1}for(let l=o;l<256;l++)s[l]=s[o-1];return s.join(",")},v=`g_${l(this,id)}_hcm_${t}_filter`,b=o.filter=u(this,bd,yd).call(this,v);return u(this,md,vd).call(this,b),u(this,xd,Ad).call(this,m(f[0],g[0],5),m(f[1],g[1],5),m(f[2],g[2],5),b),o.url=`url(#${v})`,o.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==l(this,ld,hd).size||(l(this,ed)&&(l(this,ed).parentNode.parentNode.remove(),c(this,ed,null)),l(this,td)&&(l(this,td).clear(),c(this,td,null)),c(this,rd,0))}},Pb=uh?class extends Xc{_fetchData(t){return Qg(t)}}:Md;function Tb(t){if("string"==typeof t||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t}),"object"!=typeof t)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new Lb,{docId:i}=e,s=t.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(uh&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,n=t.data?function(t){if(uh&&typeof Gl<"u"&&t instanceof Gl)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return Ec(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"==typeof t&&!isNaN(null==t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,r=t.httpHeaders||null,a=!0===t.withCredentials,o=t.password??null,l=t.range instanceof Ob?t.range:null,h=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:Eb;let c=t.worker instanceof Qb?t.worker:null;const d=t.verbosity,u="string"!=typeof t.docBaseUrl||Od(t.docBaseUrl)?null:t.docBaseUrl,p="string"==typeof t.cMapUrl?t.cMapUrl:null,f=!1!==t.cMapPacked,g=t.CMapReaderFactory||Sb,m="string"==typeof t.standardFontDataUrl?t.standardFontDataUrl:null,v=t.StandardFontDataFactory||Pb,b=!0!==t.stopAtErrors,y=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,_=!1!==t.isEvalSupported,w="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!uh,x=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,A="boolean"==typeof t.disableFontFace?t.disableFontFace:uh,E=!0===t.fontExtraProperties,k=!0===t.enableXfa,S=t.ownerDocument||globalThis.document,C=!0===t.disableRange,P=!0===t.disableStream,T=!0===t.disableAutoFetch,M=!0===t.pdfBug,D=l?l.length:t.length??NaN,R="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!uh&&!A,L="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:g===Td&&v===Md&&p&&m&&Bd(p,document.baseURI)&&Bd(m,document.baseURI),O=t.canvasFactory||new kb({ownerDocument:S}),I=t.filterFactory||new Cb({docId:i,ownerDocument:S});!function(t){Number.isInteger(t)&&(oc=t)}(d);const F={canvasFactory:O,filterFactory:I};if(L||(F.cMapReaderFactory=new g({baseUrl:p,isCompressed:f}),F.standardFontDataFactory=new v({baseUrl:m})),!c){const t={verbosity:d,port:Lm.workerPort};c=t.port?Qb.fromPort(t):new Qb(t),e._worker=c}const N={docId:i,apiVersion:"4.3.136",data:n,password:o,disableAutoFetch:T,rangeChunkSize:h,length:D,docBaseUrl:u,enableXfa:k,evaluatorOptions:{maxImageSize:y,disableFontFace:A,ignoreErrors:b,isEvalSupported:_,isOffscreenCanvasSupported:w,canvasMaxAreaInBytes:x,fontExtraProperties:E,useSystemFonts:R,cMapUrl:L?p:null,standardFontDataUrl:L?m:null}},j={disableFontFace:A,fontExtraProperties:E,ownerDocument:S,pdfBug:M,styleElement:null,loadingParams:{disableAutoFetch:T,enableXfa:k}};return c.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const t=c.messageHandler.sendWithPromise("GetDocRequest",N,n?[n.buffer]:null);let o;return l?o=new fv(l,{disableRange:C,disableStream:P}):n||(d={url:s,length:D,httpHeaders:r,withCredentials:a,rangeChunkSize:h,disableRange:C,disableStream:P},o=uh?typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Bd(d.url)?new Ev(d):new Rv(d):Bd(d.url)?new Ev(d):new Pv(d)),t.then((t=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const s=new Zm(i,t,c.port),n=new ry(s,e,o,j,F);e._transport=n,s.send("Ready",null)}));var d})).catch(e._capability.reject),e}function Mb(t){return"object"==typeof t&&Number.isInteger(null==t?void 0:t.num)&&t.num>=0&&Number.isInteger(null==t?void 0:t.gen)&&t.gen>=0}var Db;const Rb=class t{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+d(t,Db)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i;this.destroyed=!0;try{null!=(t=this._worker)&&t.port&&(this._worker._pendingDestroy=!0),await(null==(e=this._transport)?void 0:e.destroy())}catch(s){throw null!=(i=this._worker)&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Db=new WeakMap,h(Rb,Db,0);let Lb=Rb,Ob=class{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){dc("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Ib{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return fc(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Fb,Nb,jb,Bb,Hb,Wb,zb,Vb;class $b{constructor(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h(this,jb),h(this,Hb),h(this,Fb,null),h(this,Nb,!1),this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new jd:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new uy,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Rd({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}getAnnotations(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return fc(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return(null==(t=this._transport._htmlForXfa)?void 0:t.children[this._pageIndex])||null}render(t){let{canvasContext:e,viewport:i,intent:s="display",annotationMode:n=Ah.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:d=null}=t;var p,f;null==(p=this._stats)||p.time("Overall");const g=this._transport.getRenderingIntent(s,n,d),{renderingIntent:m,cacheKey:v}=g;c(this,Nb,!1),u(this,Hb,Wb).call(this),o||(o=this._transport.getOptionalContentConfig(m));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const y=!!(m&bh);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(f=this._stats)||f.time("Page Request"),this._pumpOperatorList(g));const _=t=>{var e;b.renderTasks.delete(w),(this._maybeCleanupAfterRender||y)&&c(this,Nb,!0),u(this,jb,Bb).call(this,!y),t?(w.capability.reject(t),this._abortOperatorList({intentState:b,reason:t instanceof Error?t:new Error(t)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!=(e=globalThis.Stats)&&e.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new gy({callback:_,params:{canvasContext:e,viewport:i,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:h});(b.renderTasks||(b.renderTasks=new Set)).add(w);const x=w.task;return Promise.all([b.displayReadyCapability.promise,o]).then((t=>{let[e,i]=t;var s;if(this.destroyed)_();else{if(null==(s=this._stats)||s.time("Rendering"),!(i.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:e,optionalContentConfig:i}),w.operatorListChanged()}})).catch(_),x}getOperatorList(){let{intent:t="display",annotationMode:e=Ah.ENABLE,printAnnotationStorage:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const n=this._transport.getRenderingIntent(t,e,i,!0);let r,a=this._intentStates.get(n.cacheKey);return a||(a=Object.create(null),this._intentStates.set(n.cacheKey,a)),a.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(r))},a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(s=this._stats)||s.time("Page Request"),this._pumpOperatorList(n)),a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:t=!1,disableNormalization:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((t=>Ab.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){const s=e.getReader(),n={items:[],styles:Object.create(null),lang:null};!function e(){s.read().then((function(i){let{value:s,done:r}=i;r?t(n):(n.lang??(n.lang=s.lang),Object.assign(n.styles,s.styles),n.items.push(...s.items),e())}),i)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),c(this,Nb,!1),u(this,Hb,Wb).call(this),Promise.all(t)}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(this,Nb,!0);const e=u(this,jb,Bb).call(this,!1);return t&&e&&this._stats&&(this._stats=new jd),e}_startRenderPage(t,e){var i,s;const n=this._intentStates.get(e);n&&(null==(i=this._stats)||i.timeEnd("Page Request"),null==(s=n.displayReadyCapability)||s.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&u(this,jb,Bb).call(this,!0)}_pumpOperatorList(t){let{renderingIntent:e,cacheKey:i,annotationStorageSerializable:s}=t;const{map:n,transfer:r}=s,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:i,annotationStorage:n},r).getReader(),o=this._intentStates.get(i);o.streamReader=a;const l=()=>{a.read().then((t=>{let{value:e,done:i}=t;i?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,o),l())}),(t=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const t of o.renderTasks)t.operatorListChanged();u(this,jb,Bb).call(this,!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}}))};l()}_abortOperatorList(t){let{intentState:e,reason:i,force:s=!1}=t;if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(i instanceof Ld){let t=100;return i.extraDelay>0&&i.extraDelay<1e3&&(t+=i.extraDelay),void(e.streamReaderCancelTimeout=setTimeout((()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:i,force:!0})}),t))}}if(e.streamReader.cancel(new xc(i.message)).catch((()=>{})),e.streamReader=null,!this._transport.destroyed){for(const[t,i]of this._intentStates)if(i===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}Fb=new WeakMap,Nb=new WeakMap,jb=new WeakSet,Bb=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(u(this,Hb,Wb).call(this),!l(this,Nb)||this.destroyed)return!1;if(t)return c(this,Fb,setTimeout((()=>{c(this,Fb,null),u(this,jb,Bb).call(this,!1)}),5e3)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),c(this,Nb,!1),!0},Hb=new WeakSet,Wb=function(){l(this,Fb)&&(clearTimeout(l(this,Fb)),c(this,Fb,null))};class Ub{constructor(){h(this,zb,new Set),h(this,Vb,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};l(this,Vb).then((()=>{for(const t of l(this,zb))t.call(this,i)}))}addEventListener(t,e){l(this,zb).add(e)}removeEventListener(t,e){l(this,zb).delete(e)}terminate(){l(this,zb).clear()}}zb=new WeakMap,Vb=new WeakMap;const Gb={isWorkerDisabled:!1,fakeWorkerId:0};var qb,Yb,Xb;uh&&(Gb.isWorkerDisabled=!0,Lm.workerSrc||(Lm.workerSrc="./pdf.worker.mjs")),Gb.isSameOrigin=function(t,e){let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch{return!1}const s=new URL(e,i);return i.origin===s.origin},Gb.createCDNWrapper=function(t){const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};const Kb=class t{constructor(){let{name:e=null,port:i=null,verbosity:s=lc()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var n;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,i){if(null!=(n=l(t,qb))&&n.has(i))throw new Error("Cannot use more than one PDFWorker per port.");return(l(t,qb)||c(t,qb,new WeakMap)).set(i,this),void this._initializeFromPort(i)}this._initialize()}get promise(){return uh?Promise.all([Kg.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Zm("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!Gb.isWorkerDisabled&&!l(t,Yb,Xb)){let{workerSrc:e}=t;try{Gb.isSameOrigin(window.location.href,e)||(e=Gb.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Zm("main","worker",t),s=()=>{t.removeEventListener("error",n),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||s()};t.addEventListener("error",n),i.on("test",(e=>{t.removeEventListener("error",n),this.destroyed?s():e?(this._messageHandler=i,this._port=t,this._webWorker=t,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),t.terminate())})),i.on("ready",(e=>{if(t.removeEventListener("error",n),this.destroyed)s();else try{r()}catch{this._setupFakeWorker()}}));const r=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void r()}catch{hc("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){Gb.isWorkerDisabled||(cc("Setting up fake worker."),Gb.isWorkerDisabled=!0),t._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new Ub;this._port=e;const i="fake"+Gb.fakeWorkerId++,s=new Zm(i+"_worker",i,e);t.setup(s,e);const n=new Zm(i,i+"_worker",e);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null==(e=l(t,qb))||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(null==e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const s=null==(i=l(this,qb))?void 0:i.get(e.port);if(s){if(s._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new t(e)}static get workerSrc(){if(Lm.workerSrc)return Lm.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return fc(this,"_setupFakeWorkerGlobal",(async()=>l(this,Yb,Xb)?l(this,Yb,Xb):(await import(this.workerSrc)).WorkerMessageHandler)())}};qb=new WeakMap,Yb=new WeakSet,Xb=function(){var t;try{return(null==(t=globalThis.pdfjsWorker)?void 0:t.WorkerMessageHandler)||null}catch{return null}},h(Kb,Yb),h(Kb,qb,void 0);let Qb=Kb;var Jb,Zb,ty,ey,iy,sy,ny;class ry{constructor(t,e,i,s,n){h(this,sy),h(this,Jb,new Map),h(this,Zb,new Map),h(this,ty,new Map),h(this,ey,new Map),h(this,iy,null),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new uy,this.fontLoader=new Gg({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return fc(this,"annotationStorage",new $g)}getRenderingIntent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ah.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=vh,r=Ng;switch(t){case"any":n=mh;break;case"display":break;case"print":n=bh;break;default:cc(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case Ah.DISABLE:n+=wh;break;case Ah.ENABLE:break;case Ah.ENABLE_FORMS:n+=yh;break;case Ah.ENABLE_STORAGE:n+=_h,r=(n&bh&&i instanceof Ug?i:this.annotationStorage).serializable;break;default:cc(`getRenderingIntent - invalid annotationMode: ${e}`)}return s&&(n+=xh),{renderingIntent:n,cacheKey:`${n}_${r.hash}`,annotationStorageSerializable:r}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null==(t=l(this,iy))||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,Zb).values())e.push(s._destroy());l(this,Zb).clear(),l(this,ty).clear(),l(this,ey).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return e.push(i),Promise.all(e).then((()=>{var t;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Jb).clear(),this.filterFactory.destroy(),_b.cleanup(),null==(t=this._networkStream)||t.cancelAllRequests(new xc("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{uc(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function(t){let{value:i,done:s}=t;s?e.close():(uc(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(i),1,[i]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=Promise.withResolvers(),s=this._fullReader;return s.headersReady.then((()=>{var t;(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&(null==(t=e.onProgress)||t.call(e,this._lastProgress)),s.onProgress=t=>{var i;null==(i=e.onProgress)||i.call(e,{loaded:t.loaded,total:t.total})}),i.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,e)=>{uc(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function(t){let{value:i,done:s}=t;s?e.close():(uc(i instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(i),1,[i]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(t=>{let{pdfInfo:i}=t;this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Ib(i,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new mc(t.message,t.code);break;case"InvalidPDFException":i=new bc(t.message);break;case"MissingPDFException":i=new yc(t.message);break;case"UnexpectedResponseException":i=new _c(t.message,t.status);break;case"UnknownErrorException":i=new vc(t.message,t.details);break;default:dc("DocException - expected a valid Error.")}e._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(c(this,iy,Promise.withResolvers()),e.onPassword){const s=t=>{t instanceof Error?l(this,iy).reject(t):l(this,iy).resolve({password:t})};try{e.onPassword(s,t.code)}catch(i){l(this,iy).reject(i)}}else l(this,iy).reject(new mc(t.message,t.code));return l(this,iy).promise})),t.on("DataLoaded",(t=>{var i;null==(i=e.onProgress)||i.call(e,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{this.destroyed||l(this,Zb).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(e=>{let[i,s,n]=e;var r;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:e,fontExtraProperties:a,pdfBug:o}=this._params;if("error"in n){const t=n.error;cc(`Error during font loading: ${t}`),this.commonObjs.resolve(i,t);break}const h=o&&null!=(r=globalThis.FontInspector)&&r.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,c=new qg(n,{disableFontFace:e,inspectFont:h});this.fontLoader.bind(c).catch((()=>t.sendWithPromise("FontFallback",{id:i}))).finally((()=>{!a&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)}));break;case"CopyLocalImage":const{imageRef:d}=n;uc(d,"The imageRef must be defined.");for(const t of l(this,Zb).values())for(const[,e]of t.objs)if((null==e?void 0:e.ref)===d)return e.dataLen?(this.commonObjs.resolve(i,structuredClone(e)),e.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,n);break;default:throw new Error(`Got unknown common object type ${s}`)}return null})),t.on("obj",(t=>{let[e,i,s,n]=t;var r;if(this.destroyed)return;const a=l(this,Zb).get(i);if(!a.objs.has(e)){if(0===a._intentStates.size)return void(null==(r=null==n?void 0:n.bitmap)||r.close());switch(s){case"Image":a.objs.resolve(e,n),(null==n?void 0:n.dataLen)>1e7&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(e,n);break;default:throw new Error(`Got unknown object type ${s}`)}}})),t.on("DocProgress",(t=>{var i;this.destroyed||null==(i=e.onProgress)||i.call(e,{loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t;this.annotationStorage.size<=0&&cc("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:(null==(t=this._fullReader)?void 0:t.filename)??null},i).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=l(this,ty).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,ey).set(i.refStr,t);const s=new $b(e,i,this,this._params.pdfBug);return l(this,Zb).set(e,s),s}));return l(this,ty).set(e,s),s}getPageIndex(t){return Mb(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return u(this,sy,ny).call(this,"GetFieldObjects")}hasJSActions(){return u(this,sy,ny).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return u(this,sy,ny).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return u(this,sy,ny).call(this,"GetOptionalContentConfig").then((e=>new pv(e,t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,Jb).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then((t=>{var e,i;return{info:t[0],metadata:t[1]?new tv(t[1]):null,contentDispositionFilename:(null==(e=this._fullReader)?void 0:e.filename)??null,contentLength:(null==(i=this._fullReader)?void 0:i.contentLength)??null}}));return l(this,Jb).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Zb).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,Jb).clear(),this.filterFactory.destroy(!0),_b.cleanup()}}cachedPageNumber(t){if(!Mb(t))return null;const e=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,ey).get(e)??null}}Jb=new WeakMap,Zb=new WeakMap,ty=new WeakMap,ey=new WeakMap,iy=new WeakMap,sy=new WeakSet,ny=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=l(this,Jb).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return l(this,Jb).set(t,s),s};const ay=Symbol("INITIAL_DATA");var oy,ly,hy,cy,dy;class uy{constructor(){h(this,ly),h(this,oy,Object.create(null))}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){const i=u(this,ly,hy).call(this,t);return i.promise.then((()=>e(i.data))),null}const i=l(this,oy)[t];if(!i||i.data===ay)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=l(this,oy)[t];return!!e&&e.data!==ay}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=u(this,ly,hy).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in l(this,oy)){const{data:i}=l(this,oy)[e];null==(t=null==i?void 0:i.bitmap)||t.close()}c(this,oy,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,oy)){const{data:e}=l(this,oy)[t];e!==ay&&(yield[t,e])}}}oy=new WeakMap,ly=new WeakSet,hy=function(t){var e;return(e=l(this,oy))[t]||(e[t]={...Promise.withResolvers(),data:ay})};class py{constructor(t){h(this,cy,null),c(this,cy,t),this.onContinue=null}get promise(){return l(this,cy).capability.promise}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;l(this,cy).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,cy).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,cy);return t.form||t.canvas&&(null==e?void 0:e.size)>0}}cy=new WeakMap;const fy=class t{constructor(t){let{callback:e,params:i,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:u=null}=t;this.callback=e,this.params=i,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=d,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new py(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){let{transparency:i=!1,optionalContentConfig:s}=e;var n,r;if(this.cancelled)return;if(this._canvas){if(l(t,dy).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(t,dy).add(this._canvas)}this._pdfBug&&null!=(n=globalThis.StepperManager)&&n.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:o,transform:h,background:c}=this.params;this.gfx=new Mm(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:h,viewport:o,transparency:i,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,null==(r=this.graphicsReadyCallback)||r.call(this)}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var s;this.running=!1,this.cancelled=!0,null==(s=this.gfx)||s.endDrawing(),l(t,dy).delete(this._canvas),this.callback(e||new Ld(`Rendering cancelled, page ${this._pageIndex+1}`,i))}operatorListChanged(){var t;this.graphicsReady?(null==(t=this.stepper)||t.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(t,dy).delete(this._canvas),this.callback())))}};dy=new WeakMap,h(fy,dy,new WeakSet);let gy=fy;const my="4.3.136",vy="0cec64437";function by(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function yy(t){return Math.max(0,Math.min(255,255*t))}class _y{static CMYK_G(t){let[e,i,s,n]=t;return["G",1-Math.min(1,.3*e+.59*s+.11*i+n)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_rgb(t){let[e]=t;return e=yy(e),[e,e,e]}static G_HTML(t){let[e]=t;const i=by(e);return`#${i}${i}${i}`}static RGB_G(t){let[e,i,s]=t;return["G",.3*e+.59*i+.11*s]}static RGB_rgb(t){return t.map(yy)}static RGB_HTML(t){return`#${t.map(by).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(t){let[e,i,s,n]=t;return["RGB",1-Math.min(1,e+n),1-Math.min(1,s+n),1-Math.min(1,i+n)]}static CMYK_rgb(t){let[e,i,s,n]=t;return[yy(1-Math.min(1,e+n)),yy(1-Math.min(1,s+n)),yy(1-Math.min(1,i+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,i,s]=t;const n=1-e,r=1-i,a=1-s;return["CMYK",n,r,a,Math.min(n,r,a)]}}class wy{static setupStorage(t,e,i,s,n){const r=s.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===n)break;t.addEventListener("input",(t=>{s.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===n)break;t.addEventListener("change",(t=>{s.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===n)break;t.addEventListener("input",(t=>{s.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);for(const t of i.children)t.attributes.value===r.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{const i=t.target.options,n=-1===i.selectedIndex?"":i[i.selectedIndex].value;s.setValue(e,{value:n})}))}}static setAttributes(t){let{html:e,element:i,storage:s=null,intent:n,linkService:r}=t;const{attributes:a}=i,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${n}`);for(const[l,h]of Object.entries(a))if(null!=h)switch(l){case"class":h.length&&e.setAttribute(l,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!o||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,h)}o&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,i,s)}static render(t){var e,i;const s=t.annotationStorage,n=t.linkService,r=t.xfaHtml,a=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:a,linkService:n});const l="richText"!==a,h=t.div;if(h.append(o),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=e}l&&h.setAttribute("class","xfaLayer xfaFont");const c=[];if(0===r.children.length){if(r.value){const t=document.createTextNode(r.value);o.append(t),l&&Ab.shouldBuildText(r.name)&&c.push(t)}return{textDivs:c}}const d=[[r,-1,o]];for(;d.length>0;){const[t,r,o]=d.at(-1);if(r+1===t.children.length){d.pop();continue}const h=t.children[++d.at(-1)[1]];if(null===h)continue;const{name:u}=h;if("#text"===u){const t=document.createTextNode(h.value);c.push(t),o.append(t);continue}const p=null!=(e=null==h?void 0:h.attributes)&&e.xmlns?document.createElementNS(h.attributes.xmlns,u):document.createElement(u);if(o.append(p),h.attributes&&this.setAttributes({html:p,element:h,storage:s,intent:a,linkService:n}),(null==(i=h.children)?void 0:i.length)>0)d.push([h,-1,p]);else if(h.value){const t=document.createTextNode(h.value);l&&Ab.shouldBuildText(u)&&c.push(t),p.append(t)}}for(const u of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const xy=1e3,Ay=new WeakSet;function Ey(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class ky{static create(t){switch(t.data.annotationType){case Ih:return new N_(t);case Oh:return new j_(t);case Qh:switch(t.data.fieldType){case"Tx":return new H_(t);case"Btn":return t.data.radioButton?new V_(t):t.data.checkBox?new z_(t):new $_(t);case"Ch":return new U_(t);case"Sig":return new W_(t)}return new B_(t);case Xh:return new G_(t);case Fh:return new Y_(t);case Nh:return new X_(t);case jh:return new K_(t);case Bh:return new Q_(t);case Wh:return new J_(t);case qh:return new tw(t);case Yh:return new ew(t);case Hh:return new Z_(t);case zh:return new iw(t);case Vh:return new sw(t);case $h:return new nw(t);case Uh:return new rw(t);case Gh:return new aw(t);case Kh:return new ow(t);default:return new Dy(t)}}}var Sy,Cy,Py,Ty,My;Sy=new WeakMap,Cy=new WeakMap,Py=new WeakMap,Ty=new WeakSet,My=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:a,pageY:o}}}}=this;null==i||i.splice(0,4,...t);const{width:l,height:h}=Ey(t);e.left=100*(t[0]-a)/n+"%",e.top=100*(r-t[3]+o)/r+"%",0===s?(e.width=100*l/n+"%",e.height=100*h/r+"%"):this.setRotation(s)};let Dy=class t{constructor(t){let{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,Ty),h(this,Sy,null),h(this,Cy,!1),h(this,Py,null),this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData(t){let{titleObj:e,contentsObj:i,richText:s}=t;return!!(null!=e&&e.str||null!=i&&i.str||null!=s&&s.str)}get hasPopupData(){return t._hasPopupData(this.data)}updateEdited(t){var e;if(!this.container)return;l(this,Sy)||c(this,Sy,{rect:this.data.rect.slice(0)});const{rect:i}=t;i&&u(this,Ty,My).call(this,i),null==(e=l(this,Py))||e.popup.updateEdited(t)}resetEdited(){var t;l(this,Sy)&&(u(this,Ty,My).call(this,l(this,Sy).rect),null==(t=l(this,Py))||t.popup.resetEdited(),c(this,Sy,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",e.id),this instanceof B_||(n.tabIndex=xy);const{style:r}=n;if(r.zIndex=this.parent.zIndex++,e.popupRef&&n.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(n.title=e.alternativeText),e.noRotate&&n.classList.add("norotate"),!e.rect||this instanceof G_){const{rotation:t}=e;return!e.hasOwnCanvas&&0!==t&&this.setRotation(t,n),n}const{width:a,height:o}=Ey(e.rect);if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;r.borderRadius=e}else if(this instanceof V_){const t=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;r.borderRadius=t}switch(e.borderStyle.style){case Jh:r.borderStyle="solid";break;case Zh:r.borderStyle="dashed";break;case tc:cc("Unimplemented border style: beveled");break;case ec:cc("Unimplemented border style: inset");break;case ic:r.borderBottomStyle="solid"}const s=e.borderColor||null;s?(c(this,Cy,!0),r.borderColor=Rc.makeHexColor(0|s[0],0|s[1],0|s[2])):r.borderWidth=0}const l=Rc.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:u,pageY:p}=s.rawDims;r.left=100*(l[0]-u)/h+"%",r.top=100*(l[1]-p)/d+"%";const{rotation:f}=e;return e.hasOwnCanvas||0===f?(r.width=100*a/h+"%",r.height=100*o/d+"%"):this.setRotation(f,n),n}setRotation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:n,height:r}=Ey(this.data.rect);let a,o;t%180===0?(a=100*n/i,o=100*r/s):(a=100*r/i,o=100*n/s),e.style.width=`${a}%`,e.style.height=`${o}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,i)=>{const s=i.detail[t],n=s[0],r=s.slice(1);i.target.style[e]=_y[`${n}_HTML`](r),this.annotationStorage.setValue(this.data.id,{[e]:_y[`${n}_rgb`](r)})};return fc(this,"_commonActions",{display:t=>{const{display:e}=t.detail,i=e%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const n=t[s]||i[s];null==n||n(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,n]of Object.entries(e)){const r=i[s];if(r){r({detail:{[s]:n},target:t}),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,n]=this.data.rect;if(1===t.length){const[,{x:r,y:a},{x:o,y:l}]=t[0];if(s===r&&n===a&&e===o&&i===l)return}const{style:r}=this.container;let a;if(l(this,Cy)){const{borderColor:t,borderWidth:e}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const o=s-e,h=n-i,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=c.createElement("defs");d.append(u);const p=c.createElement("clipPath"),f=`clippath_${this.data.id}`;p.setAttribute("id",f),p.setAttribute("clipPathUnits","objectBoundingBox"),u.append(p);for(const[,{x:l,y:g},{x:m,y:v}]of t){const t=c.createElement("rect"),i=(m-e)/o,s=(n-g)/h,r=(l-m)/o,d=(g-v)/h;t.setAttribute("x",i),t.setAttribute("y",s),t.setAttribute("width",r),t.setAttribute("height",d),p.append(t),null==a||a.push(`<rect vector-effect="non-scaling-stroke" x="${i}" y="${s}" width="${r}" height="${d}"/>`)}l(this,Cy)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${f})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=c(this,Py,new G_({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){dc("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:t,id:n,exportValues:r}of s){if(-1===t||n===e)continue;const s="string"==typeof r?r:null,a=document.querySelector(`[data-element-id="${n}"]`);!a||Ay.has(a)?i.push({id:n,exportValue:s,domElement:a}):cc(`_getElementsByName - element not allowed: ${n}`)}return i}for(const s of document.getElementsByName(t)){const{exportValue:t}=s,n=s.getAttribute("data-element-id");n!==e&&Ay.has(s)&&i.push({id:n,exportValue:t,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),null==(t=this.popup)||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),null==(t=this.popup)||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{var i;null==(i=this.linkService.eventBus)||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}};var Ry,Ly,Oy,Iy,Fy,Ny,jy,By,Hy,Wy,zy,Vy,$y,Uy,Gy,qy,Yy,Xy,Ky,Qy,Jy,Zy,t_,e_,i_,s_,n_,r_,a_,o_,l_,h_,c_,d_,u_,p_,f_,g_,m_,v_,b_,y_,__,w_,x_,A_,E_,k_,S_,C_,P_,T_,M_,D_,R_,L_,O_,I_,F_;class N_ extends Dy{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,{isRenderable:!0,ignoreBorder:!(null==e||!e.ignoreBorder),createQuadrilaterals:!0}),h(this,Ry),h(this,Oy),h(this,Fy),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action),s=!0):t.attachment?(u(this,Oy,Iy).call(this,i,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(u(this,Fy,Ny).call(this,i,t.setOCGState),s=!0):t.dest?(this._bindLink(i,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&u(this,Ry,Ly).call(this)}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),u(this,Ry,Ly).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const n=i.get(s);n&&(t[n]=()=>{var t;return null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),u(this,Ry,Ly).call(this)}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),u(this,Ry,Ly).call(this),!this._fieldObjects)return cc('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=()=>!1));t.onclick=()=>{var t;null==i||i();const{fields:s,refs:n,include:r}=e,a=[];if(0!==s.length||0!==n.length){const t=new Set(n);for(const e of s){const i=this._fieldObjects[e]||[];for(const{id:e}of i)t.add(e)}for(const e of Object.values(this._fieldObjects))for(const i of e)t.has(i.id)===r&&a.push(i)}else for(const e of Object.values(this._fieldObjects))a.push(...e);const o=this.annotationStorage,l=[];for(const e of a){const{id:t}=e;switch(l.push(t),e.type){case"text":{const i=e.defaultValue||"";o.setValue(t,{value:i});break}case"checkbox":case"radiobutton":{const i=e.defaultValue===e.exportValues;o.setValue(t,{value:i});break}case"combobox":case"listbox":{const i=e.defaultValue||"";o.setValue(t,{value:i});break}default:continue}const i=document.querySelector(`[data-element-id="${t}"]`);i&&(Ay.has(i)?i.dispatchEvent(new Event("resetform")):cc(`_bindResetFormAction - element not allowed: ${t}`))}return this.enableScripting&&(null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})),!1}}}Ry=new WeakSet,Ly=function(){this.container.setAttribute("data-internal-link","")},Oy=new WeakSet,Iy=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>{var t;return null==(t=this.downloadManager)||t.openOrDownloadData(e.content,e.filename,i),!1},u(this,Ry,Ly).call(this)},Fy=new WeakSet,Ny=function(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),u(this,Ry,Ly).call(this)};class j_ extends Dy{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class B_ extends Dy{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null==(e=t.previousSibling)?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Sc.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,n){i.includes("mouse")?t.addEventListener(i,(t=>{var e;null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(i,(t=>{var r;if("blur"===i){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}n&&(null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t)}}))}))}_setEventListeners(t,e,i,s){var n,r,a;for(const[o,l]of i)("Action"===l||null!=(n=this.data.actions)&&n[l])&&(("Focus"===l||"Blur"===l)&&(e||(e={focused:!1})),this._setEventListener(t,e,o,l,s),"Focus"!==l||null!=(r=this.data.actions)&&r.Blur?"Blur"===l&&(null==(a=this.data.actions)||!a.Focus)&&this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":Rc.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const{fontColor:e}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=t.style;let n;const r=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(gh*i))||1);n=Math.min(i,r(e/gh))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);n=Math.min(i,r(t/gh))}s.fontSize=`calc(${n}px * var(--scale-factor))`,s.color=Rc.makeHexColor(e[0],e[1],e[2]),null!==this.data.textAlignment&&(s.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class H_ extends B_{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,s){const n=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),n.setValue(r.id,{[s]:i})}render(){var t,e;const i=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=i.getValue(s,{value:this.data.fieldValue});let a=r.value||"";const o=i.getValue(s,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=r.formattedValue||(null==(t=this.data.textContent)?void 0:t.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=l??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",l??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ay.add(n),n.setAttribute("data-element-id",s),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=xy,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",(t=>{i.setValue(s,{value:t.target.value}),this.setPropertyOnSiblings(n,"value",t.target.value,"value"),h.formattedValue=null})),n.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";n.value=h.userValue=e,h.formattedValue=null}));let c=t=>{const{formattedValue:e}=h;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",(t=>{var e;if(h.focused)return;const{target:i}=t;h.userValue&&(i.value=h.userValue),h.lastCommittedValue=i.value,h.commitKey=1,null!=(e=this.data.actions)&&e.Focus||(h.focused=!0)})),n.addEventListener("updatefromsandbox",(t=>{this.showElementAndHideCanvas(t.target);const e={value(t){h.userValue=t.detail.value??"",i.setValue(s,{value:h.userValue.toString()}),t.target.value=h.userValue},formattedValue(t){const{formattedValue:e}=t.detail;h.formattedValue=e,null!=e&&t.target!==document.activeElement&&(t.target.value=e),i.setValue(s,{formattedValue:e})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:t=>{var e;const{charLimit:n}=t.detail,{target:r}=t;if(0===n)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",n);let a=h.userValue;!a||a.length<=n||(a=a.slice(0,n),r.value=h.userValue=a,i.setValue(s,{value:a}),null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(e,t)})),n.addEventListener("keydown",(t=>{var e;h.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(h.commitKey=3):i=2,-1===i)return;const{value:n}=t.target;h.lastCommittedValue!==n&&(h.lastCommittedValue=n,h.userValue=n,null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:n,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const t=c;c=null,n.addEventListener("blur",(e=>{var i,n;if(!h.focused||!e.relatedTarget)return;null!=(i=this.data.actions)&&i.Blur||(h.focused=!1);const{value:r}=e.target;h.userValue=r,h.lastCommittedValue!==r&&(null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:r,willCommit:!0,commitKey:h.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),t(e)})),null!=(e=this.data.actions)&&e.Keystroke&&n.addEventListener("beforeinput",(t=>{var e;h.lastCommittedValue=null;const{data:i,target:n}=t,{value:r,selectionStart:a,selectionEnd:o}=n;let l=a,c=o;switch(t.inputType){case"deleteWordBackward":{const t=r.substring(0,a).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=r.substring(a).match(/^[^\w]*\w*/);t&&(c+=t[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(c+=1)}t.preventDefault(),null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(c&&n.addEventListener("blur",c),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class W_ extends B_{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class z_ extends B_{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof s&&(s="Off"!==s,t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const n=document.createElement("input");return Ay.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.setAttribute("exportValue",e.exportValue),n.tabIndex=xy,n.addEventListener("change",(s=>{const{name:n,checked:r}=s.target;for(const a of this._getElementsByName(n,i)){const i=r&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=i),t.setValue(a.id,{value:i})}t.setValue(i,{value:r})})),n.addEventListener("resetform",(t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",(e=>{const s={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(s,e)})),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class V_ extends B_{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof s&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const r of this._getElementsByName(e.fieldName,i))t.setValue(r.id,{value:!1});const n=document.createElement("input");if(Ay.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.tabIndex=xy,n.addEventListener("change",(e=>{const{name:s,checked:n}=e.target;for(const r of this._getElementsByName(s,i))t.setValue(r.id,{value:!1});t.setValue(i,{value:n})})),n.addEventListener("resetform",(t=>{const i=e.defaultFieldValue;t.target.checked=null!=i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const s=e.buttonValue;n.addEventListener("updatefromsandbox",(e=>{const n={value:e=>{const n=s===e.detail.value;for(const s of this._getElementsByName(e.target.name)){const e=n&&s.id===i;s.domElement&&(s.domElement.checked=e),t.setValue(s.id,{value:e})}}};this._dispatchEventFromSandbox(n,e)})),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class $_ extends N_{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class U_ extends B_{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Ay.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=xy;let n=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const i of s.options)i.selected=i.value===e}));for(const h of this.data.options){const t=document.createElement("option");t.textContent=h.displayValue,t.value=h.exportValue,i.value.includes(h.exportValue)&&(t.setAttribute("selected",!0),n=!1),s.append(t)}let r=null;if(n){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),s.prepend(t),r=()=>{t.remove(),s.removeEventListener("input",r),r=null},s.addEventListener("input",r)}const a=t=>{const e=t?"value":"textContent",{options:i,multiple:n}=s;return n?Array.prototype.filter.call(i,(t=>t.selected)).map((t=>t[e])):-1===i.selectedIndex?null:i[i.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",(i=>{const n={value(i){null==r||r();const n=i.detail.value,l=new Set(Array.isArray(n)?n:[n]);for(const t of s.options)t.selected=l.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){s.multiple=!0},remove(i){const n=s.options,r=i.detail.remove;n[r].selected=!1,s.remove(r),n.length>0&&-1===Array.prototype.findIndex.call(n,(t=>t.selected))&&(n[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},clear(i){for(;0!==s.length;)s.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(i){const{index:n,displayValue:r,exportValue:h}=i.detail.insert,c=s.children[n],d=document.createElement("option");d.textContent=r,d.value=h,c?c.before(d):s.append(d),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},items(i){const{items:n}=i.detail;for(;0!==s.length;)s.remove(0);for(const t of n){const{displayValue:e,exportValue:i}=t,n=document.createElement("option");n.textContent=e,n.value=i,s.append(n)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},indices(i){const s=new Set(i.detail.indices);for(const t of i.target.options)t.selected=s.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(n,i)})),s.addEventListener("input",(i=>{var s;const n=a(!0),r=a(!1);t.setValue(e,{value:n}),i.preventDefault(),null==(s=this.linkService.eventBus)||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:r,changeEx:n,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):s.addEventListener("input",(function(i){t.setValue(e,{value:a(!0)})})),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class G_ extends Dy{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Dy._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new q_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>`${Fc}${t}`)).join(",")),this.container}}class q_{constructor(t){let{container:e,color:i,elements:s,titleObj:n,modificationDate:r,contentsObj:a,richText:o,parent:d,rect:p,parentRect:f,open:g}=t;var m;h(this,s_),h(this,r_),h(this,o_),h(this,h_),h(this,d_),h(this,p_),h(this,g_),h(this,v_),h(this,y_),h(this,jy,u(this,d_,u_).bind(this)),h(this,By,u(this,y_,__).bind(this)),h(this,Hy,u(this,v_,b_).bind(this)),h(this,Wy,u(this,g_,m_).bind(this)),h(this,zy,null),h(this,Vy,null),h(this,$y,null),h(this,Uy,null),h(this,Gy,null),h(this,qy,null),h(this,Yy,null),h(this,Xy,!1),h(this,Ky,null),h(this,Qy,null),h(this,Jy,null),h(this,Zy,null),h(this,t_,null),h(this,e_,null),h(this,i_,!1),c(this,Vy,e),c(this,t_,n),c(this,$y,a),c(this,Zy,o),c(this,qy,d),c(this,zy,i),c(this,Jy,p),c(this,Yy,f),c(this,Gy,s),c(this,Uy,Vd.toDateObject(r)),this.trigger=s.flatMap((t=>t.getElementsToTriggerPopup()));for(const h of this.trigger)h.addEventListener("click",l(this,Wy)),h.addEventListener("mouseenter",l(this,Hy)),h.addEventListener("mouseleave",l(this,By)),h.classList.add("popupTriggerArea");for(const h of s)null==(m=h.container)||m.addEventListener("keydown",l(this,jy));l(this,Vy).hidden=!0,g&&u(this,g_,m_).call(this)}render(){if(l(this,Ky))return;const t=c(this,Ky,document.createElement("div"));if(t.className="popup",l(this,zy)){const e=t.style.outlineColor=Rc.makeHexColor(...l(this,zy));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`:t.style.backgroundColor=Rc.makeHexColor(...l(this,zy).map((t=>Math.floor(.7*(255-t)+t))))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),({dir:i.dir,str:i.textContent}=l(this,t_)),t.append(e),l(this,Uy)){const t=document.createElement("span");t.classList.add("popupDate"),t.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),t.setAttribute("data-l10n-args",JSON.stringify({date:l(this,Uy).toLocaleDateString(),time:l(this,Uy).toLocaleTimeString()})),e.append(t)}const s=l(this,s_,n_);if(s)wy.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const e=this._formatContents(l(this,$y));t.append(e)}l(this,Vy).append(t)}_formatContents(t){let{str:e,dir:i}=t;const s=document.createElement("p");s.classList.add("popupContent"),s.dir=i;const n=e.split(/(?:\r\n?|\n)/);for(let r=0,a=n.length;r<a;++r){const t=n[r];s.append(document.createTextNode(t)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited(t){let{rect:e,popupContent:i}=t;var s;l(this,e_)||c(this,e_,{contentsObj:l(this,$y),richText:l(this,Zy)}),e&&c(this,Qy,null),i&&(c(this,Zy,u(this,h_,c_).call(this,i)),c(this,$y,null)),null==(s=l(this,Ky))||s.remove(),c(this,Ky,null)}resetEdited(){var t;l(this,e_)&&(({contentsObj:d(this,$y)._,richText:d(this,Zy)._}=l(this,e_)),c(this,e_,null),null==(t=l(this,Ky))||t.remove(),c(this,Ky,null),c(this,Qy,null))}forceHide(){c(this,i_,this.isVisible),l(this,i_)&&(l(this,Vy).hidden=!0)}maybeShow(){l(this,i_)&&(l(this,Ky)||u(this,v_,b_).call(this),c(this,i_,!1),l(this,Vy).hidden=!1)}get isVisible(){return!1===l(this,Vy).hidden}}jy=new WeakMap,By=new WeakMap,Hy=new WeakMap,Wy=new WeakMap,zy=new WeakMap,Vy=new WeakMap,$y=new WeakMap,Uy=new WeakMap,Gy=new WeakMap,qy=new WeakMap,Yy=new WeakMap,Xy=new WeakMap,Ky=new WeakMap,Qy=new WeakMap,Jy=new WeakMap,Zy=new WeakMap,t_=new WeakMap,e_=new WeakMap,i_=new WeakMap,s_=new WeakSet,n_=function(){const t=l(this,Zy),e=l(this,$y);return null!=t&&t.str&&(!(null!=e&&e.str)||e.str===t.str)&&l(this,Zy).html||null},r_=new WeakSet,a_=function(){var t,e,i;return(null==(i=null==(e=null==(t=l(this,s_,n_))?void 0:t.attributes)?void 0:e.style)?void 0:i.fontSize)||0},o_=new WeakSet,l_=function(){var t,e,i;return(null==(i=null==(e=null==(t=l(this,s_,n_))?void 0:t.attributes)?void 0:e.style)?void 0:i.color)||null},h_=new WeakSet,c_=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:l(this,o_,l_),fontSize:l(this,r_,a_)?`calc(${l(this,r_,a_)}px * var(--scale-factor))`:""}};for(const n of t.split("\n"))e.push({name:"span",value:n,attributes:s});return i},d_=new WeakSet,u_=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&l(this,Xy))&&u(this,g_,m_).call(this)},p_=new WeakSet,f_=function(){if(null!==l(this,Qy))return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:n}}}=l(this,qy);let r=!!l(this,Yy),a=l(this,r?Yy:Jy);for(const c of l(this,Gy))if(!a||null!==Rc.intersect(c.data.rect,a)){a=c.data.rect,r=!0;break}const o=Rc.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),h=r?a[2]-a[0]+5:0,d=o[0]+h,u=o[1];c(this,Qy,[100*(d-s)/e,100*(u-n)/i]);const{style:p}=l(this,Vy);p.left=`${l(this,Qy)[0]}%`,p.top=`${l(this,Qy)[1]}%`},g_=new WeakSet,m_=function(){c(this,Xy,!l(this,Xy)),l(this,Xy)?(u(this,v_,b_).call(this),l(this,Vy).addEventListener("click",l(this,Wy)),l(this,Vy).addEventListener("keydown",l(this,jy))):(u(this,y_,__).call(this),l(this,Vy).removeEventListener("click",l(this,Wy)),l(this,Vy).removeEventListener("keydown",l(this,jy)))},v_=new WeakSet,b_=function(){l(this,Ky)||this.render(),this.isVisible?l(this,Xy)&&l(this,Vy).classList.add("focused"):(u(this,p_,f_).call(this),l(this,Vy).hidden=!1,l(this,Vy).style.zIndex=parseInt(l(this,Vy).style.zIndex)+1e3)},y_=new WeakSet,__=function(){l(this,Vy).classList.remove("focused"),!l(this,Xy)&&this.isVisible&&(l(this,Vy).hidden=!0,l(this,Vy).style.zIndex=parseInt(l(this,Vy).style.zIndex)-1e3)};class Y_ extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Eh.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class X_ extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),h(this,w_,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=Ey(t.rect),s=this.svgFactory.create(e,i,!0),n=c(this,w_,this.svgFactory.createElement("svg:line"));return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),s.append(n),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,w_)}addHighlightArea(){this.container.classList.add("highlightArea")}}w_=new WeakMap;class K_ extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),h(this,x_,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=Ey(t.rect),s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,r=c(this,x_,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",n/2),r.setAttribute("y",n/2),r.setAttribute("width",e-n),r.setAttribute("height",i-n),r.setAttribute("stroke-width",n||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,x_)}addHighlightArea(){this.container.classList.add("highlightArea")}}x_=new WeakMap;class Q_ extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),h(this,A_,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=Ey(t.rect),s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,r=c(this,A_,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",e/2),r.setAttribute("cy",i/2),r.setAttribute("rx",e/2-n/2),r.setAttribute("ry",i/2-n/2),r.setAttribute("stroke-width",n||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,A_)}addHighlightArea(){this.container.classList.add("highlightArea")}}A_=new WeakMap;class J_ extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),h(this,E_,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:i}=Ey(t.rect),s=this.svgFactory.create(e,i,!0);let n=[];for(const a of t.vertices){const e=a.x-t.rect[0],i=t.rect[3]-a.y;n.push(e+","+i)}n=n.join(" ");const r=c(this,E_,this.svgFactory.createElement(this.svgElementName));return r.setAttribute("points",n),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,E_)}addHighlightArea(){this.container.classList.add("highlightArea")}}E_=new WeakMap;class Z_ extends J_{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class tw extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ew extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),h(this,k_,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Eh.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:i}=Ey(t.rect),s=this.svgFactory.create(e,i,!0);for(const n of t.inkLists){let e=[];for(const s of n){const i=s.x-t.rect[0],n=t.rect[3]-s.y;e.push(`${i},${n}`)}e=e.join(" ");const i=this.svgFactory.createElement(this.svgElementName);l(this,k_).push(i),i.setAttribute("points",e),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),s.append(i)}return this.container.append(s),this.container}getElementsToTriggerPopup(){return l(this,k_)}addHighlightArea(){this.container.classList.add("highlightArea")}}k_=new WeakMap;class iw extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class sw extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class nw extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class rw extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class aw extends Dy{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ow extends Dy{constructor(t){var e;super(t,{isRenderable:!0}),h(this,C_),h(this,S_,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,null==(e=this.linkService.eventBus)||e.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",u(this,C_,P_).bind(this)),c(this,S_,i);const{isMac:s}=Sc.platform;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(s?t.metaKey:t.ctrlKey)&&u(this,C_,P_).call(this)})),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return l(this,S_)}addHighlightArea(){this.container.classList.add("highlightArea")}}S_=new WeakMap,C_=new WeakSet,P_=function(){var t;null==(t=this.downloadManager)||t.openOrDownloadData(this.content,this.filename)};let lw=(F_=class{constructor(t){let{div:e,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:a}=t;h(this,R_),h(this,O_),h(this,T_,null),h(this,M_,null),h(this,D_,new Map),this.div=e,c(this,T_,i),c(this,M_,s),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}async render(t){var e;const{annotations:i}=t,s=this.div;Yd(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new Dd,annotationStorage:t.annotationStorage||new $g,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of i){if(a.noHTML)continue;const t=a.annotationType===Xh;if(t){const t=n.get(a.id);if(!t)continue;r.elements=t}else{const{width:t,height:e}=Ey(a.rect);if(t<=0||e<=0)continue}r.data=a;const i=ky.create(r);if(!i.isRenderable)continue;if(!t&&a.popupRef){const t=n.get(a.popupRef);t?t.push(i):n.set(a.popupRef,[i])}const s=i.render();a.hidden&&(s.style.visibility="hidden"),u(this,R_,L_).call(this,s,a.id),i.annotationEditorType>0&&(l(this,D_).set(i.data.id,i),null==(e=this._annotationEditorUIManager)||e.renderAnnotationElement(i))}u(this,O_,I_).call(this)}update(t){let{viewport:e}=t;const i=this.div;this.viewport=e,Yd(i,{rotation:e.rotation}),u(this,O_,I_).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(l(this,D_).values())}getEditableAnnotation(t){return l(this,D_).get(t)}},T_=new WeakMap,M_=new WeakMap,D_=new WeakMap,R_=new WeakSet,L_=function(t,e){var i;const s=t.firstChild||t;s.id=`${Fc}${e}`,this.div.append(t),null==(i=l(this,T_))||i.moveElementInDOM(this.div,t,s,!1)},O_=new WeakSet,I_=function(){if(!l(this,M_))return;const t=this.div;for(const[e,i]of l(this,M_)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:n}=s;n?"CANVAS"===n.nodeName?n.replaceWith(i):n.classList.contains("annotationContent")?n.after(i):n.before(i):s.append(i)}l(this,M_).clear()},F_);const hw=/\r\n?|\n/g;var cw,dw,uw,pw,fw,gw,mw,vw,bw,yw,_w,ww,xw,Aw,Ew,kw,Sw,Cw,Pw,Tw,Mw,Dw,Rw,Lw,Ow,Iw,Fw,Nw;const jw=class t extends Dg{constructor(e){super({...e,name:"freeTextEditor"}),h(this,_w),h(this,xw),h(this,Ew),h(this,Sw),h(this,Mw),h(this,Rw),h(this,Fw),h(this,cw,this.editorDivBlur.bind(this)),h(this,dw,this.editorDivFocus.bind(this)),h(this,uw,this.editorDivInput.bind(this)),h(this,pw,this.editorDivKeydown.bind(this)),h(this,fw,this.editorDivPaste.bind(this)),h(this,gw,void 0),h(this,mw,""),h(this,vw,`${this.id}-editor`),h(this,bw,void 0),h(this,yw,null),c(this,gw,e.color||t._defaultColor||Dg._defaultLineColor),c(this,bw,e.fontSize||t._defaultFontSize)}static get _keyboardManager(){const e=t.prototype,i=t=>t.isEmpty(),s=Af.TRANSLATE_SMALL,n=Af.TRANSLATE_BIG;return fc(this,"_keyboardManager",new Hu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[n,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,n],checker:i}]]))}static initialize(t,e){Dg.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case kh.FREETEXT_SIZE:t._defaultFontSize=i;break;case kh.FREETEXT_COLOR:t._defaultColor=i}}updateParams(t,e){switch(t){case kh.FREETEXT_SIZE:u(this,_w,ww).call(this,e);break;case kh.FREETEXT_COLOR:u(this,xw,Aw).call(this,e)}}static get defaultPropertiesToUpdate(){return[[kh.FREETEXT_SIZE,t._defaultFontSize],[kh.FREETEXT_COLOR,t._defaultColor||Dg._defaultLineColor]]}get propertiesToUpdate(){return[[kh.FREETEXT_SIZE,l(this,bw)],[kh.FREETEXT_COLOR,l(this,gw)]]}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const e=this.parentScale;return[-t._internalPadding*e,-(t._internalPadding+l(this,bw))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Eh.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",l(this,pw)),this.editorDiv.addEventListener("focus",l(this,dw)),this.editorDiv.addEventListener("blur",l(this,cw)),this.editorDiv.addEventListener("input",l(this,uw)),this.editorDiv.addEventListener("paste",l(this,fw)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,vw)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",l(this,pw)),this.editorDiv.removeEventListener("focus",l(this,dw)),this.editorDiv.removeEventListener("blur",l(this,cw)),this.editorDiv.removeEventListener("input",l(this,uw)),this.editorDiv.removeEventListener("paste",l(this,fw)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!=(t=this._initialOptions)&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,mw),e=c(this,mw,u(this,Ew,kw).call(this).trimEnd());if(t===e)return;const i=t=>{c(this,mw,t),t?(u(this,Mw,Dw).call(this),this._uiManager.rebuild(this),u(this,Sw,Cw).call(this)):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),u(this,Sw,Cw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(e){t._keyboardManager.exec(this,e)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,vw)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Dg._l10nPromise.get("pdfjs-free-text-default-content").then((t=>{var e;return null==(e=this.editorDiv)?void 0:e.setAttribute("default-content",t)})),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,bw)}px * var(--scale-factor))`,i.color=l(this,gw),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Tu(this,this.div,["dblclick","keydown"]),this.width){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:n}=l(this,yw);let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,h]=this.pageDimensions,[c,d]=this.pageTranslation;let u,p;switch(this.rotation){case 0:u=t+(n[0]-c)/o,p=e+this.height-(n[1]-d)/h;break;case 90:u=t+(n[0]-c)/o,p=e-(n[1]-d)/h,[r,a]=[a,-r];break;case 180:u=t-this.width+(n[0]-c)/o,p=e-(n[1]-d)/h,[r,a]=[-r,-a];break;case 270:u=t+(n[0]-c-this.height*h)/o,p=e+(n[1]-d-this.width*o)/h,[r,a]=[-a,r]}this.setAt(u*i,p*s,r,a)}else this.setAt(t*i,e*s,this.width*i,this.height*s);u(this,Mw,Dw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var i,s,n;const r=e.clipboardData||window.clipboardData,{types:a}=r;if(1===a.length&&"text/plain"===a[0])return;e.preventDefault();const o=u(i=t,Ow,Iw).call(i,r.getData("text")||"").replaceAll(hw,"\n");if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const h=l.getRangeAt(0);if(!o.includes("\n"))return h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),void l.collapseToStart();const{startContainer:d,startOffset:p}=h,f=[],g=[];if(d.nodeType===Node.TEXT_NODE){const e=d.parentElement;if(g.push(d.nodeValue.slice(p).replaceAll(hw,"")),e!==this.editorDiv){let i=f;for(const n of this.editorDiv.childNodes)n!==e?i.push(u(s=t,Pw,Tw).call(s,n)):i=g}f.push(d.nodeValue.slice(0,p).replaceAll(hw,""))}else if(d===this.editorDiv){let e=f,i=0;for(const s of this.editorDiv.childNodes)i++===p&&(e=g),e.push(u(n=t,Pw,Tw).call(n,s))}c(this,mw,`${f.join("\n")}${o}${g.join("\n")}`),u(this,Mw,Dw).call(this);const m=new Range;let v=f.reduce(((t,e)=>t+e.length),0);for(const{firstChild:t}of this.editorDiv.childNodes)if(t.nodeType===Node.TEXT_NODE){const e=t.nodeValue.length;if(v<=e){m.setStart(t,v),m.setEnd(t,v);break}v-=e}l.removeAllRanges(),l.addRange(m)}get contentDiv(){return this.editorDiv}static deserialize(e,i,s){var n;let r=null;if(e instanceof Y_){const{data:{defaultAppearanceData:{fontSize:t,fontColor:i},rect:s,rotation:n,id:a},textContent:o,textPosition:l,parent:{page:{pageNumber:h}}}=e;if(!o||0===o.length)return null;r=e={annotationType:Eh.FREETEXT,color:Array.from(i),fontSize:t,value:o.join("\n"),position:l,pageIndex:h-1,rect:s.slice(0),rotation:n,id:a,deleted:!1}}const a=super.deserialize(e,i,s);return c(a,bw,e.fontSize),c(a,gw,Rc.makeHexColor(...e.color)),c(a,mw,u(n=t,Ow,Iw).call(n,e.value)),a.annotationElementId=e.id||null,c(a,yw,r),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=t._internalPadding*this.parentScale,s=this.getRect(i,i),n=Dg._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,gw)),r={annotationType:Eh.FREETEXT,color:n,fontSize:l(this,bw),value:u(this,Rw,Lw).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!u(this,Fw,Nw).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${l(this,bw)}px * var(--scale-factor))`,s.color=l(this,gw),i.replaceChildren();for(const t of l(this,mw).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),i.append(e)}const n=t._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(n,n),popupContent:l(this,mw)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};cw=new WeakMap,dw=new WeakMap,uw=new WeakMap,pw=new WeakMap,fw=new WeakMap,gw=new WeakMap,mw=new WeakMap,vw=new WeakMap,bw=new WeakMap,yw=new WeakMap,_w=new WeakSet,ww=function(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-l(this,bw))*this.parentScale),c(this,bw,t),u(this,Sw,Cw).call(this)},i=l(this,bw);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kh.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},xw=new WeakSet,Aw=function(t){const e=t=>{c(this,gw,this.editorDiv.style.color=t)},i=l(this,gw);this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kh.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ew=new WeakSet,kw=function(){var t;const e=[];this.editorDiv.normalize();for(const i of this.editorDiv.childNodes)e.push(u(t=jw,Pw,Tw).call(t,i));return e.join("\n")},Sw=new WeakSet,Cw=function(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,s=e.style.display,n=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),i=e.getBoundingClientRect(),e.remove(),e.style.display=s,e.classList.toggle("hidden",n)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()},Pw=new WeakSet,Tw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(hw,"")},Mw=new WeakSet,Dw=function(){if(this.editorDiv.replaceChildren(),l(this,mw))for(const t of l(this,mw).split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}},Rw=new WeakSet,Lw=function(){return l(this,mw).replaceAll("\xa0"," ")},Ow=new WeakSet,Iw=function(t){return t.replaceAll(" ","\xa0")},Fw=new WeakSet,Nw=function(t){const{value:e,fontSize:i,color:s,pageIndex:n}=l(this,yw);return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some(((t,e)=>t!==s[e]))||t.pageIndex!==n},h(jw,Pw),h(jw,Ow),a(jw,"_freeTextDefaultContent",""),a(jw,"_internalPadding",0),a(jw,"_defaultColor",null),a(jw,"_defaultFontSize",10),a(jw,"_type","freetext"),a(jw,"_editorType",Eh.FREETEXT);let Bw=jw;var Hw,Ww,zw,Vw,$w,Uw,Gw,qw,Yw,Xw,Kw,Qw,Jw,Zw,tx,ex,ix,sx,nx,rx,ax,ox,lx,hx,cx,dx,ux,px,fx,gx,mx,vx,bx;class yx{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];h(this,Vw),h(this,Uw),h(this,qw),h(this,Xw),h(this,Qw),h(this,Hw,void 0),h(this,Ww,[]),h(this,zw,[]);let n=1/0,r=-1/0,a=1/0,o=-1/0;const d=10**-4;for(const{x:h,y:c,width:b,height:y}of t){const t=Math.floor((h-e)/d)*d,i=Math.ceil((h+b+e)/d)*d,s=Math.floor((c-e)/d)*d,u=Math.ceil((c+y+e)/d)*d,p=[t,s,u,!0],f=[i,s,u,!1];l(this,Ww).push(p,f),n=Math.min(n,t),r=Math.max(r,i),a=Math.min(a,s),o=Math.max(o,u)}const u=r-n+2*i,p=o-a+2*i,f=n-i,g=a-i,m=l(this,Ww).at(s?-1:-2),v=[m[0],m[2]];for(const h of l(this,Ww)){const[t,e,i]=h;h[0]=(t-f)/u,h[1]=(e-g)/p,h[2]=(i-g)/p}c(this,Hw,{x:f,y:g,width:u,height:p,lastPoint:v})}getOutlines(){l(this,Ww).sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));const t=[];for(const e of l(this,Ww))e[3]?(t.push(...u(this,Qw,Jw).call(this,e)),u(this,qw,Yw).call(this,e)):(u(this,Xw,Kw).call(this,e),t.push(...u(this,Qw,Jw).call(this,e)));return u(this,Vw,$w).call(this,t)}}Hw=new WeakMap,Ww=new WeakMap,zw=new WeakMap,Vw=new WeakSet,$w=function(t){const e=[],i=new Set;for(const r of t){const[t,i,s]=r;e.push([t,i,r],[t,s,r])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let r=0,a=e.length;r<a;r+=2){const t=e[r][2],s=e[r+1][2];t.push(s),s.push(t),i.add(t),i.add(s)}const s=[];let n;for(;i.size>0;){const t=i.values().next().value;let[e,r,a,o,l]=t;i.delete(t);let h=e,c=r;for(n=[e,a],s.push(n);;){let t;if(i.has(o))t=o;else{if(!i.has(l))break;t=l}i.delete(t),[e,r,a,o,l]=t,h!==e&&(n.push(h,c,e,c===r?r:a),h=e),c=c===r?a:r}n.push(h,c)}return new wx(s,l(this,Hw))},Uw=new WeakSet,Gw=function(t){const e=l(this,zw);let i=0,s=e.length-1;for(;i<=s;){const n=i+s>>1,r=e[n][0];if(r===t)return n;r<t?i=n+1:s=n-1}return s+1},qw=new WeakSet,Yw=function(t){let[,e,i]=t;const s=u(this,Uw,Gw).call(this,e);l(this,zw).splice(s,0,[e,i])},Xw=new WeakSet,Kw=function(t){let[,e,i]=t;const s=u(this,Uw,Gw).call(this,e);for(let n=s;n<l(this,zw).length;n++){const[t,s]=l(this,zw)[n];if(t!==e)break;if(t===e&&s===i)return void l(this,zw).splice(n,1)}for(let n=s-1;n>=0;n--){const[t,s]=l(this,zw)[n];if(t!==e)break;if(t===e&&s===i)return void l(this,zw).splice(n,1)}},Qw=new WeakSet,Jw=function(t){const[e,i,s]=t,n=[[e,i,s]],r=u(this,Uw,Gw).call(this,s);for(let a=0;a<r;a++){const[t,i]=l(this,zw)[a];for(let s=0,r=n.length;s<r;s++){const[,a,o]=n[s];if(!(i<=a||o<=t)){if(a>=t){if(o>i)n[s][1]=i;else{if(1===r)return[];n.splice(s,1),s--,r--}continue}n[s][2]=t,o>i&&n.push([e,i,o])}}}return n};class _x{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof oA}}class wx extends _x{constructor(t,e){super(),h(this,Zw,void 0),h(this,tx,void 0),c(this,tx,t),c(this,Zw,e)}toSVGPath(){const t=[];for(const e of l(this,tx)){let[i,s]=e;t.push(`M${i} ${s}`);for(let n=2;n<e.length;n+=2){const r=e[n],a=e[n+1];r===i?(t.push(`V${a}`),s=a):a===s&&(t.push(`H${r}`),i=r)}t.push("Z")}return t.join(" ")}serialize(t,e){let[i,s,n,r]=t;const a=[],o=n-i,h=r-s;for(const c of l(this,tx)){const t=new Array(c.length);for(let e=0;e<c.length;e+=2)t[e]=i+c[e]*o,t[e+1]=r-c[e+1]*h;a.push(t)}return a}get box(){return l(this,Zw)}}Zw=new WeakMap,tx=new WeakMap;const xx=class t{constructor(e,i,s,n,r){let{x:a,y:o}=e,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;h(this,vx),h(this,ex,void 0),h(this,ix,[]),h(this,sx,void 0),h(this,nx,void 0),h(this,rx,[]),h(this,ax,new Float64Array(18)),h(this,ox,void 0),h(this,lx,void 0),h(this,hx,void 0),h(this,cx,void 0),h(this,dx,void 0),h(this,ux,void 0),h(this,px,[]),c(this,ex,i),c(this,ux,n*s),c(this,nx,r),l(this,ax).set([NaN,NaN,NaN,NaN,a,o],6),c(this,sx,d),c(this,cx,l(t,fx)*s),c(this,hx,l(t,mx)*s),c(this,dx,s),l(this,px).push(a,o)}get free(){return!0}isEmpty(){return isNaN(l(this,ax)[8])}add(t){let{x:e,y:i}=t;var s;c(this,ox,e),c(this,lx,i);const[n,r,a,o]=l(this,ex);let[h,d,u,p]=l(this,ax).subarray(8,12);const f=e-u,g=i-p,m=Math.hypot(f,g);if(m<l(this,hx))return!1;const v=m-l(this,cx),b=v/m,y=b*f,_=b*g;let w=h,x=d;h=u,d=p,u+=y,p+=_,null==(s=l(this,px))||s.push(e,i);const A=y/v,E=-_/v*l(this,ux),k=A*l(this,ux);return l(this,ax).set(l(this,ax).subarray(2,8),0),l(this,ax).set([u+E,p+k],4),l(this,ax).set(l(this,ax).subarray(14,18),12),l(this,ax).set([u-E,p-k],16),isNaN(l(this,ax)[6])?(0===l(this,rx).length&&(l(this,ax).set([h+E,d+k],2),l(this,rx).push(NaN,NaN,NaN,NaN,(h+E-n)/a,(d+k-r)/o),l(this,ax).set([h-E,d-k],14),l(this,ix).push(NaN,NaN,NaN,NaN,(h-E-n)/a,(d-k-r)/o)),l(this,ax).set([w,x,h,d,u,p],6),!this.isEmpty()):(l(this,ax).set([w,x,h,d,u,p],6),Math.abs(Math.atan2(x-d,w-h)-Math.atan2(_,y))<Math.PI/2?([h,d,u,p]=l(this,ax).subarray(2,6),l(this,rx).push(NaN,NaN,NaN,NaN,((h+u)/2-n)/a,((d+p)/2-r)/o),[h,d,w,x]=l(this,ax).subarray(14,18),l(this,ix).push(NaN,NaN,NaN,NaN,((w+h)/2-n)/a,((x+d)/2-r)/o),!0):([w,x,h,d,u,p]=l(this,ax).subarray(0,6),l(this,rx).push(((w+5*h)/6-n)/a,((x+5*d)/6-r)/o,((5*h+u)/6-n)/a,((5*d+p)/6-r)/o,((h+u)/2-n)/a,((d+p)/2-r)/o),[u,p,h,d,w,x]=l(this,ax).subarray(12,18),l(this,ix).push(((w+5*h)/6-n)/a,((x+5*d)/6-r)/o,((5*h+u)/6-n)/a,((5*d+p)/6-r)/o,((h+u)/2-n)/a,((d+p)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,rx),e=l(this,ix),i=l(this,ax).subarray(4,6),s=l(this,ax).subarray(16,18),[n,r,a,o]=l(this,ex),[h,c,d,p]=u(this,vx,bx).call(this);if(isNaN(l(this,ax)[6])&&!this.isEmpty())return`M${(l(this,ax)[2]-n)/a} ${(l(this,ax)[3]-r)/o} L${(l(this,ax)[4]-n)/a} ${(l(this,ax)[5]-r)/o} L${h} ${c} L${d} ${p} L${(l(this,ax)[16]-n)/a} ${(l(this,ax)[17]-r)/o} L${(l(this,ax)[14]-n)/a} ${(l(this,ax)[15]-r)/o} Z`;const f=[];f.push(`M${t[4]} ${t[5]}`);for(let l=6;l<t.length;l+=6)isNaN(t[l])?f.push(`L${t[l+4]} ${t[l+5]}`):f.push(`C${t[l]} ${t[l+1]} ${t[l+2]} ${t[l+3]} ${t[l+4]} ${t[l+5]}`);f.push(`L${(i[0]-n)/a} ${(i[1]-r)/o} L${h} ${c} L${d} ${p} L${(s[0]-n)/a} ${(s[1]-r)/o}`);for(let l=e.length-6;l>=6;l-=6)isNaN(e[l])?f.push(`L${e[l+4]} ${e[l+5]}`):f.push(`C${e[l]} ${e[l+1]} ${e[l+2]} ${e[l+3]} ${e[l+4]} ${e[l+5]}`);return f.push(`L${e[4]} ${e[5]} Z`),f.join(" ")}getOutlines(){var t;const e=l(this,rx),i=l(this,ix),s=l(this,ax),n=s.subarray(4,6),r=s.subarray(16,18),[a,o,h,c]=l(this,ex),d=new Float64Array(((null==(t=l(this,px))?void 0:t.length)??0)+2);for(let u=0,y=d.length-2;u<y;u+=2)d[u]=(l(this,px)[u]-a)/h,d[u+1]=(l(this,px)[u+1]-o)/c;d[d.length-2]=(l(this,ox)-a)/h,d[d.length-1]=(l(this,lx)-o)/c;const[p,f,g,m]=u(this,vx,bx).call(this);if(isNaN(s[6])&&!this.isEmpty()){const t=new Float64Array(36);return t.set([NaN,NaN,NaN,NaN,(s[2]-a)/h,(s[3]-o)/c,NaN,NaN,NaN,NaN,(s[4]-a)/h,(s[5]-o)/c,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(s[16]-a)/h,(s[17]-o)/c,NaN,NaN,NaN,NaN,(s[14]-a)/h,(s[15]-o)/c],0),new oA(t,d,l(this,ex),l(this,dx),l(this,sx),l(this,nx))}const v=new Float64Array(l(this,rx).length+24+l(this,ix).length);let b=e.length;for(let l=0;l<b;l+=2)isNaN(e[l])?v[l]=v[l+1]=NaN:(v[l]=e[l],v[l+1]=e[l+1]);v.set([NaN,NaN,NaN,NaN,(n[0]-a)/h,(n[1]-o)/c,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(r[0]-a)/h,(r[1]-o)/c],b),b+=24;for(let l=i.length-6;l>=6;l-=6)for(let t=0;t<6;t+=2)isNaN(i[l+t])?(v[b]=v[b+1]=NaN,b+=2):(v[b]=i[l+t],v[b+1]=i[l+t+1],b+=2);return v.set([NaN,NaN,NaN,NaN,i[4],i[5]],b),new oA(v,d,l(this,ex),l(this,dx),l(this,sx),l(this,nx))}};ex=new WeakMap,ix=new WeakMap,sx=new WeakMap,nx=new WeakMap,rx=new WeakMap,ax=new WeakMap,ox=new WeakMap,lx=new WeakMap,hx=new WeakMap,cx=new WeakMap,dx=new WeakMap,ux=new WeakMap,px=new WeakMap,fx=new WeakMap,gx=new WeakMap,mx=new WeakMap,vx=new WeakSet,bx=function(){const t=l(this,ax).subarray(4,6),e=l(this,ax).subarray(16,18),[i,s,n,r]=l(this,ex);return[(l(this,ox)+(t[0]-e[0])/2-i)/n,(l(this,lx)+(t[1]-e[1])/2-s)/r,(l(this,ox)+(e[0]-t[0])/2-i)/n,(l(this,lx)+(e[1]-t[1])/2-s)/r]},h(xx,fx,8),h(xx,gx,2),h(xx,mx,l(xx,fx)+l(xx,gx));let Ax=xx;var Ex,kx,Sx,Cx,Px,Tx,Mx,Dx,Rx,Lx,Ox,Ix,Fx,Nx,jx,Bx,Hx,Wx,zx,Vx,$x,Ux,Gx,qx,Yx,Xx,Kx,Qx,Jx,Zx,tA,eA,iA,sA,nA,rA,aA;class oA extends _x{constructor(t,e,i,s,n,r){super(),h(this,Dx),h(this,Lx),h(this,Ix),h(this,Ex,void 0),h(this,kx,null),h(this,Sx,void 0),h(this,Cx,void 0),h(this,Px,void 0),h(this,Tx,void 0),h(this,Mx,void 0),c(this,Mx,t),c(this,Px,e),c(this,Ex,i),c(this,Tx,s),c(this,Sx,n),c(this,Cx,r),u(this,Ix,Fx).call(this,r);const{x:a,y:o,width:d,height:p}=l(this,kx);for(let l=0,h=t.length;l<h;l+=2)t[l]=(t[l]-a)/d,t[l+1]=(t[l+1]-o)/p;for(let l=0,h=e.length;l<h;l+=2)e[l]=(e[l]-a)/d,e[l+1]=(e[l+1]-o)/p}toSVGPath(){const t=[`M${l(this,Mx)[4]} ${l(this,Mx)[5]}`];for(let e=6,i=l(this,Mx).length;e<i;e+=6)isNaN(l(this,Mx)[e])?t.push(`L${l(this,Mx)[e+4]} ${l(this,Mx)[e+5]}`):t.push(`C${l(this,Mx)[e]} ${l(this,Mx)[e+1]} ${l(this,Mx)[e+2]} ${l(this,Mx)[e+3]} ${l(this,Mx)[e+4]} ${l(this,Mx)[e+5]}`);return t.push("Z"),t.join(" ")}serialize(t,e){let[i,s,n,r]=t;const a=n-i,o=r-s;let h,c;switch(e){case 0:h=u(this,Dx,Rx).call(this,l(this,Mx),i,r,a,-o),c=u(this,Dx,Rx).call(this,l(this,Px),i,r,a,-o);break;case 90:h=u(this,Lx,Ox).call(this,l(this,Mx),i,s,a,o),c=u(this,Lx,Ox).call(this,l(this,Px),i,s,a,o);break;case 180:h=u(this,Dx,Rx).call(this,l(this,Mx),n,s,-a,o),c=u(this,Dx,Rx).call(this,l(this,Px),n,s,-a,o);break;case 270:h=u(this,Lx,Ox).call(this,l(this,Mx),n,r,-a,-o),c=u(this,Lx,Ox).call(this,l(this,Px),n,r,-a,-o)}return{outline:Array.from(h),points:[Array.from(c)]}}get box(){return l(this,kx)}getNewOutline(t,e){const{x:i,y:s,width:n,height:r}=l(this,kx),[a,o,h,c]=l(this,Ex),d=n*h,u=r*c,p=i*h+a,f=s*c+o,g=new Ax({x:l(this,Px)[0]*d+p,y:l(this,Px)[1]*u+f},l(this,Ex),l(this,Tx),t,l(this,Cx),e??l(this,Sx));for(let m=2;m<l(this,Px).length;m+=2)g.add({x:l(this,Px)[m]*d+p,y:l(this,Px)[m+1]*u+f});return g.getOutlines()}}Ex=new WeakMap,kx=new WeakMap,Sx=new WeakMap,Cx=new WeakMap,Px=new WeakMap,Tx=new WeakMap,Mx=new WeakMap,Dx=new WeakSet,Rx=function(t,e,i,s,n){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a]*s,r[a+1]=i+t[a+1]*n;return r},Lx=new WeakSet,Ox=function(t,e,i,s,n){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a+1]*s,r[a+1]=i+t[a]*n;return r},Ix=new WeakSet,Fx=function(t){const e=l(this,Mx);let i=e[4],s=e[5],n=i,r=s,a=i,o=s,h=i,d=s;const u=t?Math.max:Math.min;for(let l=6,c=e.length;l<c;l+=6){if(isNaN(e[l]))n=Math.min(n,e[l+4]),r=Math.min(r,e[l+5]),a=Math.max(a,e[l+4]),o=Math.max(o,e[l+5]),d<e[l+5]?(h=e[l+4],d=e[l+5]):d===e[l+5]&&(h=u(h,e[l+4]));else{const t=Rc.bezierBoundingBox(i,s,...e.slice(l,l+6));n=Math.min(n,t[0]),r=Math.min(r,t[1]),a=Math.max(a,t[2]),o=Math.max(o,t[3]),d<t[3]?(h=t[2],d=t[3]):d===t[3]&&(h=u(h,t[2]))}i=e[l+4],s=e[l+5]}const p=n-l(this,Sx),f=r-l(this,Sx),g=a-n+2*l(this,Sx),m=o-r+2*l(this,Sx);c(this,kx,{x:p,y:f,width:g,height:m,lastPoint:[h,d]})};const lA=class t{constructor(t){let{editor:e=null,uiManager:i=null}=t;var s;h(this,Xx),h(this,Qx),h(this,Zx),h(this,eA),h(this,sA),h(this,rA),h(this,Nx,u(this,Zx,tA).bind(this)),h(this,jx,u(this,sA,nA).bind(this)),h(this,Bx,null),h(this,Hx,null),h(this,Wx,void 0),h(this,zx,null),h(this,Vx,!1),h(this,$x,!1),h(this,Ux,null),h(this,Gx,void 0),h(this,qx,null),h(this,Yx,void 0),e?(c(this,$x,!1),c(this,Yx,kh.HIGHLIGHT_COLOR),c(this,Ux,e)):(c(this,$x,!0),c(this,Yx,kh.HIGHLIGHT_DEFAULT_COLOR)),c(this,qx,(null==e?void 0:e._uiManager)||i),c(this,Gx,l(this,qx)._eventBus),c(this,Wx,(null==e?void 0:e.color)||(null==(s=l(this,qx))?void 0:s.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return fc(this,"_keyboardManager",new Hu([[["Escape","mac+Escape"],t.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],t.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],t.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],t.prototype._moveToPrevious],[["Home","mac+Home"],t.prototype._moveToBeginning],[["End","mac+End"],t.prototype._moveToEnd]]))}renderButton(){const t=c(this,Bx,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",u(this,eA,iA).bind(this)),t.addEventListener("keydown",l(this,Nx));const e=c(this,Hx,document.createElement("span"));return e.className="swatch",e.setAttribute("aria-hidden",!0),e.style.backgroundColor=l(this,Wx),t.append(e),t}renderMainDropdown(){const t=c(this,zx,u(this,Xx,Kx).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===l(this,Bx))return void u(this,eA,iA).call(this,t);const e=t.target.getAttribute("data-color");e&&u(this,Qx,Jx).call(this,e,t)}_moveToNext(t){var e,i;l(this,rA,aA)?t.target!==l(this,Bx)?null==(i=t.target.nextSibling)||i.focus():null==(e=l(this,zx).firstChild)||e.focus():u(this,eA,iA).call(this,t)}_moveToPrevious(t){var e,i;t.target!==(null==(e=l(this,zx))?void 0:e.firstChild)&&t.target!==l(this,Bx)?(l(this,rA,aA)||u(this,eA,iA).call(this,t),null==(i=t.target.previousSibling)||i.focus()):l(this,rA,aA)&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){var e;l(this,rA,aA)?null==(e=l(this,zx).firstChild)||e.focus():u(this,eA,iA).call(this,t)}_moveToEnd(t){var e;l(this,rA,aA)?null==(e=l(this,zx).lastChild)||e.focus():u(this,eA,iA).call(this,t)}hideDropdown(){var t;null==(t=l(this,zx))||t.classList.add("hidden"),window.removeEventListener("pointerdown",l(this,jx))}_hideDropdownFromKeyboard(){var t;if(!l(this,$x)){if(!l(this,rA,aA))return void(null==(t=l(this,Ux))||t.unselect());this.hideDropdown(),l(this,Bx).focus({preventScroll:!0,focusVisible:l(this,Vx)})}}updateColor(t){if(l(this,Hx)&&(l(this,Hx).style.backgroundColor=t),!l(this,zx))return;const e=l(this,qx).highlightColors.values();for(const i of l(this,zx).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;null==(t=l(this,Bx))||t.remove(),c(this,Bx,null),c(this,Hx,null),null==(e=l(this,zx))||e.remove(),c(this,zx,null)}};Nx=new WeakMap,jx=new WeakMap,Bx=new WeakMap,Hx=new WeakMap,Wx=new WeakMap,zx=new WeakMap,Vx=new WeakMap,$x=new WeakMap,Ux=new WeakMap,Gx=new WeakMap,qx=new WeakMap,Yx=new WeakMap,Xx=new WeakSet,Kx=function(){const t=document.createElement("div");t.addEventListener("contextmenu",Hd),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[e,i]of l(this,qx).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=e,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${e}`);const n=document.createElement("span");s.append(n),n.className="swatch",n.style.backgroundColor=i,s.setAttribute("aria-selected",i===l(this,Wx)),s.addEventListener("click",u(this,Qx,Jx).bind(this,i)),t.append(s)}return t.addEventListener("keydown",l(this,Nx)),t},Qx=new WeakSet,Jx=function(t,e){e.stopPropagation(),l(this,Gx).dispatch("switchannotationeditorparams",{source:this,type:l(this,Yx),value:t})},Zx=new WeakSet,tA=function(t){lA._keyboardManager.exec(this,t)},eA=new WeakSet,iA=function(t){if(l(this,rA,aA))return void this.hideDropdown();if(c(this,Vx,0===t.detail),window.addEventListener("pointerdown",l(this,jx)),l(this,zx))return void l(this,zx).classList.remove("hidden");const e=c(this,zx,u(this,Xx,Kx).call(this));l(this,Bx).append(e)},sA=new WeakSet,nA=function(t){var e;null!=(e=l(this,zx))&&e.contains(t.target)||this.hideDropdown()},rA=new WeakSet,aA=function(){return l(this,zx)&&!l(this,zx).classList.contains("hidden")};let hA=lA;var cA,dA,uA,pA,fA,gA,mA,vA,bA,yA,_A,wA,xA,AA,EA,kA,SA,CA,PA,TA,MA,DA,RA,LA,OA,IA,FA,NA,jA,BA,HA,WA,zA,VA,$A,UA,GA,qA,YA,XA,KA,QA,JA,ZA,tE,eE,iE,sE,nE;const rE=class t extends Dg{constructor(e){super({...e,name:"highlightEditor"}),h(this,TA),h(this,DA),h(this,LA),h(this,IA),h(this,NA),h(this,BA),h(this,WA),h(this,UA),h(this,qA),h(this,XA),h(this,QA),h(this,ZA),h(this,cA,null),h(this,dA,0),h(this,uA,void 0),h(this,pA,null),h(this,fA,null),h(this,gA,null),h(this,mA,null),h(this,vA,0),h(this,bA,null),h(this,yA,null),h(this,_A,null),h(this,wA,!1),h(this,xA,u(this,UA,GA).bind(this)),h(this,AA,null),h(this,EA,void 0),h(this,kA,null),h(this,SA,""),h(this,CA,void 0),h(this,PA,""),this.color=e.color||t._defaultColor,c(this,CA,e.thickness||t._defaultThickness),c(this,EA,e.opacity||t._defaultOpacity),c(this,uA,e.boxes||null),c(this,PA,e.methodOfCreation||""),c(this,SA,e.text||""),this._isDraggable=!1,e.highlightId>-1?(c(this,wA,!0),u(this,DA,RA).call(this,e),u(this,WA,zA).call(this)):(c(this,cA,e.anchorNode),c(this,dA,e.anchorOffset),c(this,mA,e.focusNode),c(this,vA,e.focusOffset),u(this,TA,MA).call(this),u(this,WA,zA).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=t.prototype;return fc(this,"_keyboardManager",new Hu([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,wA)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,CA),methodOfCreation:l(this,PA)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(e,i){var s;Dg.initialize(e,i),t._defaultColor||(t._defaultColor=(null==(s=i.highlightColors)?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case kh.HIGHLIGHT_DEFAULT_COLOR:t._defaultColor=i;break;case kh.HIGHLIGHT_THICKNESS:t._defaultThickness=i}}translateInPage(t,e){}get toolbarPosition(){return l(this,AA)}updateParams(t,e){switch(t){case kh.HIGHLIGHT_COLOR:u(this,LA,OA).call(this,e);break;case kh.HIGHLIGHT_THICKNESS:u(this,IA,FA).call(this,e)}}static get defaultPropertiesToUpdate(){return[[kh.HIGHLIGHT_DEFAULT_COLOR,t._defaultColor],[kh.HIGHLIGHT_THICKNESS,t._defaultThickness]]}get propertiesToUpdate(){return[[kh.HIGHLIGHT_COLOR,this.color||t._defaultColor],[kh.HIGHLIGHT_THICKNESS,l(this,CA)||t._defaultThickness],[kh.HIGHLIGHT_FREE,l(this,wA)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(c(this,fA,new hA({editor:this})),t.addColorPicker(l(this,fA))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(u(this,XA,KA).call(this))}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,u(this,XA,KA).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){u(this,BA,HA).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(u(this,WA,zA).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var e;let i=!1;this.parent&&!t?u(this,BA,HA).call(this):t&&(u(this,WA,zA).call(this,t),i=!this.parent&&(null==(e=this.div)?void 0:e.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(e){var i,s,n;const{drawLayer:r}=this.parent;let a;l(this,wA)?(e=(e-this.rotation+360)%360,a=u(i=t,VA,$A).call(i,l(this,yA).box,e)):a=u(s=t,VA,$A).call(s,this,e),r.rotate(l(this,_A),e),r.rotate(l(this,kA),e),r.updateBox(l(this,_A),a),r.updateBox(l(this,kA),u(n=t,VA,$A).call(n,l(this,gA).box,e))}render(){if(this.div)return this.div;const t=super.render();l(this,SA)&&(t.setAttribute("aria-label",l(this,SA)),t.setAttribute("role","mark")),l(this,wA)?t.classList.add("free"):this.div.addEventListener("keydown",l(this,xA));const e=c(this,bA,document.createElement("div"));t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=l(this,pA);const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),Tu(this,l(this,bA),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(l(this,kA),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(l(this,kA),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:u(this,qA,YA).call(this,!0);break;case 1:case 3:u(this,qA,YA).call(this,!1)}}select(){var t,e;super.select(),l(this,kA)&&(null==(t=this.parent)||t.drawLayer.removeClass(l(this,kA),"hovered"),null==(e=this.parent)||e.drawLayer.addClass(l(this,kA),"selected"))}unselect(){var t;super.unselect(),l(this,kA)&&(null==(t=this.parent)||t.drawLayer.removeClass(l(this,kA),"selected"),l(this,wA)||u(this,qA,YA).call(this,!1))}get _mustFixPosition(){return!l(this,wA)}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,_A),t),this.parent.drawLayer.show(l(this,kA),t))}static startHighlighting(t,e,i){let{target:s,x:n,y:r}=i;const{x:a,y:o,width:l,height:h}=s.getBoundingClientRect(),c=e=>{u(this,eE,iE).call(this,t,e)},d={capture:!0,passive:!1},p=t=>{t.preventDefault(),t.stopPropagation()},f=e=>{s.removeEventListener("pointermove",c),window.removeEventListener("blur",f),window.removeEventListener("pointerup",f),window.removeEventListener("pointerdown",p,d),window.removeEventListener("contextmenu",Hd),u(this,sE,nE).call(this,t,e)};window.addEventListener("blur",f),window.addEventListener("pointerup",f),window.addEventListener("pointerdown",p,d),window.addEventListener("contextmenu",Hd),s.addEventListener("pointermove",c),this._freeHighlight=new Ax({x:n,y:r},[a,o,l,h],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static deserialize(t,e,i){var s;const n=super.deserialize(t,e,i),{rect:[r,a,o,l],color:h,quadPoints:d}=t;n.color=Rc.makeHexColor(...h),c(n,EA,t.opacity);const[p,f]=n.pageDimensions;n.width=(o-r)/p,n.height=(l-a)/f;const g=c(n,uA,[]);for(let c=0;c<d.length;c+=8)g.push({x:(d[4]-o)/p,y:(l-(1-d[c+5]))/f,width:(d[c+2]-d[c])/p,height:(d[c+5]-d[c+1])/f});return u(s=n,TA,MA).call(s),n}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;const e=this.getRect(0,0),i=Dg._colorManager.convert(this.color);return{annotationType:Eh.HIGHLIGHT,color:i,opacity:l(this,EA),thickness:l(this,CA),quadPoints:u(this,QA,JA).call(this),outlines:u(this,ZA,tE).call(this,e),pageIndex:this.pageIndex,rect:e,rotation:u(this,XA,KA).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};cA=new WeakMap,dA=new WeakMap,uA=new WeakMap,pA=new WeakMap,fA=new WeakMap,gA=new WeakMap,mA=new WeakMap,vA=new WeakMap,bA=new WeakMap,yA=new WeakMap,_A=new WeakMap,wA=new WeakMap,xA=new WeakMap,AA=new WeakMap,EA=new WeakMap,kA=new WeakMap,SA=new WeakMap,CA=new WeakMap,PA=new WeakMap,TA=new WeakSet,MA=function(){const t=new yx(l(this,uA),.001);c(this,yA,t.getOutlines()),({x:this.x,y:this.y,width:this.width,height:this.height}=l(this,yA).box);const e=new yx(l(this,uA),.0025,.001,"ltr"===this._uiManager.direction);c(this,gA,e.getOutlines());const{lastPoint:i}=l(this,gA).box;c(this,AA,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},DA=new WeakSet,RA=function(t){let{highlightOutlines:e,highlightId:i,clipPathId:s}=t;var n,r;if(c(this,yA,e),c(this,gA,e.getNewOutline(l(this,CA)/2+1.5,.0025)),i>=0)c(this,_A,i),c(this,pA,s),this.parent.drawLayer.finalizeLine(i,e),c(this,kA,this.parent.drawLayer.highlightOutline(l(this,gA)));else if(this.parent){const t=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,_A),e),this.parent.drawLayer.updateBox(l(this,_A),u(n=rE,VA,$A).call(n,l(this,yA).box,(t-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,kA),l(this,gA)),this.parent.drawLayer.updateBox(l(this,kA),u(r=rE,VA,$A).call(r,l(this,gA).box,t))}const{x:a,y:o,width:h,height:d}=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=h,this.height=d;break;case 90:{const[t,e]=this.parentDimensions;this.x=o,this.y=1-a,this.width=h*e/t,this.height=d*t/e;break}case 180:this.x=1-a,this.y=1-o,this.width=h,this.height=d;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-o,this.y=a,this.width=h*e/t,this.height=d*t/e;break}}const{lastPoint:p}=l(this,gA).box;c(this,AA,[(p[0]-a)/h,(p[1]-o)/d])},LA=new WeakSet,OA=function(t){const e=t=>{var e,i;this.color=t,null==(e=this.parent)||e.drawLayer.changeColor(l(this,_A),t),null==(i=l(this,fA))||i.updateColor(t)},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kh.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},IA=new WeakSet,FA=function(t){const e=l(this,CA),i=t=>{c(this,CA,t),u(this,NA,jA).call(this,t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kh.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},NA=new WeakSet,jA=function(t){if(!l(this,wA))return;u(this,DA,RA).call(this,{highlightOutlines:l(this,yA).getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)},BA=new WeakSet,HA=function(){null===l(this,_A)||!this.parent||(this.parent.drawLayer.remove(l(this,_A)),c(this,_A,null),this.parent.drawLayer.remove(l(this,kA)),c(this,kA,null))},WA=new WeakSet,zA=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===l(this,_A)&&(({id:d(this,_A)._,clipPathId:d(this,pA)._}=t.drawLayer.highlight(l(this,yA),this.color,l(this,EA))),c(this,kA,t.drawLayer.highlightOutline(l(this,gA))),l(this,bA)&&(l(this,bA).style.clipPath=l(this,pA)))},VA=new WeakSet,$A=function(t,e){let{x:i,y:s,width:n,height:r}=t;switch(e){case 90:return{x:1-s-r,y:i,width:r,height:n};case 180:return{x:1-i-n,y:1-s-r,width:n,height:r};case 270:return{x:s,y:1-i-n,width:r,height:n}}return{x:i,y:s,width:n,height:r}},UA=new WeakSet,GA=function(t){rE._keyboardManager.exec(this,t)},qA=new WeakSet,YA=function(t){if(!l(this,cA))return;const e=window.getSelection();t?e.setPosition(l(this,cA),l(this,dA)):e.setPosition(l(this,mA),l(this,vA))},XA=new WeakSet,KA=function(){return l(this,wA)?this.rotation:0},QA=new WeakSet,JA=function(){if(l(this,wA))return null;const[t,e]=this.pageDimensions,i=l(this,uA),s=new Array(8*i.length);let n=0;for(const{x:r,y:a,width:o,height:l}of i){const i=r*t,h=(1-a-l)*e;s[n]=s[n+4]=i,s[n+1]=s[n+3]=h,s[n+2]=s[n+6]=i+o*t,s[n+5]=s[n+7]=h+l*e,n+=8}return s},ZA=new WeakSet,tE=function(t){return l(this,yA).serialize(t,u(this,XA,KA).call(this))},eE=new WeakSet,iE=function(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},sE=new WeakSet,nE=function(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},h(rE,VA),h(rE,eE),h(rE,sE),a(rE,"_defaultColor",null),a(rE,"_defaultOpacity",1),a(rE,"_defaultThickness",12),a(rE,"_l10nPromise"),a(rE,"_type","highlight"),a(rE,"_editorType",Eh.HIGHLIGHT),a(rE,"_freeHighlightId",-1),a(rE,"_freeHighlight",null),a(rE,"_freeHighlightClipId","");let aE=rE;var oE,lE,hE,cE,dE,uE,pE,fE,gE,mE,vE,bE,yE,_E,wE,xE,AE,EE,kE,SE,CE,PE,TE,ME,DE,RE,LE,OE,IE,FE,NE,jE,BE,HE,WE,zE,VE,$E,UE,GE,qE,YE,XE,KE,QE,JE,ZE,tk,ek,ik,sk,nk,rk,ak,ok,lk,hk,ck,dk,uk,pk,fk,gk,mk,vk,bk,yk;const _k=class t extends Dg{constructor(t){super({...t,name:"inkEditor"}),h(this,xE),h(this,EE),h(this,SE),h(this,PE),h(this,ME),h(this,RE),h(this,OE),h(this,FE),h(this,jE),h(this,HE),h(this,zE),h(this,$E),h(this,GE),h(this,YE),h(this,KE),h(this,JE),h(this,tk),h(this,ik),h(this,nk),h(this,uk),h(this,fk),h(this,mk),h(this,bk),h(this,oE,0),h(this,lE,0),h(this,hE,this.canvasPointermove.bind(this)),h(this,cE,this.canvasPointerleave.bind(this)),h(this,dE,this.canvasPointerup.bind(this)),h(this,uE,this.canvasPointerdown.bind(this)),h(this,pE,null),h(this,fE,new Path2D),h(this,gE,!1),h(this,mE,!1),h(this,vE,!1),h(this,bE,null),h(this,yE,0),h(this,_E,0),h(this,wE,null),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){Dg.initialize(t,e)}static updateDefaultParams(e,i){switch(e){case kh.INK_THICKNESS:t._defaultThickness=i;break;case kh.INK_COLOR:t._defaultColor=i;break;case kh.INK_OPACITY:t._defaultOpacity=i/100}}updateParams(t,e){switch(t){case kh.INK_THICKNESS:u(this,xE,AE).call(this,e);break;case kh.INK_COLOR:u(this,EE,kE).call(this,e);break;case kh.INK_OPACITY:u(this,SE,CE).call(this,e)}}static get defaultPropertiesToUpdate(){return[[kh.INK_THICKNESS,t._defaultThickness],[kh.INK_COLOR,t._defaultColor||Dg._defaultLineColor],[kh.INK_OPACITY,Math.round(100*t._defaultOpacity)]]}get propertiesToUpdate(){return[[kh.INK_THICKNESS,this.thickness||t._defaultThickness],[kh.INK_COLOR,this.color||t._defaultColor||Dg._defaultLineColor],[kh.INK_OPACITY,Math.round(100*(this.opacity??t._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(u(this,KE,QE).call(this),u(this,JE,ZE).call(this)),this.isAttachedToDOM||(this.parent.add(this),u(this,tk,ek).call(this)),u(this,bk,yk).call(this)))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,pE)&&(clearTimeout(l(this,pE)),c(this,pE,null)),l(this,bE).disconnect(),c(this,bE,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,i=this.width*t,s=this.height*e;this.setDimensions(i,s)}enableEditMode(){l(this,gE)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",l(this,uE)))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",l(this,uE)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){l(this,gE)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),c(this,gE,!0),this.div.classList.add("disabled"),u(this,bk,yk).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0!==t.button||!this.isInEditMode()||l(this,gE)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),u(this,RE,LE).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),u(this,OE,IE).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),u(this,YE,XE).call(this,t)}canvasPointerleave(t){u(this,YE,XE).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,gE)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,s,n,r]=u(this,PE,TE).call(this);if(this.setAt(i,s,0,0),this.setDims(n,r),u(this,KE,QE).call(this),this.width){const[i,s]=this.parentDimensions;this.setAspectRatio(this.width*i,this.height*s),this.setAt(t*i,e*s,this.width*i,this.height*s),c(this,vE,!0),u(this,tk,ek).call(this),this.setDims(this.width*i,this.height*s),u(this,GE,qE).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return u(this,JE,ZE).call(this),this.div}setDimensions(t,e){const i=Math.round(t),s=Math.round(e);if(l(this,yE)===i&&l(this,_E)===s)return;c(this,yE,i),c(this,_E,s),this.canvas.style.visibility="hidden";const[n,r]=this.parentDimensions;this.width=t/n,this.height=e/r,this.fixAndSetPosition(),l(this,gE)&&u(this,ik,sk).call(this,t,e),u(this,tk,ek).call(this),u(this,GE,qE).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,i,s){var n,r,a;if(e instanceof ew)return null;const o=super.deserialize(e,i,s);o.thickness=e.thickness,o.color=Rc.makeHexColor(...e.color),o.opacity=e.opacity;const[l,h]=o.pageDimensions,d=o.width*l,p=o.height*h,f=o.parentScale,g=e.thickness/2;c(o,gE,!0),c(o,yE,Math.round(d)),c(o,_E,Math.round(p));const{paths:m,rect:v,rotation:b}=e;for(let{bezier:c}of m){c=u(n=t,ck,dk).call(n,c,v,b);const e=[];o.paths.push(e);let i=f*(c[0]-g),s=f*(c[1]-g);for(let t=2,n=c.length;t<n;t+=6){const n=f*(c[t]-g),r=f*(c[t+1]-g),a=f*(c[t+2]-g),o=f*(c[t+3]-g),l=f*(c[t+4]-g),h=f*(c[t+5]-g);e.push([[i,s],[n,r],[a,o],[l,h]]),i=l,s=h}const r=u(this,ak,ok).call(this,e);o.bezierPath2D.push(r)}const y=u(r=o,fk,gk).call(r);return c(o,lE,Math.max(Dg.MIN_SIZE,y[2]-y[0])),c(o,oE,Math.max(Dg.MIN_SIZE,y[3]-y[1])),u(a=o,ik,sk).call(a,d,p),o}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=Dg._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Eh.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:u(this,uk,pk).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};oE=new WeakMap,lE=new WeakMap,hE=new WeakMap,cE=new WeakMap,dE=new WeakMap,uE=new WeakMap,pE=new WeakMap,fE=new WeakMap,gE=new WeakMap,mE=new WeakMap,vE=new WeakMap,bE=new WeakMap,yE=new WeakMap,_E=new WeakMap,wE=new WeakMap,xE=new WeakSet,AE=function(t){const e=t=>{this.thickness=t,u(this,bk,yk).call(this)},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kh.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},EE=new WeakSet,kE=function(t){const e=t=>{this.color=t,u(this,GE,qE).call(this)},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kh.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},SE=new WeakSet,CE=function(t){const e=t=>{this.opacity=t,u(this,GE,qE).call(this)};t/=100;const i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kh.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},PE=new WeakSet,TE=function(){const{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}},ME=new WeakSet,DE=function(){const{ctx:t,color:e,opacity:i,thickness:s,parentScale:n,scaleFactor:r}=this;var a;t.lineWidth=s*n/r,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${a=i,Math.round(Math.min(255,Math.max(1,255*a))).toString(16).padStart(2,"0")}`},RE=new WeakSet,LE=function(t,e){this.canvas.addEventListener("contextmenu",Hd),this.canvas.addEventListener("pointerleave",l(this,cE)),this.canvas.addEventListener("pointermove",l(this,hE)),this.canvas.addEventListener("pointerup",l(this,dE)),this.canvas.removeEventListener("pointerdown",l(this,uE)),this.isEditing=!0,l(this,vE)||(c(this,vE,!0),u(this,tk,ek).call(this),this.thickness||(this.thickness=_k._defaultThickness),this.color||(this.color=_k._defaultColor||Dg._defaultLineColor),this.opacity??(this.opacity=_k._defaultOpacity)),this.currentPath.push([t,e]),c(this,mE,!1),u(this,ME,DE).call(this),c(this,wE,(()=>{u(this,HE,WE).call(this),l(this,wE)&&window.requestAnimationFrame(l(this,wE))})),window.requestAnimationFrame(l(this,wE))},OE=new WeakSet,IE=function(t,e){const[i,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===s)return;const n=this.currentPath;let r=l(this,fE);if(n.push([t,e]),c(this,mE,!0),n.length<=2)return r.moveTo(...n[0]),void r.lineTo(t,e);3===n.length&&(c(this,fE,r=new Path2D),r.moveTo(...n[0])),u(this,zE,VE).call(this,r,...n.at(-3),...n.at(-2),t,e)},FE=new WeakSet,NE=function(){if(0===this.currentPath.length)return;const t=this.currentPath.at(-1);l(this,fE).lineTo(...t)},jE=new WeakSet,BE=function(t,e){let i;if(c(this,wE,null),t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),u(this,OE,IE).call(this,t,e),u(this,FE,NE).call(this),1!==this.currentPath.length)i=u(this,$E,UE).call(this);else{const s=[t,e];i=[[s,s.slice(),s.slice(),s]]}const s=l(this,fE),n=this.currentPath;this.currentPath=[],c(this,fE,new Path2D);this.addCommands({cmd:()=>{this.allRawPaths.push(n),this.paths.push(i),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(u(this,KE,QE).call(this),u(this,JE,ZE).call(this)),u(this,bk,yk).call(this))},mustExec:!0})},HE=new WeakSet,WE=function(){if(!l(this,mE))return;c(this,mE,!1);Math.ceil(this.thickness*this.parentScale);const t=this.currentPath.slice(-3),e=t.map((t=>t[0])),i=t.map((t=>t[1]));Math.min(...e),Math.max(...e),Math.min(...i),Math.max(...i);const{ctx:s}=this;s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const n of this.bezierPath2D)s.stroke(n);s.stroke(l(this,fE)),s.restore()},zE=new WeakSet,VE=function(t,e,i,s,n,r,a){const o=(e+s)/2,l=(i+n)/2,h=(s+r)/2,c=(n+a)/2;t.bezierCurveTo(o+2*(s-o)/3,l+2*(n-l)/3,h+2*(s-h)/3,c+2*(n-c)/3,h,c)},$E=new WeakSet,UE=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let i,[s,n]=t[0];for(i=1;i<t.length-2;i++){const[r,a]=t[i],[o,l]=t[i+1],h=(r+o)/2,c=(a+l)/2,d=[s+2*(r-s)/3,n+2*(a-n)/3],u=[h+2*(r-h)/3,c+2*(a-c)/3];e.push([[s,n],d,u,[h,c]]),[s,n]=[h,c]}const[r,a]=t[i],[o,l]=t[i+1],h=[s+2*(r-s)/3,n+2*(a-n)/3],c=[o+2*(r-o)/3,l+2*(a-l)/3];return e.push([[s,n],h,c,[o,l]]),e},GE=new WeakSet,qE=function(){if(this.isEmpty())return void u(this,nk,rk).call(this);u(this,ME,DE).call(this);const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),u(this,nk,rk).call(this);for(const i of this.bezierPath2D)e.stroke(i)},YE=new WeakSet,XE=function(t){this.canvas.removeEventListener("pointerleave",l(this,cE)),this.canvas.removeEventListener("pointermove",l(this,hE)),this.canvas.removeEventListener("pointerup",l(this,dE)),this.canvas.addEventListener("pointerdown",l(this,uE)),l(this,pE)&&clearTimeout(l(this,pE)),c(this,pE,setTimeout((()=>{c(this,pE,null),this.canvas.removeEventListener("contextmenu",Hd)}),10)),u(this,jE,BE).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},KE=new WeakSet,QE=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},JE=new WeakSet,ZE=function(){c(this,bE,new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)}))),l(this,bE).observe(this.div)},tk=new WeakSet,ek=function(){if(!l(this,vE))return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),u(this,nk,rk).call(this)},ik=new WeakSet,sk=function(t,e){const i=u(this,mk,vk).call(this),s=(t-i)/l(this,lE),n=(e-i)/l(this,oE);this.scaleFactor=Math.min(s,n)},nk=new WeakSet,rk=function(){const t=u(this,mk,vk).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},ak=new WeakSet,ok=function(t){const e=new Path2D;for(let i=0,s=t.length;i<s;i++){const[s,n,r,a]=t[i];0===i&&e.moveTo(...s),e.bezierCurveTo(n[0],n[1],r[0],r[1],a[0],a[1])}return e},lk=new WeakSet,hk=function(t,e,i){const[s,n,r,a]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]+=s,t[e+1]=a-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]+s,t[e+1]=i+n}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]+=n;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=r-t[e+1],t[e+1]=a-i}break;default:throw new Error("Invalid rotation")}return t},ck=new WeakSet,dk=function(t,e,i){const[s,n,r,a]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]-=s,t[e+1]=a-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]-n,t[e+1]=i-s}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]-=n;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=a-t[e+1],t[e+1]=r-i}break;default:throw new Error("Invalid rotation")}return t},uk=new WeakSet,pk=function(t,e,i,s){var n,r;const a=[],o=this.thickness/2,l=t*e+o,h=t*i+o;for(const c of this.paths){const e=[],i=[];for(let s=0,n=c.length;s<n;s++){const[r,a,o,d]=c[s];if(r[0]===d[0]&&r[1]===d[1]&&1===n){const s=t*r[0]+l,n=t*r[1]+h;e.push(s,n),i.push(s,n);break}const u=t*r[0]+l,p=t*r[1]+h,f=t*a[0]+l,g=t*a[1]+h,m=t*o[0]+l,v=t*o[1]+h,b=t*d[0]+l,y=t*d[1]+h;0===s&&(e.push(u,p),i.push(u,p)),e.push(f,g,m,v,b,y),i.push(f,g),s===n-1&&i.push(b,y)}a.push({bezier:u(n=_k,lk,hk).call(n,e,s,this.rotation),points:u(r=_k,lk,hk).call(r,i,s,this.rotation)})}return a},fk=new WeakSet,gk=function(){let t=1/0,e=-1/0,i=1/0,s=-1/0;for(const n of this.paths)for(const[r,a,o,l]of n){const n=Rc.bezierBoundingBox(...r,...a,...o,...l);t=Math.min(t,n[0]),i=Math.min(i,n[1]),e=Math.max(e,n[2]),s=Math.max(s,n[3])}return[t,i,e,s]},mk=new WeakSet,vk=function(){return l(this,gE)?Math.ceil(this.thickness*this.parentScale):0},bk=new WeakSet,yk=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!l(this,gE))return void u(this,GE,qE).call(this);const e=u(this,fk,gk).call(this),i=u(this,mk,vk).call(this);c(this,lE,Math.max(Dg.MIN_SIZE,e[2]-e[0])),c(this,oE,Math.max(Dg.MIN_SIZE,e[3]-e[1]));const s=Math.ceil(i+l(this,lE)*this.scaleFactor),n=Math.ceil(i+l(this,oE)*this.scaleFactor),[r,a]=this.parentDimensions;this.width=s/r,this.height=n/a,this.setAspectRatio(s,n);const o=this.translationX,h=this.translationY;this.translationX=-e[0],this.translationY=-e[1],u(this,tk,ek).call(this),u(this,GE,qE).call(this),c(this,yE,s),c(this,_E,n),this.setDims(s,n);const d=t?i/this.scaleFactor/2:0;this.translate(o-this.translationX-d,h-this.translationY-d)},h(_k,ak),h(_k,lk),h(_k,ck),a(_k,"_defaultColor",null),a(_k,"_defaultOpacity",1),a(_k,"_defaultThickness",1),a(_k,"_type","ink"),a(_k,"_editorType",Eh.INK);let wk=_k;var xk,Ak,Ek,kk,Sk,Ck,Pk,Tk,Mk,Dk,Rk,Lk,Ok,Ik,Fk,Nk,jk,Bk,Hk,Wk,zk,Vk,$k,Uk,Gk,qk,Yk,Xk,Kk;const Qk=class extends Dg{constructor(t){super({...t,name:"stampEditor"}),h(this,Lk),h(this,Ik),h(this,Nk),h(this,Bk),h(this,Wk),h(this,Vk),h(this,Uk),h(this,qk),h(this,Xk),h(this,xk,null),h(this,Ak,null),h(this,Ek,null),h(this,kk,null),h(this,Sk,null),h(this,Ck,""),h(this,Pk,null),h(this,Tk,null),h(this,Mk,null),h(this,Dk,!1),h(this,Rk,!1),c(this,kk,t.bitmapUrl),c(this,Sk,t.bitmapFile)}static initialize(t,e){Dg.initialize(t,e)}static get supportedTypes(){return fc(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>`image/${t}`)))}static get supportedTypesStr(){return fc(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(Eh.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,e;l(this,Ak)&&(c(this,xk,null),this._uiManager.imageManager.deleteId(l(this,Ak)),null==(t=l(this,Pk))||t.remove(),c(this,Pk,null),null==(e=l(this,Tk))||e.disconnect(),c(this,Tk,null),l(this,Mk)&&(clearTimeout(l(this,Mk)),c(this,Mk,null))),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(l(this,Ak)&&null===l(this,Pk)&&u(this,Nk,jk).call(this),this.isAttachedToDOM||this.parent.add(this))):l(this,Ak)&&u(this,Nk,jk).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,Ek)||l(this,xk)||l(this,kk)||l(this,Sk)||l(this,Ak))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),l(this,xk)?u(this,Bk,Hk).call(this):u(this,Nk,jk).call(this),this.width){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s)}return this.div}getImageForAltText(){return l(this,Pk)}static deserialize(t,e,i){if(t instanceof aw)return null;const s=super.deserialize(t,e,i),{rect:n,bitmapUrl:r,bitmapId:a,isSvg:o,accessibilityData:l}=t;a&&i.imageManager.isValidId(a)?c(s,Ak,a):c(s,kk,r),c(s,Dk,o);const[h,d]=s.pageDimensions;return s.width=(n[2]-n[0])/h,s.height=(n[3]-n[1])/d,l&&(s.altTextData=l),s}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const i={annotationType:Eh.STAMP,bitmapId:l(this,Ak),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Dk),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=u(this,qk,Yk).call(this,!0),i.accessibilityData=this.altTextData,i;const{decorative:s,altText:n}=this.altTextData;if(!s&&n&&(i.accessibilityData={type:"Figure",alt:n}),null===e)return i;e.stamps||(e.stamps=new Map);const r=l(this,Dk)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(e.stamps.has(l(this,Ak))){if(l(this,Dk)){const t=e.stamps.get(l(this,Ak));r>t.area&&(t.area=r,t.serialized.bitmap.close(),t.serialized.bitmap=u(this,qk,Yk).call(this,!1))}}else e.stamps.set(l(this,Ak),{area:r,serialized:i}),i.bitmap=u(this,qk,Yk).call(this,!1);return i}};xk=new WeakMap,Ak=new WeakMap,Ek=new WeakMap,kk=new WeakMap,Sk=new WeakMap,Ck=new WeakMap,Pk=new WeakMap,Tk=new WeakMap,Mk=new WeakMap,Dk=new WeakMap,Rk=new WeakMap,Lk=new WeakSet,Ok=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(c(this,xk,t.bitmap),e||(c(this,Ak,t.id),c(this,Dk,t.isSvg)),t.file&&c(this,Ck,t.file.name),u(this,Bk,Hk).call(this)):this.remove()},Ik=new WeakSet,Fk=function(){c(this,Ek,null),this._uiManager.enableWaiting(!1),l(this,Pk)&&this.div.focus()},Nk=new WeakSet,jk=function(){if(l(this,Ak))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(l(this,Ak)).then((t=>u(this,Lk,Ok).call(this,t,!0))).finally((()=>u(this,Ik,Fk).call(this)));if(l(this,kk)){const t=l(this,kk);return c(this,kk,null),this._uiManager.enableWaiting(!0),void c(this,Ek,this._uiManager.imageManager.getFromUrl(t).then((t=>u(this,Lk,Ok).call(this,t))).finally((()=>u(this,Ik,Fk).call(this))))}if(l(this,Sk)){const t=l(this,Sk);return c(this,Sk,null),this._uiManager.enableWaiting(!0),void c(this,Ek,this._uiManager.imageManager.getFromFile(t).then((t=>u(this,Lk,Ok).call(this,t))).finally((()=>u(this,Ik,Fk).call(this))))}const t=document.createElement("input");t.type="file",t.accept=Qk.supportedTypesStr,c(this,Ek,new Promise((e=>{t.addEventListener("change",(async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);u(this,Lk,Ok).call(this,e)}else this.remove();e()})),t.addEventListener("cancel",(()=>{this.remove(),e()}))})).finally((()=>u(this,Ik,Fk).call(this)))),t.click()},Bk=new WeakSet,Hk=function(){const{div:t}=this;let{width:e,height:i}=l(this,xk);const[s,n]=this.pageDimensions,r=.75;if(this.width)e=this.width*s,i=this.height*n;else if(e>r*s||i>r*n){const t=Math.min(r*s/e,r*n/i);e*=t,i*=t}const[a,o]=this.parentDimensions;this.setDims(e*a/s,i*o/n),this._uiManager.enableWaiting(!1);const h=c(this,Pk,document.createElement("canvas"));t.append(h),t.hidden=!1,u(this,Uk,Gk).call(this,e,i),u(this,Xk,Kk).call(this),l(this,Rk)||(this.parent.addUndoableEditor(this),c(this,Rk,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Ck)&&h.setAttribute("aria-label",l(this,Ck))},Wk=new WeakSet,zk=function(t,e){var i;const[s,n]=this.parentDimensions;this.width=t/s,this.height=e/n,this.setDims(t,e),null!=(i=this._initialOptions)&&i.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==l(this,Mk)&&clearTimeout(l(this,Mk)),c(this,Mk,setTimeout((()=>{c(this,Mk,null),u(this,Uk,Gk).call(this,t,e)}),200))},Vk=new WeakSet,$k=function(t,e){const{width:i,height:s}=l(this,xk);let n=i,r=s,a=l(this,xk);for(;n>2*t||r>2*e;){const i=n,s=r;n>2*t&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(n,r);o.getContext("2d").drawImage(a,0,0,i,s,0,0,n,r),a=o.transferToImageBitmap()}return a},Uk=new WeakSet,Gk=function(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=l(this,Pk);if(!i||i.width===t&&i.height===e)return;i.width=t,i.height=e;const s=l(this,Dk)?l(this,xk):u(this,Vk,$k).call(this,t,e);if(this._uiManager.hasMLManager&&!this.hasAltText()){const i=new OffscreenCanvas(t,e).getContext("2d");i.drawImage(s,0,0,s.width,s.height,0,0,t,e),this._uiManager.mlGuess({service:"image-to-text",request:{data:i.getImageData(0,0,t,e).data,width:t,height:e,channels:4}}).then((t=>{const e=(null==t?void 0:t.output)||"";this.parent&&e&&!this.hasAltText()&&(this.altTextData={altText:e,decorative:!1})}))}const n=i.getContext("2d");n.filter=this._uiManager.hcmFilter,n.drawImage(s,0,0,s.width,s.height,0,0,t,e)},qk=new WeakSet,Yk=function(t){if(t){if(l(this,Dk)){const t=this._uiManager.imageManager.getSvgUrl(l(this,Ak));if(t)return t}const t=document.createElement("canvas");return({width:t.width,height:t.height}=l(this,xk)),t.getContext("2d").drawImage(l(this,xk),0,0),t.toDataURL()}if(l(this,Dk)){const[t,e]=this.pageDimensions,i=Math.round(this.width*t*Zc.PDF_TO_CSS_UNITS),s=Math.round(this.height*e*Zc.PDF_TO_CSS_UNITS),n=new OffscreenCanvas(i,s);return n.getContext("2d").drawImage(l(this,xk),0,0,l(this,xk).width,l(this,xk).height,0,0,i,s),n.transferToImageBitmap()}return structuredClone(l(this,xk))},Xk=new WeakSet,Kk=function(){c(this,Tk,new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&u(this,Wk,zk).call(this,e.width,e.height)}))),l(this,Tk).observe(this.div)},a(Qk,"_type","stamp"),a(Qk,"_editorType",Eh.STAMP);let Jk=Qk;var Zk,tS,eS,iS,sS,nS,rS,aS,oS,lS,hS,cS,dS,uS,pS,fS,gS,mS,vS,bS,yS,_S,wS,xS;const AS=class t{constructor(e){let{uiManager:i,pageIndex:s,div:n,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:d,viewport:u,l10n:p}=e;h(this,pS),h(this,gS),h(this,vS),h(this,yS),h(this,wS),h(this,Zk,void 0),h(this,tS,!1),h(this,eS,null),h(this,iS,null),h(this,sS,null),h(this,nS,null),h(this,rS,null),h(this,aS,new Map),h(this,oS,!1),h(this,lS,!1),h(this,hS,!1),h(this,cS,null),h(this,dS,void 0);const f=[...l(t,uS).values()];if(!t._initialized){t._initialized=!0;for(const t of f)t.initialize(p,i)}i.registerEditorTypes(f),c(this,dS,i),this.pageIndex=s,this.div=n,c(this,Zk,r),c(this,eS,a),this.viewport=u,c(this,cS,d),this.drawLayer=o,l(this,dS).addLayer(this)}get isEmpty(){return 0===l(this,aS).size}get isInvisible(){return this.isEmpty&&l(this,dS).getMode()===Eh.NONE}updateToolbar(t){l(this,dS).updateToolbar(t)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l(this,dS).getMode();switch(u(this,wS,xS).call(this),e){case Eh.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Eh.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Eh.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const s of l(t,uS).values())i.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===(null==(e=l(this,cS))?void 0:e.div)}addInkEditorIfNeeded(t){if(l(this,dS).getMode()===Eh.INK){if(!t)for(const t of l(this,aS).values())if(t.isEmpty())return void t.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){l(this,dS).setEditingState(t)}addCommands(t){l(this,dS).addCommands(t)}togglePointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e;null==(e=l(this,eS))||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of l(this,aS).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,dS).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!l(this,eS))return;const e=l(this,eS).getEditableAnnotations();for(const i of e){if(i.hide(),l(this,dS).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const e=this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){var e;c(this,hS,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const i=new Map,s=new Map;for(const t of l(this,aS).values())if(t.disableEditing(),t.annotationElementId){if(null!==t.serialize()){i.set(t.annotationElementId,t);continue}s.set(t.annotationElementId,t),null==(e=this.getEditableAnnotation(t.annotationElementId))||e.show(),t.remove()}if(l(this,eS)){const t=l(this,eS).getEditableAnnotations();for(const e of t){const{id:t}=e.data;if(l(this,dS).isDeletedAnnotationElement(t))continue;let n=s.get(t);n?(n.resetAnnotationElement(e),n.show(!1),e.show()):(n=i.get(t),n&&(l(this,dS).addChangedExistingAnnotation(n),n.renderAnnotationElement(e),n.show(!1)),e.show())}}u(this,wS,xS).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of l(t,uS).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),c(this,hS,!1)}getEditableAnnotation(t){var e;return(null==(e=l(this,eS))?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,dS).getActive()!==t&&l(this,dS).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,null!=(t=l(this,cS))&&t.div&&!l(this,nS)&&(c(this,nS,u(this,pS,fS).bind(this)),l(this,cS).div.addEventListener("pointerdown",l(this,nS)),l(this,cS).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,null!=(t=l(this,cS))&&t.div&&l(this,nS)&&(l(this,cS).div.removeEventListener("pointerdown",l(this,nS)),c(this,nS,null),l(this,cS).div.classList.remove("highlighting"))}enableClick(){l(this,sS)||(c(this,sS,this.pointerdown.bind(this)),c(this,iS,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",l(this,sS)),this.div.addEventListener("pointerup",l(this,iS)))}disableClick(){l(this,sS)&&(this.div.removeEventListener("pointerdown",l(this,sS)),this.div.removeEventListener("pointerup",l(this,iS)),c(this,sS,null),c(this,iS,null))}attach(t){l(this,aS).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,dS).isDeletedAnnotationElement(e)&&l(this,dS).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,aS).delete(t.id),null==(e=l(this,Zk))||e.removePointerInTextLayer(t.contentDiv),!l(this,hS)&&t.annotationElementId&&l(this,dS).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,dS).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,l(this,lS)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,dS).addDeletedAnnotationElement(t.annotationElementId),Dg.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null==(e=t.parent)||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),l(this,dS).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),l(this,dS).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!l(this,rS)&&(t._focusEventsAllowed=!1,c(this,rS,setTimeout((()=>{c(this,rS,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),i.focus())}),0))),t._structTreeParentId=null==(e=l(this,Zk))?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return l(this,dS).getId()}canCreateNewEmptyEditor(){var t;return null==(t=l(this,gS,mS))?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){l(this,dS).updateToolbar(t),l(this,dS).updateMode(t);const{offsetX:i,offsetY:s}=u(this,yS,_S).call(this),n=this.getNextId(),r=u(this,vS,bS).call(this,{parent:this,id:n,x:i,y:s,uiManager:l(this,dS),isCentered:!0,...e});r&&this.add(r)}deserialize(e){var i;return(null==(i=l(t,uS).get(e.annotationType??e.annotationEditorType))?void 0:i.deserialize(e,this,l(this,dS)))||null}createAndAddNewEditor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getNextId(),n=u(this,vS,bS).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:l(this,dS),isCentered:e,...i});return n&&this.add(n),n}addNewEditor(){this.createAndAddNewEditor(u(this,yS,_S).call(this),!0)}setSelected(t){l(this,dS).setSelected(t)}toggleSelected(t){l(this,dS).toggleSelected(t)}isSelected(t){return l(this,dS).isSelected(t)}unselect(t){l(this,dS).unselect(t)}pointerup(t){const{isMac:e}=Sc.platform;if(!(0!==t.button||t.ctrlKey&&e)&&t.target===this.div&&l(this,oS)){if(c(this,oS,!1),!l(this,tS))return void c(this,tS,!0);if(l(this,dS).getMode()===Eh.STAMP)return void l(this,dS).unselectAll();this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(l(this,dS).getMode()===Eh.HIGHLIGHT&&this.enableTextSelection(),l(this,oS))return void c(this,oS,!1);const{isMac:e}=Sc.platform;if(0!==t.button||t.ctrlKey&&e||t.target!==this.div)return;c(this,oS,!0);const i=l(this,dS).getActive();c(this,tS,!i||i.isEmpty())}findNewParent(t,e,i){const s=l(this,dS).findParent(e,i);return null!==s&&s!==this&&(s.changeParent(t),!0)}destroy(){var t,e;(null==(t=l(this,dS).getActive())?void 0:t.parent)===this&&(l(this,dS).commitOrRemove(),l(this,dS).setActiveEditor(null)),l(this,rS)&&(clearTimeout(l(this,rS)),c(this,rS,null));for(const i of l(this,aS).values())null==(e=l(this,Zk))||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,aS).clear(),l(this,dS).removeLayer(this)}render(t){let{viewport:e}=t;this.viewport=e,Yd(this.div,e);for(const i of l(this,dS).getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update(t){let{viewport:e}=t;l(this,dS).commitOrRemove(),u(this,wS,xS).call(this);const i=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Yd(this.div,{rotation:s}),i!==s)for(const n of l(this,aS).values())n.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,dS).viewParameters.realScale}};Zk=new WeakMap,tS=new WeakMap,eS=new WeakMap,iS=new WeakMap,sS=new WeakMap,nS=new WeakMap,rS=new WeakMap,aS=new WeakMap,oS=new WeakMap,lS=new WeakMap,hS=new WeakMap,cS=new WeakMap,dS=new WeakMap,uS=new WeakMap,pS=new WeakSet,fS=function(t){if(l(this,dS).unselectAll(),t.target===l(this,cS).div){const{isMac:e}=Sc.platform;if(0!==t.button||t.ctrlKey&&e)return;l(this,dS).showAllEditors("highlight",!0,!0),l(this,cS).div.classList.add("free"),aE.startHighlighting(this,"ltr"===l(this,dS).direction,t),l(this,cS).div.addEventListener("pointerup",(()=>{l(this,cS).div.classList.remove("free")}),{once:!0}),t.preventDefault()}},gS=new WeakSet,mS=function(){return l(AS,uS).get(l(this,dS).getMode())},vS=new WeakSet,bS=function(t){const e=l(this,gS,mS);return e?new e.prototype.constructor(t):null},yS=new WeakSet,_S=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),n=Math.max(0,t),r=Math.max(0,e),a=(n+Math.min(window.innerWidth,t+i))/2-t,o=(r+Math.min(window.innerHeight,e+s))/2-e,[l,h]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:h}},wS=new WeakSet,xS=function(){c(this,lS,!0);for(const t of l(this,aS).values())t.isEmpty()&&t.remove();c(this,lS,!1)},a(AS,"_initialized",!1),h(AS,uS,new Map([Bw,wk,Jk,aE].map((t=>[t._editorType,t]))));let ES=AS;var kS,SS,CS,PS,TS,MS,DS,RS,LS,OS;const IS=class t{constructor(t){let{pageIndex:e}=t;h(this,DS),h(this,LS),h(this,kS,null),h(this,SS,0),h(this,CS,new Map),h(this,PS,new Map),this.pageIndex=e}setParent(t){if(l(this,kS)){if(l(this,kS)!==t){if(l(this,CS).size>0)for(const e of l(this,CS).values())e.remove(),t.append(e);c(this,kS,t)}}else c(this,kS,t)}static get _svgFactory(){return fc(this,"_svgFactory",new Dd)}highlight(e,i,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=d(this,SS)._++,a=u(this,DS,RS).call(this,e.box);a.classList.add("highlight"),e.free&&a.classList.add("free");const o=t._svgFactory.createElement("defs");a.append(o);const h=t._svgFactory.createElement("path");o.append(h);const c=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",c),h.setAttribute("d",e.toSVGPath()),n&&l(this,PS).set(r,h);const p=u(this,LS,OS).call(this,o,c),f=t._svgFactory.createElement("use");return a.append(f),a.setAttribute("fill",i),a.setAttribute("fill-opacity",s),f.setAttribute("href",`#${c}`),l(this,CS).set(r,a),{id:r,clipPathId:`url(#${p})`}}highlightOutline(e){const i=d(this,SS)._++,s=u(this,DS,RS).call(this,e.box);s.classList.add("highlightOutline");const n=t._svgFactory.createElement("defs");s.append(n);const r=t._svgFactory.createElement("path");n.append(r);const a=`path_p${this.pageIndex}_${i}`;let o;if(r.setAttribute("id",a),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke"),e.free){s.classList.add("free");const e=t._svgFactory.createElement("mask");n.append(e),o=`mask_p${this.pageIndex}_${i}`,e.setAttribute("id",o),e.setAttribute("maskUnits","objectBoundingBox");const r=t._svgFactory.createElement("rect");e.append(r),r.setAttribute("width","1"),r.setAttribute("height","1"),r.setAttribute("fill","white");const l=t._svgFactory.createElement("use");e.append(l),l.setAttribute("href",`#${a}`),l.setAttribute("stroke","none"),l.setAttribute("fill","black"),l.setAttribute("fill-rule","nonzero"),l.classList.add("mask")}const h=t._svgFactory.createElement("use");s.append(h),h.setAttribute("href",`#${a}`),o&&h.setAttribute("mask",`url(#${o})`);const c=h.cloneNode();return s.append(c),h.classList.add("mainOutline"),c.classList.add("secondaryOutline"),l(this,CS).set(i,s),i}finalizeLine(t,e){const i=l(this,PS).get(t);l(this,PS).delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){l(this,CS).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),l(this,PS).delete(t)}updatePath(t,e){l(this,PS).get(t).setAttribute("d",e.toSVGPath())}updateBox(e,i){var s;u(s=t,TS,MS).call(s,l(this,CS).get(e),i)}show(t,e){l(this,CS).get(t).classList.toggle("hidden",!e)}rotate(t,e){l(this,CS).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){l(this,CS).get(t).setAttribute("fill",e)}changeOpacity(t,e){l(this,CS).get(t).setAttribute("fill-opacity",e)}addClass(t,e){l(this,CS).get(t).classList.add(e)}removeClass(t,e){l(this,CS).get(t).classList.remove(e)}remove(t){null!==l(this,kS)&&(l(this,CS).get(t).remove(),l(this,CS).delete(t))}destroy(){c(this,kS,null);for(const t of l(this,CS).values())t.remove();l(this,CS).clear()}};kS=new WeakMap,SS=new WeakMap,CS=new WeakMap,PS=new WeakMap,TS=new WeakSet,MS=function(t){let{x:e=0,y:i=0,width:s=1,height:n=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:r}=t;r.top=100*i+"%",r.left=100*e+"%",r.width=100*s+"%",r.height=100*n+"%"},DS=new WeakSet,RS=function(t){var e;const i=IS._svgFactory.create(1,1,!0);return l(this,kS).append(i),i.setAttribute("aria-hidden",!0),u(e=IS,TS,MS).call(e,i,t),i},LS=new WeakSet,OS=function(t,e){const i=IS._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const n=IS._svgFactory.createElement("use");return i.append(n),n.setAttribute("href",`#${e}`),n.classList.add("clip"),s},h(IS,TS);let FS=IS;var NS=dh.AbortException,jS=dh.AnnotationEditorLayer,BS=dh.AnnotationEditorParamsType,HS=dh.AnnotationEditorType,WS=dh.AnnotationEditorUIManager,zS=dh.AnnotationLayer,VS=dh.AnnotationMode,$S=dh.CMapCompressionType,US=dh.ColorPicker,GS=dh.DOMSVGFactory,qS=dh.DrawLayer,YS=dh.FeatureTest,XS=dh.GlobalWorkerOptions,KS=dh.ImageKind,QS=dh.InvalidPDFException,JS=dh.MissingPDFException,ZS=dh.OPS,tC=dh.Outliner,eC=dh.PDFDataRangeTransport,iC=dh.PDFDateString,sC=dh.PDFWorker,nC=dh.PasswordResponses,rC=dh.PermissionFlag,aC=dh.PixelsPerInch,oC=dh.RenderingCancelledException,lC=dh.TextLayer,hC=dh.UnexpectedResponseException,cC=dh.Util,dC=dh.VerbosityLevel,uC=dh.XfaLayer,pC=dh.build,fC=dh.createValidAbsoluteUrl,gC=dh.fetchData,mC=dh.getDocument,vC=dh.getFilenameFromUrl,bC=dh.getPdfFilenameFromUrl,yC=dh.getXfaPageViewport,_C=dh.isDataScheme,wC=dh.isPdfFile,xC=dh.noContextMenu,AC=dh.normalizeUnicode,EC=dh.renderTextLayer,kC=dh.setLayerDimensions,SC=dh.shadow,CC=dh.updateTextLayer,PC=dh.version;const TC=Object.freeze(Object.defineProperty({__proto__:null,AbortException:NS,AnnotationEditorLayer:jS,AnnotationEditorParamsType:BS,AnnotationEditorType:HS,AnnotationEditorUIManager:WS,AnnotationLayer:zS,AnnotationMode:VS,CMapCompressionType:$S,ColorPicker:US,DOMSVGFactory:GS,DrawLayer:qS,FeatureTest:YS,GlobalWorkerOptions:XS,ImageKind:KS,InvalidPDFException:QS,MissingPDFException:JS,OPS:ZS,Outliner:tC,PDFDataRangeTransport:eC,PDFDateString:iC,PDFWorker:sC,PasswordResponses:nC,PermissionFlag:rC,PixelsPerInch:aC,RenderingCancelledException:oC,TextLayer:lC,UnexpectedResponseException:hC,Util:cC,VerbosityLevel:dC,XfaLayer:uC,build:pC,createValidAbsoluteUrl:fC,fetchData:gC,getDocument:mC,getFilenameFromUrl:vC,getPdfFilenameFromUrl:bC,getXfaPageViewport:yC,isDataScheme:_C,isPdfFile:wC,noContextMenu:xC,normalizeUnicode:AC,renderTextLayer:EC,setLayerDimensions:kC,shadow:SC,updateTextLayer:CC,version:PC},Symbol.toStringTag,{value:"Module"}));var MC=function(t,e,i){if(i||2===arguments.length)for(var s,n=0,r=e.length;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},DC=MC(MC(MC(MC(MC(MC(MC(MC(MC(MC(MC(MC(MC(MC(MC(MC(MC(MC([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function RC(t,e){var i={};return DC.forEach((function(s){var n=t[s];n&&(i[s]=e?function(t){return n(t,e(s))}:n)})),i}function LC(t){var e=!1;return{promise:new Promise((function(i,s){t.then((function(t){return!e&&i(t)})).catch((function(t){return!e&&s(t)}))})),cancel:function(){e=!0}}}function OC(t){var e,i,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(i=OC(t[e]))&&(s&&(s+=" "),s+=i);else for(e in t)t[e]&&(s&&(s+=" "),s+=e);return s}function IC(){for(var t,e,i=0,s="";i<arguments.length;)(t=arguments[i++])&&(e=OC(t))&&(s&&(s+=" "),s+=e);return s}var FC="production"===yn.env.NODE_ENV,NC="Invariant failed";function jC(t,e){if(!t){if(FC)throw new Error(NC);var i="function"==typeof e?e():e,s=i?"".concat(NC,": ").concat(i):NC;throw new Error(s)}}var BC=function(){};if("production"!==yn.env.NODE_ENV){var HC=function(t,e){var i=arguments.length;e=new Array(i>1?i-1:0);for(var s=1;s<i;s++)e[s-1]=arguments[s];var n=0,r="Warning: "+t.replace(/%s/g,(function(){return e[n++]}));typeof console<"u"&&console.error(r);try{throw new Error(r)}catch{}};BC=function(t,e,i){var s=arguments.length;i=new Array(s>2?s-2:0);for(var n=2;n<s;n++)i[n-2]=arguments[n];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");t||HC.apply(null,[e].concat(i))}}const WC=f(BC);var zC=Object.prototype.hasOwnProperty;function VC(t,e,i){for(i of t.keys())if($C(i,e))return i}function $C(t,e){var i,s,n;if(t===e)return!0;if(t&&e&&(i=t.constructor)===e.constructor){if(i===Date)return t.getTime()===e.getTime();if(i===RegExp)return t.toString()===e.toString();if(i===Array){if((s=t.length)===e.length)for(;s--&&$C(t[s],e[s]););return-1===s}if(i===Set){if(t.size!==e.size)return!1;for(s of t)if((n=s)&&"object"==typeof n&&!(n=VC(e,n))||!e.has(n))return!1;return!0}if(i===Map){if(t.size!==e.size)return!1;for(s of t)if((n=s[0])&&"object"==typeof n&&!(n=VC(e,n))||!$C(s[1],e.get(n)))return!1;return!0}if(i===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(i===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return-1===s}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return-1===s}if(!i||"object"==typeof t){for(i in s=0,t)if(zC.call(t,i)&&++s&&!zC.call(e,i)||!(i in e)||!$C(t[i],e[i]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}const UC=(0,n.createContext)(null);function GC(t){let{children:e,type:i}=t;return(0,s.jsx)("div",{className:`react-pdf__message react-pdf__message--${i}`,children:e})}class qC{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return jC(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){jC(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise((e=>{jC(this.pdfDocument,"PDF document not loaded."),jC(t,"Destination is not specified."),"string"==typeof t?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)})).then((t=>{jC(Array.isArray(t),`"${t}" is not a valid destination array.`);const e=t[0];new Promise((t=>{jC(this.pdfDocument,"PDF document not loaded."),e instanceof Object?this.pdfDocument.getPageIndex(e).then((e=>{t(e)})).catch((()=>{jC(!1,`"${e}" is not a valid page reference.`)})):"number"==typeof e?t(e):jC(!1,`"${e}" is not a valid destination reference.`)})).then((e=>{const i=e+1;jC(this.pdfViewer,"PDF viewer is not initialized."),jC(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:e,pageNumber:i})}))}))}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;jC(this.pdfViewer,"PDF viewer is not initialized."),jC(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||"noopener noreferrer nofollow",t.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const YC=1,XC=2,KC=typeof document<"u",QC=KC&&"file:"===window.location.protocol;function JC(t){return function(t){return typeof t<"u"}(t)&&null!==t}function ZC(t){return function(t){return"string"==typeof t}(t)&&/^data:/.test(t)}function tP(t){jC(ZC(t),"Invalid data URI.");const[e="",i=""]=t.split(",");return-1!==e.split(";").indexOf("base64")?atob(i):unescape(i)}function eP(){return KC&&window.devicePixelRatio||1}const iP="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function sP(){WC(!QC,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${iP}`)}function nP(t){t&&t.cancel&&t.cancel()}function rP(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function aP(t){return new Promise(((e,i)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return i(new Error("Error while reading a file."));e(s.result)},s.onerror=t=>{if(!t.target)return i(new Error("Error while reading a file."));const{error:e}=t.target;if(!e)return i(new Error("Error while reading a file."));switch(e.code){case e.NOT_FOUND_ERR:return i(new Error("Error while reading a file: File not found."));case e.SECURITY_ERR:return i(new Error("Error while reading a file: Security error."));case e.ABORT_ERR:return i(new Error("Error while reading a file: Aborted."));default:return i(new Error("Error while reading a file."))}},s.readAsArrayBuffer(t)}))}function oP(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function lP(){return(0,n.useReducer)(oP,{value:void 0,error:void 0})}var hP=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function a(t){try{l(s.next(t))}catch(e){r(e)}}function o(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){t.done?n(t.value):function(t){return t instanceof i?t:new i((function(e){e(t)}))}(t.value).then(a,o)}l((s=s.apply(t,e||[])).next())}))},cP=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};const{PDFDataRangeTransport:dP}=TC,uP=(t,e)=>{switch(e){case YC:t(prompt("Enter the password to open this PDF file."));break;case XC:t(prompt("Invalid password. Please try again."));break}};function pP(t){return"object"==typeof t&&null!==t&&("data"in t||"range"in t||"url"in t)}const fP=(0,n.forwardRef)((function(t,e){var{children:i,className:r,error:a="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:l,file:h,inputRef:c,imageResourcesPath:d,loading:u="Loading PDF\u2026",noData:p="No PDF file specified.",onItemClick:f,onLoadError:g,onLoadProgress:m,onLoadSuccess:v,onPassword:b=uP,onSourceError:y,onSourceSuccess:_,options:w,renderMode:x,rotate:A}=t,E=cP(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[k,S]=lP(),{value:C,error:P}=k,[T,M]=lP(),{value:D,error:R}=T,L=(0,n.useRef)(new qC),O=(0,n.useRef)([]),I=(0,n.useRef)(void 0),F=(0,n.useRef)(void 0);h&&h!==I.current&&pP(h)&&(WC(!$C(h,I.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),I.current=h),w&&w!==F.current&&(WC(!$C(w,F.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),F.current=w);const N=(0,n.useRef)({scrollPageIntoView:t=>{const{dest:e,pageNumber:i,pageIndex:s=i-1}=t;if(f)return void f({dest:e,pageIndex:s,pageNumber:i});const n=O.current[s];n?n.scrollIntoView():WC(!1,`An internal link leading to page ${i} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,n.useImperativeHandle)(e,(()=>({linkService:L,pages:O,viewer:N})),[]),(0,n.useEffect)((function(){S({type:"RESET"})}),[h,S]);const j=(0,n.useCallback)((()=>hP(this,void 0,void 0,(function*(){if(!h)return null;if("string"==typeof h)return ZC(h)?{data:tP(h)}:(sP(),{url:h});if(h instanceof dP)return{range:h};if(h instanceof ArrayBuffer)return{data:h};if(KC&&function(t){return jC(KC,"isBlob can only be used in a browser environment"),t instanceof Blob}(h))return{data:yield aP(h)};if(jC("object"==typeof h,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),jC(pP(h),"Invalid parameter object: need either .data, .range or .url"),"url"in h&&"string"==typeof h.url){if(ZC(h.url)){const{url:t}=h,e=cP(h,["url"]),i=tP(t);return Object.assign({data:i},e)}sP()}return h}))),[h]);function B(t,e){O.current[t]=e}function H(t){delete O.current[t]}(0,n.useEffect)((()=>{const t=LC(j());return t.promise.then((t=>{S({type:"RESOLVE",value:t})})).catch((t=>{S({type:"REJECT",error:t})})),()=>{nP(t)}}),[j,S]),(0,n.useEffect)((()=>{if(!(typeof C>"u")){if(!1===C)return void(P&&(WC(!1,P.toString()),y&&y(P)));_&&_()}}),[C]),(0,n.useEffect)((function(){M({type:"RESET"})}),[M,C]),(0,n.useEffect)((function(){if(!C)return;const t=Object.assign(Object.assign({},C),w),e=mC(t);m&&(e.onProgress=m),b&&(e.onPassword=b);const i=e;return i.promise.then((t=>{M({type:"RESOLVE",value:t})})).catch((t=>{i.destroyed||M({type:"REJECT",error:t})})),()=>{i.destroy()}}),[w,M,C]),(0,n.useEffect)((()=>{if(!(typeof D>"u")){if(!1===D)return void(R&&(WC(!1,R.toString()),g&&g(R)));D&&(v&&v(D),O.current=new Array(D.numPages),L.current.setDocument(D))}}),[D]),(0,n.useEffect)((function(){L.current.setViewer(N.current),L.current.setExternalLinkRel(o),L.current.setExternalLinkTarget(l)}),[o,l]);const W=(0,n.useMemo)((()=>({imageResourcesPath:d,linkService:L.current,onItemClick:f,pdf:D,registerPage:B,renderMode:x,rotate:A,unregisterPage:H})),[d,f,D,x,A]),z=(0,n.useMemo)((()=>RC(E,(()=>D))),[E,D]);return(0,s.jsx)("div",Object.assign({className:IC("react-pdf__Document",r),ref:c,style:{"--scale-factor":"1"}},z,{children:h?null==D?(0,s.jsx)(GC,{type:"loading",children:"function"==typeof u?u():u}):!1===D?(0,s.jsx)(GC,{type:"error",children:"function"==typeof a?a():a}):(0,s.jsx)(UC.Provider,{value:W,children:i}):(0,s.jsx)(GC,{type:"no-data",children:"function"==typeof p?p():p})}))}));function gP(){return(0,n.useContext)(UC)}function mP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.filter(Boolean);return i.length<=1?i[0]||null:function(t){i.forEach((function(e){"function"==typeof e?e(t):e&&(e.current=t)}))}}const vP=(0,n.createContext)(null),bP={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},yP=/^H(\d+)$/;function _P(t){return"children"in t}function wP(t){return!!_P(t)&&(1===t.children.length&&0 in t.children&&"id"in t.children[0])}function xP(t){const e={};if(_P(t)){const{role:i}=t,s=i.match(yP);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(function(t){return t in bP}(i)){const t=bP[i];t&&(e.role=t)}}return e}function AP(t){const e={};if(_P(t)){if(void 0!==t.alt&&(e["aria-label"]=t.alt),void 0!==t.lang&&(e.lang=t.lang),wP(t)){const[i]=t.children;if(i){const t=AP(i);return Object.assign(Object.assign({},e),t)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function EP(t){return t?Object.assign(Object.assign({},xP(t)),AP(t)):null}function kP(t){let{className:e,node:i}=t;const r=(0,n.useMemo)((()=>EP(i)),[i]),a=(0,n.useMemo)((()=>!_P(i)||wP(i)?null:i.children.map(((t,e)=>(0,s.jsx)(kP,{node:t},e)))),[i]);return(0,s.jsx)("span",Object.assign({className:e},r,{children:a}))}function SP(){return(0,n.useContext)(vP)}function CP(){const t=SP();jC(t,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:i}=t,[r,a]=lP(),{value:o,error:l}=r,{customTextRenderer:h,page:c}=t;return(0,n.useEffect)((function(){a({type:"RESET"})}),[a,c]),(0,n.useEffect)((function(){if(h||!c)return;const t=LC(c.getStructTree()),e=t;return t.promise.then((t=>{a({type:"RESOLVE",value:t})})).catch((t=>{a({type:"REJECT",error:t})})),()=>nP(e)}),[h,c,a]),(0,n.useEffect)((()=>{if(void 0!==o){if(!1===o)return void(l&&(WC(!1,l.toString()),e&&e(l)));o&&i&&i(o)}}),[o]),o?(0,s.jsx)(kP,{className:"react-pdf__Page__structTree structTree",node:o}):null}const PP=VS;function TP(t){const e=SP();jC(e,"Unable to find Page context.");const i=Object.assign(Object.assign({},e),t),{_className:r,canvasBackground:a,devicePixelRatio:o=eP(),onRenderError:l,onRenderSuccess:h,page:c,renderForms:d,renderTextLayer:u,rotate:p,scale:f}=i,{canvasRef:g}=t;jC(c,"Attempted to render page canvas, but no page was specified.");const m=(0,n.useRef)(null);function v(t){(function(t){return"RenderingCancelledException"===t.name})(t)||(WC(!1,t.toString()),l&&l(t))}const b=(0,n.useMemo)((()=>c.getViewport({scale:f*o,rotation:p})),[o,c,p,f]),y=(0,n.useMemo)((()=>c.getViewport({scale:f,rotation:p})),[c,p,f]);(0,n.useEffect)((function(){if(!c)return;c.cleanup();const{current:t}=m;if(!t)return;t.width=b.width,t.height=b.height,t.style.width=`${Math.floor(y.width)}px`,t.style.height=`${Math.floor(y.height)}px`,t.style.visibility="hidden";const e={annotationMode:d?PP.ENABLE_FORMS:PP.ENABLE,canvasContext:t.getContext("2d",{alpha:!1}),viewport:b};a&&(e.background=a);const i=c.render(e),s=i;return i.promise.then((()=>{t.style.visibility="",c&&h&&h(rP(c,f))})).catch(v),()=>nP(s)}),[a,m,o,c,d,b,y]);const _=(0,n.useCallback)((()=>{const{current:t}=m;t&&(t.width=0,t.height=0)}),[m]);return(0,n.useEffect)((()=>_),[_]),(0,s.jsx)("canvas",{className:`${r}__canvas`,dir:"ltr",ref:mP(g,m),style:{display:"block",userSelect:"none"},children:u?(0,s.jsx)(CP,{}):null})}function MP(){const t=SP();jC(t,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:i,onGetTextSuccess:r,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:h,pageNumber:c,rotate:d,scale:u}=t;jC(l,"Attempted to load page text content, but no page was specified.");const[p,f]=lP(),{value:g,error:m}=p,v=(0,n.useRef)(null),b=(0,n.useRef)(void 0);WC(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,n.useEffect)((function(){f({type:"RESET"})}),[l,f]),(0,n.useEffect)((function(){if(!l)return;const t=LC(l.getTextContent()),e=t;return t.promise.then((t=>{f({type:"RESOLVE",value:t})})).catch((t=>{f({type:"REJECT",error:t})})),()=>nP(e)}),[l,f]),(0,n.useEffect)((()=>{if(void 0!==g){if(!1===g)return void(m&&(WC(!1,m.toString()),i&&i(m)));g&&r&&r(g)}}),[g]);const y=(0,n.useCallback)((()=>{o&&o()}),[o]),_=(0,n.useCallback)((t=>{WC(!1,t.toString()),a&&a(t)}),[a]);const w=(0,n.useMemo)((()=>l.getViewport({scale:u,rotation:d})),[l,d,u]);return(0,n.useLayoutEffect)((function(){if(!l||!g)return;const{current:t}=v;if(!t)return;t.innerHTML="";const i=l.streamTextContent({includeMarkedContent:!0}),s=new lC({container:t,textContentSource:i,viewport:w}),n=s;return s.render().then((()=>{const i=document.createElement("div");i.className="endOfContent",t.append(i),b.current=i;const s=t.querySelectorAll('[role="presentation"]');if(e){let t=0;g.items.forEach(((i,n)=>{if(!function(t){return"str"in t}(i))return;const r=s[t];if(!r)return;const a=e(Object.assign({pageIndex:h,pageNumber:c,itemIndex:n},i));r.innerHTML=a,t+=i.str&&i.hasEOL?2:1}))}y()})).catch(_),()=>nP(n)}),[e,_,y,l,h,c,g,w]),(0,s.jsx)("div",{className:IC("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const t=b.current;t&&t.classList.remove("active")},onMouseDown:function(){const t=b.current;t&&t.classList.add("active")},ref:v})}function DP(){const t=gP(),e=SP();jC(e,"Unable to find Page context.");const i=Object.assign(Object.assign({},t),e),{imageResourcesPath:r,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:c,page:d,pdf:u,renderForms:p,rotate:f,scale:g=1}=i;jC(u,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),jC(d,"Attempted to load page annotations, but no page was specified."),jC(a,"Attempted to load page annotations, but no linkService was specified.");const[m,v]=lP(),{value:b,error:y}=m,_=(0,n.useRef)(null);WC(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,n.useEffect)((function(){v({type:"RESET"})}),[v,d]),(0,n.useEffect)((function(){if(!d)return;const t=LC(d.getAnnotations()),e=t;return t.promise.then((t=>{v({type:"RESOLVE",value:t})})).catch((t=>{v({type:"REJECT",error:t})})),()=>{nP(e)}}),[v,d,p]),(0,n.useEffect)((()=>{if(void 0!==b){if(!1===b)return void(y&&(WC(!1,y.toString()),o&&o(y)));b&&l&&l(b)}}),[b]);const w=(0,n.useMemo)((()=>d.getViewport({scale:g,rotation:f})),[d,f,g]);return(0,n.useEffect)((function(){if(!u||!d||!a||!b)return;const{current:t}=_;if(!t)return;const e=w.clone({dontFlip:!0}),i={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:t,l10n:null,page:d,viewport:e},s={annotations:b,annotationStorage:u.annotationStorage,div:t,imageResourcesPath:r,linkService:a,page:d,renderForms:p,viewport:e};t.innerHTML="";try{new zS(i).render(s),c&&c()}catch(n){!function(t){WC(!1,`${t}`),h&&h(t)}(n)}return()=>{}}),[b,r,a,d,p,w]),(0,s.jsx)("div",{className:IC("react-pdf__Page__annotations","annotationLayer"),ref:_})}const RP=1;function LP(t){const e=gP(),i=Object.assign(Object.assign({},e),t),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:h,className:c,customRenderer:d,customTextRenderer:u,devicePixelRatio:p,error:f="Failed to load the page.",height:g,inputRef:m,loading:v="Loading page\u2026",noData:b="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:_,onGetStructTreeError:w,onGetStructTreeSuccess:x,onGetTextError:A,onGetTextSuccess:E,onLoadError:k,onLoadSuccess:S,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:P,onRenderError:T,onRenderSuccess:M,onRenderTextLayerError:D,onRenderTextLayerSuccess:R,pageIndex:L,pageNumber:O,pdf:I,registerPage:F,renderAnnotationLayer:N=!0,renderForms:j=!1,renderMode:B="canvas",renderTextLayer:H=!0,rotate:W,scale:z=RP,unregisterPage:V,width:$}=i,U=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i}(i,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[G,q]=lP(),{value:Y,error:X}=G,K=(0,n.useRef)(null);jC(I,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Q=JC(O)?O-1:L??null,J=O??(JC(L)?L+1:null),Z=W??(Y?Y.rotate:null),tt=(0,n.useMemo)((()=>{if(!Y)return null;let t=1;const e=z??RP;if($||g){const e=Y.getViewport({scale:1,rotation:Z});$?t=$/e.width:g&&(t=g/e.height)}return e*t}),[g,Y,Z,z,$]);(0,n.useEffect)((function(){return()=>{JC(Q)&&a&&V&&V(Q)}}),[a,I,Q,V]),(0,n.useEffect)((function(){q({type:"RESET"})}),[q,I,Q]),(0,n.useEffect)((function(){if(!I||!J)return;const t=LC(I.getPage(J)),e=t;return t.promise.then((t=>{q({type:"RESOLVE",value:t})})).catch((t=>{q({type:"REJECT",error:t})})),()=>nP(e)}),[q,I,Q,J,F]),(0,n.useEffect)((()=>{if(void 0!==Y){if(!1===Y)return void(X&&(WC(!1,X.toString()),k&&k(X)));!function(){if(S){if(!Y||!tt)return;S(rP(Y,tt))}if(a&&F){if(!JC(Q)||!K.current)return;F(Q,K.current)}}()}}),[Y,tt]);const et=(0,n.useMemo)((()=>Y&&JC(Q)&&J&&JC(Z)&&JC(tt)?{_className:r,canvasBackground:o,customTextRenderer:u,devicePixelRatio:p,onGetAnnotationsError:y,onGetAnnotationsSuccess:_,onGetStructTreeError:w,onGetStructTreeSuccess:x,onGetTextError:A,onGetTextSuccess:E,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:P,onRenderError:T,onRenderSuccess:M,onRenderTextLayerError:D,onRenderTextLayerSuccess:R,page:Y,pageIndex:Q,pageNumber:J,renderForms:j,renderTextLayer:H,rotate:Z,scale:tt}:null),[r,o,u,p,y,_,w,x,A,E,C,P,T,M,D,R,Y,Q,J,j,H,Z,tt]),it=(0,n.useMemo)((()=>RC(U,(()=>Y&&(tt?rP(Y,tt):void 0)))),[U,Y,tt]),st=`${Q}@${tt}/${Z}`;function nt(){switch(B){case"custom":return jC(d,'renderMode was set to "custom", but no customRenderer was passed.'),(0,s.jsx)(d,{},`${st}_custom`);case"none":return null;default:return(0,s.jsx)(TP,{canvasRef:l},`${st}_canvas`)}}return(0,s.jsx)("div",Object.assign({className:IC(r,c),"data-page-number":J,ref:mP(m,K),style:{"--scale-factor":`${tt}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},it,{children:J?null===I||void 0===Y||null===Y?(0,s.jsx)(GC,{type:"loading",children:"function"==typeof v?v():v}):!1===I||!1===Y?(0,s.jsx)(GC,{type:"error",children:"function"==typeof f?f():f}):(0,s.jsxs)(vP.Provider,{value:et,children:[nt(),H?(0,s.jsx)(MP,{},`${st}_text`):null,N?(0,s.jsx)(DP,{},`${st}_annotations`):null,h]}):(0,s.jsx)(GC,{type:"no-data",children:"function"==typeof b?b():b})}))}WC(!QC,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${iP}`),XS.workerSrc="pdf.worker.mjs";const OP="SET_ZOOM_LEVEL",IP=t=>({type:OP,value:t}),FP="SET_PDF_PAGINATED",NP="SET_NUM_PAGES",jP=t=>({type:NP,value:t}),BP="SET_CURRENT_PAGE",HP="SET_CURRENT_MAIN_STATE",WP=t=>({type:BP,value:t}),zP={defaultZoomLevel:1,zoomLevel:1,zoomJump:.1,paginated:!0,numPages:0,currentPage:1},VP=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zP,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case OP:{const{value:i}=e;return{...t,zoomLevel:i}}case FP:{const{value:i}=e;return{...t,paginated:i}}case NP:{const{value:i}=e;return{...t,numPages:i}}case BP:{const{value:i}=e;return{...t,currentPage:i}}case HP:{const{value:i}=e;return{...t,mainState:i}}default:return t}},$P=(0,n.createContext)({state:zP,dispatch:()=>null}),UP=t=>{let{children:e,mainState:i}=t;var r,a,o,l,h,c,d;const[u,p]=(0,n.useReducer)(VP,{...zP,defaultZoomLevel:(null==(a=null==(r=i.config)?void 0:r.pdfZoom)?void 0:a.defaultZoom)??zP.defaultZoomLevel,zoomLevel:(null==(l=null==(o=i.config)?void 0:o.pdfZoom)?void 0:l.defaultZoom)??zP.zoomLevel,zoomJump:(null==(c=null==(h=i.config)?void 0:h.pdfZoom)?void 0:c.zoomJump)??zP.zoomJump,paginated:(null==(d=i.config)||!d.pdfVerticalScrollByDefault)&&zP.paginated,mainState:i});return(0,n.useEffect)((()=>{p({type:HP,value:i})}),[i]),(0,s.jsx)($P.Provider,{value:{state:u,dispatch:p},children:e})},GP=t=>{let{pageNum:e}=t;const{state:{mainState:i,paginated:r,zoomLevel:a,numPages:o,currentPage:l}}=(0,n.useContext)($P),{t:h}=tl(),c=(null==i?void 0:i.rendererRect)||null,d=e??l;return(0,s.jsxs)(qP,{id:"pdf-page-wrapper",$lastPage:d>=o,children:[!r&&(0,s.jsx)(YP,{id:"pdf-page-info",children:h("pdfPluginPageNumber",{currentPage:d,allPagesCount:o})}),(0,s.jsx)(LP,{pageNumber:d||l,scale:a,height:((null==c?void 0:c.height)??100)-100,width:((null==c?void 0:c.width)??100)-100,loading:h("pdfPluginLoading")})]})},qP=ro.div`
  margin: ${t=>t.$lastPage?"20px 0":void 0};
`,YP=ro.div`
  padding: 0 0 10px 10px;
  color: ${t=>t.theme.textTertiary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,XP=()=>{const{state:{numPages:t}}=(0,n.useContext)($P),e=[];for(let i=0;i<t;i++)e.push((0,s.jsx)(GP,{pageNum:i+1},i+1));return(0,s.jsx)(s.Fragment,{children:e})},KP=()=>{const{state:{mainState:t,paginated:e},dispatch:i}=(0,n.useContext)($P),{t:r}=tl(),a=(null==t?void 0:t.currentDocument)||null;return(0,n.useEffect)((()=>{i(jP(zP.numPages))}),[a]),a&&void 0!==a.fileData?(0,s.jsx)(QP,{file:a.fileData,onLoadSuccess:t=>{let{numPages:e}=t;return i(jP(e))},loading:(0,s.jsx)("span",{children:r("pdfPluginLoading")}),children:e?(0,s.jsx)(GP,{}):(0,s.jsx)(XP,{})}):null},QP=ro(fP)`
  display: flex;
  flex-direction: column;
  margin: 0 auto;
`,JP=t=>(0,s.jsx)(tT,{...t,reverse:!0}),ZP=t=>(0,s.jsx)(tT,{...t}),tT=t=>{const{color:e,size:i,reverse:n}=t;return(0,s.jsx)("svg",{width:i||"100%",height:i||"100%",style:{transform:""+(n?"rotate(180deg)":"")},viewBox:"0 0 12 12",version:"1.1",children:(0,s.jsx)("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,s.jsx)("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)",children:(0,s.jsx)("g",{id:"AV",transform:"translate(100.000000, 852.000000)",children:(0,s.jsx)("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)",children:(0,s.jsxs)("g",{children:[(0,s.jsx)("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),(0,s.jsx)("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:e||"#aaa"})]})})})})})})},eT=t=>{const{color:e,size:i,reverse:n}=t;return(0,s.jsxs)("svg",{width:i||"100%",height:i||"100%",style:{transform:""+(n?"rotate(180deg)":"")},id:"Layer_1",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:e||"#aaa"}),(0,s.jsx)("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:e||"#aaa"})]})},iT=t=>(0,s.jsx)(nT,{...t}),sT=t=>(0,s.jsx)(nT,{...t,reverse:!0}),nT=t=>{const{color:e,size:i,reverse:n}=t;return(0,s.jsx)("svg",{width:i||"100%",height:i||"100%",viewBox:"0 0 32 32",version:"1.1",children:(0,s.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,s.jsx)("g",{id:"search-plus-icon",fill:e||"#aaa",children:(0,s.jsx)("path",{id:"search-plus",d:n?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"})})})})},rT=t=>{const{color:e,size:i}=t;return(0,s.jsx)("svg",{width:i||"100%",height:i||"100%",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:e||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"})})},aT=t=>{const{color:e,size:i,reverse:n}=t;return(0,s.jsx)("svg",{width:i||"100%",height:i||"100%",style:{transform:""+(n?"rotate(90deg)":"")},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve",children:(0,s.jsx)("path",{fill:e||"#aaa",d:"M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574\n  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98\n  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28\n  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852\n  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z"})})},oT=()=>{const{state:{currentPage:t,numPages:e},dispatch:i}=(0,n.useContext)($P),{t:r}=tl();return(0,s.jsxs)(lT,{id:"pdf-pagination",children:[(0,s.jsx)(hT,{id:"pdf-pagination-prev",onClick:()=>i(WP(t-1)),disabled:1===t,children:(0,s.jsx)(JP,{color:"#000",size:"50%"})}),(0,s.jsx)(dT,{id:"pdf-pagination-info",children:r("pdfPluginPageNumber",{currentPage:t,allPagesCount:e})}),(0,s.jsx)(cT,{id:"pdf-pagination-next",onClick:()=>i(WP(t+1)),disabled:t>=e,children:(0,s.jsx)(ZP,{color:"#000",size:"50%"})})]})},lT=ro.div`
  display: flex;
  align-items: center;
`,hT=ro(Co)`
  width: 30px;
  height: 30px;
  margin: 0 5px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,cT=ro(hT)`
  margin: 0 20px 0 5px;
`,dT=ro.div`
  color: ${t=>t.theme.textPrimary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,uT=()=>{const{t:t}=tl(),{state:{mainState:e,paginated:i,zoomLevel:r,numPages:a,zoomJump:o,defaultZoomLevel:l},dispatch:h}=(0,n.useContext)($P),c=(null==e?void 0:e.currentDocument)||null;return(0,s.jsxs)(pT,{id:"pdf-controls",children:[i&&a>1&&(0,s.jsx)(oT,{}),(null==c?void 0:c.fileData)&&(0,s.jsx)(gT,{id:"pdf-download",href:null==c?void 0:c.fileData,download:(null==c?void 0:c.fileName)||(null==c?void 0:c.uri),title:t("downloadButtonLabel"),children:(0,s.jsx)(eT,{color:"#000",size:"75%"})}),(0,s.jsx)(fT,{id:"pdf-zoom-out",onMouseDown:()=>h(IP(r-o)),children:(0,s.jsx)(sT,{color:"#000",size:"80%"})}),(0,s.jsx)(fT,{id:"pdf-zoom-in",onMouseDown:()=>h(IP(r+o)),children:(0,s.jsx)(iT,{color:"#000",size:"80%"})}),(0,s.jsx)(fT,{id:"pdf-zoom-reset",onMouseDown:()=>h(IP(l)),disabled:r===l,children:(0,s.jsx)(rT,{color:"#000",size:"70%"})}),a>1&&(0,s.jsx)(fT,{id:"pdf-toggle-pagination",onMouseDown:()=>h((t=>({type:FP,value:t}))(!i)),children:(0,s.jsx)(aT,{color:"#000",size:"70%",reverse:i})})]})},pT=ro.div`
  display: flex;
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  justify-content: flex-end;
  padding: 8px;
  background-color: ${t=>t.theme.tertiary};
  box-shadow: 0px 2px 3px #00000033;

  @media (max-width: 768px) {
    padding: 6px;
  }
`,fT=ro(Co)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,gT=ro(Po)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`;XS.workerSrc=new URL(`https://unpkg.com/pdfjs-dist@${PC}/build/pdf.worker.min.mjs`).toString();const mT=t=>{let{mainState:e}=t;return(0,s.jsx)(UP,{mainState:e,children:(0,s.jsxs)(vT,{id:"pdf-renderer","data-testid":"pdf-renderer",children:[(0,s.jsx)(uT,{}),(0,s.jsx)(KP,{})]})})};mT.fileTypes=["pdf","application/pdf"],mT.weight=0;const vT=ro.div`
  display: flex;
  flex-direction: column;
  flex: 1;

  /* width */
  &::-webkit-scrollbar {
    ${t=>t.theme.disableThemeScrollbar?"":"width: 10px"};
  }
  /* Track */
  &::-webkit-scrollbar-track {
    /* background: ${t=>t.theme.secondary}; */
  }
  /* Handle */
  &::-webkit-scrollbar-thumb {
    background: ${t=>t.theme.tertiary};
  }
  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: ${t=>t.theme.primary};
  }
`,bT=ro(Al)`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: white;
  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
  background-size: 20px 20px;
  background-position:
    0 0,
    0 10px,
    10px -10px,
    -10px 0px;
`,yT=t=>(0,s.jsx)(bT,{...t});yT.fileTypes=["png","image/png"],yT.weight=0;let _T,wT,xT=[];const AT=t=>{var e={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"};return t in e?e[t]:"Tag"+t},ET=t=>{var e,i={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"};return t in i&&(e=i[t]),e},kT=(t,e,i)=>{i=i||0;var s=e+Math.floor(i/8),n=i+t,r=32-t;if(n<=0)throw RangeError("No bits requested");if(n<=8)var a=24+i,o=_T.getUint8(s,wT);else if(n<=16)a=16+i,o=_T.getUint16(s,wT);else{if(!(n<=32))throw RangeError("Too many bits requested");a=i,o=_T.getUint32(s,wT)}return{bits:o<<a>>>r,byteOffset:s+Math.floor(n/8),bitOffset:n%8}},ST=(t,e)=>{if(t<=0)throw RangeError("No bytes requested");if(t<=1)return _T.getUint8(e,wT);if(t<=2)return _T.getUint16(e,wT);if(t<=3)return _T.getUint32(e,wT)>>>8;if(t<=4)return _T.getUint32(e,wT);throw RangeError("Too many bytes requested")},CT=(t,e,i,s)=>{var n=[],r=(t=>{var e;return-1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(t)?e=1:-1!==["SHORT","SSHORT"].indexOf(t)?e=2:-1!==["LONG","SLONG","FLOAT"].indexOf(t)?e=4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(t)&&(e=8),e})(e);if(r*i<=4){if(!1===wT)var a=s>>>8*(4-r);else a=s;n.push(a)}else for(var o=0;o<i;o++){var l=r*o;if(r>=8){if(-1===["RATIONAL","SRATIONAL"].indexOf(e))throw TypeError("Can't handle this field type or size");n.push(ST(4,s+l)),n.push(ST(4,s+l+4))}else n.push(ST(r,s+l))}return"ASCII"===e&&n.forEach((function(t,e,i){i[e]=String.fromCharCode(t)})),n},PT=(t,e)=>{var i=Math.pow(2,8-e);return Math.floor(t*i+(i-1))},TT=(t,e,i,s)=>(typeof s>"u"&&(s=1),"rgba("+t+", "+e+", "+i+", "+s+")"),MT=t=>{for(var e=ST(2,t),i=[],s=t+2,n=0;n<e;s+=12,n++){var r=ST(2,s),a=ST(2,s+2),o=ST(4,s+4),l=ST(4,s+8),h=AT(r),c=ET(a),d=CT(0,c,o,l);i[h]={type:c,values:d}}xT.push(i);var u=ST(4,s);return 0===u?xT:MT(u)},DT=(t,e)=>{let i=e||document.createElement("canvas");if(t&&(_T=new DataView(t),wT=(()=>{var t=ST(2,0);if(18761===t)wT=!0;else{if(19789!==t)throw TypeError("Invalid byte order value.");wT=!1}return wT})(),(()=>{if(42!==ST(2,2))throw RangeError("You forgot your towel!");return!0})())){var s=ST(4,4);xT=MT(s);var n=xT[0],r=n.ImageWidth.values[0],a=n.ImageLength.values[0];i.width=r,i.height=a;var o=[],l=n.Compression?n.Compression.values[0]:1,h=n.SamplesPerPixel.values[0],c=[],d=0,u=!1;if(n.BitsPerSample.values.forEach((function(t,e,i){c[e]={bitsPerSample:t,hasBytesPerSample:!1,bytesPerSample:void 0},t%8===0&&(c[e].hasBytesPerSample=!0,c[e].bytesPerSample=t/8),d+=t}),void 0),d%8===0){u=!0;var p=d/8}var f=n.StripOffsets.values,g=f.length;if(n.StripByteCounts)var m=n.StripByteCounts.values;else{if(1!==g)throw Error("Cannot recover from missing StripByteCounts");m=[Math.ceil(r*a*d/8)]}for(var v=0;v<g;v++){var b=f[v];o[v]=[];for(var y=m[v],_=0,w=0,x=1,A=!0,E=[],k=0,S=0,C=0;_<y;_+=x)switch(l){case 1:var P=0;for(E=[];P<h;P++){if(!c[P].hasBytesPerSample){var T=kT(c[P].bitsPerSample,b+_,w);throw E.push(T.bits),_=T.byteOffset-b,w=T.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}var M=c[P].bytesPerSample*P;E.push(ST(c[P].bytesPerSample,b+_+M))}if(o[v].push(E),!u)throw x=0,RangeError("Cannot handle sub-byte bits per pixel");x=p;break;case 2:case 3:case 4:case 5:case 6:case 7:break;case 32773:if(A){A=!1;var D=1,R=1,L=_T.getInt8(b+_,wT);L>=0&&L<=127?D=L+1:L>=-127&&L<=-1?R=1-L:A=!0}else{var O=ST(1,b+_);for(P=0;P<R;P++){if(!c[S].hasBytesPerSample)throw RangeError("Cannot handle sub-byte bits per sample");C=C<<8*k|O,++k===c[S].bytesPerSample&&(E.push(C),C=k=0,S++),S===h&&(o[v].push(E),E=[],S=0)}0===--D&&(A=!0)}x=1}}if(i.getContext){var I=i.getContext("2d");if(I.fillStyle=TT(255,255,255,0),n.RowsPerStrip)var F=n.RowsPerStrip.values[0];else F=a;var N=o.length,j=a%F,B=0===j?F:j,H=F,W=0,z=n.PhotometricInterpretation.values[0],V=[],$=0;if(n.ExtraSamples&&($=(V=n.ExtraSamples.values).length),n.ColorMap)var U=n.ColorMap.values,G=Math.pow(2,c[0].bitsPerSample);for(v=0;v<N;v++){v+1===N&&(H=B);for(var q=o[v].length,Y=W*v,X=0,K=0;K<q;X++)for(var Q=0;Q<r;Q++,K++){var J=o[v][K],Z=0,tt=0,et=0,it=1;if($>0)for(var st=0;st<$;st++)if(1===V[st]||2===V[st]){it=J[3+st]/256;break}switch(z){case 0:if(c[0].hasBytesPerSample)var nt=Math.pow(16,2*c[0].bytesPerSample);J.forEach((function(t,e,i){i[e]=nt-t}));case 1:Z=tt=et=PT(J[0],c[0].bitsPerSample);break;case 2:Z=PT(J[0],c[0].bitsPerSample),tt=PT(J[1],c[1].bitsPerSample),et=PT(J[2],c[2].bitsPerSample);break;case 3:if(void 0===U)throw Error("Palette image missing color map");var rt=J[0];Z=PT(U[rt],16),tt=PT(U[G+rt],16),et=PT(U[2*G+rt],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",z)}I.fillStyle=TT(Z,tt,et,it),I.fillRect(Q,Y+X,1,1)}W=H}}return i}},RT=t=>{const{mainState:{currentDocument:e}}=t,{t:i}=tl(),[r,a]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(!e||r)return;const t=document.getElementById("tiff-img");try{t&&DT(e.fileData,t),a(!0)}catch{l(!0)}}),[e,r]),o?(0,s.jsx)(Al,{...t,children:(0,s.jsx)("div",{children:i("brokenFile")})}):(0,s.jsx)(Al,{...t,children:(0,s.jsx)(LT,{id:"tiff-img"})})};RT.fileTypes=["tif","tiff","image/tif","image/tiff"],RT.weight=0,RT.fileLoader=t=>cl({...t,readerTypeFunction:"arrayBuffer"});const LT=ro.canvas`
  max-width: 95%;
  max-height: 95%;
`,OT=t=>{let{mainState:{currentDocument:e}}=t;return(0,s.jsx)(IT,{id:"txt-renderer",children:null==e?void 0:e.fileData})};OT.fileTypes=["txt","text/plain"],OT.weight=0,OT.fileLoader=ul;const IT=ro.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 30px;
`;var FT={exports:{}};FT.exports=function t(){var e=typeof self<"u"?self:typeof window<"u"?window:void 0!==e?e:{},i=!e.document&&!!e.postMessage,s=e.IS_PAPA_WORKER||!1,n={},r=0,a={parse:function(i,s){var o=(s=s||{}).dynamicTyping||!1;if(w(o)&&(s.dynamicTypingFunction=o,o={}),s.dynamicTyping=o,s.transform=!!w(s.transform)&&s.transform,s.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var i,s,o=(i=e.URL||e.webkitURL||null,s=t.toString(),a.BLOB_URL||(a.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",s,")();"],{type:"text/javascript"})))),l=new e.Worker(o);return l.onmessage=m,l.id=r++,n[l.id]=l}();return l.userStep=s.step,l.userChunk=s.chunk,l.userComplete=s.complete,l.userError=s.error,s.step=w(s.step),s.chunk=w(s.chunk),s.complete=w(s.complete),s.error=w(s.error),delete s.worker,void l.postMessage({input:i,config:s,workerId:l.id})}var p,f=null;return a.NODE_STREAM_INPUT,"string"==typeof i?(i=65279===(p=i).charCodeAt(0)?p.slice(1):p,f=s.download?new h(s):new d(s)):!0===i.readable&&w(i.read)&&w(i.on)?f=new u(s):(e.File&&i instanceof File||i instanceof Object)&&(f=new c(s)),f.stream(i)},unparse:function(t,e){var i=!1,s=!0,n=",",r="\r\n",o='"',l=o+o,h=!1,c=null,d=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(n=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(h=e.skipEmptyLines),"string"==typeof e.newline&&(r=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(s=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+o),("boolean"==typeof e.escapeFormulae||e.escapeFormulae instanceof RegExp)&&(d=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var u=new RegExp(f(o),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return p(null,t,h);if("object"==typeof t[0])return p(c||Object.keys(t[0]),t,h)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||c),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),p(t.fields||[],t.data||[],h);throw new Error("Unable to serialize unrecognized input");function p(t,e,i){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(o&&s){for(var h=0;h<t.length;h++)0<h&&(a+=n),a+=g(t[h],h);0<e.length&&(a+=r)}for(var c=0;c<e.length;c++){var d=o?t.length:e[c].length,u=!1,p=o?0===Object.keys(e[c]).length:0===e[c].length;if(i&&!o&&(u="greedy"===i?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===i&&o){for(var f=[],m=0;m<d;m++){var v=l?t[m]:m;f.push(e[c][v])}u=""===f.join("").trim()}if(!u){for(var b=0;b<d;b++){0<b&&!p&&(a+=n);var y=o&&l?t[b]:b;a+=g(e[c][y],b)}c<e.length-1&&(!i||0<d&&!p)&&(a+=r)}}return a}function g(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var s=!1;d&&"string"==typeof t&&d.test(t)&&(t="'"+t,s=!0);var r=t.toString().replace(u,l);return(s=s||!0===i||"function"==typeof i&&i(t,e)||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(r,a.BAD_DELIMITERS)||-1<r.indexOf(n)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?o+r+o:r}},RECORD_SEP:"\x1e",UNIT_SEP:"\x1f",BYTE_ORDER_MARK:"\ufeff"};if(a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=g,a.ParserHandle=p,a.NetworkStreamer=h,a.FileStreamer=c,a.StringStreamer=d,a.ReadableStreamStreamer=u,e.jQuery){var o=e.jQuery;o.fn.parse=function(t){var i=t.config||{},s=[];return this.each((function(t){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)s.push({file:this.files[n],inputElem:this,instanceConfig:o.extend({},i)})})),n(),this;function n(){if(0!==s.length){var e,i,n,l,h=s[0];if(w(t.before)){var c=t.before(h.file,h.inputElem);if("object"==typeof c){if("abort"===c.action)return e="AbortError",i=h.file,n=h.inputElem,l=c.reason,void(w(t.error)&&t.error({name:e},i,n,l));if("skip"===c.action)return void r();"object"==typeof c.config&&(h.instanceConfig=o.extend(h.instanceConfig,c.config))}else if("skip"===c)return void r()}var d=h.instanceConfig.complete;h.instanceConfig.complete=function(t){w(d)&&d(t,h.file,h.inputElem),r()},a.parse(h.file,h.instanceConfig)}else w(t.complete)&&t.complete()}function r(){s.splice(0,1),n()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=y(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,i){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(t);void 0!==n&&(t=n)}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+t;this._partialLine="";var o=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=o.meta.cursor;this._finished||(this._partialLine=r.substring(l-this._baseIndex),this._baseIndex=l),o&&o.data&&(this._rowCount+=o.data.length);var h=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)e.postMessage({results:o,workerId:a.WORKER_ID,finished:h});else if(w(this._config.chunk)&&!i){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!h||!w(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):s&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function h(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),l.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=_(this._chunkLoaded,this),e.onerror=_(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var s in t)e.setRequestHeader(s,t[s])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+n)}try{e.send(this._config.downloadRequestBody)}catch(r){this._chunkError(r.message)}i&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var i=e.statusText||t;this._sendError(new Error(i))}}function c(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),l.call(this,t);var s=typeof FileReader<"u";this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,s?((e=new FileReader).onload=_(this._chunkLoaded,this),e.onerror=_(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,n)}var r=e.readAsText(t,this._config.encoding);s||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function d(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,i=this._config.chunkSize;return i?(t=e.substring(0,i),e=e.substring(i)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function u(t){l.call(this,t=t||{});var e=[],i=!0,s=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=_((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(s){this._streamError(s)}}),this),this._streamError=_((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=_((function(){this._streamCleanUp(),s=!0,this._streamData("")}),this),this._streamCleanUp=_((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(t){var e,i,s,n=Math.pow(2,53),r=-n,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,c=0,d=0,u=!1,p=!1,m=[],v={data:[],errors:[],meta:{}};if(w(t.step)){var b=t.step;t.step=function(e){if(v=e,A())x();else{if(x(),0===v.data.length)return;c+=e.data.length,t.preview&&c>t.preview?i.abort():(v.data=v.data[0],b(v,h))}}}function _(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function x(){return v&&s&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),s=!1),t.skipEmptyLines&&(v.data=v.data.filter((function(t){return!_(t)}))),A()&&function(){if(v)if(Array.isArray(v.data[0])){for(var e=0;A()&&e<v.data.length;e++)v.data[e].forEach(i);v.data.splice(0,1)}else v.data.forEach(i);function i(e,i){w(t.transformHeader)&&(e=t.transformHeader(e,i)),m.push(e)}}(),function(){if(!v||!t.header&&!t.dynamicTyping&&!t.transform)return v;function e(e,i){var s,n=t.header?{}:[];for(s=0;s<e.length;s++){var r=s,a=e[s];t.header&&(r=s>=m.length?"__parsed_extra":m[s]),t.transform&&(a=t.transform(a,r)),a=E(r,a),"__parsed_extra"===r?(n[r]=n[r]||[],n[r].push(a)):n[r]=a}return t.header&&(s>m.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+s,d+i):s<m.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+s,d+i)),n}var i=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(e),i=v.data.length):v.data=e(v.data,0),t.header&&v.meta&&(v.meta.fields=m),d+=i,v}()}function A(){return t.header&&0===m.length}function E(e,i){return s=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[s]&&(t.dynamicTyping[s]=t.dynamicTypingFunction(s)),!0===(t.dynamicTyping[s]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(function(t){if(o.test(t)){var e=parseFloat(t);if(r<e&&e<n)return!0}return!1}(i)?parseFloat(i):l.test(i)?new Date(i):""===i?null:i):i;var s}function k(t,e,i,s){var n={type:t,code:e,message:i};void 0!==s&&(n.row=s),v.errors.push(n)}this.parse=function(n,r,o){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var i=new RegExp(f(e)+"([^]*?)"+f(e),"gm"),s=(t=t.replace(i,"")).split("\r"),n=t.split("\n"),r=1<n.length&&n[0].length<s[0].length;if(1===s.length||r)return"\n";for(var a=0,o=0;o<s.length;o++)"\n"===s[o][0]&&a++;return a>=s.length/2?"\r\n":"\r"}(n,l)),s=!1,t.delimiter)w(t.delimiter)&&(t.delimiter=t.delimiter(n),v.meta.delimiter=t.delimiter);else{var h=function(e,i,s,n,r){var o,l,h,c;r=r||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var d=0;d<r.length;d++){var u=r[d],p=0,f=0,m=0;h=void 0;for(var v=new g({comments:n,delimiter:u,newline:i,preview:10}).parse(e),b=0;b<v.data.length;b++)if(s&&_(v.data[b]))m++;else{var y=v.data[b].length;f+=y,void 0!==h?0<y&&(p+=Math.abs(y-h),h=y):h=y}0<v.data.length&&(f/=v.data.length-m),(void 0===l||p<=l)&&(void 0===c||c<f)&&1.99<f&&(l=p,o=u,c=f)}return{successful:!!(t.delimiter=o),bestDelimiter:o}}(n,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);h.successful?t.delimiter=h.bestDelimiter:(s=!0,t.delimiter=a.DefaultDelimiter),v.meta.delimiter=t.delimiter}var c=y(t);return t.preview&&t.header&&c.preview++,e=n,i=new g(c),v=i.parse(e,r,o),x(),u?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,i.abort(),e=w(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){h.streamer._halted?(u=!1,h.streamer.parseChunk(e,!0)):setTimeout(h.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,i.abort(),v.meta.aborted=!0,w(t.complete)&&t.complete(v),e=""}}function f(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,i=(t=t||{}).delimiter,s=t.newline,n=t.comments,r=t.step,o=t.preview,l=t.fastMode,h=e=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(h=t.escapeChar),("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=","),n===i)throw new Error("Comment character same as delimiter");!0===n?n="#":("string"!=typeof n||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==s&&"\r"!==s&&"\r\n"!==s&&(s="\n");var c=0,d=!1;this.parse=function(a,u,p){if("string"!=typeof a)throw new Error("Input must be a string");var g=a.length,m=i.length,v=s.length,b=n.length,y=w(r),_=[],x=[],A=[],E=c=0;if(!a)return G();if(t.header&&!u){var k=a.split(s)[0].split(i),S=[],C={},P=!1;for(var T in k){var M=k[T];w(t.transformHeader)&&(M=t.transformHeader(M,T));var D=M,R=C[M]||0;for(0<R&&(P=!0,D=M+"_"+R),C[M]=R+1;S.includes(D);)D=D+"_"+R;S.push(D)}if(P){var L=a.split(s);L[0]=S.join(i),a=L.join(s)}}if(l||!1!==l&&-1===a.indexOf(e)){for(var O=a.split(s),I=0;I<O.length;I++){if(A=O[I],c+=A.length,I!==O.length-1)c+=s.length;else if(p)return G();if(!n||A.substring(0,b)!==n){if(y){if(_=[],z(A.split(i)),q(),d)return G()}else z(A.split(i));if(o&&o<=I)return _=_.slice(0,o),G(!0)}}return G()}for(var F=a.indexOf(i,c),N=a.indexOf(s,c),j=new RegExp(f(h)+f(e),"g"),B=a.indexOf(e,c);;)if(a[c]!==e)if(n&&0===A.length&&a.substring(c,c+b)===n){if(-1===N)return G();c=N+v,N=a.indexOf(s,c),F=a.indexOf(i,c)}else if(-1!==F&&(F<N||-1===N))A.push(a.substring(c,F)),c=F+m,F=a.indexOf(i,c);else{if(-1===N)break;if(A.push(a.substring(c,N)),U(N+v),y&&(q(),d))return G();if(o&&_.length>=o)return G(!0)}else for(B=c,c++;;){if(-1===(B=a.indexOf(e,B+1)))return p||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:c}),$();if(B===g-1)return $(a.substring(c,B).replace(j,e));if(e!==h||a[B+1]!==h){if(e===h||0===B||a[B-1]!==h){-1!==F&&F<B+1&&(F=a.indexOf(i,B+1)),-1!==N&&N<B+1&&(N=a.indexOf(s,B+1));var H=V(-1===N?F:Math.min(F,N));if(a.substr(B+1+H,m)===i){A.push(a.substring(c,B).replace(j,e)),a[c=B+1+H+m]!==e&&(B=a.indexOf(e,c)),F=a.indexOf(i,c),N=a.indexOf(s,c);break}var W=V(N);if(a.substring(B+1+W,B+1+W+v)===s){if(A.push(a.substring(c,B).replace(j,e)),U(B+1+W+v),F=a.indexOf(i,c),B=a.indexOf(e,c),y&&(q(),d))return G();if(o&&_.length>=o)return G(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:c}),B++}}else B++}return $();function z(t){_.push(t),E=c}function V(t){var e=0;if(-1!==t){var i=a.substring(B+1,t);i&&""===i.trim()&&(e=i.length)}return e}function $(t){return p||(void 0===t&&(t=a.substring(c)),A.push(t),c=g,z(A),y&&q()),G()}function U(t){c=t,z(A),A=[],N=a.indexOf(s,c)}function G(t){return{data:_,errors:x,meta:{delimiter:i,linebreak:s,aborted:d,truncated:!!t,cursor:E+(u||0)}}}function q(){r(G()),_=[],x=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return c}}function m(t){var e=t.data,i=n[e.workerId],s=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var r={abort:function(){s=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(w(i.userStep)){for(var a=0;a<e.results.data.length&&(i.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},r),!s);a++);delete e.results}else w(i.userChunk)&&(i.userChunk(e.results,r,e.file),delete e.results)}e.finished&&!s&&v(e.workerId,e.results)}function v(t,e){var i=n[t];w(i.userComplete)&&i.userComplete(e),i.terminate(),delete n[t]}function b(){throw new Error("Not implemented.")}function y(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=y(t[i]);return e}function _(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return s&&(e.onmessage=function(t){var i=t.data;if(void 0===a.WORKER_ID&&i&&(a.WORKER_ID=i.workerId),"string"==typeof i.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(i.input,i.config),finished:!0});else if(e.File&&i.input instanceof File||i.input instanceof Object){var s=a.parse(i.input,i.config);s&&e.postMessage({workerId:a.WORKER_ID,results:s,finished:!0})}}),(h.prototype=Object.create(l.prototype)).constructor=h,(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(d.prototype)).constructor=d,(u.prototype=Object.create(l.prototype)).constructor=u,a}();const NT=f(FT.exports),jT=t=>{let{mainState:{currentDocument:e,config:i}}=t;const[r,a]=(0,n.useState)([]);return(0,n.useEffect)((()=>{var t;if(null!=e&&e.fileData){const s=NT.parse(e.fileData,{delimiter:(null==i?void 0:i.csvDelimiter)??","});(null==(t=s.errors)||!t.length)&&s.data&&a(s.data)}}),[e,null==i?void 0:i.csvDelimiter]),r.length?(0,s.jsx)(BT,{children:(0,s.jsxs)(HT,{children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:r[0].map((t=>(0,s.jsx)("th",{children:t},t)))})}),(0,s.jsx)("tbody",{children:r.slice(1,r.length).map((t=>(0,s.jsx)("tr",{children:t.map((t=>(0,s.jsx)("td",{children:t},t)))},t.join(""))))})]})}):null};jT.fileTypes=["csv","text/csv"],jT.weight=0,jT.fileLoader=ul;const BT=ro.div`
  width: 100%;
`,HT=ro.table`
  width: 100%;
  text-align: left;

  th,
  td {
    padding: 5px 10px;

    &:empty {
      display: none;
    }
  }
`,WT=t=>(0,s.jsx)(Al,{...t});WT.fileTypes=["gif","image/gif"],WT.weight=0;const zT=t=>{let{mainState:{currentDocument:e}}=t;return e?(0,s.jsx)(VT,{id:"video-renderer",children:(0,s.jsx)($T,{controls:!0,src:e.uri})}):null};zT.fileTypes=["video/mp4","video/quicktime","video/x-msvideo"],zT.weight=0;const VT=ro.div`
  width: 100%;
`,$T=ro.video`
  width: 100%;
  height: 100%;
  border: 0;
`,UT=t=>(0,s.jsx)(Al,{...t});UT.fileTypes=["webp","image/webp"],UT.weight=0;const GT=[Sl,Cl,Ml,Dl,mT,yT,RT,OT,jT,WT,zT,UT],qT=(0,n.forwardRef)(((t,e)=>{const{documents:i,theme:n}=t;if(!i)throw new Error("Please provide an array of documents to DocViewer!");return(0,s.jsx)(Eo,{ref:e,pluginRenderers:GT,...t,children:(0,s.jsx)(Ka,{theme:n?{...xl,...n}:xl,children:(0,s.jsxs)(YT,{id:"react-doc-viewer","data-testid":"react-doc-viewer",className:t.className,style:t.style,children:[(0,s.jsx)(ll,{}),(0,s.jsx)(vl,{})]})})})})),YT=((0,n.memo)(qT),ro.div`
  display: flex;
  flex-direction: column;
  background: #ffffff;
  width: 100%;
  height: 100%;
`)},80229:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>n,zd:()=>s.domToReact});var s=i(61001);const n=s.default||s},40645:(t,e,i)=>{"use strict";function s(t){var e=!1;return{promise:new Promise((function(i,s){t.then((function(t){return!e&&i(t)})).catch((function(t){return!e&&s(t)}))})),cancel:function(){e=!0}}}i.d(e,{A:()=>s})},77906:(t,e,i)=>{"use strict";i.d(e,{Ay:()=>r});var s=function(t,e,i){if(i||2===arguments.length)for(var s,n=0,r=e.length;n<r;n++)!s&&n in e||(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},n=s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function r(t,e){var i={};return n.forEach((function(s){var n=t[s];n&&(i[s]=e?function(t){return n(t,e(s))}:n)})),i}},97806:(t,e,i)=>{"use strict";i.d(e,{A:()=>k});var s=i(70579),n=i(65043),r=i(77906),a=i(40645),o=i(99201),l=i(3404),h=i(96440),c=Object.prototype.hasOwnProperty;function d(t,e,i){for(i of t.keys())if(u(i,e))return i}function u(t,e){var i,s,n;if(t===e)return!0;if(t&&e&&(i=t.constructor)===e.constructor){if(i===Date)return t.getTime()===e.getTime();if(i===RegExp)return t.toString()===e.toString();if(i===Array){if((s=t.length)===e.length)for(;s--&&u(t[s],e[s]););return-1===s}if(i===Set){if(t.size!==e.size)return!1;for(s of t){if((n=s)&&"object"===typeof n&&!(n=d(e,n)))return!1;if(!e.has(n))return!1}return!0}if(i===Map){if(t.size!==e.size)return!1;for(s of t){if((n=s[0])&&"object"===typeof n&&!(n=d(e,n)))return!1;if(!u(s[1],e.get(n)))return!1}return!0}if(i===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(i===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return-1===s}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return-1===s}if(!i||"object"===typeof t){for(i in s=0,t){if(c.call(t,i)&&++s&&!c.call(e,i))return!1;if(!(i in e)||!u(t[i],e[i]))return!1}return Object.keys(e).length===s}}return t!==t&&e!==e}var p=i(24653),f=i(16512),g=i(48599);class m{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return(0,l.A)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){(0,l.A)(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise((e=>{(0,l.A)(this.pdfDocument,"PDF document not loaded."),(0,l.A)(t,"Destination is not specified."),"string"===typeof t?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)})).then((t=>{(0,l.A)(Array.isArray(t),`"${t}" is not a valid destination array.`);const e=t[0];new Promise((t=>{(0,l.A)(this.pdfDocument,"PDF document not loaded."),e instanceof Object?this.pdfDocument.getPageIndex(e).then((e=>{t(e)})).catch((()=>{(0,l.A)(!1,`"${e}" is not a valid page reference.`)})):"number"===typeof e?t(e):(0,l.A)(!1,`"${e}" is not a valid destination reference.`)})).then((e=>{const i=e+1;(0,l.A)(this.pdfViewer,"PDF viewer is not initialized."),(0,l.A)(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:e,pageNumber:i})}))}))}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;(0,l.A)(this.pdfViewer,"PDF viewer is not initialized."),(0,l.A)(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||"noopener noreferrer nofollow",t.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const v={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var b=i(20665),y=i(28234),_=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function a(t){try{l(s.next(t))}catch(e){r(e)}}function o(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((s=s.apply(t,e||[])).next())}))},w=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};const{Tm:x}=p,A=(t,e)=>{switch(e){case v.NEED_PASSWORD:t(prompt("Enter the password to open this PDF file."));break;case v.INCORRECT_PASSWORD:t(prompt("Invalid password. Please try again."));break}};function E(t){return"object"===typeof t&&null!==t&&("data"in t||"range"in t||"url"in t)}const k=(0,n.forwardRef)((function(t,e){var{children:i,className:c,error:d="Failed to load PDF file.",externalLinkRel:v,externalLinkTarget:k,file:S,inputRef:C,imageResourcesPath:P,loading:T="Loading PDF\u2026",noData:M="No PDF file specified.",onItemClick:D,onLoadError:R,onLoadProgress:L,onLoadSuccess:O,onPassword:I=A,onSourceError:F,onSourceSuccess:N,options:j,renderMode:B,rotate:H}=t,W=w(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[z,V]=(0,y.A)(),{value:$,error:U}=z,[G,q]=(0,y.A)(),{value:Y,error:X}=G,K=(0,n.useRef)(new m),Q=(0,n.useRef)([]),J=(0,n.useRef)(void 0),Z=(0,n.useRef)(void 0);S&&S!==J.current&&E(S)&&(h(!u(S,J.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),J.current=S),j&&j!==Z.current&&(h(!u(j,Z.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),Z.current=j);const tt=(0,n.useRef)({scrollPageIntoView:t=>{const{dest:e,pageNumber:i,pageIndex:s=i-1}=t;if(D)return void D({dest:e,pageIndex:s,pageNumber:i});const n=Q.current[s];n?n.scrollIntoView():h(!1,`An internal link leading to page ${i} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,n.useImperativeHandle)(e,(()=>({linkService:K,pages:Q,viewer:tt})),[]),(0,n.useEffect)((function(){V({type:"RESET"})}),[S,V]);const et=(0,n.useCallback)((()=>_(this,void 0,void 0,(function*(){if(!S)return null;if("string"===typeof S){if((0,b.zL)(S)){return{data:(0,b.jA)(S)}}return(0,b.qC)(),{url:S}}if(S instanceof x)return{range:S};if((0,b.mw)(S))return{data:S};if(b.Bd&&(0,b.qf)(S)){return{data:yield(0,b.h1)(S)}}if((0,l.A)("object"===typeof S,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),(0,l.A)(E(S),"Invalid parameter object: need either .data, .range or .url"),"url"in S&&"string"===typeof S.url){if((0,b.zL)(S.url)){const{url:t}=S,e=w(S,["url"]),i=(0,b.jA)(t);return Object.assign({data:i},e)}(0,b.qC)()}return S}))),[S]);(0,n.useEffect)((()=>{const t=(0,a.A)(et());return t.promise.then((t=>{V({type:"RESOLVE",value:t})})).catch((t=>{V({type:"REJECT",error:t})})),()=>{(0,b.xL)(t)}}),[et,V]),(0,n.useEffect)((()=>{"undefined"!==typeof $&&(!1!==$?N&&N():U&&(h(!1,U.toString()),F&&F(U)))}),[$]),(0,n.useEffect)((function(){q({type:"RESET"})}),[q,$]),(0,n.useEffect)((function(){if(!$)return;const t=j?Object.assign(Object.assign({},$),j):$,e=p.YE(t);L&&(e.onProgress=L),I&&(e.onPassword=I);const i=e,s=i.promise.then((t=>{q({type:"RESOLVE",value:t})})).catch((t=>{i.destroyed||q({type:"REJECT",error:t})}));return()=>{s.finally((()=>i.destroy()))}}),[j,q,$]),(0,n.useEffect)((()=>{"undefined"!==typeof Y&&(!1!==Y?Y&&(O&&O(Y),Q.current=new Array(Y.numPages),K.current.setDocument(Y)):X&&(h(!1,X.toString()),R&&R(X)))}),[Y]),(0,n.useEffect)((function(){K.current.setViewer(tt.current),K.current.setExternalLinkRel(v),K.current.setExternalLinkTarget(k)}),[v,k]);const it=(0,n.useCallback)(((t,e)=>{Q.current[t]=e}),[]),st=(0,n.useCallback)((t=>{delete Q.current[t]}),[]),nt=(0,n.useMemo)((()=>({imageResourcesPath:P,linkService:K.current,onItemClick:D,pdf:Y,registerPage:it,renderMode:B,rotate:H,unregisterPage:st})),[P,D,Y,it,B,H,st]),rt=(0,n.useMemo)((()=>(0,r.Ay)(W,(()=>Y))),[W,Y]);return(0,s.jsx)("div",Object.assign({className:(0,o.A)("react-pdf__Document",c),ref:C,style:{"--scale-factor":"1"}},rt,{children:S?void 0===Y||null===Y?(0,s.jsx)(g.A,{type:"loading",children:"function"===typeof T?T():T}):!1===Y?(0,s.jsx)(g.A,{type:"error",children:"function"===typeof d?d():d}):(0,s.jsx)(f.A.Provider,{value:nt,children:i}):(0,s.jsx)(g.A,{type:"no-data",children:"function"===typeof M?M():M})}))}))},16512:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});const s=(0,i(65043).createContext)(null)},48599:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var s=i(70579);function n(t){let{children:e,type:i}=t;return(0,s.jsx)("div",{className:`react-pdf__message react-pdf__message--${i}`,children:e})}},6584:(t,e,i)=>{"use strict";i.d(e,{A:()=>O});var s=i(70579),n=i(65043),r=i(40645),a=i(77906),o=i(99201);function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.filter(Boolean);return i.length<=1?i[0]||null:function(t){i.forEach((function(e){"function"===typeof e?e(t):e&&(e.current=t)}))}}var h=i(3404),c=i(96440);const d=(0,n.createContext)(null);var u=i(48599),p=i(24653);const f={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},g=/^H(\d+)$/;function m(t){return"children"in t}function v(t){return!!m(t)&&(1===t.children.length&&0 in t.children&&"id"in t.children[0])}function b(t){const e={};if(m(t)){const{role:i}=t,s=i.match(g);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(function(t){return t in f}(i)){const t=f[i];t&&(e.role=t)}}return e}function y(t){const e={};if(m(t)){if(void 0!==t.alt&&(e["aria-label"]=t.alt),void 0!==t.lang&&(e.lang=t.lang),v(t)){const[i]=t.children;if(i){const t=y(i);return Object.assign(Object.assign({},e),t)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function _(t){return t?Object.assign(Object.assign({},b(t)),y(t)):null}function w(t){let{className:e,node:i}=t;const r=(0,n.useMemo)((()=>_(i)),[i]),a=(0,n.useMemo)((()=>m(i)?v(i)?null:i.children.map(((t,e)=>(0,s.jsx)(w,{node:t},e))):null),[i]);return(0,s.jsx)("span",Object.assign({className:e},r,{children:a}))}function x(){return(0,n.useContext)(d)}var A=i(28234),E=i(20665);function k(){const t=x();(0,h.A)(t,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:i}=t,[a,o]=(0,A.A)(),{value:l,error:d}=a,{customTextRenderer:u,page:p}=t;return(0,n.useEffect)((function(){o({type:"RESET"})}),[o,p]),(0,n.useEffect)((function(){if(u)return;if(!p)return;const t=(0,r.A)(p.getStructTree()),e=t;return t.promise.then((t=>{o({type:"RESOLVE",value:t})})).catch((t=>{o({type:"REJECT",error:t})})),()=>(0,E.xL)(e)}),[u,p,o]),(0,n.useEffect)((()=>{void 0!==l&&(!1!==l?l&&i&&i(l):d&&(c(!1,d.toString()),e&&e(d)))}),[l]),l?(0,s.jsx)(w,{className:"react-pdf__Page__structTree structTree",node:l}):null}const S=p.ng;function C(t){const e=x();(0,h.A)(e,"Unable to find Page context.");const i=Object.assign(Object.assign({},e),t),{_className:r,canvasBackground:a,devicePixelRatio:o=(0,E.mZ)(),onRenderError:d,onRenderSuccess:u,page:p,renderForms:f,renderTextLayer:g,rotate:m,scale:v}=i,{canvasRef:b}=t;(0,h.A)(p,"Attempted to render page canvas, but no page was specified.");const y=(0,n.useRef)(null);function _(t){(0,E.UT)(t)||(c(!1,t.toString()),d&&d(t))}const w=(0,n.useMemo)((()=>p.getViewport({scale:v*o,rotation:m})),[o,p,m,v]),A=(0,n.useMemo)((()=>p.getViewport({scale:v,rotation:m})),[p,m,v]);(0,n.useEffect)((function(){if(!p)return;p.cleanup();const{current:t}=y;if(!t)return;t.width=w.width,t.height=w.height,t.style.width=`${Math.floor(A.width)}px`,t.style.height=`${Math.floor(A.height)}px`,t.style.visibility="hidden";const e={annotationMode:f?S.ENABLE_FORMS:S.ENABLE,canvasContext:t.getContext("2d",{alpha:!1}),viewport:w};a&&(e.background=a);const i=p.render(e),s=i;return i.promise.then((()=>{t.style.visibility="",p&&u&&u((0,E.vS)(p,v))})).catch(_),()=>(0,E.xL)(s)}),[a,p,f,w,A]);const C=(0,n.useCallback)((()=>{const{current:t}=y;t&&(t.width=0,t.height=0)}),[]);return(0,n.useEffect)((()=>C),[C]),(0,s.jsx)("canvas",{className:`${r}__canvas`,dir:"ltr",ref:l(b,y),style:{display:"block",userSelect:"none"},children:g?(0,s.jsx)(k,{}):null})}function P(){const t=x();(0,h.A)(t,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:i,onGetTextSuccess:a,onRenderTextLayerError:l,onRenderTextLayerSuccess:d,page:u,pageIndex:f,pageNumber:g,rotate:m,scale:v}=t;(0,h.A)(u,"Attempted to load page text content, but no page was specified.");const[b,y]=(0,A.A)(),{value:_,error:w}=b,k=(0,n.useRef)(null),S=(0,n.useRef)(void 0);c(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,n.useEffect)((function(){y({type:"RESET"})}),[u,y]),(0,n.useEffect)((function(){if(!u)return;const t=(0,r.A)(u.getTextContent()),e=t;return t.promise.then((t=>{y({type:"RESOLVE",value:t})})).catch((t=>{y({type:"REJECT",error:t})})),()=>(0,E.xL)(e)}),[u,y]),(0,n.useEffect)((()=>{void 0!==_&&(!1!==_?_&&a&&a(_):w&&(c(!1,w.toString()),i&&i(w)))}),[_]);const C=(0,n.useCallback)((()=>{d&&d()}),[d]),P=(0,n.useCallback)((t=>{c(!1,t.toString()),l&&l(t)}),[l]);const T=(0,n.useMemo)((()=>u.getViewport({scale:v,rotation:m})),[u,m,v]);return(0,n.useLayoutEffect)((function(){if(!u||!_)return;const{current:t}=k;if(!t)return;t.innerHTML="";const i=u.streamTextContent({includeMarkedContent:!0}),s={container:t,textContentSource:i,viewport:T},n=new p.D6(s),r=n;return n.render().then((()=>{const i=document.createElement("div");i.className="endOfContent",t.append(i),S.current=i;const s=t.querySelectorAll('[role="presentation"]');if(e){let t=0;_.items.forEach(((i,n)=>{if(!function(t){return"str"in t}(i))return;const r=s[t];if(!r)return;const a=e(Object.assign({pageIndex:f,pageNumber:g,itemIndex:n},i));r.innerHTML=a,t+=i.str&&i.hasEOL?2:1}))}C()})).catch(P),()=>(0,E.xL)(r)}),[e,P,C,u,f,g,_,T]),(0,s.jsx)("div",{className:(0,o.A)("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const t=S.current;t&&t.classList.remove("active")},onMouseDown:function(){const t=S.current;t&&t.classList.add("active")},ref:k})}var T=i(16512);function M(){return(0,n.useContext)(T.A)}function D(){const t=M(),e=x();(0,h.A)(e,"Unable to find Page context.");const i=Object.assign(Object.assign({},t),e),{imageResourcesPath:a,linkService:l,onGetAnnotationsError:d,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:f,onRenderAnnotationLayerSuccess:g,page:m,pdf:v,renderForms:b,rotate:y,scale:_=1}=i;(0,h.A)(v,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),(0,h.A)(m,"Attempted to load page annotations, but no page was specified."),(0,h.A)(l,"Attempted to load page annotations, but no linkService was specified.");const[w,k]=(0,A.A)(),{value:S,error:C}=w,P=(0,n.useRef)(null);c(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,n.useEffect)((function(){k({type:"RESET"})}),[k,m]),(0,n.useEffect)((function(){if(!m)return;const t=(0,r.A)(m.getAnnotations()),e=t;return t.promise.then((t=>{k({type:"RESOLVE",value:t})})).catch((t=>{k({type:"REJECT",error:t})})),()=>{(0,E.xL)(e)}}),[k,m]),(0,n.useEffect)((()=>{void 0!==S&&(!1!==S?S&&u&&u(S):C&&(c(!1,C.toString()),d&&d(C)))}),[S]);const T=(0,n.useMemo)((()=>m.getViewport({scale:_,rotation:y})),[m,y,_]);return(0,n.useEffect)((function(){if(!v||!m||!l||!S)return;const{current:t}=P;if(!t)return;const e=T.clone({dontFlip:!0}),i={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:t,l10n:null,page:m,viewport:e},s={annotations:S,annotationStorage:v.annotationStorage,div:t,imageResourcesPath:a,linkService:l,page:m,renderForms:b,viewport:e};t.innerHTML="";try{new p.dU(i).render(s),g&&g()}catch(n){!function(t){c(!1,`${t}`),f&&f(t)}(n)}return()=>{}}),[S,a,l,m,v,b,T]),(0,s.jsx)("div",{className:(0,o.A)("react-pdf__Page__annotations","annotationLayer"),ref:P})}var R=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};const L=1;function O(t){const e=M(),i=Object.assign(Object.assign({},e),t),{_className:p="react-pdf__Page",_enableRegisterUnregisterPage:f=!0,canvasBackground:g,canvasRef:m,children:v,className:b,customRenderer:y,customTextRenderer:_,devicePixelRatio:w,error:x="Failed to load the page.",height:k,inputRef:S,loading:T="Loading page\u2026",noData:O="No page specified.",onGetAnnotationsError:I,onGetAnnotationsSuccess:F,onGetStructTreeError:N,onGetStructTreeSuccess:j,onGetTextError:B,onGetTextSuccess:H,onLoadError:W,onLoadSuccess:z,onRenderAnnotationLayerError:V,onRenderAnnotationLayerSuccess:$,onRenderError:U,onRenderSuccess:G,onRenderTextLayerError:q,onRenderTextLayerSuccess:Y,pageIndex:X,pageNumber:K,pdf:Q,registerPage:J,renderAnnotationLayer:Z=!0,renderForms:tt=!1,renderMode:et="canvas",renderTextLayer:it=!0,rotate:st,scale:nt=L,unregisterPage:rt,width:at}=i,ot=R(i,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[lt,ht]=(0,A.A)(),{value:ct,error:dt}=lt,ut=(0,n.useRef)(null);(0,h.A)(Q,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const pt=(0,E.ci)(K)?K-1:null!==X&&void 0!==X?X:null,ft=null!==K&&void 0!==K?K:(0,E.ci)(X)?X+1:null,gt=null!==st&&void 0!==st?st:ct?ct.rotate:null,mt=(0,n.useMemo)((()=>{if(!ct)return null;let t=1;const e=null!==nt&&void 0!==nt?nt:L;if(at||k){const e=ct.getViewport({scale:1,rotation:gt});at?t=at/e.width:k&&(t=k/e.height)}return e*t}),[k,ct,gt,nt,at]);(0,n.useEffect)((function(){return()=>{(0,E.ci)(pt)&&f&&rt&&rt(pt)}}),[f,Q,pt,rt]),(0,n.useEffect)((function(){ht({type:"RESET"})}),[ht,Q,pt]),(0,n.useEffect)((function(){if(!Q||!ft)return;const t=(0,r.A)(Q.getPage(ft)),e=t;return t.promise.then((t=>{ht({type:"RESOLVE",value:t})})).catch((t=>{ht({type:"REJECT",error:t})})),()=>(0,E.xL)(e)}),[ht,Q,ft]),(0,n.useEffect)((()=>{void 0!==ct&&(!1!==ct?function(){if(z){if(!ct||!mt)return;z((0,E.vS)(ct,mt))}if(f&&J){if(!(0,E.ci)(pt)||!ut.current)return;J(pt,ut.current)}}():dt&&(c(!1,dt.toString()),W&&W(dt)))}),[ct,mt]);const vt=(0,n.useMemo)((()=>ct&&(0,E.ci)(pt)&&ft&&(0,E.ci)(gt)&&(0,E.ci)(mt)?{_className:p,canvasBackground:g,customTextRenderer:_,devicePixelRatio:w,onGetAnnotationsError:I,onGetAnnotationsSuccess:F,onGetStructTreeError:N,onGetStructTreeSuccess:j,onGetTextError:B,onGetTextSuccess:H,onRenderAnnotationLayerError:V,onRenderAnnotationLayerSuccess:$,onRenderError:U,onRenderSuccess:G,onRenderTextLayerError:q,onRenderTextLayerSuccess:Y,page:ct,pageIndex:pt,pageNumber:ft,renderForms:tt,renderTextLayer:it,rotate:gt,scale:mt}:null),[p,g,_,w,I,F,N,j,B,H,V,$,U,G,q,Y,ct,pt,ft,tt,it,gt,mt]),bt=(0,n.useMemo)((()=>(0,a.Ay)(ot,(()=>ct?mt?(0,E.vS)(ct,mt):void 0:ct))),[ot,ct,mt]),yt=`${pt}@${mt}/${gt}`;function _t(){switch(et){case"custom":return(0,h.A)(y,'renderMode was set to "custom", but no customRenderer was passed.'),(0,s.jsx)(y,{},`${yt}_custom`);case"none":return null;default:return(0,s.jsx)(C,{canvasRef:m},`${yt}_canvas`)}}return(0,s.jsx)("div",Object.assign({className:(0,o.A)(p,b),"data-page-number":ft,ref:l(S,ut),style:{"--scale-factor":`${mt}`,backgroundColor:g||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},bt,{children:ft?null===Q||void 0===ct||null===ct?(0,s.jsx)(u.A,{type:"loading",children:"function"===typeof T?T():T}):!1===Q||!1===ct?(0,s.jsx)(u.A,{type:"error",children:"function"===typeof x?x():x}):(0,s.jsxs)(d.Provider,{value:vt,children:[_t(),it?(0,s.jsx)(P,{},`${yt}_text`):null,Z?(0,s.jsx)(D,{},`${yt}_annotations`):null,v]}):(0,s.jsx)(u.A,{type:"no-data",children:"function"===typeof O?O():O})}))}},28234:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var s=i(65043);function n(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function r(){return(0,s.useReducer)(n,{value:void 0,error:void 0})}},20665:(t,e,i)=>{"use strict";i.d(e,{Bd:()=>r,UT:()=>v,ci:()=>o,h1:()=>b,jA:()=>d,mZ:()=>u,mw:()=>l,qC:()=>f,qf:()=>h,vS:()=>m,xL:()=>g,zL:()=>c});var s=i(3404),n=i(96440);const r="undefined"!==typeof window,a=r&&"file:"===window.location.protocol;function o(t){return function(t){return"undefined"!==typeof t}(t)&&null!==t}function l(t){return t instanceof ArrayBuffer}function h(t){return(0,s.A)(r,"isBlob can only be used in a browser environment"),t instanceof Blob}function c(t){return function(t){return"string"===typeof t}(t)&&/^data:/.test(t)}function d(t){(0,s.A)(c(t),"Invalid data URI.");const[e="",i=""]=t.split(",");return-1!==e.split(";").indexOf("base64")?atob(i):unescape(i)}function u(){return r&&window.devicePixelRatio||1}const p="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function f(){n(!a,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${p}`)}function g(t){(null===t||void 0===t?void 0:t.cancel)&&t.cancel()}function m(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function v(t){return"RenderingCancelledException"===t.name}function b(t){return new Promise(((e,i)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return i(new Error("Error while reading a file."));e(s.result)},s.onerror=t=>{if(!t.target)return i(new Error("Error while reading a file."));const{error:e}=t.target;if(!e)return i(new Error("Error while reading a file."));switch(e.code){case e.NOT_FOUND_ERR:return i(new Error("Error while reading a file: File not found."));case e.SECURITY_ERR:return i(new Error("Error while reading a file: Security error."));case e.ABORT_ERR:return i(new Error("Error while reading a file: Aborted."));default:return i(new Error("Error while reading a file."))}},s.readAsArrayBuffer(t)}))}},99201:(t,e,i)=>{"use strict";function s(t){var e,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(i=s(t[e]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}i.d(e,{A:()=>n});const n=function(){for(var t,e,i=0,n="",r=arguments.length;i<r;i++)(t=arguments[i])&&(e=s(t))&&(n&&(n+=" "),n+=e);return n}},24653:(t,e,i)=>{"use strict";var s;i.d(e,{D6:()=>En,EA:()=>xn,Tm:()=>An,YE:()=>kn,dU:()=>_n,ng:()=>wn});var n={d:(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},r=globalThis.pdfjsLib={};n.d(r,{AbortException:()=>vt,AnnotationEditorLayer:()=>bn,AnnotationEditorParamsType:()=>y,AnnotationEditorType:()=>b,AnnotationEditorUIManager:()=>ye,AnnotationLayer:()=>an,AnnotationMode:()=>v,CMapCompressionType:()=>J,ColorPicker:()=>fn,DOMSVGFactory:()=>qt,DrawLayer:()=>yn,FeatureTest:()=>wt,GlobalWorkerOptions:()=>ci,ImageKind:()=>C,InvalidPDFException:()=>pt,MissingPDFException:()=>ft,OPS:()=>Z,Outliner:()=>hn,PDFDataRangeTransport:()=>us,PDFDateString:()=>re,PDFWorker:()=>vs,PasswordResponses:()=>tt,PermissionFlag:()=>_,PixelsPerInch:()=>Vt,RenderingCancelledException:()=>Xt,TextLayer:()=>ts,UnexpectedResponseException:()=>gt,Util:()=>At,VerbosityLevel:()=>Q,XfaLayer:()=>Ps,build:()=>Es,createValidAbsoluteUrl:()=>lt,fetchData:()=>$t,getDocument:()=>hs,getFilenameFromUrl:()=>Jt,getPdfFilenameFromUrl:()=>Zt,getXfaPageViewport:()=>ae,isDataScheme:()=>Kt,isPdfFile:()=>Qt,noContextMenu:()=>ie,normalizeUnicode:()=>St,renderTextLayer:()=>es,setLayerDimensions:()=>ce,shadow:()=>ht,updateTextLayer:()=>is,version:()=>As});const a="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),o=[1,0,0,1,0,0],l=[.001,0,0,.001,0,0],h=1.35,c=1,d=2,u=4,p=16,f=32,g=64,m=256,v={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},b={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},y={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},w=0,x=1,A=2,E=3,k=3,S=4,C={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},P=1,T=2,M=3,D=4,R=5,L=6,O=7,I=8,F=9,N=10,j=11,B=12,H=13,W=14,z=15,V=16,$=17,U=20,G=1,q=2,Y=3,X=4,K=5,Q={ERRORS:0,WARNINGS:1,INFOS:5},J={NONE:0,BINARY:1},Z={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},tt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let et=Q.WARNINGS;function it(t){Number.isInteger(t)&&(et=t)}function st(){return et}function nt(t){et>=Q.INFOS&&console.log(`Info: ${t}`)}function rt(t){et>=Q.WARNINGS&&console.log(`Warning: ${t}`)}function at(t){throw new Error(t)}function ot(t,e){t||at(e)}function lt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(i&&"string"===typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);(null===e||void 0===e?void 0:e.length)>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch{}}const s=e?new URL(t,e):new URL(t);if(function(t){switch(null===t||void 0===t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(s))return s}catch{}return null}function ht(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const ct=function(){function t(e,i){this.constructor===t&&at("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class dt extends ct{constructor(t,e){super(t,"PasswordException"),this.code=e}}class ut extends ct{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class pt extends ct{constructor(t){super(t,"InvalidPDFException")}}class ft extends ct{constructor(t){super(t,"MissingPDFException")}}class gt extends ct{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class mt extends ct{constructor(t){super(t,"FormatError")}}class vt extends ct{constructor(t){super(t,"AbortException")}}function bt(t){"object"===typeof t&&void 0!==(null===t||void 0===t?void 0:t.length)||at("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const s=[];for(let n=0;n<e;n+=i){const r=Math.min(n+i,e),a=t.subarray(n,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function yt(t){"string"!==typeof t&&at("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let s=0;s<e;++s)i[s]=255&t.charCodeAt(s);return i}function _t(t){const e=Object.create(null);for(const[i,s]of t)e[i]=s;return e}class wt{static get isLittleEndian(){return ht(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return ht(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return ht(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){var t;return"undefined"!==typeof navigator&&"string"===typeof(null===(t=navigator)||void 0===t?void 0:t.platform)?ht(this,"platform",{isMac:navigator.platform.includes("Mac")}):ht(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return ht(this,"isCSSRoundSupported",null===(t=globalThis.CSS)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const xt=Array.from(Array(256).keys(),(t=>t.toString(16).padStart(2,"0")));class At{static makeHexColor(t,e,i){return`#${xt[t]}${xt[e]}${xt[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),n=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],n[0],r[0]),Math.min(i[1],s[1],n[1],r[1]),Math.max(i[0],s[0],n[0],r[0]),Math.max(i[1],s[1],n[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],n=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],a=(i+r)/2,o=Math.sqrt((i+r)**2-4*(i*r-n*s))/2,l=a+o||1,h=a-o||1;return[Math.sqrt(l),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>r?null:[i,n,s,r]}static#t(t,e,i,s,n,r,a,o,l,h){if(l<=0||l>=1)return;const c=1-l,d=l*l,u=d*l,p=c*(c*(c*t+3*l*e)+3*d*i)+u*s,f=c*(c*(c*n+3*l*r)+3*d*a)+u*o;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)}static#e(t,e,i,s,n,r,a,o,l,h,c,d){if(Math.abs(l)<1e-12)return void(Math.abs(h)>=1e-12&&this.#t(t,e,i,s,n,r,a,o,-c/h,d));const u=h**2-4*c*l;if(u<0)return;const p=Math.sqrt(u),f=2*l;this.#t(t,e,i,s,n,r,a,o,(-h+p)/f,d),this.#t(t,e,i,s,n,r,a,o,(-h-p)/f,d)}static bezierBoundingBox(t,e,i,s,n,r,a,o,l){return l?(l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o)):l=[Math.min(t,a),Math.min(e,o),Math.max(t,a),Math.max(e,o)],this.#e(t,i,n,a,e,s,r,o,3*(3*(i-n)-t+a),6*(t-2*i+n),3*(i-t),l),this.#e(t,i,n,a,e,s,r,o,3*(3*(s-r)-e+o),6*(e-2*s+r),3*(s-e),l),l}}let Et=null,kt=null;function St(t){return Et||(Et=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,kt=new Map([["\ufb05","\u017ft"]])),t.replaceAll(Et,((t,e,i)=>e?e.normalize("NFKC"):kt.get(i)))}const Ct="pdfjs_internal_id_",Pt=0,Tt=1,Mt=2,Dt=3,Rt=4,Lt=5,Ot=6,It=7,Ft=8;class Nt{constructor(){this.constructor===Nt&&at("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,n){return"none"}destroy(){}}class jt{#i=!1;constructor(){let{enableHWA:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.constructor===jt&&at("Cannot initialize BaseCanvasFactory."),this.#i=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#i})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){at("Abstract method `_createCanvas` called.")}}class Bt{constructor(t){let{baseUrl:e=null,isCompressed:i=!0}=t;this.constructor===Bt&&at("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=i}async fetch(t){let{name:e}=t;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const i=this.baseUrl+e+(this.isCompressed?".bcmap":""),s=this.isCompressed?J.BINARY:J.NONE;return this._fetchData(i,s).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)}))}_fetchData(t,e){at("Abstract method `_fetchData` called.")}}class Ht{constructor(t){let{baseUrl:e=null}=t;this.constructor===Ht&&at("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${e}`;return this._fetchData(i).catch((t=>{throw new Error(`Unable to load font data at: ${i}`)}))}_fetchData(t){at("Abstract method `_fetchData` called.")}}class Wt{constructor(){this.constructor===Wt&&at("Cannot initialize BaseSVGFactory.")}create(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if("string"!==typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){at("Abstract method `_createSVG` called.")}}const zt="http://www.w3.org/2000/svg";class Vt{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function $t(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(ee(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise(((i,s)=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE)if(200!==n.status&&0!==n.status)s(new Error(n.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void i(n.response)}i(n.responseText)}},n.send(null)}))}class Ut extends Bt{_fetchData(t,e){return $t(t,this.isCompressed?"arraybuffer":"text").then((t=>({cMapData:t instanceof ArrayBuffer?new Uint8Array(t):yt(t),compressionType:e})))}}class Gt extends Ht{_fetchData(t){return $t(t,"arraybuffer").then((t=>new Uint8Array(t)))}}class qt extends Wt{_createSVG(t){return document.createElementNS(zt,t)}}class Yt{constructor(t){let{viewBox:e,scale:i,rotation:s,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}=t;this.viewBox=e,this.scale=i,this.rotation=s,this.offsetX=n,this.offsetY=r;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let h,c,d,u,p,f,g,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,c=0,d=0,u=1;break;case 90:h=0,c=1,d=1,u=0;break;case 270:h=0,c=-1,d=-1,u=0;break;case 0:h=1,c=0,d=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,u=-u),0===h?(p=Math.abs(l-e[1])*i+n,f=Math.abs(o-e[0])*i+r,g=(e[3]-e[1])*i,m=(e[2]-e[0])*i):(p=Math.abs(o-e[0])*i+n,f=Math.abs(l-e[1])*i+r,g=(e[2]-e[0])*i,m=(e[3]-e[1])*i),this.transform=[h*i,c*i,d*i,u*i,p-h*i*o-d*i*l,f-c*i*o-u*i*l],this.width=g,this.height=m}get rawDims(){const{viewBox:t}=this;return ht(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Yt({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}convertToViewportPoint(t,e){return At.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=At.applyTransform([t[0],t[1]],this.transform),i=At.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return At.applyInverseTransform([t,e],this.transform)}}class Xt extends ct{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t,"RenderingCancelledException"),this.extraDelay=e}}function Kt(t){const e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function Qt(t){return"string"===typeof t&&/\.pdf$/i.test(t)}function Jt(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function Zt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof t)return e;if(Kt(t))return rt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let n=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(n&&(n=n[0],n.includes("%")))try{n=i.exec(decodeURIComponent(n))[0]}catch{}return n||e}class te{started=Object.create(null);times=[];time(t){t in this.started&&rt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||rt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:n}of this.times)t.push(`${i.padEnd(e)} ${n-s}ms\n`);return t.join("")}}function ee(t,e){try{const{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch{return!1}}function ie(t){t.preventDefault()}function se(t){console.log("Deprecated API usage: "+t)}let ne;class re{static toDateObject(t){if(!t||"string"!==typeof t)return null;ne||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=ne.exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let n=parseInt(e[3],10);n=n>=1&&n<=31?n:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(e[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===l?(r+=h,a+=c):"+"===l&&(r-=h,a-=c),new Date(Date.UTC(i,s,n,r,a,o))}}function ae(t,e){let{scale:i=1,rotation:s=0}=e;const{width:n,height:r}=t.attributes.style,a=[0,0,parseInt(n),parseInt(r)];return new Yt({viewBox:a,scale:i,rotation:s})}function oe(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):(rt(`Not a valid color format: "${t}"`),[0,0,0])}function le(t){const{a:e,b:i,c:s,d:n,e:r,f:a}=t.getTransform();return[e,i,s,n,r,a]}function he(t){const{a:e,b:i,c:s,d:n,e:r,f:a}=t.getTransform().invertSelf();return[e,i,s,n,r,a]}function ce(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof Yt){const{pageWidth:s,pageHeight:n}=e.rawDims,{style:r}=t,a=wt.isCSSRoundSupported,o=`var(--scale-factor) * ${s}px`,l=`var(--scale-factor) * ${n}px`,h=a?`round(${o}, 1px)`:`calc(${o})`,c=a?`round(${l}, 1px)`:`calc(${l})`;i&&e.rotation%180!==0?(r.width=c,r.height=h):(r.width=h,r.height=c)}s&&t.setAttribute("data-main-rotation",e.rotation)}class de{#s=null;#n=null;#r;#a=null;constructor(t){this.#r=t}render(){const t=this.#s=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#r._uiManager._signal;t.addEventListener("contextmenu",ie,{signal:e}),t.addEventListener("pointerdown",de.#o,{signal:e});const i=this.#a=document.createElement("div");i.className="buttons",t.append(i);const s=this.#r.toolbarPosition;if(s){const{style:e}=t,i="ltr"===this.#r._uiManager.direction?1-s[0]:s[0];e.insetInlineEnd=100*i+"%",e.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#l(),t}static#o(t){t.stopPropagation()}#h(t){this.#r._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#c(t){this.#r._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#d(t){const e=this.#r._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ie,{signal:e})}hide(){var t;this.#s.classList.add("hidden"),null===(t=this.#n)||void 0===t||t.hideDropdown()}show(){this.#s.classList.remove("hidden")}#l(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#r.editorType}-button`),this.#d(t),t.addEventListener("click",(t=>{this.#r._uiManager.delete()}),{signal:this.#r._uiManager._signal}),this.#a.append(t)}get#u(){const t=document.createElement("div");return t.className="divider",t}addAltTextButton(t){this.#d(t),this.#a.prepend(t,this.#u)}addColorPicker(t){this.#n=t;const e=t.renderButton();this.#d(e),this.#a.prepend(e,this.#u)}remove(){var t;this.#s.remove(),null===(t=this.#n)||void 0===t||t.destroy(),this.#n=null}}class ue{#a=null;#s=null;#p;constructor(t){this.#p=t}#f(){const t=this.#s=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ie,{signal:this.#p._signal});const e=this.#a=document.createElement("div");return e.className="buttons",t.append(e),this.#g(),t}#m(t,e){let i=0,s=0;for(const n of t){const t=n.y+n.height;if(t<i)continue;const r=n.x+(e?n.width:0);t>i?(s=r,i=t):e?r>s&&(s=r):r<s&&(s=r)}return[e?1-s:s,i]}show(t,e,i){const[s,n]=this.#m(e,i),{style:r}=this.#s||=this.#f();t.append(this.#s),r.insetInlineEnd=100*s+"%",r.top=`calc(${100*n}% + var(--editor-toolbar-vert-offset))`}hide(){this.#s.remove()}#g(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#p._signal;t.addEventListener("contextmenu",ie,{signal:i}),t.addEventListener("click",(()=>{this.#p.highlightSelection("floating_button")}),{signal:i}),this.#a.append(t)}}function pe(t,e,i){for(const s of i)e.addEventListener(s,t[s].bind(t))}class fe{#v=0;get id(){return"pdfjs_internal_editor_"+this.#v++}}class ge{#b=function(){var t,e;if("undefined"!==typeof crypto&&"function"===typeof(null===(t=crypto)||void 0===t?void 0:t.randomUUID))return crypto.randomUUID();const i=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof(null===(e=crypto)||void 0===e?void 0:e.getRandomValues))crypto.getRandomValues(i);else for(let s=0;s<32;s++)i[s]=Math.floor(255*Math.random());return bt(i)}();#v=0;#y=null;static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return ht(this,"_isSVGFittingCanvas",e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]))))}async#_(t,e){var i;this.#y||=new Map;let s=this.#y.get(t);if(null===s)return null;if(null!==(i=s)&&void 0!==i&&i.bitmap)return s.refCounter+=1,s;try{let t;if(s||={bitmap:null,id:`image_${this.#b}_${this.#v++}`,refCounter:0,isSvg:!1},"string"===typeof e?(s.url=e,t=await $t(e,"blob")):t=s.file=e,"image/svg+xml"===t.type){const e=ge._isSVGFittingCanvas,i=new FileReader,n=new Image,r=new Promise(((t,r)=>{n.onload=()=>{s.bitmap=n,s.isSvg=!0,t()},i.onload=async()=>{const t=s.svgUrl=i.result;n.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},n.onerror=i.onerror=r}));i.readAsDataURL(t),await r}else s.bitmap=await createImageBitmap(t);s.refCounter=1}catch(n){console.error(n),s=null}return this.#y.set(t,s),s&&this.#y.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:i,size:s,type:n}=t;return this.#_(`${e}_${i}_${s}_${n}`,t)}async getFromUrl(t){return this.#_(t,t)}async getFromId(t){this.#y||=new Map;const e=this.#y.get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=this.#y.get(t);return null!==e&&void 0!==e&&e.isSvg?e.svgUrl:null}deleteId(t){this.#y||=new Map;const e=this.#y.get(t);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${this.#b}_`)}}class me{#w=[];#x=!1;#A;#E=-1;constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;this.#A=t}add(t){let{cmd:e,undo:i,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=t;if(n&&e(),this.#x)return;const l={cmd:e,undo:i,post:s,type:r};if(-1===this.#E)return this.#w.length>0&&(this.#w.length=0),this.#E=0,void this.#w.push(l);if(a&&this.#w[this.#E].type===r)return o&&(l.undo=this.#w[this.#E].undo),void(this.#w[this.#E]=l);const h=this.#E+1;h===this.#A?this.#w.splice(0,1):(this.#E=h,h<this.#w.length&&this.#w.splice(h)),this.#w.push(l)}undo(){if(-1===this.#E)return;this.#x=!0;const{undo:t,post:e}=this.#w[this.#E];t(),null===e||void 0===e||e(),this.#x=!1,this.#E-=1}redo(){if(this.#E<this.#w.length-1){this.#E+=1,this.#x=!0;const{cmd:t,post:e}=this.#w[this.#E];t(),null===e||void 0===e||e(),this.#x=!1}}hasSomethingToUndo(){return-1!==this.#E}hasSomethingToRedo(){return this.#E<this.#w.length-1}destroy(){this.#w=null}}class ve{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=wt.platform;for(const[i,s,n={}]of t)for(const t of i){const i=t.startsWith("mac+");e&&i?(this.callbacks.set(t.slice(4),{callback:s,options:n}),this.allKeys.add(t.split("+").at(-1))):e||i||(this.callbacks.set(t,{callback:s,options:n}),this.allKeys.add(t.split("+").at(-1)))}}#k(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#k(e));if(!i)return;const{callback:s,options:{bubbles:n=!1,args:r=[],checker:a=null}}=i;a&&!a(t,e)||(s.bind(t,...r,e)(),n||(e.stopPropagation(),e.preventDefault()))}}class be{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const i of t.keys()){e.style.color=i;const s=window.getComputedStyle(e).color;t.set(i,oe(s))}e.remove()}(t),ht(this,"_colors",t)}convert(t){const e=oe(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every(((t,i)=>t===e[i])))return be._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?At.makeHexColor(...e):t}}class ye{#S=new AbortController;#C=null;#P=new Map;#T=new Map;#M=null;#D=null;#R=null;#L=new me;#O=0;#I=new Set;#F=null;#N=null;#j=new Set;#B=!1;#H=null;#W=null;#z=null;#V=!1;#$=null;#U=new fe;#G=!1;#q=!1;#Y=null;#X=null;#K=null;#Q=b.NONE;#J=new Set;#Z=null;#tt=null;#et=null;#it=this.blur.bind(this);#st=this.focus.bind(this);#nt=this.copy.bind(this);#rt=this.cut.bind(this);#at=this.paste.bind(this);#ot=this.keydown.bind(this);#lt=this.keyup.bind(this);#ht=this.onEditingAction.bind(this);#ct=this.onPageChanging.bind(this);#dt=this.onScaleChanging.bind(this);#ut=this.onRotationChanging.bind(this);#pt={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#ft=[0,0];#gt=null;#mt=null;#vt=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ye.prototype,e=t=>t.#mt.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),i=(t,e)=>{let{target:i}=e;if(i instanceof HTMLInputElement){const{type:t}=i;return"text"!==t&&"number"!==t}return!0},s=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return ht(this,"_keyboardManager",new ve([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:i}=e;return!(i instanceof HTMLButtonElement)&&t.#mt.contains(i)&&!t.isEnterHandled}}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:i}=e;return!(i instanceof HTMLButtonElement)&&t.#mt.contains(document.activeElement)}}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}]]))}constructor(t,e,i,s,n,r,a,o,l){this._signal=this.#S.signal,this.#mt=t,this.#vt=e,this.#M=i,this._eventBus=s,this._eventBus._on("editingaction",this.#ht),this._eventBus._on("pagechanging",this.#ct),this._eventBus._on("scalechanging",this.#dt),this._eventBus._on("rotationchanging",this.#ut),this.#bt(),this.#yt(),this.#_t(),this.#D=n.annotationStorage,this.#H=n.filterFactory,this.#tt=r,this.#z=a||null,this.#B=o,this.#K=l||null,this.viewParameters={realScale:Vt.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){var t,e,i;null===(t=this.#S)||void 0===t||t.abort(),this.#S=null,this._signal=null,this._eventBus._off("editingaction",this.#ht),this._eventBus._off("pagechanging",this.#ct),this._eventBus._off("scalechanging",this.#dt),this._eventBus._off("rotationchanging",this.#ut);for(const s of this.#T.values())s.destroy();this.#T.clear(),this.#P.clear(),this.#j.clear(),this.#C=null,this.#J.clear(),this.#L.destroy(),null===(e=this.#M)||void 0===e||e.destroy(),null===(i=this.#$)||void 0===i||i.hide(),this.#$=null,this.#W&&(clearTimeout(this.#W),this.#W=null),this.#gt&&(clearTimeout(this.#gt),this.#gt=null)}async mlGuess(t){var e;return(null===(e=this.#K)||void 0===e?void 0:e.guess(t))||null}get hasMLManager(){return!!this.#K}get hcmFilter(){return ht(this,"hcmFilter",this.#tt?this.#H.addHCMFilter(this.#tt.foreground,this.#tt.background):"none")}get direction(){return ht(this,"direction",getComputedStyle(this.#mt).direction)}get highlightColors(){return ht(this,"highlightColors",this.#z?new Map(this.#z.split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}get highlightColorNames(){return ht(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(t=>t.reverse()))):null)}setMainHighlightColorPicker(t){this.#X=t}editAltText(t){var e;null===(e=this.#M)||void 0===e||e.editAltText(this,t)}onPageChanging(t){let{pageNumber:e}=t;this.#O=e-1}focusMainContainer(){this.#mt.focus()}findParent(t,e){for(const i of this.#T.values()){const{x:s,y:n,width:r,height:a}=i.div.getBoundingClientRect();if(t>=s&&t<=s+r&&e>=n&&e<=n+a)return i}return null}disableUserSelect(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#vt.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#j.add(t)}removeShouldRescale(t){this.#j.delete(t)}onScaleChanging(t){let{scale:e}=t;this.commitOrRemove(),this.viewParameters.realScale=e*Vt.PDF_TO_CSS_UNITS;for(const i of this.#j)i.onScaleChanging()}onRotationChanging(t){let{pagesRotation:e}=t;this.commitOrRemove(),this.viewParameters.rotation=e}#wt(t){let{anchorNode:e}=t;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}highlightSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:r}=e,a=e.toString(),o=this.#wt(e).closest(".textLayer"),l=this.getSelectionBoxes(o);if(l){e.empty(),this.#Q===b.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:b.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const e of this.#T.values())if(e.hasTextLayer(o)){e.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:l,anchorNode:i,anchorOffset:s,focusNode:n,focusOffset:r,text:a});break}}}#xt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=this.#wt(t).closest(".textLayer"),i=this.getSelectionBoxes(e);i&&(this.#$||=new ue(this),this.#$.show(e,i,"ltr"===this.direction))}addToAnnotationStorage(t){t.isEmpty()||!this.#D||this.#D.has(t.id)||this.#D.setValue(t.id,t)}#At(){var t;const e=document.getSelection();if(!e||e.isCollapsed){var i;if(this.#Z)null===(i=this.#$)||void 0===i||i.hide(),this.#Z=null,this.#Et({hasSelectedText:!1});return}const{anchorNode:s}=e;if(s===this.#Z)return;var n;if(this.#wt(e).closest(".textLayer")){if(null===(t=this.#$)||void 0===t||t.hide(),this.#Z=s,this.#Et({hasSelectedText:!0}),(this.#Q===b.HIGHLIGHT||this.#Q===b.NONE)&&(this.#Q===b.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#V=this.isShiftKeyDown,!this.isShiftKeyDown)){const t=this._signal,e=t=>{"pointerup"===t.type&&0!==t.button||(window.removeEventListener("pointerup",e),window.removeEventListener("blur",e),"pointerup"===t.type&&this.#kt("main_toolbar"))};window.addEventListener("pointerup",e,{signal:t}),window.addEventListener("blur",e,{signal:t})}}else this.#Z&&(null===(n=this.#$)||void 0===n||n.hide(),this.#Z=null,this.#Et({hasSelectedText:!1}))}#kt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.#Q===b.HIGHLIGHT?this.highlightSelection(t):this.#B&&this.#xt()}#bt(){document.addEventListener("selectionchange",this.#At.bind(this),{signal:this._signal})}#St(){const t=this._signal;window.addEventListener("focus",this.#st,{signal:t}),window.addEventListener("blur",this.#it,{signal:t})}#Ct(){window.removeEventListener("focus",this.#st),window.removeEventListener("blur",this.#it)}blur(){if(this.isShiftKeyDown=!1,this.#V&&(this.#V=!1,this.#kt("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#J)if(e.div.contains(t)){this.#Y=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#Y)return;const[t,e]=this.#Y;this.#Y=null,e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),e.focus()}#_t(){const t=this._signal;window.addEventListener("keydown",this.#ot,{signal:t}),window.addEventListener("keyup",this.#lt,{signal:t})}#Pt(){window.removeEventListener("keydown",this.#ot),window.removeEventListener("keyup",this.#lt)}#Tt(){const t=this._signal;document.addEventListener("copy",this.#nt,{signal:t}),document.addEventListener("cut",this.#rt,{signal:t}),document.addEventListener("paste",this.#at,{signal:t})}#Mt(){document.removeEventListener("copy",this.#nt),document.removeEventListener("cut",this.#rt),document.removeEventListener("paste",this.#at)}#yt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#_t(),this.#Tt()}removeEditListeners(){this.#Pt(),this.#Mt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#N)if(i.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#N)if(i.isHandlingMimeForPasting(e.type))return i.paste(e,this.currentLayer),void t.preventDefault()}copy(t){var e;if(t.preventDefault(),null===(e=this.#C)||void 0===e||e.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#J){const t=s.serialize(!0);t&&i.push(t)}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const t of this.#N)if(t.isHandlingMimeForPasting(r.type))return void t.paste(r,this.currentLayer);let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(n){return void rt(`paste: "${n.message}".`)}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const t=[];for(const r of i){const e=s.deserialize(r);if(!e)return;t.push(e)}const e=()=>{for(const e of t)this.#Dt(e);this.#Rt(t)},n=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:n,mustExec:!0})}catch(n){rt(`paste: "${n.message}".`)}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),this.#Q===b.NONE||this.isEditorHandlingKeyboard||ye._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#V&&(this.#V=!1,this.#kt("main_toolbar")))}onEditingAction(t){let{name:e}=t;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#Et(t){Object.entries(t).some((t=>{let[e,i]=t;return this.#pt[e]!==i}))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#pt,t)}),this.#Q===b.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#Lt([[y.HIGHLIGHT_FREE,!0]]))}#Lt(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#St(),this.#Tt(),this.#Et({isEditing:this.#Q!==b.NONE,isEmpty:this.#Ot(),hasSomethingToUndo:this.#L.hasSomethingToUndo(),hasSomethingToRedo:this.#L.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Ct(),this.#Mt(),this.#Et({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#N){this.#N=t;for(const t of this.#N)this.#Lt(t.defaultPropertiesToUpdate)}}getId(){return this.#U.id}get currentLayer(){return this.#T.get(this.#O)}getLayer(t){return this.#T.get(t)}get currentPageIndex(){return this.#O}addLayer(t){this.#T.set(t.pageIndex,t),this.#G?t.enable():t.disable()}removeLayer(t){this.#T.delete(t.pageIndex)}updateMode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.#Q!==t){if(this.#Q=t,t===b.NONE)return this.setEditingState(!1),void this.#It();this.setEditingState(!0),this.#Ft(),this.unselectAll();for(const e of this.#T.values())e.updateMode(t);if(e||!i){if(e)for(const t of this.#P.values())if(t.annotationElementId===e){this.setSelected(t),t.enterInEditMode();break}}else this.addNewEditorFromKeyboard()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#Q&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(this.#N){switch(t){case y.CREATE:return void this.currentLayer.addNewEditor();case y.HIGHLIGHT_DEFAULT_COLOR:null===(i=this.#X)||void 0===i||i.updateColor(e);break;case y.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#et||=new Map).set(t,e),this.showAllEditors("highlight",e)}for(const i of this.#J)i.updateParams(t,e);for(const i of this.#N)i.updateDefaultParams(t,e)}}showAllEditors(t,e){var i;for(const s of this.#P.values())s.editorType===t&&s.show(e);((null===(i=this.#et)||void 0===i?void 0:i.get(y.HIGHLIGHT_SHOW_ALL))??!0)!==e&&this.#Lt([[y.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.#q!==t){this.#q=t;for(const e of this.#T.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}#Ft(){if(!this.#G){this.#G=!0;for(const t of this.#T.values())t.enable();for(const t of this.#P.values())t.enable()}}#It(){if(this.unselectAll(),this.#G){this.#G=!1;for(const t of this.#T.values())t.disable();for(const t of this.#P.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#P.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#P.get(t)}addEditor(t){this.#P.set(t.id,t)}removeEditor(t){var e;(t.div.contains(document.activeElement)&&(this.#W&&clearTimeout(this.#W),this.#W=setTimeout((()=>{this.focusMainContainer(),this.#W=null}),0)),this.#P.delete(t.id),this.unselect(t),t.annotationElementId&&this.#I.has(t.annotationElementId))||(null===(e=this.#D)||void 0===e||e.remove(t.id))}addDeletedAnnotationElement(t){this.#I.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#I.has(t)}removeDeletedAnnotationElement(t){this.#I.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Dt(t){const e=this.#T.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#C!==t&&(this.#C=t,t&&this.#Lt(t.propertiesToUpdate))}get#Nt(){let t=null;for(t of this.#J);return t}updateUI(t){this.#Nt===t&&this.#Lt(t.propertiesToUpdate)}toggleSelected(t){if(this.#J.has(t))return this.#J.delete(t),t.unselect(),void this.#Et({hasSelectedEditor:this.hasSelection});this.#J.add(t),t.select(),this.#Lt(t.propertiesToUpdate),this.#Et({hasSelectedEditor:!0})}setSelected(t){for(const e of this.#J)e!==t&&e.unselect();this.#J.clear(),this.#J.add(t),t.select(),this.#Lt(t.propertiesToUpdate),this.#Et({hasSelectedEditor:!0})}isSelected(t){return this.#J.has(t)}get firstSelectedEditor(){return this.#J.values().next().value}unselect(t){t.unselect(),this.#J.delete(t),this.#Et({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#J.size}get isEnterHandled(){return 1===this.#J.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#L.undo(),this.#Et({hasSomethingToUndo:this.#L.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Ot()})}redo(){this.#L.redo(),this.#Et({hasSomethingToUndo:!0,hasSomethingToRedo:this.#L.hasSomethingToRedo(),isEmpty:this.#Ot()})}addCommands(t){this.#L.add(t),this.#Et({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Ot()})}#Ot(){if(0===this.#P.size)return!0;if(1===this.#P.size)for(const t of this.#P.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#J];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)this.#Dt(e)},mustExec:!0})}commitOrRemove(){var t;null===(t=this.#C)||void 0===t||t.commitOrRemove()}hasSomethingToControl(){return this.#C||this.hasSelection}#Rt(t){for(const e of this.#J)e.unselect();this.#J.clear();for(const e of t)e.isEmpty()||(this.#J.add(e),e.select());this.#Et({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#J)t.commit();this.#Rt(this.#P.values())}unselectAll(){if((!this.#C||(this.#C.commitOrRemove(),this.#Q===b.NONE))&&this.hasSelection){for(const t of this.#J)t.unselect();this.#J.clear(),this.#Et({hasSelectedEditor:!1})}}translateSelectedEditors(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;this.#ft[0]+=t,this.#ft[1]+=e;const[i,s]=this.#ft,n=[...this.#J];this.#gt&&clearTimeout(this.#gt),this.#gt=setTimeout((()=>{this.#gt=null,this.#ft[0]=this.#ft[1]=0,this.addCommands({cmd:()=>{for(const t of n)this.#P.has(t.id)&&t.translateInPage(i,s)},undo:()=>{for(const t of n)this.#P.has(t.id)&&t.translateInPage(-i,-s)},mustExec:!1})}),1e3);for(const r of n)r.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#F=new Map;for(const t of this.#J)this.#F.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#F)return!1;this.disableUserSelect(!1);const t=this.#F;this.#F=null;let e=!1;for(const[{x:s,y:n,pageIndex:r},a]of t)a.newX=s,a.newY=n,a.newPageIndex=r,e||=s!==a.savedX||n!==a.savedY||r!==a.savedPageIndex;if(!e)return!1;const i=(t,e,i,s)=>{if(this.#P.has(t.id)){const n=this.#T.get(s);n?t._setParentAndPosition(n,e,i):(t.pageIndex=s,t.x=e,t.y=i)}};return this.addCommands({cmd:()=>{for(const[e,{newX:s,newY:n,newPageIndex:r}]of t)i(e,s,n,r)},undo:()=>{for(const[e,{savedX:s,savedY:n,savedPageIndex:r}]of t)i(e,s,n,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#F)for(const i of this.#F.keys())i.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return(null===(t=this.getActive())||void 0===t?void 0:t.shouldGetKeyboardEvents())||1===this.#J.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#C===t}getActive(){return this.#C}getMode(){return this.#Q}get imageManager(){return ht(this,"imageManager",new ge)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,h=e.rangeCount;l<h;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:i,y:s,width:n,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-s)/r,y:1-(t+a-i)/n,width:o/r,height:a/n});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-i)/n,y:1-(e+o-s)/r,width:a/n,height:o/r});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-s)/r,y:(t-i)/n,width:o/r,height:a/n});break;default:a=(t,e,a,o)=>({x:(t-i)/n,y:(e-s)/r,width:a/n,height:o/r})}const o=[];for(let l=0,h=e.rangeCount;l<h;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:i,width:s,height:n}of t.getClientRects())0!==s&&0!==n&&o.push(a(e,i,s,n))}return 0===o.length?null:o}addChangedExistingAnnotation(t){let{annotationElementId:e,id:i}=t;(this.#R||=new Map).set(e,i)}removeChangedExistingAnnotation(t){var e;let{annotationElementId:i}=t;null===(e=this.#R)||void 0===e||e.delete(i)}renderAnnotationElement(t){var e;const i=null===(e=this.#R)||void 0===e?void 0:e.get(t.data.id);if(!i)return;const s=this.#D.getRawValue(i);s&&(this.#Q!==b.NONE||s.hasBeenModified)&&s.renderAnnotationElement(t)}}class _e{#jt="";#Bt=!1;#Ht=null;#Wt=null;#zt=null;#Vt=!1;#r=null;static _l10nPromise=null;constructor(t){this.#r=t}static initialize(t){_e._l10nPromise||=t}async render(){const t=this.#Ht=document.createElement("button");t.className="altText";const e=await _e._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const i=this.#r._uiManager._signal;t.addEventListener("contextmenu",ie,{signal:i}),t.addEventListener("pointerdown",(t=>t.stopPropagation()),{signal:i});const s=t=>{t.preventDefault(),this.#r._uiManager.editAltText(this.#r)};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(this.#Vt=!0,s(e))}),{signal:i}),await this.#$t(),t}finish(){this.#Ht&&(this.#Ht.focus({focusVisible:this.#Vt}),this.#Vt=!1)}isEmpty(){return!this.#jt&&!this.#Bt}get data(){return{altText:this.#jt,decorative:this.#Bt}}set data(t){let{altText:e,decorative:i}=t;this.#jt===e&&this.#Bt===i||(this.#jt=e,this.#Bt=i,this.#$t())}toggle(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#Ht&&(!t&&this.#zt&&(clearTimeout(this.#zt),this.#zt=null),this.#Ht.disabled=!t)}destroy(){var t;null===(t=this.#Ht)||void 0===t||t.remove(),this.#Ht=null,this.#Wt=null}async#$t(){const t=this.#Ht;if(!t)return;var e;if(!this.#jt&&!this.#Bt)return t.classList.remove("done"),void(null===(e=this.#Wt)||void 0===e||e.remove());t.classList.add("done"),_e._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((e=>{t.setAttribute("aria-label",e)}));let i=this.#Wt;if(!i){this.#Wt=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip");const e=i.id=`alt-text-tooltip-${this.#r.id}`;t.setAttribute("aria-describedby",e);const s=100,n=this.#r._uiManager._signal;n.addEventListener("abort",(()=>{clearTimeout(this.#zt),this.#zt=null}),{once:!0}),t.addEventListener("mouseenter",(()=>{this.#zt=setTimeout((()=>{this.#zt=null,this.#Wt.classList.add("show"),this.#r._reportTelemetry({action:"alt_text_tooltip"})}),s)}),{signal:n}),t.addEventListener("mouseleave",(()=>{var t;this.#zt&&(clearTimeout(this.#zt),this.#zt=null),null===(t=this.#Wt)||void 0===t||t.classList.remove("show")}),{signal:n})}i.innerText=this.#Bt?await _e._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#jt,i.parentNode||t.append(i);const s=this.#r.getImageForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",i.id)}}class we{#Ut=null;#Gt=null;#jt=null;#qt=!1;#Yt=!1;#Xt=null;#Kt=null;#Qt=this.focusin.bind(this);#Jt=this.focusout.bind(this);#Zt=null;#te="";#ee=!1;#ie=null;#se=!1;#ne=!1;#re=!1;#ae=null;#oe=0;#le=0;#he=null;_initialOptions=Object.create(null);_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#ce=!1;#de=we._zIndex++;static _borderLineWidth=-1;static _colorManager=new be;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=we.prototype._resizeWithKeyboard,e=ye.TRANSLATE_SMALL,i=ye.TRANSLATE_BIG;return ht(this,"_resizerKeyboardManager",new ve([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],we.prototype._stopResizingWithKeyboard]]))}constructor(t){this.constructor===we&&at("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:r}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[n,r];const[a,o]=this.parentDimensions;this.x=t.x/a,this.y=t.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ht(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new xe({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(we._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((e=>[e,t.get(e.replaceAll(/([A-Z])/g,(t=>`-${t.toLowerCase()}`)))]))),null!==i&&void 0!==i&&i.strings)for(const n of i.strings)we._l10nPromise.set(n,t.get(n));if(-1!==we._borderLineWidth)return;const s=getComputedStyle(document.documentElement);we._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){at("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#ce}set _isDraggable(t){var e;this.#ce=t,null===(e=this.div)||void 0===e||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#de}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#ue(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#ee?this.#ee=!1:this.parent.setSelected(this))}focusout(t){var e;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const i=t.relatedTarget;null!==i&&void 0!==i&&i.closest(`#${this.id}`)||(t.preventDefault(),null!==(e=this.parent)&&void 0!==e&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[n,r]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/n,this.y=(e+s)/r,this.fixAndSetPosition()}#pe(t,e,i){let[s,n]=t;[e,i]=this.screenToPageTranslation(e,i),this.x+=e/s,this.y+=i/n,this.fixAndSetPosition()}translate(t,e){this.#pe(this.parentDimensions,t,e)}translateInPage(t,e){this.#ie||=[this.x,this.y],this.#pe(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#ie||=[this.x,this.y];const[i,s]=this.parentDimensions;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:n,y:r}=this;const[a,o]=this.getBaseTranslation();n+=a,r+=o,this.div.style.left=`${(100*n).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#ie&&(this.#ie[0]!==this.x||this.#ie[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=we,s=i/t,n=i/e;switch(this.rotation){case 90:return[-s,n];case 180:return[s,n];case 270:return[s,-n];default:return[-s,-n]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[e,i]=this.pageDimensions;let{x:s,y:n,width:r,height:a}=this;if(r*=e,a*=i,s*=e,n*=i,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-r,s)),n=Math.max(0,Math.min(i-a,n));break;case 90:s=Math.max(0,Math.min(e-a,s)),n=Math.min(i,Math.max(r,n));break;case 180:s=Math.min(e,Math.max(r,s)),n=Math.min(i,Math.max(a,n));break;case 270:s=Math.min(e,Math.max(a,s)),n=Math.max(0,Math.min(i-r,n))}this.x=s/=e,this.y=n/=i;const[o,l]=this.getBaseTranslation();s+=o,n+=l;const{style:h}=this.div;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*n).toFixed(2)}%`,this.moveInDOM()}static#fe(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return we.#fe(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return we.#fe(t,e,360-this.parentRotation)}#ge(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,s=e*t,n=i*t;return wt.isCSSRoundSupported?[Math.round(s),Math.round(n)]:[s,n]}setDims(t,e){const[i,s]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,this.#Yt||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),n=!this.#Yt&&e.endsWith("%");if(s&&n)return;const[r,a]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),this.#Yt||n||(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#me(){if(this.#Xt)return;this.#Xt=document.createElement("div"),this.#Xt.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const t=document.createElement("div");this.#Xt.append(t),t.classList.add("resizer",i),t.setAttribute("data-resizer-name",i),t.addEventListener("pointerdown",this.#ve.bind(this,i),{signal:e}),t.addEventListener("contextmenu",ie,{signal:e}),t.tabIndex=-1}this.div.prepend(this.#Xt)}#ve(t,e){var i;e.preventDefault();const{isMac:s}=wt.platform;if(0!==e.button||e.ctrlKey&&s)return;null===(i=this.#jt)||void 0===i||i.toggle(!1);const n=this.#be.bind(this,t),r=this._isDraggable;this._isDraggable=!1;const a=this._uiManager._signal,o={passive:!0,capture:!0,signal:a};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",n,o),window.addEventListener("contextmenu",ie,{signal:a});const l=this.x,h=this.y,c=this.width,d=this.height,u=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var t;this.parent.togglePointerEvents(!0),null===(t=this.#jt)||void 0===t||t.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",f),window.removeEventListener("blur",f),window.removeEventListener("pointermove",n,o),window.removeEventListener("contextmenu",ie),this.parent.div.style.cursor=u,this.div.style.cursor=p,this.#ye(l,h,c,d)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})}#ye(t,e,i,s){const n=this.x,r=this.y,a=this.width,o=this.height;n===t&&r===e&&a===i&&o===s||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=n,this.y=r;const[t,e]=this.parentDimensions;this.setDims(t*a,e*o),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=t,this.y=e;const[n,r]=this.parentDimensions;this.setDims(n*i,r*s),this.fixAndSetPosition()},mustExec:!0})}#be(t,e){const[i,s]=this.parentDimensions,n=this.x,r=this.y,a=this.width,o=this.height,l=we.MIN_SIZE/i,h=we.MIN_SIZE/s,c=t=>Math.round(1e4*t)/1e4,d=this.#ge(this.rotation),u=(t,e)=>[d[0]*t+d[2]*e,d[1]*t+d[3]*e],p=this.#ge(360-this.rotation);let f,g,m=!1,v=!1;switch(t){case"topLeft":m=!0,f=(t,e)=>[0,0],g=(t,e)=>[t,e];break;case"topMiddle":f=(t,e)=>[t/2,0],g=(t,e)=>[t/2,e];break;case"topRight":m=!0,f=(t,e)=>[t,0],g=(t,e)=>[0,e];break;case"middleRight":v=!0,f=(t,e)=>[t,e/2],g=(t,e)=>[0,e/2];break;case"bottomRight":m=!0,f=(t,e)=>[t,e],g=(t,e)=>[0,0];break;case"bottomMiddle":f=(t,e)=>[t/2,e],g=(t,e)=>[t/2,0];break;case"bottomLeft":m=!0,f=(t,e)=>[0,e],g=(t,e)=>[t,0];break;case"middleLeft":v=!0,f=(t,e)=>[0,e/2],g=(t,e)=>[t,e/2]}const b=f(a,o),y=g(a,o);let _=u(...y);const w=c(n+_[0]),x=c(r+_[1]);let A=1,E=1,[k,S]=this.screenToPageTranslation(e.movementX,e.movementY);var C,P;if([k,S]=(C=k/i,P=S/s,[p[0]*C+p[2]*P,p[1]*C+p[3]*P]),m){const t=Math.hypot(a,o);A=E=Math.max(Math.min(Math.hypot(y[0]-b[0]-k,y[1]-b[1]-S)/t,1/a,1/o),l/a,h/o)}else v?A=Math.max(l,Math.min(1,Math.abs(y[0]-b[0]-k)))/a:E=Math.max(h,Math.min(1,Math.abs(y[1]-b[1]-S)))/o;const T=c(a*A),M=c(o*E);_=u(...g(T,M));const D=w-_[0],R=x-_[1];this.width=T,this.height=M,this.x=D,this.y=R,this.setDims(i*T,s*M),this.fixAndSetPosition()}altTextFinish(){var t;null===(t=this.#jt)||void 0===t||t.finish()}async addEditToolbar(){return this.#Zt||this.#ne||(this.#Zt=new de(this),this.div.append(this.#Zt.render()),this.#jt&&this.#Zt.addAltTextButton(await this.#jt.render())),this.#Zt}removeEditToolbar(){var t;this.#Zt&&(this.#Zt.remove(),this.#Zt=null,null===(t=this.#jt)||void 0===t||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#jt||(_e.initialize(we._l10nPromise),this.#jt=new _e(this),this.#Ut&&(this.#jt.data=this.#Ut,this.#Ut=null),await this.addEditToolbar())}get altTextData(){var t;return null===(t=this.#jt)||void 0===t?void 0:t.data}set altTextData(t){this.#jt&&(this.#jt.data=t)}hasAltText(){var t;return!(null!==(t=this.#jt)&&void 0!==t&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#qt?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",this.#Qt,{signal:t}),this.div.addEventListener("focusout",this.#Jt,{signal:t});const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,n]=this.getInitialTranslation();return this.translate(s,n),pe(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=wt.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(this.#ee=!0,this._isDraggable?this.#_e(t):this.#we(t))}#we(t){const{isMac:e}=wt.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#_e(t){const e=this._uiManager.isSelected(this);let i,s;this._uiManager.setUpDragSession();const n=this._uiManager._signal;e&&(this.div.classList.add("moving"),i={passive:!0,capture:!0,signal:n},this.#oe=t.clientX,this.#le=t.clientY,s=t=>{const{clientX:e,clientY:i}=t,[s,n]=this.screenToPageTranslation(e-this.#oe,i-this.#le);this.#oe=e,this.#le=i,this._uiManager.dragSelectedEditors(s,n)},window.addEventListener("pointermove",s,i));const r=()=>{window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,i)),this.#ee=!1,this._uiManager.endDragSession()||this.#we(t)};window.addEventListener("pointerup",r,{signal:n}),window.addEventListener("blur",r,{signal:n})}moveInDOM(){this.#ae&&clearTimeout(this.#ae),this.#ae=setTimeout((()=>{var t;this.#ae=null,null===(t=this.parent)||void 0===t||t.moveEditorInDOM(this)}),0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const s=this.parentScale,[n,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/s,h=e/s,c=this.x*n,d=this.y*r,u=this.width*n,p=this.height*r;switch(i){case 0:return[c+l+a,r-d-h-p+o,c+l+u+a,r-d-h+o];case 90:return[c+h+a,r-d+l+o,c+h+p+a,r-d+l+u+o];case 180:return[c-l-u+a,r-d+h+o,c-l+a,r-d+h+p+o];case 270:return[c-h-p+a,r-d-l-u+o,c-h+a,r-d-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,n,r]=t,a=n-i,o=r-s;switch(this.rotation){case 0:return[i,e-r,a,o];case 90:return[i,e-s,o,a];case 180:return[n,e-s,a,o];case 270:return[n,e-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#ne=!0}disableEditMode(){this.#ne=!1}isInEditMode(){return this.#ne}shouldGetKeyboardEvents(){return this.#re}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t,e;const i=this._uiManager._signal;null===(t=this.div)||void 0===t||t.addEventListener("focusin",this.#Qt,{signal:i}),null===(e=this.div)||void 0===e||e.addEventListener("focusout",this.#Jt,{signal:i})}rotate(t){}serialize(){at("An editor must be serializable")}static deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});s.rotation=t.rotation,s.#Ut=t.accessibilityData;const[n,r]=s.pageDimensions,[a,o,l,h]=s.getRectInCurrentCoords(t.rect,r);return s.x=a/n,s.y=o/r,s.width=l/n,s.height=h/r,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",this.#Qt),this.div.removeEventListener("focusout",this.#Jt),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#ae&&(clearTimeout(this.#ae),this.#ae=null),this.#ue(),this.removeEditToolbar(),this.#he){for(const t of this.#he.values())clearTimeout(t);this.#he=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#me(),this.#Xt.classList.remove("hidden"),pe(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),this.#Kt={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#Xt.children;if(!this.#Gt){this.#Gt=Array.from(e);const t=this.#xe.bind(this),i=this.#Ae.bind(this),s=this._uiManager._signal;for(const e of this.#Gt){const n=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t,{signal:s}),e.addEventListener("blur",i,{signal:s}),e.addEventListener("focus",this.#Ee.bind(this,n),{signal:s}),we._l10nPromise.get(`pdfjs-editor-resizer-label-${n}`).then((t=>e.setAttribute("aria-label",t)))}}const i=this.#Gt[0];let s=0;for(const r of e){if(r===i)break;s++}const n=(360-this.rotation+this.parentRotation)%360/90*(this.#Gt.length/4);if(n!==s){if(n<s)for(let e=0;e<s-n;e++)this.#Xt.append(this.#Xt.firstChild);else if(n>s)for(let e=0;e<n-s;e++)this.#Xt.firstChild.before(this.#Xt.lastChild);let t=0;for(const i of e){const e=this.#Gt[t++].getAttribute("data-resizer-name");we._l10nPromise.get(`pdfjs-editor-resizer-label-${e}`).then((t=>i.setAttribute("aria-label",t)))}}this.#ke(0),this.#re=!0,this.#Xt.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#xe(t){we._resizerKeyboardManager.exec(this,t)}#Ae(t){var e;this.#re&&(null===(e=t.relatedTarget)||void 0===e?void 0:e.parentNode)!==this.#Xt&&this.#ue()}#Ee(t){this.#te=this.#re?t:""}#ke(t){if(this.#Gt)for(const e of this.#Gt)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#re&&this.#be(this.#te,{movementX:t,movementY:e})}#ue(){if(this.#re=!1,this.#ke(-1),this.#Kt){const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=this.#Kt;this.#ye(t,e,i,s),this.#Kt=null}}_stopResizingWithKeyboard(){this.#ue(),this.div.focus()}select(){var t,e;this.makeResizable(),null===(t=this.div)||void 0===t||t.classList.add("selectedEditor"),this.#Zt?null===(e=this.#Zt)||void 0===e||e.show():this.addEditToolbar().then((()=>{var t,e;null!==(t=this.div)&&void 0!==t&&t.classList.contains("selectedEditor")&&(null===(e=this.#Zt)||void 0===e||e.show())}))}unselect(){var t,e,i,s;null===(t=this.#Xt)||void 0===t||t.classList.add("hidden"),null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor"),null!==(i=this.div)&&void 0!==i&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(s=this.#Zt)||void 0===s||s.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#se}set isEditing(t){this.#se=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#Yt=!0;const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){this.#he||=new Map;const{action:e}=t;let i=this.#he.get(e);return i&&clearTimeout(i),i=setTimeout((()=>{this._reportTelemetry(t),this.#he.delete(e),0===this.#he.size&&(this.#he=null)}),we._telemetryTimeout),void this.#he.set(e,i)}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#qt=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#qt=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===e.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}class xe extends we{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Ae=3285377520,Ee=4294901760,ke=65535;class Se{constructor(t){this.h1=t?4294967295&t:Ae,this.h2=t?4294967295&t:Ae}update(t){let e,i;if("string"===typeof t){e=new Uint8Array(2*t.length),i=0;for(let s=0,n=t.length;s<n;s++){const n=t.charCodeAt(s);n<=255?e[i++]=n:(e[i++]=n>>>8,e[i++]=255&n)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),i=e.byteLength}const s=i>>2,n=i-4*s,r=new Uint32Array(e.buffer,0,s);let a=0,o=0,l=this.h1,h=this.h2;const c=3432918353,d=461845907,u=11601,p=13715;for(let f=0;f<s;f++)1&f?(a=r[f],a=a*c&Ee|a*u&ke,a=a<<15|a>>>17,a=a*d&Ee|a*p&ke,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[f],o=o*c&Ee|o*u&ke,o=o<<15|o>>>17,o=o*d&Ee|o*p&ke,h^=o,h=h<<13|h>>>19,h=5*h+3864292196);switch(a=0,n){case 3:a^=e[4*s+2]<<16;case 2:a^=e[4*s+1]<<8;case 1:a^=e[4*s],a=a*c&Ee|a*u&ke,a=a<<15|a>>>17,a=a*d&Ee|a*p&ke,1&s?l^=a:h^=a}this.h1=l,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&Ee|36045*t&ke,e=4283543511*e&Ee|(2950163797*(e<<16|t>>>16)&Ee)>>>16,t^=e>>>1,t=444984403*t&Ee|60499*t&ke,e=3301882366*e&Ee|(3120437893*(e<<16|t>>>16)&Ee)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ce=Object.freeze({map:null,hash:"",transfer:void 0});class Pe{#Se=!1;#Ce=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#Ce.get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return this.#Ce.get(t)}remove(t){if(this.#Ce.delete(t),0===this.#Ce.size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const t of this.#Ce.values())if(t instanceof we)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#Ce.get(t);let s=!1;if(void 0!==i)for(const[n,r]of Object.entries(e))i[n]!==r&&(s=!0,i[n]=r);else s=!0,this.#Ce.set(t,e);s&&this.#Pe(),e instanceof we&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#Ce.has(t)}getAll(){return this.#Ce.size>0?_t(this.#Ce):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#Ce.size}#Pe(){this.#Se||(this.#Se=!0,"function"===typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#Se&&(this.#Se=!1,"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Te(this)}get serializable(){if(0===this.#Ce.size)return Ce;const t=new Map,e=new Se,i=[],s=Object.create(null);let n=!1;for(const[r,a]of this.#Ce){const i=a instanceof we?a.serialize(!1,s):a;i&&(t.set(r,i),e.update(`${r}:${JSON.stringify(i)}`),n||=!!i.bitmap)}if(n)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Ce}get editorStats(){let t=null;const e=new Map;for(const i of this.#Ce.values()){if(!(i instanceof we))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:n}=s;e.has(n)||e.set(n,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const r=t[n]||=new Map;for(const[t,e]of Object.entries(s)){if("type"===t)continue;let i=r.get(t);i||(i=new Map,r.set(t,i));const s=i.get(e)??0;i.set(e,s+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}}class Te extends Pe{#Te;constructor(t){super();const{map:e,hash:i,transfer:s}=t.serializable,n=structuredClone(e,s?{transfer:s}:null);this.#Te={map:n,hash:i,transfer:s}}get print(){at("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#Te}}class Me{#Me=new Set;constructor(t){let{ownerDocument:e=globalThis.document,styleElement:i=null}=t;this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#Me.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){let{systemFontInfo:e,_inspectFont:i}=t;if(e&&!this.#Me.has(e.loadedName))if(ot(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:s,style:n}=e,r=new FontFace(t,s,n);this.addNativeFontFace(r);try{await r.load(),this.#Me.add(t),null===i||void 0===i||i(e)}catch{rt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}}else at("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw rt(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((e=>{const i=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,i)}))}}get isFontLoadingAPISupported(){var t;return ht(this,"isFontLoadingAPISupported",!(null===(t=this._document)||void 0===t||!t.fonts))}get isSyncFontLoadingSupported(){var t;let e=!1;return(a||"undefined"!==typeof navigator&&"string"===typeof(null===(t=navigator)||void 0===t?void 0:t.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ht(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(t){const{loadingRequests:e}=this,i={done:!1,complete:function(){for(ot(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(i),i}get _loadTestFont(){return ht(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function i(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function s(t,e,i,s){return t.substring(0,e)+s+t.substring(e+i)}let n,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=s(c,976,h.length,h);const d=1482184792;let u=i(c,16);for(n=0,r=h.length-3;n<r;n+=4)u=u-d+i(h,n)|0;var p;n<h.length&&(u=u-d+i(h+"XXX",n)|0),c=s(c,16,4,(p=u,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f=`@font-face {font-family:"${h}";src:${`url(data:font/opentype;base64,${btoa(c)});`}}`;this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const m of[t.loadedName,h]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=m,g.append(t)}this._document.body.append(g),function t(e,i){if(++l>30)return rt("Load test font never loaded."),void i();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(h,(()=>{g.remove(),e.complete()}))}}class De{constructor(t,e){let{disableFontFace:i=!1,inspectFont:s=null}=e;this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=!0===i,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return null===(t=this._inspectFont)||void 0===t||t.call(this,this),e}createFontFaceRule(){var t;if(!this.data||this.disableFontFace)return null;const e=bt(this.data),i=`url(data:${this.mimetype};base64,${btoa(e)});`;let s;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${i}}`}else s=`@font-face {font-family:"${this.loadedName}";src:${i}}`;return null===(t=this._inspectFont)||void 0===t||t.call(this,this,i),s}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(n){rt(`getPathGenerator - ignoring character: "${n}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[e]=function(t,e){};const s=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case Pt:{const[t,e,n,a,o,l]=i.slice(r,r+6);s.push((i=>i.bezierCurveTo(t,e,n,a,o,l))),r+=6}break;case Tt:{const[t,e]=i.slice(r,r+2);s.push((i=>i.moveTo(t,e))),r+=2}break;case Mt:{const[t,e]=i.slice(r,r+2);s.push((i=>i.lineTo(t,e))),r+=2}break;case Dt:{const[t,e,n,a]=i.slice(r,r+4);s.push((i=>i.quadraticCurveTo(t,e,n,a))),r+=4}break;case Rt:s.push((t=>t.restore()));break;case Lt:s.push((t=>t.save()));break;case Ot:ot(2===s.length,"Scale command is only valid at the third position.");break;case It:{const[t,e,n,a,o,l]=i.slice(r,r+6);s.push((i=>i.transform(t,e,n,a,o,l))),r+=6}break;case Ft:{const[t,e]=i.slice(r,r+2);s.push((i=>i.translate(t,e))),r+=2}}return this.compiledGlyphs[e]=function(t,e){s[0](t),s[1](t),t.scale(e,-e);for(let i=2,n=s.length;i<n;i++)s[i](t)}}}if(a){var Re=Promise.withResolvers(),Le=null;(async()=>{const t=await import("fs"),e=await import("http"),i=await import("https"),s=await import("url");return new Map(Object.entries({fs:t,http:e,https:i,url:s,canvas:undefined,path2d:undefined}))})().then((t=>{Le=t,Re.resolve()}),(t=>{rt(`loadPackages: ${t}`),Le=new Map,Re.resolve()}))}class Oe{static get promise(){return Re.promise}static get(t){var e;return null===(e=Le)||void 0===e?void 0:e.get(t)}}const Ie=function(t){return Oe.get("fs").promises.readFile(t).then((t=>new Uint8Array(t)))};const Fe="Fill",Ne="Stroke",je="Shading";function Be(t,e){if(!e)return;const i=e[2]-e[0],s=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],i,s),t.clip(n)}class He{constructor(){this.constructor===He&&at("Cannot initialize BaseShadingPattern.")}getPattern(){at("Abstract method `getPattern` called.")}}class We extends He{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let n;if(s===Ne||s===Fe){const r=e.current.getClippedPathBoundingBox(s,le(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o,!0),h=l.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-r[0],-r[1]),i=At.transform(i,[1,0,0,1,r[0],r[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Be(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),n=t.createPattern(l.canvas,"no-repeat");const c=new DOMMatrix(i);n.setTransform(c)}else Be(t,this._bbox),n=this._createGradient(t);return n}}function ze(t,e,i,s,n,r,a,o){const l=e.coords,h=e.colors,c=t.data,d=4*t.width;let u;l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=r,r=a,a=u),l[s+1]>l[n+1]&&(u=s,s=n,n=u,u=a,a=o,o=u),l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=r,r=a,a=u);const p=(l[i]+e.offsetX)*e.scaleX,f=(l[i+1]+e.offsetY)*e.scaleY,g=(l[s]+e.offsetX)*e.scaleX,m=(l[s+1]+e.offsetY)*e.scaleY,v=(l[n]+e.offsetX)*e.scaleX,b=(l[n+1]+e.offsetY)*e.scaleY;if(f>=b)return;const y=h[r],_=h[r+1],w=h[r+2],x=h[a],A=h[a+1],E=h[a+2],k=h[o],S=h[o+1],C=h[o+2],P=Math.round(f),T=Math.round(b);let M,D,R,L,O,I,F,N;for(let j=P;j<=T;j++){if(j<m){const t=j<f?0:(f-j)/(f-m);M=p-(p-g)*t,D=y-(y-x)*t,R=_-(_-A)*t,L=w-(w-E)*t}else{let t;t=j>b?1:m===b?0:(m-j)/(m-b),M=g-(g-v)*t,D=x-(x-k)*t,R=A-(A-S)*t,L=E-(E-C)*t}let t;t=j<f?0:j>b?1:(f-j)/(f-b),O=p-(p-v)*t,I=y-(y-k)*t,F=_-(_-S)*t,N=w-(w-C)*t;const e=Math.round(Math.min(M,O)),i=Math.round(Math.max(M,O));let s=d*j+4*e;for(let n=e;n<=i;n++)t=(M-n)/(M-O),t<0?t=0:t>1&&(t=1),c[s++]=D-(D-I)*t|0,c[s++]=R-(R-F)*t|0,c[s++]=L-(L-N)*t|0,c[s++]=255}}function Ve(t,e,i){const s=e.coords,n=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(s.length/o)-1,h=o-1;for(r=0;r<l;r++){let e=r*o;for(let r=0;r<h;r++,e++)ze(t,i,s[e],s[e+1],s[e+o],n[e],n[e+1],n[e+o]),ze(t,i,s[e+o+1],s[e+1],s[e+o],n[e+o+1],n[e+1],n[e+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)ze(t,i,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class $e extends He{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const s=Math.floor(this._bounds[0]),n=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-s,a=Math.ceil(this._bounds[3])-n,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),h=r/o,c=a/l,d={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-n,scaleX:1/h,scaleY:1/c},u=o+4,p=l+4,f=i.getCanvas("mesh",u,p,!1),g=f.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let i=0,s=t.length;i<s;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const v of this._figures)Ve(m,v,d);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:s-2*h,offsetY:n-2*c,scaleX:h,scaleY:c}}getPattern(t,e,i,s){let n;if(Be(t,this._bbox),s===je)n=At.singularValueDecompose2dScale(le(t));else if(n=At.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=At.singularValueDecompose2dScale(this.matrix);n=[n[0]*t[0],n[1]*t[1]]}const r=this._createMeshCanvas(n,s===je?null:this._background,e.cachedCanvases);return s!==je&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class Ue extends He{getPattern(){return"hotpink"}}const Ge=1,qe=2;class Ye{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,s,n){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,s=this.xstep,n=this.ystep,r=this.paintType,a=this.tilingType,o=this.color,l=this.canvasGraphicsFactory;nt("TilingType: "+a);const h=i[0],c=i[1],d=i[2],u=i[3],p=At.singularValueDecompose2dScale(this.matrix),f=At.singularValueDecompose2dScale(this.baseTransform),g=[p[0]*f[0],p[1]*f[1]],m=this.getSizeAndScale(s,this.ctx.canvas.width,g[0]),v=this.getSizeAndScale(n,this.ctx.canvas.height,g[1]),b=t.cachedCanvases.getCanvas("pattern",m.size,v.size,!0),y=b.context,_=l.createCanvasGraphics(y);_.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(_,r,o);let w=h,x=c,A=d,E=u;return h<0&&(w=0,A+=Math.abs(h)),c<0&&(x=0,E+=Math.abs(c)),y.translate(-m.scale*w,-v.scale*x),_.transform(m.scale,0,0,v.scale,0,0),y.save(),this.clipBbox(_,w,x,A,E),_.baseTransform=le(_.ctx),_.executeOperatorList(e),_.endDrawing(),{canvas:b.canvas,scaleX:m.scale,scaleY:v.scale,offsetX:w,offsetY:x}}getSizeAndScale(t,e,i){t=Math.abs(t);const s=Math.max(Ye.MAX_PATTERN_SIZE,e);let n=Math.ceil(t*i);return n>=s?n=s:i=n/t,{scale:i,size:n}}clipBbox(t,e,i,s,n){const r=s-e,a=n-i;t.ctx.rect(e,i,r,a),t.current.updateRectMinMax(le(t.ctx),[e,i,s,n]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,n=t.current;switch(e){case Ge:const t=this.ctx;s.fillStyle=t.fillStyle,s.strokeStyle=t.strokeStyle,n.fillColor=t.fillStyle,n.strokeColor=t.strokeStyle;break;case qe:const r=At.makeHexColor(i[0],i[1],i[2]);s.fillStyle=r,s.strokeStyle=r,n.fillColor=r,n.strokeColor=r;break;default:throw new mt(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,s){let n=i;s!==je&&(n=At.transform(n,e.baseTransform),this.matrix&&(n=At.transform(n,this.matrix)));const r=this.createPatternCanvas(e);let a=new DOMMatrix(n);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=t.createPattern(r.canvas,"repeat");return o.setTransform(a),o}}function Xe(t){let{src:e,srcPos:i=0,dest:s,width:n,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}=t;const l=wt.isLittleEndian?4278190080:255,[h,c]=o?[a,l]:[l,a],d=n>>3,u=7&n,p=e.length;s=new Uint32Array(s.buffer);let f=0;for(let g=0;g<r;g++){for(const n=i+d;i<n;i++){const t=i<p?e[i]:255;s[f++]=128&t?c:h,s[f++]=64&t?c:h,s[f++]=32&t?c:h,s[f++]=16&t?c:h,s[f++]=8&t?c:h,s[f++]=4&t?c:h,s[f++]=2&t?c:h,s[f++]=1&t?c:h}if(0===u)continue;const t=i<p?e[i++]:255;for(let e=0;e<u;e++)s[f++]=t&1<<7-e?c:h}return{srcPos:i,destPos:f}}const Ke=16;class Qe{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return void 0!==this.cache[t]?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Je(t,e,i,s,n,r,a,o,l,h){const[c,d,u,p,f,g]=le(t);if(0===d&&0===u){const m=a*c+f,v=Math.round(m),b=o*p+g,y=Math.round(b),_=(a+l)*c+f,w=Math.abs(Math.round(_)-v)||1,x=(o+h)*p+g,A=Math.abs(Math.round(x)-y)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(p),v,y),t.drawImage(e,i,s,n,r,0,0,w,A),t.setTransform(c,d,u,p,f,g),[w,A]}if(0===c&&0===p){const m=o*u+f,v=Math.round(m),b=a*d+g,y=Math.round(b),_=(o+h)*u+f,w=Math.abs(Math.round(_)-v)||1,x=(a+l)*d+g,A=Math.abs(Math.round(x)-y)||1;return t.setTransform(0,Math.sign(d),Math.sign(u),0,v,y),t.drawImage(e,i,s,n,r,0,0,A,w),t.setTransform(c,d,u,p,f,g),[A,w]}t.drawImage(e,i,s,n,r,a,o,l,h);return[Math.hypot(c,d)*l,Math.hypot(u,p)*h]}class Ze{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o,this.textMatrixScale=1,this.fontMatrix=l,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=w,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=At.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=At.applyTransform(e,t),s=At.applyTransform(e.slice(2),t),n=At.applyTransform([e[0],e[3]],t),r=At.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],s[0],n[0],r[0]),this.minY=Math.min(this.minY,i[1],s[1],n[1],r[1]),this.maxX=Math.max(this.maxX,i[0],s[0],n[0],r[0]),this.maxY=Math.max(this.maxY,i[1],s[1],n[1],r[1])}updateScalingPathMinMax(t,e){At.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,s,n,r,a,o,l,h){const c=At.bezierBoundingBox(e,i,s,n,r,a,o,l,h);h||this.updateRectMinMax(t,c)}getPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ne){e||at("Stroke bounding box must include transform.");const t=At.singularValueDecompose2dScale(e),s=t[0]*this.lineWidth/2,n=t[1]*this.lineWidth/2;i[0]-=s,i[1]-=n,i[2]+=s,i[3]+=n}return i}updateClipFromPath(){const t=At.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return At.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function ti(t,e){if("undefined"!==typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const i=e.height,s=e.width,n=i%Ke,r=(i-n)/Ke,a=0===n?r:r+1,o=t.createImageData(s,Ke);let l,h=0;const c=e.data,d=o.data;let u,p,f,g;if(e.kind===C.GRAYSCALE_1BPP){const e=c.byteLength,i=new Uint32Array(d.buffer,0,d.byteLength>>2),g=i.length,m=s+7>>3,v=4294967295,b=wt.isLittleEndian?4278190080:255;for(u=0;u<a;u++){for(f=u<r?Ke:n,l=0,p=0;p<f;p++){const t=e-h;let n=0;const r=t>m?s:8*t-7,a=-8&r;let o=0,d=0;for(;n<a;n+=8)d=c[h++],i[l++]=128&d?v:b,i[l++]=64&d?v:b,i[l++]=32&d?v:b,i[l++]=16&d?v:b,i[l++]=8&d?v:b,i[l++]=4&d?v:b,i[l++]=2&d?v:b,i[l++]=1&d?v:b;for(;n<r;n++)0===o&&(d=c[h++],o=128),i[l++]=d&o?v:b,o>>=1}for(;l<g;)i[l++]=0;t.putImageData(o,0,u*Ke)}}else if(e.kind===C.RGBA_32BPP){for(p=0,g=s*Ke*4,u=0;u<r;u++)d.set(c.subarray(h,h+g)),h+=g,t.putImageData(o,0,p),p+=Ke;u<a&&(g=s*n*4,d.set(c.subarray(h,h+g)),t.putImageData(o,0,p))}else{if(e.kind!==C.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(f=Ke,g=s*f,u=0;u<a;u++){for(u>=r&&(f=n,g=s*f),l=0,p=g;p--;)d[l++]=c[h++],d[l++]=c[h++],d[l++]=c[h++],d[l++]=255;t.putImageData(o,0,u*Ke)}}}function ei(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,s=e.width,n=i%Ke,r=(i-n)/Ke,a=0===n?r:r+1,o=t.createImageData(s,Ke);let l=0;const h=e.data,c=o.data;for(let d=0;d<a;d++){const e=d<r?Ke:n;({srcPos:l}=Xe({src:h,srcPos:l,dest:c,width:s,height:e,nonBlackColor:0})),t.putImageData(o,0,d*Ke)}}function ii(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)void 0!==t[s]&&(e[s]=t[s]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function si(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!a){const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}}function ni(t,e){if(e)return!0;const i=At.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Vt.PDF_TO_CSS_UNITS);return i[0]<=s&&i[1]<=s}const ri=["butt","round","square"],ai=["miter","round","bevel"],oi={},li={};class hi{constructor(t,e,i,s,n,r,a,o){let{optionalContentConfig:l,markedContentStack:h=null}=r;this.ctx=t,this.current=new Ze(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=n,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new Qe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing(t){let{transform:e,viewport:i,transparency:s=!1,background:n=null}=t;const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const t=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...le(this.compositeCtx))}this.ctx.save(),si(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=le(this.ctx)}executeOperatorList(t,e,i,s){const n=t.argsArray,r=t.fnArray;let a=e||0;const o=n.length;if(o===a)return a;const l=o-a>10&&"function"===typeof i,h=l?Date.now()+15:0;let c=0;const d=this.commonObjs,u=this.objs;let p;for(;;){if(void 0!==s&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(p=r[a],p!==Z.dependency)this[p].apply(this,n[a]);else for(const t of n[a]){const e=t.startsWith("g_")?d:u;if(!e.has(t))return e.get(t,i),a}if(a++,a===o)return a;if(l&&++c>10){if(Date.now()>h)return i(),a;c=0}}}#De(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#De(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#Re()}#Re(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width,s=t.height;let n,r,a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,h=s,c="prescale1";for(;a>2&&l>1||o>2&&h>1;){let e=l,i=h;a>2&&l>1&&(e=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/e),o>2&&h>1&&(i=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/i),n=this.cachedCanvases.getCanvas(c,e,i),r=n.context,r.clearRect(0,0,e,i),r.drawImage(t,0,0,l,h,0,0,e,i),t=n.canvas,l=e,h=i,c="prescale1"===c?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,n=this.current.fillColor,r=this.current.patternFill,a=le(e);let o,l,h,c;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),n]),o=this._cachedBitmapsMap.get(e),o||(o=new Map,this._cachedBitmapsMap.set(e,o));const i=o.get(l);if(i&&!r){return{canvas:i,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}h=i}h||(c=this.cachedCanvases.getCanvas("maskCanvas",i,s),ei(c.context,t));let d=At.transform(a,[1/i,0,0,-1/s,0,0]);d=At.transform(d,[1,0,0,1,0,-s]);const[u,p,f,g]=At.getAxialAlignedBoundingBox([0,0,i,s],d),m=Math.round(f-u)||1,v=Math.round(g-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",m,v),y=b.context,_=u,w=p;y.translate(-_,-w),y.transform(...d),h||(h=this._scaleImage(c.canvas,he(y)),h=h.img,o&&r&&o.set(l,h)),y.imageSmoothingEnabled=ni(le(y),t.interpolate),Je(y,h,0,0,h.width,h.height,0,0,i,s),y.globalCompositeOperation="source-in";const x=At.transform(he(y),[1,0,0,1,-_,-w]);return y.fillStyle=r?n.getPattern(e,this,x,Fe):n,y.fillRect(0,0,i,s),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(_),offsetY:Math.round(w)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=ri[t]}setLineJoin(t){this.ctx.lineJoin=ai[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const n=this.ctx;n.setTransform(...le(this.suspendedCtx)),ii(this.suspendedCtx,n),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,s,n,r,a){e.transform(t,i,s,n,r,a),this.__originalTransform(t,i,s,n,r,a)},t.setTransform=function(t,i,s,n,r,a){e.setTransform(t,i,s,n,r,a),this.__originalSetTransform(t,i,s,n,r,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,s,n,r,a){e.bezierCurveTo(t,i,s,n,r,a),this.__originalBezierCurveTo(t,i,s,n,r,a)},t.rect=function(t,i,s,n){e.rect(t,i,s,n),this.__originalRect(t,i,s,n)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ii(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const n=s[0],r=s[1],a=s[2]-n,o=s[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(e.context,i,a,o,e.subtype,e.backdrop,e.transferMap,n,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,n,r,a,o,l,h,c){let d=t.canvas,u=o-h,p=l-c;if(r)if(u<0||p<0||u+i>d.width||p+s>d.height){const t=this.cachedCanvases.getCanvas("maskExtension",i,s),e=t.context;e.drawImage(d,-u,-p),r.some((t=>0!==t))&&(e.globalCompositeOperation="destination-atop",e.fillStyle=At.makeHexColor(...r),e.fillRect(0,0,i,s),e.globalCompositeOperation="source-over"),d=t.canvas,u=p=0}else if(r.some((t=>0!==t))){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(u,p,i,s),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=At.makeHexColor(...r),t.fillRect(u,p,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===n&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===n&&(e.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,i,s),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(d,u,p,i,s,o,l,i,s),e.restore()}save(){this.inSMaskMode?(ii(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ii(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,n,r){this.ctx.transform(t,e,i,s,n,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const s=this.ctx,n=this.current;let r,a,o=n.x,l=n.y;const h=le(s),c=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],d=c?i.slice(0):null;for(let u=0,p=0,f=t.length;u<f;u++)switch(0|t[u]){case Z.rectangle:o=e[p++],l=e[p++];const t=e[p++],i=e[p++],u=o+t,f=l+i;s.moveTo(o,l),0===t||0===i?s.lineTo(u,f):(s.lineTo(u,l),s.lineTo(u,f),s.lineTo(o,f)),c||n.updateRectMinMax(h,[o,l,u,f]),s.closePath();break;case Z.moveTo:o=e[p++],l=e[p++],s.moveTo(o,l),c||n.updatePathMinMax(h,o,l);break;case Z.lineTo:o=e[p++],l=e[p++],s.lineTo(o,l),c||n.updatePathMinMax(h,o,l);break;case Z.curveTo:r=o,a=l,o=e[p+4],l=e[p+5],s.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],o,l),n.updateCurvePathMinMax(h,r,a,e[p],e[p+1],e[p+2],e[p+3],o,l,d),p+=6;break;case Z.curveTo2:r=o,a=l,s.bezierCurveTo(o,l,e[p],e[p+1],e[p+2],e[p+3]),n.updateCurvePathMinMax(h,r,a,o,l,e[p],e[p+1],e[p+2],e[p+3],d),o=e[p+2],l=e[p+3],p+=4;break;case Z.curveTo3:r=o,a=l,o=e[p+2],l=e[p+3],s.bezierCurveTo(e[p],e[p+1],o,l,o,l),n.updateCurvePathMinMax(h,r,a,e[p],e[p+1],o,l,o,l,d),p+=4;break;case Z.closePath:s.closePath()}c&&n.updateScalingPathMinMax(h,d),n.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof i&&null!==i&&void 0!==i&&i.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,he(e),Ne),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.ctx,i=this.current.fillColor;let s=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,he(e),Fe),s=!0);const n=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==n&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),s&&e.restore(),t&&this.consumePath(n)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=oi}eoClip(){this.pendingClip=li}beginText(){this.current.textMatrix=o,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var i;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||l,0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||rt("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=(null===(i=s.systemFontInfo)||void 0===i?void 0:i.css)||`"${r}", ${s.fallbackName}`;let o="normal";s.black?o="900":s.bold&&(o="bold");const h=s.italic?"italic":"normal";let c=e;e<16?c=16:e>100&&(c=100),this.current.fontSizeScale=e/c,this.ctx.font=`${h} ${o} ${c}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,n,r){this.current.textMatrix=[t,e,i,s,n,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s){const n=this.ctx,r=this.current,a=r.font,o=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,h=o&k,c=!!(o&S),d=r.patternFill&&!a.missingFile;let u;if((a.disableFontFace||c||d)&&(u=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||d?(n.save(),n.translate(e,i),n.beginPath(),u(n,l),s&&n.setTransform(...s),h!==w&&h!==A||n.fill(),h!==x&&h!==A||n.stroke(),n.restore()):(h!==w&&h!==A||n.fillText(t,e,i),h!==x&&h!==A||n.strokeText(t,e,i)),c){(this.pendingTextPaths||=[]).push({transform:le(n),x:e,y:i,fontSize:l,addToPath:u})}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return ht(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(0===s)return;const n=this.ctx,r=e.fontSizeScale,a=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,h=e.textHScale*l,c=t.length,d=i.vertical,u=d?1:-1,p=i.defaultVMetrics,f=s*e.fontMatrix[0],g=e.textRenderingMode===w&&!i.disableFontFace&&!e.patternFill;let m;if(n.save(),n.transform(...e.textMatrix),n.translate(e.x,e.y+e.textRise),l>0?n.scale(h,-1):n.scale(h,1),e.patternFill){n.save();const t=e.fillColor.getPattern(n,this,he(n),Fe);m=le(n),n.restore(),n.fillStyle=t}let v=e.lineWidth;const b=e.textMatrixScale;if(0===b||0===v){const t=e.textRenderingMode&k;t!==x&&t!==A||(v=this.getSinglePixelWidth())}else v/=b;if(1!==r&&(n.scale(r,r),v/=r),n.lineWidth=v,i.isInvalidPDFjsFont){const i=[];let s=0;for(const e of t)i.push(e.unicode),s+=e.width;return n.fillText(i.join(""),0,0),e.x+=s*f*h,n.restore(),void this.compose()}let y,_=0;for(y=0;y<c;++y){const e=t[y];if("number"===typeof e){_+=u*e*s/1e3;continue}let h=!1;const c=(e.isSpace?o:0)+a,v=e.fontChar,b=e.accent;let w,x,A=e.width;if(d){const t=e.vmetric||p,i=-(e.vmetric?t[1]:.5*A)*f,s=t[2]*f;A=t?-t[0]:A,w=i/r,x=(_+s)/r}else w=_/r,x=0;if(i.remeasure&&A>0){const t=1e3*n.measureText(v).width/s*r;if(A<t&&this.isFontSubpixelAAEnabled){const e=A/t;h=!0,n.save(),n.scale(e,1),w/=e}else A!==t&&(w+=(A-t)/2e3*s/r)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(g&&!b)n.fillText(v,w,x);else if(this.paintChar(v,w,x,m),b){const t=w+s*b.offset.x/r,e=x-s*b.offset.y/r;this.paintChar(b.fontChar,t,e,m)}_+=d?A*f-c*l:A*f+c*l,h&&n.restore()}d?e.y-=_:e.x+=_*h,n.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,n=i.fontSize,r=i.fontDirection,a=s.vertical?1:-1,o=i.charSpacing,h=i.wordSpacing,c=i.textHScale*r,d=i.fontMatrix||l,u=t.length;let p,f,g,m;if(!(i.textRenderingMode===E)&&0!==n){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(c,r),p=0;p<u;++p){if(f=t[p],"number"===typeof f){m=a*f*n/1e3,this.ctx.translate(m,0),i.x+=m*c;continue}const r=(f.isSpace?h:0)+o,l=s.charProcOperatorList[f.operatorListId];if(!l){rt(`Type3 character "${f.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=f,this.save(),e.scale(n,n),e.transform(...d),this.executeOperatorList(l),this.restore());g=At.applyTransform([f.width,0],d)[0]*n+r,e.translate(g,0),i.x+=g*c}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,n,r){this.ctx.rect(i,s,n-i,r-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const i=t[1],s=this.baseTransform||le(this.ctx),n={createCanvasGraphics:t=>new hi(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Ye(t,i,this.ctx,n,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const s=At.makeHexColor(t,e,i);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(t,e,i){const s=At.makeHexColor(t,e,i);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=function(t){switch(t[0]){case"RadialAxial":return new We(t);case"Mesh":return new $e(t);case"Dummy":return new Ue}throw new Error(`Unknown IR type: ${t[0]}`)}(this.getObject(t)),this.cachedPatterns.set(t,e)),i&&(e.matrix=i),e}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,he(e),je);const s=he(e);if(s){const{width:t,height:i}=e.canvas,[n,r,a,o]=At.getAxialAlignedBoundingBox([0,0,t,i],s);this.ctx.fillRect(n,r,a-n,o-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){at("Should not call beginInlineImage")}beginImageData(){at("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=le(this.ctx),e)){const t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax(le(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||nt("TODO: Support non-isolated groups."),t.knockout&&rt("Knockout groups not supported.");const i=le(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=At.getAxialAlignedBoundingBox(t.bbox,le(e));const n=[0,0,e.canvas.width,e.canvas.height];s=At.intersect(s,n)||[0,0,0,0];const r=Math.floor(s[0]),a=Math.floor(s[1]),o=Math.max(Math.ceil(s[2])-r,1),l=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const c=this.cachedCanvases.getCanvas(h,o,l),d=c.context;d.translate(-r,-a),d.transform(...i),t.smask?this.smaskStack.push({canvas:c.canvas,context:d,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,a),e.save()),ii(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=le(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const i=At.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,i,s,n){if(this.#De(),si(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const s=e[2]-e[0],r=e[3]-e[1];if(n&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=s,e[3]=r;const[n,a]=At.singularValueDecompose2dScale(le(this.ctx)),{viewportScale:o}=this,l=Math.ceil(s*this.outputScaleX*o),h=Math.ceil(r*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,h);const{canvas:c,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(t,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(n,0,0,-a,0,r*a),si(this.ctx)}else si(this.ctx),this.ctx.rect(e[0],e[1],s,r),this.ctx.clip(),this.endPath()}this.current=new Ze(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#Re(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const i=this.ctx,s=this.processingType3;if(s&&(void 0===s.compiled&&(s.compiled=function(t){const{width:e,height:i}=t;if(e>1e3||i>1e3)return null;const s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),n=e+1;let r,a,o,l=new Uint8Array(n*(i+1));const h=e+7&-8;let c=new Uint8Array(h*i),d=0;for(const g of t.data){let t=128;for(;t>0;)c[d++]=g&t?0:255,t>>=1}let u=0;for(d=0,0!==c[d]&&(l[0]=1,++u),a=1;a<e;a++)c[d]!==c[d+1]&&(l[a]=c[d]?2:1,++u),d++;for(0!==c[d]&&(l[a]=2,++u),r=1;r<i;r++){d=r*h,o=r*n,c[d-h]!==c[d]&&(l[o]=c[d]?1:8,++u);let t=(c[d]?4:0)+(c[d-h]?8:0);for(a=1;a<e;a++)t=(t>>2)+(c[d+1]?4:0)+(c[d-h+1]?8:0),s[t]&&(l[o+a]=s[t],++u),d++;if(c[d-h]!==c[d]&&(l[o+a]=c[d]?2:4,++u),u>1e3)return null}for(d=h*(i-1),o=r*n,0!==c[d]&&(l[o]=8,++u),a=1;a<e;a++)c[d]!==c[d+1]&&(l[o+a]=c[d]?4:8,++u),d++;if(0!==c[d]&&(l[o+a]=4,++u),u>1e3)return null;const p=new Int32Array([0,n,-1,0,-n,0,0,0,1]),f=new Path2D;for(r=0;u&&r<=i;r++){let t=r*n;const i=t+e;for(;t<i&&!l[t];)t++;if(t===i)continue;f.moveTo(t%n,r);const s=t;let a=l[t];do{const e=p[a];do{t+=e}while(!l[t]);const i=l[t];5!==i&&10!==i?(a=i,l[t]=0):(a=i&51*a>>4,l[t]&=a>>2|a<<2),f.lineTo(t%n,t/n|0),l[t]||--u}while(s!==t);--r}return c=null,l=null,function(t){t.save(),t.scale(1/e,-1/i),t.translate(0,-i),t.fill(f),t.beginPath(),t.restore()}}(t)),s.compiled))return void s.compiled(i);const n=this._createMaskCanvas(t),r=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const o=le(a);a.transform(e,i,s,n,0,0);const l=this._createMaskCanvas(t);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let h=0,c=r.length;h<c;h+=2){const t=At.transform(o,[e,i,s,n,r[h],r[h+1]]),[c,d]=At.applyTransform([0,0],t);a.drawImage(l.canvas,c,d)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const n of t){const{data:t,width:r,height:a,transform:o}=n,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),h=l.context;h.save();ei(h,this.getObject(t,n)),h.globalCompositeOperation="source-in",h.fillStyle=s?i.getPattern(h,this,he(e),Fe):i,h.fillRect(0,0,r,a),h.restore(),e.save(),e.transform(...o),e.scale(1,-1),Je(e,l.canvas,0,0,r,a,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):rt("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const n=this.getObject(t);if(!n)return void rt("Dependent image isn't ready yet");const r=n.width,a=n.height,o=[];for(let l=0,h=s.length;l<h;l+=2)o.push({transform:[e,0,0,i,s[l],s[l+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(n,o)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:i,height:s}=t,n=this.cachedCanvases.getCanvas("inlineImage",i,s),r=n.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",n.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;if(this.save(),!a){const{filter:t}=s;"none"!==t&&""!==t&&(s.filter="none")}let n;if(s.scale(1/e,-1/i),t.bitmap)n=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)n=t;else{const s=this.cachedCanvases.getCanvas("inlineImage",e,i).context;ti(s,t),n=this.applyTransferMapsToCanvas(s)}const r=this._scaleImage(n,he(s));s.imageSmoothingEnabled=ni(le(s),t.interpolate),Je(s,r.img,0,0,r.paintWidth,r.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const e=t.width,i=t.height,n=this.cachedCanvases.getCanvas("inlineImage",e,i).context;ti(n,t),s=this.applyTransferMapsToCanvas(n)}for(const n of e)i.save(),i.transform(...n.transform),i.scale(1,-1),Je(i,s,n.x,n.y,n.w,n.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===li?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=le(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:n}=this.ctx.getTransform();let r,a;if(0===i&&0===s){const i=Math.abs(e),s=Math.abs(n);if(i===s)if(0===t)r=a=1/i;else{const e=i*t;r=a=e<1?1/e:1}else if(0===t)r=1/i,a=1/s;else{const e=i*t,n=s*t;r=e<1?1/e:1,a=n<1?1/n:1}}else{const o=Math.abs(e*n-i*s),l=Math.hypot(e,i),h=Math.hypot(s,n);if(0===t)r=h/o,a=l/o;else{const e=t*o;r=h>e?h/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[s,n]=this.getScaleForStroking();if(e.lineWidth=i||1,1===s&&1===n)return void e.stroke();const r=e.getLineDash();if(t&&e.save(),e.scale(s,n),r.length>0){const t=Math.max(s,n);e.setLineDash(r.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const Sn in Z)void 0!==hi.prototype[Sn]&&(hi.prototype[Z[Sn]]=hi.prototype[Sn]);class ci{static#Le=null;static#Oe="";static get workerPort(){return this.#Le}static set workerPort(t){if(!("undefined"!==typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");this.#Le=t}static get workerSrc(){return this.#Oe}static set workerSrc(t){if("string"!==typeof t)throw new Error("Invalid `workerSrc` type.");this.#Oe=t}}const di=1,ui=2,pi=1,fi=2,gi=3,mi=4,vi=5,bi=6,yi=7,_i=8;function wi(t){switch(t instanceof Error||"object"===typeof t&&null!==t||at('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new vt(t.message);case"MissingPDFException":return new ft(t.message);case"PasswordException":return new dt(t.message,t.code);case"UnexpectedResponseException":return new gt(t.message,t.status);case"UnknownErrorException":return new ut(t.message,t.details);default:return new ut(t.message,t.toString())}}class xi{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#Ie(e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===di)i.resolve(e.data);else{if(e.callback!==ui)throw new Error("Unexpected callback case");i.reject(wi(e.reason))}return}const s=this.actionHandler[e.action];if(!s)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,n=e.sourceName;new Promise((function(t){t(s(e.data))})).then((function(s){i.postMessage({sourceName:t,targetName:n,callback:di,callbackId:e.callbackId,data:s})}),(function(s){i.postMessage({sourceName:t,targetName:n,callback:ui,callbackId:e.callbackId,reason:wi(s)})}))}else e.streamId?this.#Fe(e):s(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,n=Promise.withResolvers();this.callbackCapabilities[s]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(r){n.reject(r)}return n.promise}sendWithStream(t,e,i,s){const n=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:i=>{const l=Promise.withResolvers();return this.streamControllers[n]={controller:i,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:t,streamId:n,data:e,desiredSize:i.desiredSize},s),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[n].pullCall=e,o.postMessage({sourceName:r,targetName:a,stream:bi,streamId:n,desiredSize:t.desiredSize}),e.promise},cancel:t=>{ot(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[n].cancelCall=e,this.streamControllers[n].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:pi,streamId:n,reason:wi(t)}),e.promise}},i)}#Fe(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,r=this,a=this.actionHandler[t.action],o={enqueue(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),n.postMessage({sourceName:i,targetName:s,stream:mi,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:gi,streamId:e}),delete r.streamSinks[e])},error(t){ot(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:s,stream:vi,streamId:e,reason:wi(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,new Promise((function(e){e(a(t.data,o))})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:_i,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:_i,streamId:e,reason:wi(t)})}))}#Ie(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,n=this.comObj,r=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case _i:t.success?r.startCall.resolve():r.startCall.reject(wi(t.reason));break;case yi:t.success?r.pullCall.resolve():r.pullCall.reject(wi(t.reason));break;case bi:if(!a){n.postMessage({sourceName:i,targetName:s,stream:yi,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise((function(t){var e;t(null===(e=a.onPull)||void 0===e?void 0:e.call(a))})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:yi,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:yi,streamId:e,reason:wi(t)})}));break;case mi:if(ot(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case gi:if(ot(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),this.#Ne(r,e);break;case vi:ot(r,"error should have stream controller"),r.controller.error(wi(t.reason)),this.#Ne(r,e);break;case fi:t.success?r.cancelCall.resolve():r.cancelCall.reject(wi(t.reason)),this.#Ne(r,e);break;case pi:if(!a)break;new Promise((function(e){var i;e(null===(i=a.onCancel)||void 0===i?void 0:i.call(a,wi(t.reason)))})).then((function(){n.postMessage({sourceName:i,targetName:s,stream:fi,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:i,targetName:s,stream:fi,streamId:e,reason:wi(t)})})),a.sinkCapability.reject(wi(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#Ne(t,e){var i,s,n;await Promise.allSettled([null===(i=t.startCall)||void 0===i?void 0:i.promise,null===(s=t.pullCall)||void 0===s?void 0:s.promise,null===(n=t.cancelCall)||void 0===n?void 0:n.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class Ai{#je;#Be;constructor(t){let{parsedData:e,rawData:i}=t;this.#je=e,this.#Be=i}getRaw(){return this.#Be}get(t){return this.#je.get(t)??null}getAll(){return _t(this.#je)}has(t){return this.#je.has(t)}}const Ei=Symbol("INTERNAL");class ki{#He=!1;#We=!1;#ze=!1;#Ve=!0;constructor(t,e){let{name:i,intent:s,usage:n}=e;this.#He=!!(t&d),this.#We=!!(t&u),this.name=i,this.intent=s,this.usage=n}get visible(){if(this.#ze)return this.#Ve;if(!this.#Ve)return!1;const{print:t,view:e}=this.usage;return this.#He?"OFF"!==(null===e||void 0===e?void 0:e.viewState):!this.#We||"OFF"!==(null===t||void 0===t?void 0:t.printState)}_setVisible(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==Ei&&at("Internal method `_setVisible` called."),this.#ze=i,this.#Ve=e}}class Si{#$e=null;#Ue=new Map;#Ge=null;#qe=null;constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;if(this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,this.#qe=t.order;for(const i of t.groups)this.#Ue.set(i.id,new ki(e,i));if("OFF"===t.baseState)for(const t of this.#Ue.values())t._setVisible(Ei,!1);for(const e of t.on)this.#Ue.get(e)._setVisible(Ei,!0);for(const e of t.off)this.#Ue.get(e)._setVisible(Ei,!1);this.#Ge=this.getHash()}}#Ye(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const e=t[s];let n;if(Array.isArray(e))n=this.#Ye(e);else{if(!this.#Ue.has(e))return rt(`Optional content group not found: ${e}`),!0;n=this.#Ue.get(e).visible}switch(i){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return"And"===i}isVisible(t){if(0===this.#Ue.size)return!0;if(!t)return nt("Optional content group not defined."),!0;if("OCG"===t.type)return this.#Ue.has(t.id)?this.#Ue.get(t.id).visible:(rt(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this.#Ye(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#Ue.has(e))return rt(`Optional content group not found: ${e}`),!0;if(this.#Ue.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this.#Ue.has(e))return rt(`Optional content group not found: ${e}`),!0;if(!this.#Ue.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#Ue.has(e))return rt(`Optional content group not found: ${e}`),!0;if(!this.#Ue.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#Ue.has(e))return rt(`Optional content group not found: ${e}`),!0;if(this.#Ue.get(e).visible)return!1}return!0}return rt(`Unknown optional content policy ${t.policy}.`),!0}return rt(`Unknown group type ${t.type}.`),!0}setVisibility(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.#Ue.get(t);i?(i._setVisible(Ei,!!e,!0),this.#$e=null):rt(`Optional content group not found: ${t}`)}setOCGState(t){let e,{state:i,preserveRB:s}=t;for(const n of i){switch(n){case"ON":case"OFF":case"Toggle":e=n;continue}const t=this.#Ue.get(n);if(t)switch(e){case"ON":t._setVisible(Ei,!0);break;case"OFF":t._setVisible(Ei,!1);break;case"Toggle":t._setVisible(Ei,!t.visible)}}this.#$e=null}get hasInitialVisibility(){return null===this.#Ge||this.getHash()===this.#Ge}getOrder(){return this.#Ue.size?this.#qe?this.#qe.slice():[...this.#Ue.keys()]:null}getGroups(){return this.#Ue.size>0?_t(this.#Ue):null}getGroup(t){return this.#Ue.get(t)||null}getHash(){if(null!==this.#$e)return this.#$e;const t=new Se;for(const[e,i]of this.#Ue)t.update(`${e}:${i.visible}`);return this.#$e=t.hexdigest()}}class Ci{constructor(t,e){let{disableRange:i=!1,disableStream:s=!1}=e;ot(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===r||void 0===r?void 0:r.length)>0){const t=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),t.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),t.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),t.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),t.transportReady()}_onReceiveData(t){let{begin:e,chunk:i}=t;const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{ot(this._rangeReaders.some((function(t){return t._begin===e&&(t._enqueue(s),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return(null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)??0}_onProgress(t){var e,i,s,n;void 0===t.total?null===(e=this._rangeReaders[0])||void 0===e||null===(i=e.onProgress)||void 0===i||i.call(e,{loaded:t.loaded}):null===(s=this._fullRequestReader)||void 0===s||null===(n=s.onProgress)||void 0===n||n.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;null===(t=this._fullRequestReader)||void 0===t||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ot(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Pi(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ti(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Pi{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=t,this._done=i||!1,this._filename=Qt(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const n of this._queuedChunks)this._loaded+=n.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ti{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Mi(t){let{getResponseHeader:e,isHttp:i,rangeChunkSize:s,disableRange:n}=t;const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e("Content-Length"),10);if(!Number.isInteger(a))return r;if(r.suggestedLength=a,a<=2*s)return r;if(n||!i)return r;if("bytes"!==e("Accept-Ranges"))return r;return"identity"!==(e("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function Di(t){const e=t("Content-Disposition");if(e){let t=function(t){let e=!0,i=s("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=o(t),t=l(t),r(t)}if(i=function(t){const e=[];let i;const n=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=n.exec(t));){let[,t,s,n]=i;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[s,n]}const r=[];for(let s=0;s<e.length&&s in e;++s){let[t,i]=e[s];i=a(i),t&&(i=unescape(i),0===s&&(i=o(i))),r.push(i)}return r.join("")}(t),i)return r(l(i));if(i=s("filename","i").exec(t),i){i=i[1];let t=a(i);return t=l(t),r(t)}function s(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function n(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const s=new TextDecoder(t,{fatal:!0}),n=yt(i);i=s.decode(n),e=!1}catch{}}return i}function r(t){return e&&/[\x80-\xff]/.test(t)&&(t=n("utf-8",t),e&&(t=n("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:n(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,s){if("q"===i||"Q"===i)return n(e,s=(s=s.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{s=atob(s)}catch{}return n(e,s)}))}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Qt(t))return t}return null}function Ri(t,e){return 404===t||0===t&&e.startsWith("file:")?new ft('Missing PDF "'+e+'".'):new gt(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function Li(t){return 200===t||206===t}function Oi(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Ii(t){const e=new Headers;for(const i in t){const s=t[i];void 0!==s&&e.append(i,s)}return e}function Fi(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(rt(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class Ni{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return(null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)??0}getFullReader(){return ot(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ji(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Bi(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class ji{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=Ii(this._stream.httpHeaders);const i=e.url;fetch(i,Oi(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!Li(t.status))throw Ri(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:s,suggestedLength:n}=Mi({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=n||this._contentLength,this._filename=Di(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vt("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Fi(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class Bi{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=Ii(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const n=s.url;fetch(n,Oi(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!Li(t.status))throw Ri(t.status,n);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;const{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded}),{value:Fi(e),done:!1})}cancel(t){var e;null===(e=this._reader)||void 0===e||e.cancel(t),this._abortController.abort()}}class Hi{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const s={begin:t,end:e};for(const n in i)s[n]=i[n];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const n in this.httpHeaders){const t=this.httpHeaders[n];void 0!==t&&e.setRequestHeader(n,t)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=206):s.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var i;const s=this.pendingRequests[t];s&&(null===(i=s.onProgress)||void 0===i||i.call(s,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==s.readyState)return;if(!(t in this.pendingRequests))return;var n;if(delete this.pendingRequests[t],0===s.status&&this.isHttp)return void(null===(n=i.onError)||void 0===n||n.call(i,s.status));const r=s.status||200;var a;if(!(200===r&&206===i.expectedStatus)&&r!==i.expectedStatus)return void(null===(a=i.onError)||void 0===a||a.call(i,s.status));const o=function(t){const e=t.response;return"string"!==typeof e?e:yt(e).buffer}(s);if(206===r){const t=s.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);i.onDone({begin:parseInt(e[1],10),chunk:o})}else if(o)i.onDone({begin:0,chunk:o});else{var l;null===(l=i.onError)||void 0===l||l.call(i,s.status)}}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Wi{constructor(t){this._source=t,this._manager=new Hi(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ot(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new zi(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Vi(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class zi{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=t=>e.getResponseHeader(t),{allowRangeRequests:s,suggestedLength:n}=Mi({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=Di(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Ri(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Vi{constructor(t,e,i){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;null===(t=this.onClosed)||void 0===t||t.call(this,this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Ri(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:t.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $i=/^file:\/\/\/[a-zA-Z]:\//;class Ui{constructor(t){this.source=t,this.url=function(t){const e=Oe.get("url"),i=e.parse(t);return"file:"===i.protocol||i.host?i:/^[a-z]:[/\\]/i.test(t)?e.parse(`file:///${t}`):(i.host||(i.protocol="file:"),i)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return(null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)??0}getFullReader(){return ot(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Qi(this):new Xi(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new Ji(this,t,e):new Ki(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;null===(e=this._fullRequestReader)||void 0===e||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Gi{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vt("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class qi{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=e.length,null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:this._loaded});return{value:new Uint8Array(e).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function Yi(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class Xi extends Gi{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new ft(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const i=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:s,suggestedLength:n}=Mi({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=n||this._contentLength,this._filename=Di(i)};if(this._request=null,"http:"===this._url.protocol){const i=Oe.get("http");this._request=i.request(Yi(this._url,t.httpHeaders),e)}else{const i=Oe.get("https");this._request=i.request(Yi(this._url,t.httpHeaders),e)}this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class Ki extends qi{constructor(t,e,i){super(t),this._httpHeaders={};for(const n in t.httpHeaders){const e=t.httpHeaders[n];void 0!==e&&(this._httpHeaders[n]=e)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const s=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new ft(`Missing PDF "${this._url}".`);this._storedError=t}};if(this._request=null,"http:"===this._url.protocol){const t=Oe.get("http");this._request=t.request(Yi(this._url,this._httpHeaders),s)}else{const t=Oe.get("https");this._request=t.request(Yi(this._url,this._httpHeaders),s)}this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class Qi extends Gi{constructor(t){super(t);let e=decodeURIComponent(this._url.path);$i.test(this._url.href)&&(e=e.replace(/^\//,""));const i=Oe.get("fs");i.promises.lstat(e).then((t=>{this._contentLength=t.size,this._setReadableStream(i.createReadStream(e)),this._headersCapability.resolve()}),(t=>{"ENOENT"===t.code&&(t=new ft(`Missing PDF "${e}".`)),this._storedError=t,this._headersCapability.reject(t)}))}}class Ji extends qi{constructor(t,e,i){super(t);let s=decodeURIComponent(this._url.path);$i.test(this._url.href)&&(s=s.replace(/^\//,""));const n=Oe.get("fs");this._setReadableStream(n.createReadStream(s,{start:e,end:i-1}))}}const Zi=30;class ts{#Xe=Promise.withResolvers();#mt=null;#Ke=!1;#Qe=!(null===(s=globalThis.FontInspector)||void 0===s||!s.enabled);#Je=null;#Ze=null;#ti=0;#ei=0;#ii=null;#si=null;#ni=0;#ri=0;#ai=Object.create(null);#oi=[];#li=null;#hi=[];#ci=new WeakMap;#di=null;static#ui=new Map;static#pi=new Map;static#fi=null;static#gi=new Set;constructor(t){let{textContentSource:e,container:i,viewport:s}=t;if(e instanceof ReadableStream)this.#li=e;else{if("object"!==typeof e)throw new Error('No "textContentSource" parameter specified.');this.#li=new ReadableStream({start(t){t.enqueue(e),t.close()}})}this.#mt=this.#si=i,this.#ri=s.scale*(globalThis.devicePixelRatio||1),this.#ni=s.rotation,this.#Ze={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:n,pageHeight:r,pageX:a,pageY:o}=s.rawDims;this.#di=[1,0,0,-1,-a,o+r],this.#ei=n,this.#ti=r,ts.#mi(),ce(i,s),this.#Xe.promise.catch((()=>{})).then((()=>{ts.#gi.delete(this),this.#Ze=null,this.#ai=null}))}render(){const t=()=>{this.#ii.read().then((e=>{let{value:i,done:s}=e;s?this.#Xe.resolve():(this.#Je??=i.lang,Object.assign(this.#ai,i.styles),this.#vi(i.items),t())}),this.#Xe.reject)};return this.#ii=this.#li.getReader(),ts.#gi.add(this),t(),this.#Xe.promise}update(t){let{viewport:e,onBefore:i=null}=t;const s=e.scale*(globalThis.devicePixelRatio||1),n=e.rotation;if(n!==this.#ni&&(null===i||void 0===i||i(),this.#ni=n,ce(this.#si,{rotation:n})),s!==this.#ri){null===i||void 0===i||i(),this.#ri=s;const t={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:ts.#bi(this.#Je)};for(const e of this.#hi)t.properties=this.#ci.get(e),t.div=e,this.#yi(t)}}cancel(){var t;const e=new vt("TextLayer task cancelled.");null===(t=this.#ii)||void 0===t||t.cancel(e).catch((()=>{})),this.#ii=null,this.#Xe.reject(e)}get textDivs(){return this.#hi}get textContentItemsStr(){return this.#oi}#vi(t){if(this.#Ke)return;this.#Ze.ctx??=ts.#bi(this.#Je);const e=this.#hi,i=this.#oi;for(const s of t){if(e.length>1e5)return rt("Ignoring additional textDivs for performance reasons."),void(this.#Ke=!0);if(void 0!==s.str)i.push(s.str),this.#_i(s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const t=this.#mt;this.#mt=document.createElement("span"),this.#mt.classList.add("markedContent"),null!==s.id&&this.#mt.setAttribute("id",`${s.id}`),t.append(this.#mt)}else"endMarkedContent"===s.type&&(this.#mt=this.#mt.parentNode)}}#_i(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};this.#hi.push(e);const s=At.transform(this.#di,t.transform);let n=Math.atan2(s[1],s[0]);const r=this.#ai[t.fontName];r.vertical&&(n+=Math.PI/2);const a=this.#Qe&&r.fontSubstitution||r.fontFamily,o=Math.hypot(s[2],s[3]),l=o*ts.#wi(a,this.#Je);let h,c;0===n?(h=s[4],c=s[5]-l):(h=s[4]+l*Math.sin(n),c=s[5]-l*Math.cos(n));const d="calc(var(--scale-factor)*",u=e.style;this.#mt===this.#si?(u.left=`${(100*h/this.#ei).toFixed(2)}%`,u.top=`${(100*c/this.#ti).toFixed(2)}%`):(u.left=`${d}${h.toFixed(2)}px)`,u.top=`${d}${c.toFixed(2)}px)`),u.fontSize=`${d}${(ts.#fi*o).toFixed(2)}px)`,u.fontFamily=a,i.fontSize=o,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#Qe&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),0!==n&&(i.angle=n*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(p=!0)}if(p&&(i.canvasWidth=r.vertical?t.height:t.width),this.#ci.set(e,i),this.#Ze.div=e,this.#Ze.properties=i,this.#yi(this.#Ze),i.hasText&&this.#mt.append(e),i.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this.#mt.append(t)}}#yi(t){const{div:e,properties:i,ctx:s,prevFontSize:n,prevFontFamily:r}=t,{style:a}=e;let o="";if(ts.#fi>1&&(o=`scale(${1/ts.#fi})`),0!==i.canvasWidth&&i.hasText){const{fontFamily:l}=a,{canvasWidth:h,fontSize:c}=i;n===c&&r===l||(s.font=`${c*this.#ri}px ${l}`,t.prevFontSize=c,t.prevFontFamily=l);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${h*this.#ri/d}) ${o}`)}0!==i.angle&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#gi.size>0)){this.#ui.clear();for(const{canvas:t}of this.#pi.values())t.remove();this.#pi.clear()}}static#bi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.#pi.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#pi.set(t,e)}return e}static#mi(){if(null!==this.#fi)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.textContent="X",document.body.append(t),this.#fi=t.getBoundingClientRect().height,t.remove()}static#wi(t,e){const i=this.#ui.get(t);if(i)return i;const s=this.#bi(e),n=s.font;s.canvas.width=s.canvas.height=Zi,s.font=`30px ${t}`;const r=s.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const e=a/(a+o);return this.#ui.set(t,e),s.canvas.width=s.canvas.height=0,s.font=n,e}s.strokeStyle="red",s.clearRect(0,0,Zi,Zi),s.strokeText("g",0,0);let l=s.getImageData(0,0,Zi,Zi).data;o=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){o=Math.ceil(c/4/Zi);break}s.clearRect(0,0,Zi,Zi),s.strokeText("A",0,Zi),l=s.getImageData(0,0,Zi,Zi).data,a=0;for(let c=0,d=l.length;c<d;c+=4)if(l[c]>0){a=Zi-Math.floor(c/4/Zi);break}s.canvas.width=s.canvas.height=0,s.font=n;const h=a?a/(a+o):.8;return this.#ui.set(t,h),h}}function es(){se("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:t,container:e,viewport:i,...s}=arguments[0],n=Object.keys(s);n.length>0&&rt("Ignoring `renderTextLayer` parameters: "+n.join(", "));const r=new ts({textContentSource:t,container:e,viewport:i}),{textDivs:a,textContentItemsStr:o}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:o}}function is(){se("`updateTextLayer`, please use `TextLayer` instead.")}class ss{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};return function t(i){var s;if(!i)return;let n=null;const r=i.name;if("#text"===r)n=i.value;else{if(!ss.shouldBuildText(r))return;null!==i&&void 0!==i&&null!==(s=i.attributes)&&void 0!==s&&s.textContent?n=i.attributes.textContent:i.value&&(n=i.value)}if(null!==n&&e.push({str:n}),i.children)for(const e of i.children)t(e)}(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}const ns=65536,rs=a?class extends jt{_createCanvas(t,e){return Oe.get("canvas").createCanvas(t,e)}}:class extends jt{constructor(){let{ownerDocument:t=globalThis.document,enableHWA:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},as=a?class extends Bt{_fetchData(t,e){return Ie(t).then((t=>({cMapData:t,compressionType:e})))}}:Ut,os=a?class extends Nt{}:class extends Nt{#xi;#Ai;#Ei;#ki;#Si;#v=0;constructor(){let{docId:t,ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.#Ei=t,this.#ki=e}get#y(){return this.#xi||=new Map}get#Ci(){return this.#Si||=new Map}get#Pi(){if(!this.#Ai){const t=this.#ki.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#ki.createElementNS(zt,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#Ai=this.#ki.createElementNS(zt,"defs"),t.append(i),i.append(this.#Ai),this.#ki.body.append(t)}return this.#Ai}#Ti(t){if(1===t.length){const e=t[0],i=new Array(256);for(let t=0;t<256;t++)i[t]=e[t]/255;const s=i.join(",");return[s,s,s]}const[e,i,s]=t,n=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)n[o]=e[o]/255,r[o]=i[o]/255,a[o]=s[o]/255;return[n.join(","),r.join(","),a.join(",")]}addFilter(t){if(!t)return"none";let e=this.#y.get(t);if(e)return e;const[i,s,n]=this.#Ti(t),r=1===t.length?i:`${i}${s}${n}`;if(e=this.#y.get(r),e)return this.#y.set(t,e),e;const a=`g_${this.#Ei}_transfer_map_${this.#v++}`,o=`url(#${a})`;this.#y.set(t,o),this.#y.set(r,o);const l=this.#Mi(a);return this.#Di(i,s,n,l),o}addHCMFilter(t,e){var i;const s=`${t}-${e}`,n="base";let r=this.#Ci.get(n);if((null===(i=r)||void 0===i?void 0:i.key)===s)return r.url;var a;r?(null===(a=r.filter)||void 0===a||a.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},this.#Ci.set(n,r));if(!t||!e)return r.url;const o=this.#Ri(t);t=At.makeHexColor(...o);const l=this.#Ri(e);if(e=At.makeHexColor(...l),this.#Pi.style.color="","#000000"===t&&"#ffffff"===e||t===e)return r.url;const h=new Array(256);for(let f=0;f<=255;f++){const t=f/255;h[f]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const c=h.join(","),d=`g_${this.#Ei}_hcm_filter`,u=r.filter=this.#Mi(d);this.#Di(c,c,c,u),this.#Li(u);const p=(t,e)=>{const i=o[t]/255,s=l[t]/255,n=new Array(e+1);for(let r=0;r<=e;r++)n[r]=i+r/e*(s-i);return n.join(",")};return this.#Di(p(0,5),p(1,5),p(2,5),u),r.url=`url(#${d})`,r.url}addAlphaFilter(t){let e=this.#y.get(t);if(e)return e;const[i]=this.#Ti([t]),s=`alpha_${i}`;if(e=this.#y.get(s),e)return this.#y.set(t,e),e;const n=`g_${this.#Ei}_alpha_map_${this.#v++}`,r=`url(#${n})`;this.#y.set(t,r),this.#y.set(s,r);const a=this.#Mi(n);return this.#Oi(i,a),r}addLuminosityFilter(t){let e,i,s=this.#y.get(t||"luminosity");if(s)return s;if(t?([e]=this.#Ti([t]),i=`luminosity_${e}`):i="luminosity",s=this.#y.get(i),s)return this.#y.set(t,s),s;const n=`g_${this.#Ei}_luminosity_map_${this.#v++}`,r=`url(#${n})`;this.#y.set(t,r),this.#y.set(i,r);const a=this.#Mi(n);return this.#Ii(a),t&&this.#Oi(e,a),r}addHighlightHCMFilter(t,e,i,s,n){var r;const a=`${e}-${i}-${s}-${n}`;let o=this.#Ci.get(t);if((null===(r=o)||void 0===r?void 0:r.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#Ci.set(t,o));if(!e||!i)return o.url;const[h,c]=[e,i].map(this.#Ri.bind(this));let d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[p,f]=[s,n].map(this.#Ri.bind(this));u<d&&([d,u,p,f]=[u,d,f,p]),this.#Pi.style.color="";const g=(t,e,i)=>{const s=new Array(256),n=(u-d)/i,r=t/255,a=(e-t)/(255*i);let o=0;for(let l=0;l<=i;l++){const t=Math.round(d+l*n),e=r+l*a;for(let i=o;i<=t;i++)s[i]=e;o=t+1}for(let l=o;l<256;l++)s[l]=s[o-1];return s.join(",")},m=`g_${this.#Ei}_hcm_${t}_filter`,v=o.filter=this.#Mi(m);return this.#Li(v),this.#Di(g(p[0],f[0],5),g(p[1],f[1],5),g(p[2],f[2],5),v),o.url=`url(#${m})`,o.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==this.#Ci.size||(this.#Ai&&(this.#Ai.parentNode.parentNode.remove(),this.#Ai=null),this.#xi&&(this.#xi.clear(),this.#xi=null),this.#v=0)}#Ii(t){const e=this.#ki.createElementNS(zt,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#Li(t){const e=this.#ki.createElementNS(zt,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#Mi(t){const e=this.#ki.createElementNS(zt,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#Pi.append(e),e}#Fi(t,e,i){const s=this.#ki.createElementNS(zt,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)}#Di(t,e,i,s){const n=this.#ki.createElementNS(zt,"feComponentTransfer");s.append(n),this.#Fi(n,"feFuncR",t),this.#Fi(n,"feFuncG",e),this.#Fi(n,"feFuncB",i)}#Oi(t,e){const i=this.#ki.createElementNS(zt,"feComponentTransfer");e.append(i),this.#Fi(i,"feFuncA",t)}#Ri(t){return this.#Pi.style.color=t,oe(getComputedStyle(this.#Pi).getPropertyValue("color"))}},ls=a?class extends Ht{_fetchData(t){return Ie(t)}}:Gt;function hs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof t||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new ds,{docId:i}=e,s=t.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(a&&"string"===typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,n=t.data?function(t){if(a&&"undefined"!==typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"===typeof t)return yt(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===typeof t&&!isNaN(null===t||void 0===t?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,r=t.httpHeaders||null,o=!0===t.withCredentials,l=t.password??null,h=t.range instanceof us?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:ns;let d=t.worker instanceof vs?t.worker:null;const u=t.verbosity,p="string"!==typeof t.docBaseUrl||Kt(t.docBaseUrl)?null:t.docBaseUrl,f="string"===typeof t.cMapUrl?t.cMapUrl:null,g=!1!==t.cMapPacked,m=t.CMapReaderFactory||as,v="string"===typeof t.standardFontDataUrl?t.standardFontDataUrl:null,b=t.StandardFontDataFactory||ls,y=!0!==t.stopAtErrors,_=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,w=!1!==t.isEvalSupported,x="boolean"===typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!a,A=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,E="boolean"===typeof t.disableFontFace?t.disableFontFace:a,k=!0===t.fontExtraProperties,S=!0===t.enableXfa,C=t.ownerDocument||globalThis.document,P=!0===t.disableRange,T=!0===t.disableStream,M=!0===t.disableAutoFetch,D=!0===t.pdfBug,R=!0===t.enableHWA,L=h?h.length:t.length??NaN,O="boolean"===typeof t.useSystemFonts?t.useSystemFonts:!a&&!E,I="boolean"===typeof t.useWorkerFetch?t.useWorkerFetch:m===Ut&&b===Gt&&f&&v&&ee(f,document.baseURI)&&ee(v,document.baseURI),F=t.canvasFactory||new rs({ownerDocument:C,enableHWA:R}),N=t.filterFactory||new os({docId:i,ownerDocument:C});it(u);const j={canvasFactory:F,filterFactory:N};if(I||(j.cMapReaderFactory=new m({baseUrl:f,isCompressed:g}),j.standardFontDataFactory=new b({baseUrl:v})),!d){const t={verbosity:u,port:ci.workerPort};d=t.port?vs.fromPort(t):new vs(t),e._worker=d}const B={docId:i,apiVersion:"4.4.168",data:n,password:l,disableAutoFetch:M,rangeChunkSize:c,length:L,docBaseUrl:p,enableXfa:S,evaluatorOptions:{maxImageSize:_,disableFontFace:E,ignoreErrors:y,isEvalSupported:w,isOffscreenCanvasSupported:x,canvasMaxAreaInBytes:A,fontExtraProperties:k,useSystemFonts:O,cMapUrl:I?f:null,standardFontDataUrl:I?v:null}},H={disableFontFace:E,fontExtraProperties:k,ownerDocument:C,pdfBug:D,styleElement:null,loadingParams:{disableAutoFetch:M,enableXfa:S}};return d.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const t=d.messageHandler.sendWithPromise("GetDocRequest",B,n?[n.buffer]:null);let l;if(h)l=new Ci(h,{disableRange:P,disableStream:T});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");l=(t=>{if(a){return function(){return"undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype}()&&ee(t.url)?new Ni(t):new Ui(t)}return ee(t.url)?new Ni(t):new Wi(t)})({url:s,length:L,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:P,disableStream:T})}return t.then((t=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const s=new xi(i,t,d.port),n=new bs(s,e,l,H,j);e._transport=n,s.send("Ready",null)}))})).catch(e._capability.reject),e}function cs(t){return"object"===typeof t&&Number.isInteger(null===t||void 0===t?void 0:t.num)&&t.num>=0&&Number.isInteger(null===t||void 0===t?void 0:t.gen)&&t.gen>=0}class ds{static#Ei=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+ds.#Ei++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{var t,e;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(e=this._transport)||void 0===e?void 0:e.destroy())}catch(s){var i;throw null!==(i=this._worker)&&void 0!==i&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class us{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){at("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ps{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ht(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class fs{#Ni=null;#ji=!1;constructor(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new te:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new _s,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Yt({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:n})}getAnnotations(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ht(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null}render(t){var e;let{canvasContext:i,viewport:s,intent:n="display",annotationMode:r=v.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:h=null,pageColors:c=null,printAnnotationStorage:d=null}=t;null===(e=this._stats)||void 0===e||e.time("Overall");const p=this._transport.getRenderingIntent(n,r,d),{renderingIntent:f,cacheKey:g}=p;this.#ji=!1,this.#Bi(),l||=this._transport.getOptionalContentConfig(f);let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const b=!!(f&u);var y;m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(y=this._stats)||void 0===y||y.time("Page Request"),this._pumpOperatorList(p));const _=t=>{var e;(m.renderTasks.delete(w),(this._maybeCleanupAfterRender||b)&&(this.#ji=!0),this.#Hi(!b),t?(w.capability.reject(t),this._abortOperatorList({intentState:m,reason:t instanceof Error?t:new Error(t)})):w.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(e=globalThis.Stats)&&void 0!==e&&e.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new xs({callback:_,params:{canvasContext:i,viewport:s,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:c});(m.renderTasks||=new Set).add(w);const x=w.task;return Promise.all([m.displayReadyCapability.promise,l]).then((t=>{var e;let[i,s]=t;if(this.destroyed)_();else{if(null===(e=this._stats)||void 0===e||e.time("Rendering"),!(s.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:i,optionalContentConfig:s}),w.operatorListChanged()}})).catch(_),x}getOperatorList(){let{intent:t="display",annotationMode:e=v.ENABLE,printAnnotationStorage:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this._transport.getRenderingIntent(t,e,i,!0);let n,r=this._intentStates.get(s.cacheKey);var a;(r||(r=Object.create(null),this._intentStates.set(s.cacheKey,r)),r.opListReadCapability)||(n=Object.create(null),n.operatorListChanged=function(){r.operatorList.lastChunk&&(r.opListReadCapability.resolve(r.operatorList),r.renderTasks.delete(n))},r.opListReadCapability=Promise.withResolvers(),(r.renderTasks||=new Set).add(n),r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(a=this._stats)||void 0===a||a.time("Page Request"),this._pumpOperatorList(s));return r.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:t=!1,disableNormalization:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((t=>ss.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){const s=e.getReader(),n={items:[],styles:Object.create(null),lang:null};!function e(){s.read().then((function(i){let{value:s,done:r}=i;r?t(n):(n.lang??=s.lang,Object.assign(n.styles,s.styles),n.items.push(...s.items),e())}),i)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#ji=!1,this.#Bi(),Promise.all(t)}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#ji=!0;const e=this.#Hi(!1);return t&&e&&(this._stats&&=new te),e}#Hi(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.#Bi(),!this.#ji||this.destroyed)return!1;if(t)return this.#Ni=setTimeout((()=>{this.#Ni=null,this.#Hi(!1)}),5e3),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#ji=!1,!0}#Bi(){this.#Ni&&(clearTimeout(this.#Ni),this.#Ni=null)}_startRenderPage(t,e){var i,s;const n=this._intentStates.get(e);n&&(null===(i=this._stats)||void 0===i||i.timeEnd("Page Request"),null===(s=n.displayReadyCapability)||void 0===s||s.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#Hi(!0)}_pumpOperatorList(t){let{renderingIntent:e,cacheKey:i,annotationStorageSerializable:s}=t;const{map:n,transfer:r}=s,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:i,annotationStorage:n},r).getReader(),o=this._intentStates.get(i);o.streamReader=a;const l=()=>{a.read().then((t=>{let{value:e,done:i}=t;i?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,o),l())}),(t=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const t of o.renderTasks)t.operatorListChanged();this.#Hi(!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}}))};l()}_abortOperatorList(t){let{intentState:e,reason:i,force:s=!1}=t;if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(i instanceof Xt){let t=100;return i.extraDelay>0&&i.extraDelay<1e3&&(t+=i.extraDelay),void(e.streamReaderCancelTimeout=setTimeout((()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:i,force:!0})}),t))}}if(e.streamReader.cancel(new vt(i.message)).catch((()=>{})),e.streamReader=null,!this._transport.destroyed){for(const[t,i]of this._intentStates)if(i===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}class gs{#Wi=new Set;#zi=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#zi.then((()=>{for(const t of this.#Wi)t.call(this,i)}))}addEventListener(t,e){this.#Wi.add(e)}removeEventListener(t,e){this.#Wi.delete(e)}terminate(){this.#Wi.clear()}}const ms={isWorkerDisabled:!1,fakeWorkerId:0};a&&(ms.isWorkerDisabled=!0,ci.workerSrc||="./pdf.worker.mjs"),ms.isSameOrigin=function(t,e){let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch{return!1}const s=new URL(e,i);return i.origin===s.origin},ms.createCDNWrapper=function(t){const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};class vs{static#Vi;constructor(){let{name:t=null,port:e=null,verbosity:i=st()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){var s;if(null!==(s=vs.#Vi)&&void 0!==s&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");return(vs.#Vi||=new WeakMap).set(e,this),void this._initializeFromPort(e)}this._initialize()}get promise(){return a?Promise.all([Oe.promise,this._readyCapability.promise]):this._readyCapability.promise}#$i(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new xi("main","worker",t),this._messageHandler.on("ready",(function(){})),this.#$i()}_initialize(){if(ms.isWorkerDisabled||vs.#Ui)return void this._setupFakeWorker();let{workerSrc:t}=vs;try{ms.isSameOrigin(window.location.href,t)||(t=ms.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new xi("main","worker",e),s=()=>{n.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=new AbortController;e.addEventListener("error",(()=>{this._webWorker||s()}),{signal:n.signal}),i.on("test",(t=>{n.abort(),!this.destroyed&&t?(this._messageHandler=i,this._port=e,this._webWorker=e,this.#$i()):s()})),i.on("ready",(t=>{if(n.abort(),this.destroyed)s();else try{r()}catch{this._setupFakeWorker()}}));const r=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void r()}catch{nt("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){ms.isWorkerDisabled||(rt("Setting up fake worker."),ms.isWorkerDisabled=!0),vs._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new gs;this._port=e;const i="fake"+ms.fakeWorkerId++,s=new xi(i+"_worker",i,e);t.setup(s,e),this._messageHandler=new xi(i,i+"_worker",e),this.#$i()})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(t=vs.#Vi)||void 0===t||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var e;if(null===t||void 0===t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const i=null===(e=this.#Vi)||void 0===e?void 0:e.get(t.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new vs(t)}static get workerSrc(){if(ci.workerSrc)return ci.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#Ui(){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){return ht(this,"_setupFakeWorkerGlobal",(async()=>{if(this.#Ui)return this.#Ui;return(await import(this.workerSrc)).WorkerMessageHandler})())}}class bs{#Gi=new Map;#qi=new Map;#Yi=new Map;#Xi=new Map;#Ki=null;constructor(t,e,i,s,n){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new _s,this.fontLoader=new Me({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#Qi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.#Gi.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return this.#Gi.set(t,s),s}get annotationStorage(){return ht(this,"annotationStorage",new Pe)}getRenderingIntent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=d,r=Ce;switch(t){case"any":n=c;break;case"display":break;case"print":n=u;break;default:rt(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case v.DISABLE:n+=g;break;case v.ENABLE:break;case v.ENABLE_FORMS:n+=p;break;case v.ENABLE_STORAGE:n+=f;r=(n&u&&i instanceof Te?i:this.annotationStorage).serializable;break;default:rt(`getRenderingIntent - invalid annotationMode: ${e}`)}return s&&(n+=m),{renderingIntent:n,cacheKey:`${n}_${r.hash}`,annotationStorageSerializable:r}}destroy(){var t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(t=this.#Ki)||void 0===t||t.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#qi.values())e.push(s._destroy());this.#qi.clear(),this.#Yi.clear(),this.#Xi.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return e.push(i),Promise.all(e).then((()=>{var t;this.commonObjs.clear(),this.fontLoader.clear(),this.#Gi.clear(),this.filterFactory.destroy(),ts.cleanup(),null===(t=this._networkStream)||void 0===t||t.cancelAllRequests(new vt("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{ot(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function(t){let{value:i,done:s}=t;s?e.close():(ot(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(i),1,[i]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=Promise.withResolvers(),s=this._fullReader;return s.headersReady.then((()=>{if(!s.isStreamingSupported||!s.isRangeSupported){var t;if(this._lastProgress)null===(t=e.onProgress)||void 0===t||t.call(e,this._lastProgress);s.onProgress=t=>{var i;null===(i=e.onProgress)||void 0===i||i.call(e,{loaded:t.loaded,total:t.total})}}i.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,e)=>{ot(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function(t){let{value:i,done:s}=t;s?e.close():(ot(i instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(i),1,[i]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(t=>{let{pdfInfo:i}=t;this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new ps(i,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new dt(t.message,t.code);break;case"InvalidPDFException":i=new pt(t.message);break;case"MissingPDFException":i=new ft(t.message);break;case"UnexpectedResponseException":i=new gt(t.message,t.status);break;case"UnknownErrorException":i=new ut(t.message,t.details);break;default:at("DocException - expected a valid Error.")}e._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(this.#Ki=Promise.withResolvers(),e.onPassword){const s=t=>{t instanceof Error?this.#Ki.reject(t):this.#Ki.resolve({password:t})};try{e.onPassword(s,t.code)}catch(i){this.#Ki.reject(i)}}else this.#Ki.reject(new dt(t.message,t.code));return this.#Ki.promise})),t.on("DataLoaded",(t=>{var i;null===(i=e.onProgress)||void 0===i||i.call(e,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{if(this.destroyed)return;this.#qi.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(e=>{var i;let[s,n,r]=e;if(this.destroyed)return null;if(this.commonObjs.has(s))return null;switch(n){case"Font":const{disableFontFace:e,fontExtraProperties:a,pdfBug:o}=this._params;if("error"in r){const t=r.error;rt(`Error during font loading: ${t}`),this.commonObjs.resolve(s,t);break}const l=o&&null!==(i=globalThis.FontInspector)&&void 0!==i&&i.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,h=new De(r,{disableFontFace:e,inspectFont:l});this.fontLoader.bind(h).catch((()=>t.sendWithPromise("FontFallback",{id:s}))).finally((()=>{!a&&h.data&&(h.data=null),this.commonObjs.resolve(s,h)}));break;case"CopyLocalImage":const{imageRef:c}=r;ot(c,"The imageRef must be defined.");for(const t of this.#qi.values())for(const[,e]of t.objs)if((null===e||void 0===e?void 0:e.ref)===c)return e.dataLen?(this.commonObjs.resolve(s,structuredClone(e)),e.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null})),t.on("obj",(t=>{let[e,i,s,n]=t;if(this.destroyed)return;const r=this.#qi.get(i);var a;if(!r.objs.has(e))if(0!==r._intentStates.size)switch(s){case"Image":r.objs.resolve(e,n),(null===n||void 0===n?void 0:n.dataLen)>1e7&&(r._maybeCleanupAfterRender=!0);break;case"Pattern":r.objs.resolve(e,n);break;default:throw new Error(`Got unknown object type ${s}`)}else null===n||void 0===n||null===(a=n.bitmap)||void 0===a||a.close()})),t.on("DocProgress",(t=>{var i;this.destroyed||null===(i=e.onProgress)||void 0===i||i.call(e,{loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t;this.annotationStorage.size<=0&&rt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:(null===(t=this._fullReader)||void 0===t?void 0:t.filename)??null},i).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#Yi.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&this.#Xi.set(i.refStr,t);const s=new fs(e,i,this,this._params.pdfBug);return this.#qi.set(e,s),s}));return this.#Yi.set(e,s),s}getPageIndex(t){return cs(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#Qi("GetFieldObjects")}hasJSActions(){return this.#Qi("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!==typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#Qi("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#Qi("GetOptionalContentConfig").then((e=>new Si(e,t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#Gi.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then((t=>{var e,i;return{info:t[0],metadata:t[1]?new Ai(t[1]):null,contentDispositionFilename:(null===(e=this._fullReader)||void 0===e?void 0:e.filename)??null,contentLength:(null===(i=this._fullReader)||void 0===i?void 0:i.contentLength)??null}}));return this.#Gi.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#qi.values()){if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`)}this.commonObjs.clear(),t||this.fontLoader.clear(),this.#Gi.clear(),this.filterFactory.destroy(!0),ts.cleanup()}}cachedPageNumber(t){if(!cs(t))return null;const e=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return this.#Xi.get(e)??null}}const ys=Symbol("INITIAL_DATA");class _s{#Ji=Object.create(null);#Zi(t){return this.#Ji[t]||={...Promise.withResolvers(),data:ys}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){const i=this.#Zi(t);return i.promise.then((()=>e(i.data))),null}const i=this.#Ji[t];if(!i||i.data===ys)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#Ji[t];return!!e&&e.data!==ys}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.#Zi(t);i.data=e,i.resolve()}clear(){for(const e in this.#Ji){var t;const{data:i}=this.#Ji[e];null===i||void 0===i||null===(t=i.bitmap)||void 0===t||t.close()}this.#Ji=Object.create(null)}*[Symbol.iterator](){for(const t in this.#Ji){const{data:e}=this.#Ji[t];e!==ys&&(yield[t,e])}}}class ws{#ts=null;constructor(t){this.#ts=t,this.onContinue=null}get promise(){return this.#ts.capability.promise}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.#ts.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#ts.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#ts;return t.form||t.canvas&&(null===e||void 0===e?void 0:e.size)>0}}class xs{#es=null;static#is=new WeakSet;constructor(t){let{callback:e,params:i,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:u=null}=t;this.callback=e,this.params=i,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=d,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new ws(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(t){var e,i;let{transparency:s=!1,optionalContentConfig:n}=t;if(this.cancelled)return;if(this._canvas){if(xs.#is.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");xs.#is.add(this._canvas)}this._pdfBug&&null!==(e=globalThis.StepperManager)&&void 0!==e&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:a,transform:o,background:l}=this.params;this.gfx=new hi(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:s,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(i=this.graphicsReadyCallback)||void 0===i||i.call(this)}cancel(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(t=this.gfx)||void 0===t||t.endDrawing(),this.#es&&(window.cancelAnimationFrame(this.#es),this.#es=null),xs.#is.delete(this._canvas),this.callback(e||new Xt(`Rendering cancelled, page ${this._pageIndex+1}`,i))}operatorListChanged(){var t;this.graphicsReady?(null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#es=window.requestAnimationFrame((()=>{this.#es=null,this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),xs.#is.delete(this._canvas),this.callback())))}}const As="4.4.168",Es="19fbc8998";function ks(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function Ss(t){return Math.max(0,Math.min(255,255*t))}class Cs{static CMYK_G(t){let[e,i,s,n]=t;return["G",1-Math.min(1,.3*e+.59*s+.11*i+n)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_rgb(t){let[e]=t;return e=Ss(e),[e,e,e]}static G_HTML(t){let[e]=t;const i=ks(e);return`#${i}${i}${i}`}static RGB_G(t){let[e,i,s]=t;return["G",.3*e+.59*i+.11*s]}static RGB_rgb(t){return t.map(Ss)}static RGB_HTML(t){return`#${t.map(ks).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(t){let[e,i,s,n]=t;return["RGB",1-Math.min(1,e+n),1-Math.min(1,s+n),1-Math.min(1,i+n)]}static CMYK_rgb(t){let[e,i,s,n]=t;return[Ss(1-Math.min(1,e+n)),Ss(1-Math.min(1,s+n)),Ss(1-Math.min(1,i+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,i,s]=t;const n=1-e,r=1-i,a=1-s;return["CMYK",n,r,a,Math.min(n,r,a)]}}class Ps{static setupStorage(t,e,i,s,n){const r=s.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===n)break;t.addEventListener("input",(t=>{s.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===n)break;t.addEventListener("change",(t=>{s.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===n)break;t.addEventListener("input",(t=>{s.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);for(const t of i.children)t.attributes.value===r.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{const i=t.target.options,n=-1===i.selectedIndex?"":i[i.selectedIndex].value;s.setValue(e,{value:n})}))}}static setAttributes(t){let{html:e,element:i,storage:s=null,intent:n,linkService:r}=t;const{attributes:a}=i,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${n}`);for(const[l,h]of Object.entries(a))if(null!==h&&void 0!==h)switch(l){case"class":h.length&&e.setAttribute(l,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!o||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,h)}o&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,i,s)}static render(t){const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,n=t.intent||"display",r=document.createElement(s.name);s.attributes&&this.setAttributes({html:r,element:s,intent:n,linkService:i});const a="richText"!==n,o=t.div;if(o.append(r),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;o.style.transform=e}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===s.children.length){if(s.value){const t=document.createTextNode(s.value);r.append(t),a&&ss.shouldBuildText(s.name)&&l.push(t)}return{textDivs:l}}const h=[[s,-1,r]];for(;h.length>0;){var c,d;const[t,s,r]=h.at(-1);if(s+1===t.children.length){h.pop();continue}const o=t.children[++h.at(-1)[1]];if(null===o)continue;const{name:u}=o;if("#text"===u){const t=document.createTextNode(o.value);l.push(t),r.append(t);continue}const p=null!==o&&void 0!==o&&null!==(c=o.attributes)&&void 0!==c&&c.xmlns?document.createElementNS(o.attributes.xmlns,u):document.createElement(u);if(r.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:e,intent:n,linkService:i}),(null===(d=o.children)||void 0===d?void 0:d.length)>0)h.push([o,-1,p]);else if(o.value){const t=document.createTextNode(o.value);a&&ss.shouldBuildText(u)&&l.push(t),p.append(t)}}for(const u of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ts=1e3,Ms=new WeakSet;function Ds(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class Rs{static create(t){switch(t.data.annotationType){case T:return new Os(t);case P:return new Is(t);case U:switch(t.data.fieldType){case"Tx":return new Ns(t);case"Btn":return t.data.radioButton?new Hs(t):t.data.checkBox?new Bs(t):new Ws(t);case"Ch":return new zs(t);case"Sig":return new js(t)}return new Fs(t);case V:return new Vs(t);case M:return new Us(t);case D:return new Gs(t);case R:return new qs(t);case L:return new Ys(t);case I:return new Xs(t);case W:return new Qs(t);case z:return new Js(t);case O:return new Ks(t);case F:return new Zs(t);case N:return new tn(t);case j:return new en(t);case B:return new sn(t);case H:return new nn(t);case $:return new rn(t);default:return new Ls(t)}}}class Ls{#ss=null;#ns=!1;#rs=null;constructor(t){let{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData(t){let{titleObj:e,contentsObj:i,richText:s}=t;return!!(null!==e&&void 0!==e&&e.str||null!==i&&void 0!==i&&i.str||null!==s&&void 0!==s&&s.str)}get hasPopupData(){return Ls._hasPopupData(this.data)}updateEdited(t){var e;if(!this.container)return;this.#ss||={rect:this.data.rect.slice(0)};const{rect:i}=t;i&&this.#as(i),null===(e=this.#rs)||void 0===e||e.popup.updateEdited(t)}resetEdited(){var t;this.#ss&&(this.#as(this.#ss.rect),null===(t=this.#rs)||void 0===t||t.popup.resetEdited(),this.#ss=null)}#as(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:a,pageY:o}}}}=this;null===i||void 0===i||i.splice(0,4,...t);const{width:l,height:h}=Ds(t);e.left=100*(t[0]-a)/n+"%",e.top=100*(r-t[3]+o)/r+"%",0===s?(e.width=100*l/n+"%",e.height=100*h/r+"%"):this.setRotation(s)}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",e.id),this instanceof Fs||(n.tabIndex=Ts);const{style:r}=n;if(r.zIndex=this.parent.zIndex++,e.popupRef&&n.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(n.title=e.alternativeText),e.noRotate&&n.classList.add("norotate"),!e.rect||this instanceof Vs){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,n),n}const{width:a,height:o}=Ds(e.rect);if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;r.borderRadius=e}else if(this instanceof Hs){const t=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;r.borderRadius=t}switch(e.borderStyle.style){case G:r.borderStyle="solid";break;case q:r.borderStyle="dashed";break;case Y:rt("Unimplemented border style: beveled");break;case X:rt("Unimplemented border style: inset");break;case K:r.borderBottomStyle="solid"}const s=e.borderColor||null;s?(this.#ns=!0,r.borderColor=At.makeHexColor(0|s[0],0|s[1],0|s[2])):r.borderWidth=0}const l=At.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:c,pageX:d,pageY:u}=s.rawDims;r.left=100*(l[0]-d)/h+"%",r.top=100*(l[1]-u)/c+"%";const{rotation:p}=e;return e.hasOwnCanvas||0===p?(r.width=100*a/h+"%",r.height=100*o/c+"%"):this.setRotation(p,n),n}setRotation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:n,height:r}=Ds(this.data.rect);let a,o;t%180===0?(a=100*n/i,o=100*r/s):(a=100*r/i,o=100*n/s),e.style.width=`${a}%`,e.style.height=`${o}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,i)=>{const s=i.detail[t],n=s[0],r=s.slice(1);i.target.style[e]=Cs[`${n}_HTML`](r),this.annotationStorage.setValue(this.data.id,{[e]:Cs[`${n}_rgb`](r)})};return ht(this,"_commonActions",{display:t=>{const{display:e}=t.detail,i=e%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const n=t[s]||i[s];null===n||void 0===n||n(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,n]of Object.entries(e)){const r=i[s];if(r){r({detail:{[s]:n},target:t}),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,n]=this.data.rect.map((t=>Math.fround(t)));if(8===t.length){const[r,a,o,l]=t.subarray(2,6);if(s===r&&n===a&&e===o&&i===l)return}const{style:r}=this.container;let a;if(this.#ns){const{borderColor:t,borderWidth:e}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const o=s-e,l=n-i,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0);const d=h.createElement("defs");c.append(d);const u=h.createElement("clipPath"),p=`clippath_${this.data.id}`;u.setAttribute("id",p),u.setAttribute("clipPathUnits","objectBoundingBox"),d.append(u);for(let g=2,m=t.length;g<m;g+=8){var f;const i=t[g],s=t[g+1],r=t[g+2],c=t[g+3],d=h.createElement("rect"),p=(r-e)/o,m=(n-s)/l,v=(i-r)/o,b=(s-c)/l;d.setAttribute("x",p),d.setAttribute("y",m),d.setAttribute("width",v),d.setAttribute("height",b),u.append(d),null===(f=a)||void 0===f||f.push(`<rect vector-effect="non-scaling-stroke" x="${p}" y="${m}" width="${v}" height="${b}"/>`)}this.#ns&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(c),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=this.#rs=new Vs({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){at("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:t,id:n,exportValues:r}of s){if(-1===t)continue;if(n===e)continue;const s="string"===typeof r?r:null,a=document.querySelector(`[data-element-id="${n}"]`);!a||Ms.has(a)?i.push({id:n,exportValue:s,domElement:a}):rt(`_getElementsByName - element not allowed: ${n}`)}return i}for(const s of document.getElementsByName(t)){const{exportValue:t}=s,n=s.getAttribute("data-element-id");n!==e&&(Ms.has(s)&&i.push({id:n,exportValue:t,domElement:s}))}return i}show(){var t;this.container&&(this.container.hidden=!1),null===(t=this.popup)||void 0===t||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),null===(t=this.popup)||void 0===t||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{var i;null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}class Os extends Ls{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,{isRenderable:!0,ignoreBorder:!(null===e||void 0===e||!e.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action),s=!0):t.attachment?(this.#os(i,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(this.#ls(i,t.setOCGState),s=!0):t.dest?(this._bindLink(i,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}#hs(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&this.#hs()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#hs()}#os(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>{var t;return null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(e.content,e.filename,i),!1},this.#hs()}#ls(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#hs()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const n=i.get(s);n&&(t[n]=()=>{var t;return null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),this.#hs()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#hs(),!this._fieldObjects)return rt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=()=>!1));t.onclick=()=>{null===i||void 0===i||i();const{fields:t,refs:s,include:n}=e,r=[];if(0!==t.length||0!==s.length){const e=new Set(s);for(const i of t){const t=this._fieldObjects[i]||[];for(const{id:i}of t)e.add(i)}for(const t of Object.values(this._fieldObjects))for(const i of t)e.has(i.id)===n&&r.push(i)}else for(const e of Object.values(this._fieldObjects))r.push(...e);const a=this.annotationStorage,o=[];for(const e of r){const{id:t}=e;switch(o.push(t),e.type){case"text":{const i=e.defaultValue||"";a.setValue(t,{value:i});break}case"checkbox":case"radiobutton":{const i=e.defaultValue===e.exportValues;a.setValue(t,{value:i});break}case"combobox":case"listbox":{const i=e.defaultValue||"";a.setValue(t,{value:i});break}default:continue}const i=document.querySelector(`[data-element-id="${t}"]`);i&&(Ms.has(i)?i.dispatchEvent(new Event("resetform")):rt(`_bindResetFormAction - element not allowed: ${t}`))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}class Is extends Ls{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Fs extends Ls{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&("CANVAS"===(null===(e=t.previousSibling)||void 0===e?void 0:e.nodeName)&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return wt.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,n){i.includes("mouse")?t.addEventListener(i,(t=>{var e;null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(i,(t=>{var r;if("blur"===i){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}n&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:n(t)}}))}))}_setEventListeners(t,e,i,s){for(const[o,l]of i){var n,r,a;if("Action"===l||null!==(n=this.data.actions)&&void 0!==n&&n[l])"Focus"!==l&&"Blur"!==l||(e||={focused:!1}),this._setEventListener(t,e,o,l,s),"Focus"!==l||null!==(r=this.data.actions)&&void 0!==r&&r.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null)}}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":At.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||9,n=t.style;let r;const a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(h*s))||1);r=Math.min(s,a(e/h))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(s,a(t/h))}n.fontSize=`calc(${r}px * var(--scale-factor))`,n.color=At.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(n.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Ns extends Fs{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,s){const n=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),n.setValue(r.id,{[s]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){var s;const r=t.getValue(e,{value:this.data.fieldValue});let a=r.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=r.formattedValue||(null===(s=this.data.textContent)||void 0===s?void 0:s.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=l??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",l??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ms.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Ts,this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",(s=>{t.setValue(e,{value:s.target.value}),this.setPropertyOnSiblings(i,"value",s.target.value,"value"),h.formattedValue=null})),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";i.value=h.userValue=e,h.formattedValue=null}));let c=t=>{const{formattedValue:e}=h;null!==e&&void 0!==e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var n;i.addEventListener("focus",(t=>{var e;if(h.focused)return;const{target:i}=t;h.userValue&&(i.value=h.userValue),h.lastCommittedValue=i.value,h.commitKey=1,null!==(e=this.data.actions)&&void 0!==e&&e.Focus||(h.focused=!0)})),i.addEventListener("updatefromsandbox",(i=>{this.showElementAndHideCanvas(i.target);const s={value(i){h.userValue=i.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),i.target.value=h.userValue},formattedValue(i){const{formattedValue:s}=i.detail;h.formattedValue=s,null!==s&&void 0!==s&&i.target!==document.activeElement&&(i.target.value=s),t.setValue(e,{formattedValue:s})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:i=>{var s;const{charLimit:n}=i.detail,{target:r}=i;if(0===n)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",n);let a=h.userValue;!a||a.length<=n||(a=a.slice(0,n),r.value=h.userValue=a,t.setValue(e,{value:a}),null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(s,i)})),i.addEventListener("keydown",(t=>{var i;h.commitKey=1;let s=-1;if("Escape"===t.key?s=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(h.commitKey=3):s=2,-1===s)return;const{value:n}=t.target;h.lastCommittedValue!==n&&(h.lastCommittedValue=n,h.userValue=n,null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:s,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const s=c;c=null,i.addEventListener("blur",(t=>{var i;if(!h.focused||!t.relatedTarget)return;null!==(i=this.data.actions)&&void 0!==i&&i.Blur||(h.focused=!1);const{value:n}=t.target;var r;(h.userValue=n,h.lastCommittedValue!==n)&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:h.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}));s(t)})),null!==(n=this.data.actions)&&void 0!==n&&n.Keystroke&&i.addEventListener("beforeinput",(t=>{var i;h.lastCommittedValue=null;const{data:s,target:n}=t,{value:r,selectionStart:a,selectionEnd:o}=n;let l=a,c=o;switch(t.inputType){case"deleteWordBackward":{const t=r.substring(0,a).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=r.substring(a).match(/^[^\w]*\w*/);t&&(c+=t[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(c+=1)}t.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,change:s||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(c&&i.addEventListener("blur",c),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class js extends Fs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Bs extends Fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"===typeof s&&(s="Off"!==s,t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const n=document.createElement("input");return Ms.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.setAttribute("exportValue",e.exportValue),n.tabIndex=Ts,n.addEventListener("change",(s=>{const{name:n,checked:r}=s.target;for(const a of this._getElementsByName(n,i)){const i=r&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=i),t.setValue(a.id,{value:i})}t.setValue(i,{value:r})})),n.addEventListener("resetform",(t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",(e=>{const s={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(s,e)})),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Hs extends Fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"===typeof s&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const r of this._getElementsByName(e.fieldName,i))t.setValue(r.id,{value:!1});const n=document.createElement("input");if(Ms.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=e.fieldName,s&&n.setAttribute("checked",!0),n.tabIndex=Ts,n.addEventListener("change",(e=>{const{name:s,checked:n}=e.target;for(const r of this._getElementsByName(s,i))t.setValue(r.id,{value:!1});t.setValue(i,{value:n})})),n.addEventListener("resetform",(t=>{const i=e.defaultFieldValue;t.target.checked=null!==i&&void 0!==i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const s=e.buttonValue;n.addEventListener("updatefromsandbox",(e=>{const n={value:e=>{const n=s===e.detail.value;for(const s of this._getElementsByName(e.target.name)){const e=n&&s.id===i;s.domElement&&(s.domElement.checked=e),t.setValue(s.id,{value:e})}}};this._dispatchEventFromSandbox(n,e)})),this._setEventListeners(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Ws extends Os{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class zs extends Fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Ms.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Ts;let n=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const i of s.options)i.selected=i.value===e}));for(const h of this.data.options){const t=document.createElement("option");t.textContent=h.displayValue,t.value=h.exportValue,i.value.includes(h.exportValue)&&(t.setAttribute("selected",!0),n=!1),s.append(t)}let r=null;if(n){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),s.prepend(t),r=()=>{t.remove(),s.removeEventListener("input",r),r=null},s.addEventListener("input",r)}const a=t=>{const e=t?"value":"textContent",{options:i,multiple:n}=s;return n?Array.prototype.filter.call(i,(t=>t.selected)).map((t=>t[e])):-1===i.selectedIndex?null:i[i.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",(i=>{const n={value(i){var n;null===(n=r)||void 0===n||n();const l=i.detail.value,h=new Set(Array.isArray(l)?l:[l]);for(const t of s.options)t.selected=h.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){s.multiple=!0},remove(i){const n=s.options,r=i.detail.remove;if(n[r].selected=!1,s.remove(r),n.length>0){-1===Array.prototype.findIndex.call(n,(t=>t.selected))&&(n[0].selected=!0)}t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},clear(i){for(;0!==s.length;)s.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(i){const{index:n,displayValue:r,exportValue:h}=i.detail.insert,c=s.children[n],d=document.createElement("option");d.textContent=r,d.value=h,c?c.before(d):s.append(d),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},items(i){const{items:n}=i.detail;for(;0!==s.length;)s.remove(0);for(const t of n){const{displayValue:e,exportValue:i}=t,n=document.createElement("option");n.textContent=e,n.value=i,s.append(n)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},indices(i){const s=new Set(i.detail.indices);for(const t of i.target.options)t.selected=s.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(n,i)})),s.addEventListener("input",(i=>{var s;const n=a(!0),r=a(!1);t.setValue(e,{value:n}),i.preventDefault(),null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:r,changeEx:n,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):s.addEventListener("input",(function(i){t.setValue(e,{value:a(!0)})})),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Vs extends Ls{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Ls._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new $s({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>`${Ct}${t}`)).join(",")),this.container}}class $s{#cs=this.#ds.bind(this);#us=this.#ps.bind(this);#fs=this.#gs.bind(this);#ms=this.#vs.bind(this);#bs=null;#mt=null;#ys=null;#_s=null;#ws=null;#xs=null;#As=null;#Es=!1;#ks=null;#E=null;#Ss=null;#Cs=null;#Ps=null;#ss=null;#Ts=!1;constructor(t){let{container:e,color:i,elements:s,titleObj:n,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:h,parentRect:c,open:d}=t;this.#mt=e,this.#Ps=n,this.#ys=a,this.#Cs=o,this.#xs=l,this.#bs=i,this.#Ss=h,this.#As=c,this.#ws=s,this.#_s=re.toDateObject(r),this.trigger=s.flatMap((t=>t.getElementsToTriggerPopup()));for(const p of this.trigger)p.addEventListener("click",this.#ms),p.addEventListener("mouseenter",this.#fs),p.addEventListener("mouseleave",this.#us),p.classList.add("popupTriggerArea");for(const p of s){var u;null===(u=p.container)||void 0===u||u.addEventListener("keydown",this.#cs)}this.#mt.hidden=!0,d&&this.#vs()}render(){if(this.#ks)return;const t=this.#ks=document.createElement("div");if(t.className="popup",this.#bs){const e=t.style.outlineColor=At.makeHexColor(...this.#bs);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`;else{const e=.7;t.style.backgroundColor=At.makeHexColor(...this.#bs.map((t=>Math.floor(e*(255-t)+t))))}}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),({dir:i.dir,str:i.textContent}=this.#Ps),t.append(e),this.#_s){const t=document.createElement("span");t.classList.add("popupDate"),t.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),t.setAttribute("data-l10n-args",JSON.stringify({date:this.#_s.toLocaleDateString(),time:this.#_s.toLocaleTimeString()})),e.append(t)}const s=this.#Ms;if(s)Ps.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const e=this._formatContents(this.#ys);t.append(e)}this.#mt.append(t)}get#Ms(){const t=this.#Cs,e=this.#ys;return null===t||void 0===t||!t.str||null!==e&&void 0!==e&&e.str&&e.str!==t.str?null:this.#Cs.html||null}get#Ds(){var t,e,i;return(null===(t=this.#Ms)||void 0===t||null===(e=t.attributes)||void 0===e||null===(i=e.style)||void 0===i?void 0:i.fontSize)||0}get#Rs(){var t,e,i;return(null===(t=this.#Ms)||void 0===t||null===(e=t.attributes)||void 0===e||null===(i=e.style)||void 0===i?void 0:i.color)||null}#Ls(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#Rs,fontSize:this.#Ds?`calc(${this.#Ds}px * var(--scale-factor))`:""}};for(const n of t.split("\n"))e.push({name:"span",value:n,attributes:s});return i}_formatContents(t){let{str:e,dir:i}=t;const s=document.createElement("p");s.classList.add("popupContent"),s.dir=i;const n=e.split(/(?:\r\n?|\n)/);for(let r=0,a=n.length;r<a;++r){const t=n[r];s.append(document.createTextNode(t)),r<a-1&&s.append(document.createElement("br"))}return s}#ds(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&this.#Es)&&this.#vs()}updateEdited(t){var e;let{rect:i,popupContent:s}=t;this.#ss||={contentsObj:this.#ys,richText:this.#Cs},i&&(this.#E=null),s&&(this.#Cs=this.#Ls(s),this.#ys=null),null===(e=this.#ks)||void 0===e||e.remove(),this.#ks=null}resetEdited(){var t;this.#ss&&(({contentsObj:this.#ys,richText:this.#Cs}=this.#ss),this.#ss=null,null===(t=this.#ks)||void 0===t||t.remove(),this.#ks=null,this.#E=null)}#Os(){if(null!==this.#E)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:n}}}=this.#xs;let r=!!this.#As,a=r?this.#As:this.#Ss;for(const u of this.#ws)if(!a||null!==At.intersect(u.data.rect,a)){a=u.data.rect,r=!0;break}const o=At.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=r?a[2]-a[0]+5:0,h=o[0]+l,c=o[1];this.#E=[100*(h-s)/e,100*(c-n)/i];const{style:d}=this.#mt;d.left=`${this.#E[0]}%`,d.top=`${this.#E[1]}%`}#vs(){this.#Es=!this.#Es,this.#Es?(this.#gs(),this.#mt.addEventListener("click",this.#ms),this.#mt.addEventListener("keydown",this.#cs)):(this.#ps(),this.#mt.removeEventListener("click",this.#ms),this.#mt.removeEventListener("keydown",this.#cs))}#gs(){this.#ks||this.render(),this.isVisible?this.#Es&&this.#mt.classList.add("focused"):(this.#Os(),this.#mt.hidden=!1,this.#mt.style.zIndex=parseInt(this.#mt.style.zIndex)+1e3)}#ps(){this.#mt.classList.remove("focused"),!this.#Es&&this.isVisible&&(this.#mt.hidden=!0,this.#mt.style.zIndex=parseInt(this.#mt.style.zIndex)-1e3)}forceHide(){this.#Ts=this.isVisible,this.#Ts&&(this.#mt.hidden=!0)}maybeShow(){this.#Ts&&(this.#ks||this.#gs(),this.#Ts=!1,this.#mt.hidden=!1)}get isVisible(){return!1===this.#mt.hidden}}class Us extends Ls{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=b.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class Gs extends Ls{#Is=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=Ds(t.rect),s=this.svgFactory.create(e,i,!0),n=this.#Is=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),s.append(n),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Is}addHighlightArea(){this.container.classList.add("highlightArea")}}class qs extends Ls{#Fs=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=Ds(t.rect),s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,r=this.#Fs=this.svgFactory.createElement("svg:rect");return r.setAttribute("x",n/2),r.setAttribute("y",n/2),r.setAttribute("width",e-n),r.setAttribute("height",i-n),r.setAttribute("stroke-width",n||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Fs}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ys extends Ls{#Ns=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=Ds(t.rect),s=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,r=this.#Ns=this.svgFactory.createElement("svg:ellipse");return r.setAttribute("cx",e/2),r.setAttribute("cy",i/2),r.setAttribute("rx",e/2-n/2),r.setAttribute("ry",i/2-n/2),r.setAttribute("stroke-width",n||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Ns}addHighlightArea(){this.container.classList.add("highlightArea")}}class Xs extends Ls{#js=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:s}}=this;if(!e)return this.container;const{width:n,height:r}=Ds(t),a=this.svgFactory.create(n,r,!0);let o=[];for(let h=0,c=e.length;h<c;h+=2){const i=e[h]-t[0],s=t[3]-e[h+1];o.push(`${i},${s}`)}o=o.join(" ");const l=this.#js=this.svgFactory.createElement(this.svgElementName);return l.setAttribute("points",o),l.setAttribute("stroke-width",i.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#js}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ks extends Xs{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Qs extends Ls{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Js extends Ls{#Bs=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=b.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:e,borderStyle:i,popupRef:s}}=this,{width:n,height:r}=Ds(t),a=this.svgFactory.create(n,r,!0);for(const o of e){let e=[];for(let i=0,s=o.length;i<s;i+=2){const s=o[i]-t[0],n=t[3]-o[i+1];e.push(`${s},${n}`)}e=e.join(" ");const n=this.svgFactory.createElement(this.svgElementName);this.#Bs.push(n),n.setAttribute("points",e),n.setAttribute("stroke-width",i.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),!s&&this.hasPopupData&&this._createPopup(),a.append(n)}return this.container.append(a),this.container}getElementsToTriggerPopup(){return this.#Bs}addHighlightArea(){this.container.classList.add("highlightArea")}}class Zs extends Ls{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class tn extends Ls{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class en extends Ls{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class sn extends Ls{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class nn extends Ls{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class rn extends Ls{#Hs=null;constructor(t){var e;super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#Ws.bind(this)),this.#Hs=i;const{isMac:s}=wt.platform;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(s?t.metaKey:t.ctrlKey)&&this.#Ws()})),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#Hs}addHighlightArea(){this.container.classList.add("highlightArea")}#Ws(){var t;null===(t=this.downloadManager)||void 0===t||t.openOrDownloadData(this.content,this.filename)}}class an{#zs=null;#Vs=null;#$s=new Map;constructor(t){let{div:e,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:a}=t;this.div=e,this.#zs=i,this.#Vs=s,this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}#Us(t,e){var i;const s=t.firstChild||t;s.id=`${Ct}${e}`,this.div.append(t),null===(i=this.#zs)||void 0===i||i.moveElementInDOM(this.div,t,s,!1)}async render(t){const{annotations:e}=t,i=this.div;ce(i,this.viewport);const s=new Map,n={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new qt,annotationStorage:t.annotationStorage||new Pe,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const t=a.annotationType===V;if(t){const t=s.get(a.id);if(!t)continue;n.elements=t}else{const{width:t,height:e}=Ds(a.rect);if(t<=0||e<=0)continue}n.data=a;const e=Rs.create(n);if(!e.isRenderable)continue;if(!t&&a.popupRef){const t=s.get(a.popupRef);t?t.push(e):s.set(a.popupRef,[e])}const i=e.render();var r;if(a.hidden&&(i.style.visibility="hidden"),this.#Us(i,a.id),e.annotationEditorType>0)this.#$s.set(e.data.id,e),null===(r=this._annotationEditorUIManager)||void 0===r||r.renderAnnotationElement(e)}this.#Gs()}update(t){let{viewport:e}=t;const i=this.div;this.viewport=e,ce(i,{rotation:e.rotation}),this.#Gs(),i.hidden=!1}#Gs(){if(!this.#Vs)return;const t=this.div;for(const[e,i]of this.#Vs){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:n}=s;n?"CANVAS"===n.nodeName?n.replaceWith(i):n.classList.contains("annotationContent")?n.after(i):n.before(i):s.append(i)}this.#Vs.clear()}getEditableAnnotations(){return Array.from(this.#$s.values())}getEditableAnnotation(t){return this.#$s.get(t)}}const on=/\r\n?|\n/g;class ln extends we{#qs=this.editorDivBlur.bind(this);#Ys=this.editorDivFocus.bind(this);#Xs=this.editorDivInput.bind(this);#Ks=this.editorDivKeydown.bind(this);#Qs=this.editorDivPaste.bind(this);#bs;#Js="";#Zs=`${this.id}-editor`;#Ds;#tn=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ln.prototype,e=t=>t.isEmpty(),i=ye.TRANSLATE_SMALL,s=ye.TRANSLATE_BIG;return ht(this,"_keyboardManager",new ve([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=b.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#bs=t.color||ln._defaultColor||we._defaultLineColor,this.#Ds=t.fontSize||ln._defaultFontSize}static initialize(t,e){we.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case y.FREETEXT_SIZE:ln._defaultFontSize=e;break;case y.FREETEXT_COLOR:ln._defaultColor=e}}updateParams(t,e){switch(t){case y.FREETEXT_SIZE:this.#en(e);break;case y.FREETEXT_COLOR:this.#in(e)}}static get defaultPropertiesToUpdate(){return[[y.FREETEXT_SIZE,ln._defaultFontSize],[y.FREETEXT_COLOR,ln._defaultColor||we._defaultLineColor]]}get propertiesToUpdate(){return[[y.FREETEXT_SIZE,this.#Ds],[y.FREETEXT_COLOR,this.#bs]]}#en(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#Ds)*this.parentScale),this.#Ds=t,this.#sn()},i=this.#Ds;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:y.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#in(t){const e=t=>{this.#bs=this.editorDiv.style.color=t},i=this.#bs;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:y.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-ln._internalPadding*t,-(ln._internalPadding+this.#Ds)*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(b.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const t=this._uiManager._signal;this.editorDiv.addEventListener("keydown",this.#Ks,{signal:t}),this.editorDiv.addEventListener("focus",this.#Ys,{signal:t}),this.editorDiv.addEventListener("blur",this.#qs,{signal:t}),this.editorDiv.addEventListener("input",this.#Xs,{signal:t}),this.editorDiv.addEventListener("paste",this.#Qs,{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#Zs),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#Ks),this.editorDiv.removeEventListener("focus",this.#Ys),this.editorDiv.removeEventListener("blur",this.#qs),this.editorDiv.removeEventListener("input",this.#Xs),this.editorDiv.removeEventListener("paste",this.#Qs),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#nn(){const t=[];this.editorDiv.normalize();for(const e of this.editorDiv.childNodes)t.push(ln.#rn(e));return t.join("\n")}#sn(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,s=e.style.display,n=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),i=e.getBoundingClientRect(),e.remove(),e.style.display=s,e.classList.toggle("hidden",n)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#Js,e=this.#Js=this.#nn().trimEnd();if(t===e)return;const i=t=>{this.#Js=t,t?(this.#an(),this._uiManager.rebuild(this),this.#sn()):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#sn()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ln._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#Zs),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),we._l10nPromise.get("pdfjs-free-text-default-content").then((t=>{var e;return null===(e=this.editorDiv)||void 0===e?void 0:e.setAttribute("default-content",t)})),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#Ds}px * var(--scale-factor))`,i.color=this.#bs,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),pe(this,this.div,["dblclick","keydown"]),this.width){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:n}=this.#tn;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[h,c]=this.pageTranslation;let d,u;switch(this.rotation){case 0:d=t+(n[0]-h)/o,u=e+this.height-(n[1]-c)/l;break;case 90:d=t+(n[0]-h)/o,u=e-(n[1]-c)/l,[r,a]=[a,-r];break;case 180:d=t-this.width+(n[0]-h)/o,u=e-(n[1]-c)/l,[r,a]=[-r,-a];break;case 270:d=t+(n[0]-h-this.height*l)/o,u=e+(n[1]-c-this.width*o)/l,[r,a]=[-a,r]}this.setAt(d*i,u*s,r,a)}else this.setAt(t*i,e*s,this.width*i,this.height*s);this.#an(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#rn(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(on,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(1===i.length&&"text/plain"===i[0])return;t.preventDefault();const s=ln.#on(e.getData("text")||"").replaceAll(on,"\n");if(!s)return;const n=window.getSelection();if(!n.rangeCount)return;this.editorDiv.normalize(),n.deleteFromDocument();const r=n.getRangeAt(0);if(!s.includes("\n"))return r.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),void n.collapseToStart();const{startContainer:a,startOffset:o}=r,l=[],h=[];if(a.nodeType===Node.TEXT_NODE){const t=a.parentElement;if(h.push(a.nodeValue.slice(o).replaceAll(on,"")),t!==this.editorDiv){let e=l;for(const i of this.editorDiv.childNodes)i!==t?e.push(ln.#rn(i)):e=h}l.push(a.nodeValue.slice(0,o).replaceAll(on,""))}else if(a===this.editorDiv){let t=l,e=0;for(const i of this.editorDiv.childNodes)e++===o&&(t=h),t.push(ln.#rn(i))}this.#Js=`${l.join("\n")}${s}${h.join("\n")}`,this.#an();const c=new Range;let d=l.reduce(((t,e)=>t+e.length),0);for(const{firstChild:u}of this.editorDiv.childNodes)if(u.nodeType===Node.TEXT_NODE){const t=u.nodeValue.length;if(d<=t){c.setStart(u,d),c.setEnd(u,d);break}d-=t}n.removeAllRanges(),n.addRange(c)}#an(){if(this.editorDiv.replaceChildren(),this.#Js)for(const t of this.#Js.split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#ln(){return this.#Js.replaceAll("\xa0"," ")}static#on(t){return t.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){let s=null;if(t instanceof Us){const{data:{defaultAppearanceData:{fontSize:e,fontColor:i},rect:n,rotation:r,id:a},textContent:o,textPosition:l,parent:{page:{pageNumber:h}}}=t;if(!o||0===o.length)return null;s=t={annotationType:b.FREETEXT,color:Array.from(i),fontSize:e,value:o.join("\n"),position:l,pageIndex:h-1,rect:n.slice(0),rotation:r,id:a,deleted:!1}}const n=super.deserialize(t,e,i);return n.#Ds=t.fontSize,n.#bs=At.makeHexColor(...t.color),n.#Js=ln.#on(t.value),n.annotationElementId=t.id||null,n.#tn=s,n}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=ln._internalPadding*this.parentScale,i=this.getRect(e,e),s=we._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#bs),n={annotationType:b.FREETEXT,color:s,fontSize:this.#Ds,value:this.#ln(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?n:this.annotationElementId&&!this.#hn(n)?null:(n.id=this.annotationElementId,n)}#hn(t){const{value:e,fontSize:i,color:s,pageIndex:n}=this.#tn;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some(((t,e)=>t!==s[e]))||t.pageIndex!==n}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#Ds}px * var(--scale-factor))`,i.color=this.#bs,e.replaceChildren();for(const n of this.#Js.split("\n")){const t=document.createElement("div");t.append(n?document.createTextNode(n):document.createElement("br")),e.append(t)}const s=ln._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:this.#Js}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class hn{#cn;#dn=[];#un=[];constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=1/0,r=-1/0,a=1/0,o=-1/0;const l=10**-4;for(const{x:g,y:m,width:v,height:b}of t){const t=Math.floor((g-e)/l)*l,i=Math.ceil((g+v+e)/l)*l,s=Math.floor((m-e)/l)*l,h=Math.ceil((m+b+e)/l)*l,c=[t,s,h,!0],d=[i,s,h,!1];this.#dn.push(c,d),n=Math.min(n,t),r=Math.max(r,i),a=Math.min(a,s),o=Math.max(o,h)}const h=r-n+2*i,c=o-a+2*i,d=n-i,u=a-i,p=this.#dn.at(s?-1:-2),f=[p[0],p[2]];for(const g of this.#dn){const[t,e,i]=g;g[0]=(t-d)/h,g[1]=(e-u)/c,g[2]=(i-u)/c}this.#cn={x:d,y:u,width:h,height:c,lastPoint:f}}getOutlines(){this.#dn.sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));const t=[];for(const e of this.#dn)e[3]?(t.push(...this.#pn(e)),this.#fn(e)):(this.#gn(e),t.push(...this.#pn(e)));return this.#mn(t)}#mn(t){const e=[],i=new Set;for(const r of t){const[t,i,s]=r;e.push([t,i,r],[t,s,r])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let r=0,a=e.length;r<a;r+=2){const t=e[r][2],s=e[r+1][2];t.push(s),s.push(t),i.add(t),i.add(s)}const s=[];let n;for(;i.size>0;){const t=i.values().next().value;let[e,r,a,o,l]=t;i.delete(t);let h=e,c=r;for(n=[e,a],s.push(n);;){let t;if(i.has(o))t=o;else{if(!i.has(l))break;t=l}i.delete(t),[e,r,a,o,l]=t,h!==e&&(n.push(h,c,e,c===r?r:a),h=e),c=c===r?a:r}n.push(h,c)}return new dn(s,this.#cn)}#vn(t){const e=this.#un;let i=0,s=e.length-1;for(;i<=s;){const n=i+s>>1,r=e[n][0];if(r===t)return n;r<t?i=n+1:s=n-1}return s+1}#fn(t){let[,e,i]=t;const s=this.#vn(e);this.#un.splice(s,0,[e,i])}#gn(t){let[,e,i]=t;const s=this.#vn(e);for(let n=s;n<this.#un.length;n++){const[t,s]=this.#un[n];if(t!==e)break;if(t===e&&s===i)return void this.#un.splice(n,1)}for(let n=s-1;n>=0;n--){const[t,s]=this.#un[n];if(t!==e)break;if(t===e&&s===i)return void this.#un.splice(n,1)}}#pn(t){const[e,i,s]=t,n=[[e,i,s]],r=this.#vn(s);for(let a=0;a<r;a++){const[t,i]=this.#un[a];for(let s=0,r=n.length;s<r;s++){const[,a,o]=n[s];if(!(i<=a||o<=t))if(a>=t)if(o>i)n[s][1]=i;else{if(1===r)return[];n.splice(s,1),s--,r--}else n[s][2]=t,o>i&&n.push([e,i,o])}}return n}}class cn{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof pn}}class dn extends cn{#cn;#bn;constructor(t,e){super(),this.#bn=t,this.#cn=e}toSVGPath(){const t=[];for(const e of this.#bn){let[i,s]=e;t.push(`M${i} ${s}`);for(let n=2;n<e.length;n+=2){const r=e[n],a=e[n+1];r===i?(t.push(`V${a}`),s=a):a===s&&(t.push(`H${r}`),i=r)}t.push("Z")}return t.join(" ")}serialize(t,e){let[i,s,n,r]=t;const a=[],o=n-i,l=r-s;for(const h of this.#bn){const t=new Array(h.length);for(let e=0;e<h.length;e+=2)t[e]=i+h[e]*o,t[e+1]=r-h[e+1]*l;a.push(t)}return a}get box(){return this.#cn}}class un{#cn;#yn=[];#_n;#wn;#xn=[];#An=new Float64Array(18);#En;#kn;#Sn;#Cn;#Pn;#Tn;#Mn=[];static#Dn=8;static#Rn=2;static#Ln=un.#Dn+un.#Rn;constructor(t,e,i,s,n){let{x:r,y:a}=t,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.#cn=e,this.#Tn=s*i,this.#wn=n,this.#An.set([NaN,NaN,NaN,NaN,r,a],6),this.#_n=o,this.#Cn=un.#Dn*i,this.#Sn=un.#Ln*i,this.#Pn=i,this.#Mn.push(r,a)}get free(){return!0}isEmpty(){return isNaN(this.#An[8])}#On(){const t=this.#An.subarray(4,6),e=this.#An.subarray(16,18),[i,s,n,r]=this.#cn;return[(this.#En+(t[0]-e[0])/2-i)/n,(this.#kn+(t[1]-e[1])/2-s)/r,(this.#En+(e[0]-t[0])/2-i)/n,(this.#kn+(e[1]-t[1])/2-s)/r]}add(t){var e;let{x:i,y:s}=t;this.#En=i,this.#kn=s;const[n,r,a,o]=this.#cn;let[l,h,c,d]=this.#An.subarray(8,12);const u=i-c,p=s-d,f=Math.hypot(u,p);if(f<this.#Sn)return!1;const g=f-this.#Cn,m=g/f,v=m*u,b=m*p;let y=l,_=h;l=c,h=d,c+=v,d+=b,null===(e=this.#Mn)||void 0===e||e.push(i,s);const w=v/g,x=-b/g*this.#Tn,A=w*this.#Tn;if(this.#An.set(this.#An.subarray(2,8),0),this.#An.set([c+x,d+A],4),this.#An.set(this.#An.subarray(14,18),12),this.#An.set([c-x,d-A],16),isNaN(this.#An[6]))return 0===this.#xn.length&&(this.#An.set([l+x,h+A],2),this.#xn.push(NaN,NaN,NaN,NaN,(l+x-n)/a,(h+A-r)/o),this.#An.set([l-x,h-A],14),this.#yn.push(NaN,NaN,NaN,NaN,(l-x-n)/a,(h-A-r)/o)),this.#An.set([y,_,l,h,c,d],6),!this.isEmpty();this.#An.set([y,_,l,h,c,d],6);return Math.abs(Math.atan2(_-h,y-l)-Math.atan2(b,v))<Math.PI/2?([l,h,c,d]=this.#An.subarray(2,6),this.#xn.push(NaN,NaN,NaN,NaN,((l+c)/2-n)/a,((h+d)/2-r)/o),[l,h,y,_]=this.#An.subarray(14,18),this.#yn.push(NaN,NaN,NaN,NaN,((y+l)/2-n)/a,((_+h)/2-r)/o),!0):([y,_,l,h,c,d]=this.#An.subarray(0,6),this.#xn.push(((y+5*l)/6-n)/a,((_+5*h)/6-r)/o,((5*l+c)/6-n)/a,((5*h+d)/6-r)/o,((l+c)/2-n)/a,((h+d)/2-r)/o),[c,d,l,h,y,_]=this.#An.subarray(12,18),this.#yn.push(((y+5*l)/6-n)/a,((_+5*h)/6-r)/o,((5*l+c)/6-n)/a,((5*h+d)/6-r)/o,((l+c)/2-n)/a,((h+d)/2-r)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const t=this.#xn,e=this.#yn,i=this.#An.subarray(4,6),s=this.#An.subarray(16,18),[n,r,a,o]=this.#cn,[l,h,c,d]=this.#On();if(isNaN(this.#An[6])&&!this.isEmpty())return`M${(this.#An[2]-n)/a} ${(this.#An[3]-r)/o} L${(this.#An[4]-n)/a} ${(this.#An[5]-r)/o} L${l} ${h} L${c} ${d} L${(this.#An[16]-n)/a} ${(this.#An[17]-r)/o} L${(this.#An[14]-n)/a} ${(this.#An[15]-r)/o} Z`;const u=[];u.push(`M${t[4]} ${t[5]}`);for(let p=6;p<t.length;p+=6)isNaN(t[p])?u.push(`L${t[p+4]} ${t[p+5]}`):u.push(`C${t[p]} ${t[p+1]} ${t[p+2]} ${t[p+3]} ${t[p+4]} ${t[p+5]}`);u.push(`L${(i[0]-n)/a} ${(i[1]-r)/o} L${l} ${h} L${c} ${d} L${(s[0]-n)/a} ${(s[1]-r)/o}`);for(let p=e.length-6;p>=6;p-=6)isNaN(e[p])?u.push(`L${e[p+4]} ${e[p+5]}`):u.push(`C${e[p]} ${e[p+1]} ${e[p+2]} ${e[p+3]} ${e[p+4]} ${e[p+5]}`);return u.push(`L${e[4]} ${e[5]} Z`),u.join(" ")}getOutlines(){var t;const e=this.#xn,i=this.#yn,s=this.#An,n=s.subarray(4,6),r=s.subarray(16,18),[a,o,l,h]=this.#cn,c=new Float64Array(((null===(t=this.#Mn)||void 0===t?void 0:t.length)??0)+2);for(let v=0,b=c.length-2;v<b;v+=2)c[v]=(this.#Mn[v]-a)/l,c[v+1]=(this.#Mn[v+1]-o)/h;c[c.length-2]=(this.#En-a)/l,c[c.length-1]=(this.#kn-o)/h;const[d,u,p,f]=this.#On();if(isNaN(s[6])&&!this.isEmpty()){const t=new Float64Array(36);return t.set([NaN,NaN,NaN,NaN,(s[2]-a)/l,(s[3]-o)/h,NaN,NaN,NaN,NaN,(s[4]-a)/l,(s[5]-o)/h,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,(s[16]-a)/l,(s[17]-o)/h,NaN,NaN,NaN,NaN,(s[14]-a)/l,(s[15]-o)/h],0),new pn(t,c,this.#cn,this.#Pn,this.#_n,this.#wn)}const g=new Float64Array(this.#xn.length+24+this.#yn.length);let m=e.length;for(let v=0;v<m;v+=2)isNaN(e[v])?g[v]=g[v+1]=NaN:(g[v]=e[v],g[v+1]=e[v+1]);g.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-o)/h,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-o)/h],m),m+=24;for(let v=i.length-6;v>=6;v-=6)for(let t=0;t<6;t+=2)isNaN(i[v+t])?(g[m]=g[m+1]=NaN,m+=2):(g[m]=i[v+t],g[m+1]=i[v+t+1],m+=2);return g.set([NaN,NaN,NaN,NaN,i[4],i[5]],m),new pn(g,c,this.#cn,this.#Pn,this.#_n,this.#wn)}}class pn extends cn{#cn;#In=null;#_n;#wn;#Mn;#Pn;#Fn;constructor(t,e,i,s,n,r){super(),this.#Fn=t,this.#Mn=e,this.#cn=i,this.#Pn=s,this.#_n=n,this.#wn=r,this.#Nn(r);const{x:a,y:o,width:l,height:h}=this.#In;for(let c=0,d=t.length;c<d;c+=2)t[c]=(t[c]-a)/l,t[c+1]=(t[c+1]-o)/h;for(let c=0,d=e.length;c<d;c+=2)e[c]=(e[c]-a)/l,e[c+1]=(e[c+1]-o)/h}toSVGPath(){const t=[`M${this.#Fn[4]} ${this.#Fn[5]}`];for(let e=6,i=this.#Fn.length;e<i;e+=6)isNaN(this.#Fn[e])?t.push(`L${this.#Fn[e+4]} ${this.#Fn[e+5]}`):t.push(`C${this.#Fn[e]} ${this.#Fn[e+1]} ${this.#Fn[e+2]} ${this.#Fn[e+3]} ${this.#Fn[e+4]} ${this.#Fn[e+5]}`);return t.push("Z"),t.join(" ")}serialize(t,e){let[i,s,n,r]=t;const a=n-i,o=r-s;let l,h;switch(e){case 0:l=this.#jn(this.#Fn,i,r,a,-o),h=this.#jn(this.#Mn,i,r,a,-o);break;case 90:l=this.#Bn(this.#Fn,i,s,a,o),h=this.#Bn(this.#Mn,i,s,a,o);break;case 180:l=this.#jn(this.#Fn,n,s,-a,o),h=this.#jn(this.#Mn,n,s,-a,o);break;case 270:l=this.#Bn(this.#Fn,n,r,-a,-o),h=this.#Bn(this.#Mn,n,r,-a,-o)}return{outline:Array.from(l),points:[Array.from(h)]}}#jn(t,e,i,s,n){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a]*s,r[a+1]=i+t[a+1]*n;return r}#Bn(t,e,i,s,n){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a+1]*s,r[a+1]=i+t[a]*n;return r}#Nn(t){const e=this.#Fn;let i=e[4],s=e[5],n=i,r=s,a=i,o=s,l=i,h=s;const c=t?Math.max:Math.min;for(let g=6,m=e.length;g<m;g+=6){if(isNaN(e[g]))n=Math.min(n,e[g+4]),r=Math.min(r,e[g+5]),a=Math.max(a,e[g+4]),o=Math.max(o,e[g+5]),h<e[g+5]?(l=e[g+4],h=e[g+5]):h===e[g+5]&&(l=c(l,e[g+4]));else{const t=At.bezierBoundingBox(i,s,...e.slice(g,g+6));n=Math.min(n,t[0]),r=Math.min(r,t[1]),a=Math.max(a,t[2]),o=Math.max(o,t[3]),h<t[3]?(l=t[2],h=t[3]):h===t[3]&&(l=c(l,t[2]))}i=e[g+4],s=e[g+5]}const d=n-this.#_n,u=r-this.#_n,p=a-n+2*this.#_n,f=o-r+2*this.#_n;this.#In={x:d,y:u,width:p,height:f,lastPoint:[l,h]}}get box(){return this.#In}getNewOutline(t,e){const{x:i,y:s,width:n,height:r}=this.#In,[a,o,l,h]=this.#cn,c=n*l,d=r*h,u=i*l+a,p=s*h+o,f=new un({x:this.#Mn[0]*c+u,y:this.#Mn[1]*d+p},this.#cn,this.#Pn,t,this.#wn,e??this.#_n);for(let g=2;g<this.#Mn.length;g+=2)f.add({x:this.#Mn[g]*c+u,y:this.#Mn[g+1]*d+p});return f.getOutlines()}}class fn{#cs=this.#ds.bind(this);#Hn=this.#o.bind(this);#Wn=null;#zn=null;#Vn;#$n=null;#Un=!1;#Gn=!1;#r=null;#qn;#p=null;#Yn;static get _keyboardManager(){return ht(this,"_keyboardManager",new ve([[["Escape","mac+Escape"],fn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fn.prototype._moveToPrevious],[["Home","mac+Home"],fn.prototype._moveToBeginning],[["End","mac+End"],fn.prototype._moveToEnd]]))}constructor(t){var e;let{editor:i=null,uiManager:s=null}=t;i?(this.#Gn=!1,this.#Yn=y.HIGHLIGHT_COLOR,this.#r=i):(this.#Gn=!0,this.#Yn=y.HIGHLIGHT_DEFAULT_COLOR),this.#p=(null===i||void 0===i?void 0:i._uiManager)||s,this.#qn=this.#p._eventBus,this.#Vn=(null===i||void 0===i?void 0:i.color)||(null===(e=this.#p)||void 0===e?void 0:e.highlightColors.values().next().value)||"#FFFF98"}renderButton(){const t=this.#Wn=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=this.#p._signal;t.addEventListener("click",this.#Xn.bind(this),{signal:e}),t.addEventListener("keydown",this.#cs,{signal:e});const i=this.#zn=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#Vn,t.append(i),t}renderMainDropdown(){const t=this.#$n=this.#Kn();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#Kn(){const t=document.createElement("div"),e=this.#p._signal;t.addEventListener("contextmenu",ie,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of this.#p.highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",s),n.title=i,n.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const r=document.createElement("span");n.append(r),r.className="swatch",r.style.backgroundColor=s,n.setAttribute("aria-selected",s===this.#Vn),n.addEventListener("click",this.#Qn.bind(this,s),{signal:e}),t.append(n)}return t.addEventListener("keydown",this.#cs,{signal:e}),t}#Qn(t,e){e.stopPropagation(),this.#qn.dispatch("switchannotationeditorparams",{source:this,type:this.#Yn,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#Wn)return void this.#Xn(t);const e=t.target.getAttribute("data-color");e&&this.#Qn(e,t)}_moveToNext(t){var e,i;this.#Jn?t.target!==this.#Wn?null===(e=t.target.nextSibling)||void 0===e||e.focus():null===(i=this.#$n.firstChild)||void 0===i||i.focus():this.#Xn(t)}_moveToPrevious(t){var e,i;t.target!==(null===(e=this.#$n)||void 0===e?void 0:e.firstChild)&&t.target!==this.#Wn?(this.#Jn||this.#Xn(t),null===(i=t.target.previousSibling)||void 0===i||i.focus()):this.#Jn&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){var e;this.#Jn?null===(e=this.#$n.firstChild)||void 0===e||e.focus():this.#Xn(t)}_moveToEnd(t){var e;this.#Jn?null===(e=this.#$n.lastChild)||void 0===e||e.focus():this.#Xn(t)}#ds(t){fn._keyboardManager.exec(this,t)}#Xn(t){if(this.#Jn)return void this.hideDropdown();if(this.#Un=0===t.detail,window.addEventListener("pointerdown",this.#Hn,{signal:this.#p._signal}),this.#$n)return void this.#$n.classList.remove("hidden");const e=this.#$n=this.#Kn();this.#Wn.append(e)}#o(t){var e;null!==(e=this.#$n)&&void 0!==e&&e.contains(t.target)||this.hideDropdown()}hideDropdown(){var t;null===(t=this.#$n)||void 0===t||t.classList.add("hidden"),window.removeEventListener("pointerdown",this.#Hn)}get#Jn(){return this.#$n&&!this.#$n.classList.contains("hidden")}_hideDropdownFromKeyboard(){var t;this.#Gn||(this.#Jn?(this.hideDropdown(),this.#Wn.focus({preventScroll:!0,focusVisible:this.#Un})):null===(t=this.#r)||void 0===t||t.unselect())}updateColor(t){if(this.#zn&&(this.#zn.style.backgroundColor=t),!this.#$n)return;const e=this.#p.highlightColors.values();for(const i of this.#$n.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;null===(t=this.#Wn)||void 0===t||t.remove(),this.#Wn=null,this.#zn=null,null===(e=this.#$n)||void 0===e||e.remove(),this.#$n=null}}class gn extends we{#Zn=null;#tr=0;#er;#ir=null;#n=null;#sr=null;#nr=null;#rr=0;#ar=null;#or=null;#v=null;#lr=!1;#ot=this.#hr.bind(this);#cr=null;#dr;#ur=null;#pr="";#Tn;#fr="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=b.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=gn.prototype;return ht(this,"_keyboardManager",new ve([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||gn._defaultColor,this.#Tn=t.thickness||gn._defaultThickness,this.#dr=t.opacity||gn._defaultOpacity,this.#er=t.boxes||null,this.#fr=t.methodOfCreation||"",this.#pr=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#lr=!0,this.#gr(t),this.#mr()):(this.#Zn=t.anchorNode,this.#tr=t.anchorOffset,this.#nr=t.focusNode,this.#rr=t.focusOffset,this.#vr(),this.#mr(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#lr?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#Tn,methodOfCreation:this.#fr}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#vr(){const t=new hn(this.#er,.001);this.#or=t.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#or.box);const e=new hn(this.#er,.0025,.001,"ltr"===this._uiManager.direction);this.#sr=e.getOutlines();const{lastPoint:i}=this.#sr.box;this.#cr=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#gr(t){let{highlightOutlines:e,highlightId:i,clipPathId:s}=t;this.#or=e;if(this.#sr=e.getNewOutline(this.#Tn/2+1.5,.0025),i>=0)this.#v=i,this.#ir=s,this.parent.drawLayer.finalizeLine(i,e),this.#ur=this.parent.drawLayer.highlightOutline(this.#sr);else if(this.parent){const t=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#v,e),this.parent.drawLayer.updateBox(this.#v,gn.#br(this.#or.box,(t-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#ur,this.#sr),this.parent.drawLayer.updateBox(this.#ur,gn.#br(this.#sr.box,t))}const{x:n,y:r,width:a,height:o}=e.box;switch(this.rotation){case 0:this.x=n,this.y=r,this.width=a,this.height=o;break;case 90:{const[t,e]=this.parentDimensions;this.x=r,this.y=1-n,this.width=a*e/t,this.height=o*t/e;break}case 180:this.x=1-n,this.y=1-r,this.width=a,this.height=o;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-r,this.y=n,this.width=a*e/t,this.height=o*t/e;break}}const{lastPoint:l}=this.#sr.box;this.#cr=[(l[0]-n)/a,(l[1]-r)/o]}static initialize(t,e){var i;we.initialize(t,e),gn._defaultColor||=(null===(i=e.highlightColors)||void 0===i?void 0:i.values().next().value)||"#fff066"}static updateDefaultParams(t,e){switch(t){case y.HIGHLIGHT_DEFAULT_COLOR:gn._defaultColor=e;break;case y.HIGHLIGHT_THICKNESS:gn._defaultThickness=e}}translateInPage(t,e){}get toolbarPosition(){return this.#cr}updateParams(t,e){switch(t){case y.HIGHLIGHT_COLOR:this.#in(e);break;case y.HIGHLIGHT_THICKNESS:this.#yr(e)}}static get defaultPropertiesToUpdate(){return[[y.HIGHLIGHT_DEFAULT_COLOR,gn._defaultColor],[y.HIGHLIGHT_THICKNESS,gn._defaultThickness]]}get propertiesToUpdate(){return[[y.HIGHLIGHT_COLOR,this.color||gn._defaultColor],[y.HIGHLIGHT_THICKNESS,this.#Tn||gn._defaultThickness],[y.HIGHLIGHT_FREE,this.#lr]]}#in(t){const e=t=>{var e,i;this.color=t,null===(e=this.parent)||void 0===e||e.drawLayer.changeColor(this.#v,t),null===(i=this.#n)||void 0===i||i.updateColor(t)},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:y.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#yr(t){const e=this.#Tn,i=t=>{this.#Tn=t,this.#_r(t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:y.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#n=new fn({editor:this}),t.addColorPicker(this.#n)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#wr())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#wr())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#xr(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#mr(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;if(this.parent&&!t)this.#xr();else if(t){var i;this.#mr(t),e=!this.parent&&(null===(i=this.div)||void 0===i?void 0:i.classList.contains("selectedEditor"))}super.setParent(t),this.show(this._isVisible),e&&this.select()}#_r(t){if(!this.#lr)return;this.#gr({highlightOutlines:this.#or.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#xr(){null!==this.#v&&this.parent&&(this.parent.drawLayer.remove(this.#v),this.#v=null,this.parent.drawLayer.remove(this.#ur),this.#ur=null)}#mr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===this.#v&&(({id:this.#v,clipPathId:this.#ir}=t.drawLayer.highlight(this.#or,this.color,this.#dr)),this.#ur=t.drawLayer.highlightOutline(this.#sr),this.#ar&&(this.#ar.style.clipPath=this.#ir))}static#br(t,e){let{x:i,y:s,width:n,height:r}=t;switch(e){case 90:return{x:1-s-r,y:i,width:r,height:n};case 180:return{x:1-i-n,y:1-s-r,width:n,height:r};case 270:return{x:s,y:1-i-n,width:r,height:n}}return{x:i,y:s,width:n,height:r}}rotate(t){const{drawLayer:e}=this.parent;let i;this.#lr?(t=(t-this.rotation+360)%360,i=gn.#br(this.#or.box,t)):i=gn.#br(this,t),e.rotate(this.#v,t),e.rotate(this.#ur,t),e.updateBox(this.#v,i),e.updateBox(this.#ur,gn.#br(this.#sr.box,t))}render(){if(this.div)return this.div;const t=super.render();this.#pr&&(t.setAttribute("aria-label",this.#pr),t.setAttribute("role","mark")),this.#lr?t.classList.add("free"):this.div.addEventListener("keydown",this.#ot,{signal:this._uiManager._signal});const e=this.#ar=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#ir;const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),pe(this,this.#ar,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(this.#ur,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#ur,"hovered")}#hr(t){gn._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#Ar(!0);break;case 1:case 3:this.#Ar(!1)}}#Ar(t){if(!this.#Zn)return;const e=window.getSelection();t?e.setPosition(this.#Zn,this.#tr):e.setPosition(this.#nr,this.#rr)}select(){var t,e;super.select(),this.#ur&&(null===(t=this.parent)||void 0===t||t.drawLayer.removeClass(this.#ur,"hovered"),null===(e=this.parent)||void 0===e||e.drawLayer.addClass(this.#ur,"selected"))}unselect(){var t;super.unselect(),this.#ur&&(null===(t=this.parent)||void 0===t||t.drawLayer.removeClass(this.#ur,"selected"),this.#lr||this.#Ar(!1))}get _mustFixPosition(){return!this.#lr}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(t),this.parent&&(this.parent.drawLayer.show(this.#v,t),this.parent.drawLayer.show(this.#ur,t))}#wr(){return this.#lr?this.rotation:0}#Er(){if(this.#lr)return null;const[t,e]=this.pageDimensions,i=this.#er,s=new Float32Array(8*i.length);let n=0;for(const{x:r,y:a,width:o,height:l}of i){const i=r*t,h=(1-a-l)*e;s[n]=s[n+4]=i,s[n+1]=s[n+3]=h,s[n+2]=s[n+6]=i+o*t,s[n+5]=s[n+7]=h+l*e,n+=8}return s}#kr(t){return this.#or.serialize(t,this.#wr())}static startHighlighting(t,e,i){let{target:s,x:n,y:r}=i;const{x:a,y:o,width:l,height:h}=s.getBoundingClientRect(),c=e=>{this.#Sr(t,e)},d=t._signal,u={capture:!0,passive:!1,signal:d},p=t=>{t.preventDefault(),t.stopPropagation()},f=e=>{s.removeEventListener("pointermove",c),window.removeEventListener("blur",f),window.removeEventListener("pointerup",f),window.removeEventListener("pointerdown",p,u),window.removeEventListener("contextmenu",ie),this.#Cr(t,e)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",p,u),window.addEventListener("contextmenu",ie,{signal:d}),s.addEventListener("pointermove",c,{signal:d}),this._freeHighlight=new un({x:n,y:r},[a,o,l,h],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#Sr(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#Cr(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,i){const s=super.deserialize(t,e,i),{rect:[n,r,a,o],color:l,quadPoints:h}=t;s.color=At.makeHexColor(...l),s.#dr=t.opacity;const[c,d]=s.pageDimensions;s.width=(a-n)/c,s.height=(o-r)/d;const u=s.#er=[];for(let p=0;p<h.length;p+=8)u.push({x:(h[4]-a)/c,y:(o-(1-h[p+5]))/d,width:(h[p+2]-h[p])/c,height:(h[p+5]-h[p+1])/d});return s.#vr(),s}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;const e=this.getRect(0,0),i=we._colorManager.convert(this.color);return{annotationType:b.HIGHLIGHT,color:i,opacity:this.#dr,thickness:this.#Tn,quadPoints:this.#Er(),outlines:this.#kr(e),pageIndex:this.pageIndex,rect:e,rotation:this.#wr(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class mn extends we{#Pr=0;#Tr=0;#Mr=this.canvasPointermove.bind(this);#Dr=this.canvasPointerleave.bind(this);#Rr=this.canvasPointerup.bind(this);#Lr=this.canvasPointerdown.bind(this);#Or=null;#Ir=new Path2D;#Fr=!1;#Nr=!1;#jr=!1;#Br=null;#Hr=0;#Wr=0;#zr=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=b.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){we.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case y.INK_THICKNESS:mn._defaultThickness=e;break;case y.INK_COLOR:mn._defaultColor=e;break;case y.INK_OPACITY:mn._defaultOpacity=e/100}}updateParams(t,e){switch(t){case y.INK_THICKNESS:this.#yr(e);break;case y.INK_COLOR:this.#in(e);break;case y.INK_OPACITY:this.#Vr(e)}}static get defaultPropertiesToUpdate(){return[[y.INK_THICKNESS,mn._defaultThickness],[y.INK_COLOR,mn._defaultColor||we._defaultLineColor],[y.INK_OPACITY,Math.round(100*mn._defaultOpacity)]]}get propertiesToUpdate(){return[[y.INK_THICKNESS,this.thickness||mn._defaultThickness],[y.INK_COLOR,this.color||mn._defaultColor||we._defaultLineColor],[y.INK_OPACITY,Math.round(100*(this.opacity??mn._defaultOpacity))]]}#yr(t){const e=t=>{this.thickness=t,this.#$r()},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:y.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#in(t){const e=t=>{this.color=t,this.#Ur()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:y.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#Vr(t){const e=t=>{this.opacity=t,this.#Ur()};t/=100;const i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:y.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#Gr(),this.#qr()),this.isAttachedToDOM||(this.parent.add(this),this.#Yr()),this.#$r()))}remove(){var t;null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#Or&&(clearTimeout(this.#Or),this.#Or=null),null===(t=this.#Br)||void 0===t||t.disconnect(),this.#Br=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,i=this.width*t,s=this.height*e;this.setDimensions(i,s)}enableEditMode(){this.#Fr||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#Lr,{signal:this._uiManager._signal}))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#Lr))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Xr(){const{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#Kr(){const{ctx:t,color:e,opacity:i,thickness:s,parentScale:n,scaleFactor:r}=this;t.lineWidth=s*n/r,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}(i)}`}#Qr(t,e){const i=this._uiManager._signal;this.canvas.addEventListener("contextmenu",ie,{signal:i}),this.canvas.addEventListener("pointerleave",this.#Dr,{signal:i}),this.canvas.addEventListener("pointermove",this.#Mr,{signal:i}),this.canvas.addEventListener("pointerup",this.#Rr,{signal:i}),this.canvas.removeEventListener("pointerdown",this.#Lr),this.isEditing=!0,this.#jr||(this.#jr=!0,this.#Yr(),this.thickness||=mn._defaultThickness,this.color||=mn._defaultColor||we._defaultLineColor,this.opacity??=mn._defaultOpacity),this.currentPath.push([t,e]),this.#Nr=!1,this.#Kr(),this.#zr=()=>{this.#Jr(),this.#zr&&window.requestAnimationFrame(this.#zr)},window.requestAnimationFrame(this.#zr)}#Zr(t,e){const[i,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===s)return;const n=this.currentPath;let r=this.#Ir;if(n.push([t,e]),this.#Nr=!0,n.length<=2)return r.moveTo(...n[0]),void r.lineTo(t,e);3===n.length&&(this.#Ir=r=new Path2D,r.moveTo(...n[0])),this.#ta(r,...n.at(-3),...n.at(-2),t,e)}#ea(){if(0===this.currentPath.length)return;const t=this.currentPath.at(-1);this.#Ir.lineTo(...t)}#ia(t,e){let i;if(this.#zr=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#Zr(t,e),this.#ea(),1!==this.currentPath.length)i=this.#sa();else{const s=[t,e];i=[[s,s.slice(),s.slice(),s]]}const s=this.#Ir,n=this.currentPath;this.currentPath=[],this.#Ir=new Path2D;this.addCommands({cmd:()=>{this.allRawPaths.push(n),this.paths.push(i),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#Gr(),this.#qr()),this.#$r())},mustExec:!0})}#Jr(){if(!this.#Nr)return;this.#Nr=!1;const t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),i=e.map((t=>t[0])),s=e.map((t=>t[1])),{ctx:n}=(Math.min(...i),Math.max(...i),Math.min(...s),Math.max(...s),this);n.save(),n.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)n.stroke(r);n.stroke(this.#Ir),n.restore()}#ta(t,e,i,s,n,r,a){const o=(e+s)/2,l=(i+n)/2,h=(s+r)/2,c=(n+a)/2;t.bezierCurveTo(o+2*(s-o)/3,l+2*(n-l)/3,h+2*(s-h)/3,c+2*(n-c)/3,h,c)}#sa(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let i,[s,n]=t[0];for(i=1;i<t.length-2;i++){const[r,a]=t[i],[o,l]=t[i+1],h=(r+o)/2,c=(a+l)/2,d=[s+2*(r-s)/3,n+2*(a-n)/3],u=[h+2*(r-h)/3,c+2*(a-c)/3];e.push([[s,n],d,u,[h,c]]),[s,n]=[h,c]}const[r,a]=t[i],[o,l]=t[i+1],h=[s+2*(r-s)/3,n+2*(a-n)/3],c=[o+2*(r-o)/3,l+2*(a-l)/3];return e.push([[s,n],h,c,[o,l]]),e}#Ur(){if(this.isEmpty())return void this.#na();this.#Kr();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#na();for(const i of this.bezierPath2D)e.stroke(i)}commit(){this.#Fr||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Fr=!0,this.div.classList.add("disabled"),this.#$r(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!this.#Fr&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#Qr(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#Zr(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#ra(t)}canvasPointerleave(t){this.#ra(t)}#ra(t){this.canvas.removeEventListener("pointerleave",this.#Dr),this.canvas.removeEventListener("pointermove",this.#Mr),this.canvas.removeEventListener("pointerup",this.#Rr),this.canvas.addEventListener("pointerdown",this.#Lr,{signal:this._uiManager._signal}),this.#Or&&clearTimeout(this.#Or),this.#Or=setTimeout((()=>{this.#Or=null,this.canvas.removeEventListener("contextmenu",ie)}),10),this.#ia(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#Gr(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#qr(){this.#Br=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),this.#Br.observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{var t;null===(t=this.#Br)||void 0===t||t.disconnect(),this.#Br=null}),{once:!0})}get isResizable(){return!this.isEmpty()&&this.#Fr}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,s,n,r]=this.#Xr();if(this.setAt(i,s,0,0),this.setDims(n,r),this.#Gr(),this.width){const[i,s]=this.parentDimensions;this.setAspectRatio(this.width*i,this.height*s),this.setAt(t*i,e*s,this.width*i,this.height*s),this.#jr=!0,this.#Yr(),this.setDims(this.width*i,this.height*s),this.#Ur(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#qr(),this.div}#Yr(){if(!this.#jr)return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#na()}setDimensions(t,e){const i=Math.round(t),s=Math.round(e);if(this.#Hr===i&&this.#Wr===s)return;this.#Hr=i,this.#Wr=s,this.canvas.style.visibility="hidden";const[n,r]=this.parentDimensions;this.width=t/n,this.height=e/r,this.fixAndSetPosition(),this.#Fr&&this.#aa(t,e),this.#Yr(),this.#Ur(),this.canvas.style.visibility="visible",this.fixDims()}#aa(t,e){const i=this.#oa(),s=(t-i)/this.#Tr,n=(e-i)/this.#Pr;this.scaleFactor=Math.min(s,n)}#na(){const t=this.#oa()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#la(t){const e=new Path2D;for(let i=0,s=t.length;i<s;i++){const[s,n,r,a]=t[i];0===i&&e.moveTo(...s),e.bezierCurveTo(n[0],n[1],r[0],r[1],a[0],a[1])}return e}static#ha(t,e,i){const[s,n,r,a]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]+=s,t[e+1]=a-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]+s,t[e+1]=i+n}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]+=n;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=r-t[e+1],t[e+1]=a-i}break;default:throw new Error("Invalid rotation")}return t}static#ca(t,e,i){const[s,n,r,a]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]-=s,t[e+1]=a-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]-n,t[e+1]=i-s}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]-=n;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=a-t[e+1],t[e+1]=r-i}break;default:throw new Error("Invalid rotation")}return t}#da(t,e,i,s){const n=[],r=this.thickness/2,a=t*e+r,o=t*i+r;for(const l of this.paths){const e=[],i=[];for(let s=0,n=l.length;s<n;s++){const[r,h,c,d]=l[s];if(r[0]===d[0]&&r[1]===d[1]&&1===n){const s=t*r[0]+a,n=t*r[1]+o;e.push(s,n),i.push(s,n);break}const u=t*r[0]+a,p=t*r[1]+o,f=t*h[0]+a,g=t*h[1]+o,m=t*c[0]+a,v=t*c[1]+o,b=t*d[0]+a,y=t*d[1]+o;0===s&&(e.push(u,p),i.push(u,p)),e.push(f,g,m,v,b,y),i.push(f,g),s===n-1&&i.push(b,y)}n.push({bezier:mn.#ha(e,s,this.rotation),points:mn.#ha(i,s,this.rotation)})}return n}#ua(){let t=1/0,e=-1/0,i=1/0,s=-1/0;for(const n of this.paths)for(const[r,a,o,l]of n){const n=At.bezierBoundingBox(...r,...a,...o,...l);t=Math.min(t,n[0]),i=Math.min(i,n[1]),e=Math.max(e,n[2]),s=Math.max(s,n[3])}return[t,i,e,s]}#oa(){return this.#Fr?Math.ceil(this.thickness*this.parentScale):0}#$r(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!this.#Fr)return void this.#Ur();const e=this.#ua(),i=this.#oa();this.#Tr=Math.max(we.MIN_SIZE,e[2]-e[0]),this.#Pr=Math.max(we.MIN_SIZE,e[3]-e[1]);const s=Math.ceil(i+this.#Tr*this.scaleFactor),n=Math.ceil(i+this.#Pr*this.scaleFactor),[r,a]=this.parentDimensions;this.width=s/r,this.height=n/a,this.setAspectRatio(s,n);const o=this.translationX,l=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#Yr(),this.#Ur(),this.#Hr=s,this.#Wr=n,this.setDims(s,n);const h=t?i/this.scaleFactor/2:0;this.translate(o-this.translationX-h,l-this.translationY-h)}static deserialize(t,e,i){if(t instanceof Js)return null;const s=super.deserialize(t,e,i);s.thickness=t.thickness,s.color=At.makeHexColor(...t.color),s.opacity=t.opacity;const[n,r]=s.pageDimensions,a=s.width*n,o=s.height*r,l=s.parentScale,h=t.thickness/2;s.#Fr=!0,s.#Hr=Math.round(a),s.#Wr=Math.round(o);const{paths:c,rect:d,rotation:u}=t;for(let{bezier:f}of c){f=mn.#ca(f,d,u);const t=[];s.paths.push(t);let e=l*(f[0]-h),i=l*(f[1]-h);for(let s=2,r=f.length;s<r;s+=6){const n=l*(f[s]-h),r=l*(f[s+1]-h),a=l*(f[s+2]-h),o=l*(f[s+3]-h),c=l*(f[s+4]-h),d=l*(f[s+5]-h);t.push([[e,i],[n,r],[a,o],[c,d]]),e=c,i=d}const n=this.#la(t);s.bezierPath2D.push(n)}const p=s.#ua();return s.#Tr=Math.max(we.MIN_SIZE,p[2]-p[0]),s.#Pr=Math.max(we.MIN_SIZE,p[3]-p[1]),s.#aa(a,o),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=we._colorManager.convert(this.ctx.strokeStyle);return{annotationType:b.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#da(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class vn extends we{#pa=null;#fa=null;#ga=null;#ma=null;#va=null;#ba="";#ya=null;#Br=null;#_a=null;#wa=!1;#xa=!1;static _type="stamp";static _editorType=b.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#ma=t.bitmapUrl,this.#va=t.bitmapFile}static initialize(t,e){we.initialize(t,e)}static get supportedTypes(){return ht(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>`image/${t}`)))}static get supportedTypesStr(){return ht(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(b.STAMP,{bitmapFile:t.getAsFile()})}#Aa(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(this.#pa=t.bitmap,e||(this.#fa=t.id,this.#wa=t.isSvg),t.file&&(this.#ba=t.file.name),this.#Gr()):this.remove()}#Ea(){this.#ga=null,this._uiManager.enableWaiting(!1),this.#ya&&this.div.focus()}#ka(){if(this.#fa)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#fa).then((t=>this.#Aa(t,!0))).finally((()=>this.#Ea()));if(this.#ma){const t=this.#ma;return this.#ma=null,this._uiManager.enableWaiting(!0),void(this.#ga=this._uiManager.imageManager.getFromUrl(t).then((t=>this.#Aa(t))).finally((()=>this.#Ea())))}if(this.#va){const t=this.#va;return this.#va=null,this._uiManager.enableWaiting(!0),void(this.#ga=this._uiManager.imageManager.getFromFile(t).then((t=>this.#Aa(t))).finally((()=>this.#Ea())))}const t=document.createElement("input");t.type="file",t.accept=vn.supportedTypesStr;const e=this._uiManager._signal;this.#ga=new Promise((i=>{t.addEventListener("change",(async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this.#Aa(e)}else this.remove();i()}),{signal:e}),t.addEventListener("cancel",(()=>{this.remove(),i()}),{signal:e})})).finally((()=>this.#Ea())),t.click()}remove(){var t,e;this.#fa&&(this.#pa=null,this._uiManager.imageManager.deleteId(this.#fa),null===(t=this.#ya)||void 0===t||t.remove(),this.#ya=null,null===(e=this.#Br)||void 0===e||e.disconnect(),this.#Br=null,this.#_a&&(clearTimeout(this.#_a),this.#_a=null));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#fa&&null===this.#ya&&this.#ka(),this.isAttachedToDOM||this.parent.add(this))):this.#fa&&this.#ka()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#ga||this.#pa||this.#ma||this.#va||this.#fa)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#pa?this.#Gr():this.#ka(),this.width){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s)}return this.div}#Gr(){const{div:t}=this;let{width:e,height:i}=this.#pa;const[s,n]=this.pageDimensions,r=.75;if(this.width)e=this.width*s,i=this.height*n;else if(e>r*s||i>r*n){const t=Math.min(r*s/e,r*n/i);e*=t,i*=t}const[a,o]=this.parentDimensions;this.setDims(e*a/s,i*o/n),this._uiManager.enableWaiting(!1);const l=this.#ya=document.createElement("canvas");t.append(l),t.hidden=!1,this.#Sa(e,i),this.#qr(),this.#xa||(this.parent.addUndoableEditor(this),this.#xa=!0),this._reportTelemetry({action:"inserted_image"}),this.#ba&&l.setAttribute("aria-label",this.#ba)}#Ca(t,e){var i;const[s,n]=this.parentDimensions;this.width=t/s,this.height=e/n,this.setDims(t,e),null!==(i=this._initialOptions)&&void 0!==i&&i.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#_a&&clearTimeout(this.#_a);this.#_a=setTimeout((()=>{this.#_a=null,this.#Sa(t,e)}),200)}#Pa(t,e){const{width:i,height:s}=this.#pa;let n=i,r=s,a=this.#pa;for(;n>2*t||r>2*e;){const i=n,s=r;n>2*t&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(n,r);o.getContext("2d").drawImage(a,0,0,i,s,0,0,n,r),a=o.transferToImageBitmap()}return a}#Sa(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=this.#ya;if(!i||i.width===t&&i.height===e)return;i.width=t,i.height=e;const s=this.#wa?this.#pa:this.#Pa(t,e);if(this._uiManager.hasMLManager&&!this.hasAltText()){const i=new OffscreenCanvas(t,e).getContext("2d");i.drawImage(s,0,0,s.width,s.height,0,0,t,e),this._uiManager.mlGuess({service:"image-to-text",request:{data:i.getImageData(0,0,t,e).data,width:t,height:e,channels:4}}).then((t=>{const e=(null===t||void 0===t?void 0:t.output)||"";this.parent&&e&&!this.hasAltText()&&(this.altTextData={altText:e,decorative:!1})}))}const n=i.getContext("2d");n.filter=this._uiManager.hcmFilter,n.drawImage(s,0,0,s.width,s.height,0,0,t,e)}getImageForAltText(){return this.#ya}#Ta(t){if(t){if(this.#wa){const t=this._uiManager.imageManager.getSvgUrl(this.#fa);if(t)return t}const t=document.createElement("canvas");({width:t.width,height:t.height}=this.#pa);return t.getContext("2d").drawImage(this.#pa,0,0),t.toDataURL()}if(this.#wa){const[t,e]=this.pageDimensions,i=Math.round(this.width*t*Vt.PDF_TO_CSS_UNITS),s=Math.round(this.height*e*Vt.PDF_TO_CSS_UNITS),n=new OffscreenCanvas(i,s);return n.getContext("2d").drawImage(this.#pa,0,0,this.#pa.width,this.#pa.height,0,0,i,s),n.transferToImageBitmap()}return structuredClone(this.#pa)}#qr(){this._uiManager._signal&&(this.#Br=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.#Ca(e.width,e.height)})),this.#Br.observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{var t;null===(t=this.#Br)||void 0===t||t.disconnect(),this.#Br=null}),{once:!0}))}static deserialize(t,e,i){if(t instanceof nn)return null;const s=super.deserialize(t,e,i),{rect:n,bitmapUrl:r,bitmapId:a,isSvg:o,accessibilityData:l}=t;a&&i.imageManager.isValidId(a)?s.#fa=a:s.#ma=r,s.#wa=o;const[h,c]=s.pageDimensions;return s.width=(n[2]-n[0])/h,s.height=(n[3]-n[1])/c,l&&(s.altTextData=l),s}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const i={annotationType:b.STAMP,bitmapId:this.#fa,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#wa,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#Ta(!0),i.accessibilityData=this.altTextData,i;const{decorative:s,altText:n}=this.altTextData;if(!s&&n&&(i.accessibilityData={type:"Figure",alt:n}),null===e)return i;e.stamps||=new Map;const r=this.#wa?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(e.stamps.has(this.#fa)){if(this.#wa){const t=e.stamps.get(this.#fa);r>t.area&&(t.area=r,t.serialized.bitmap.close(),t.serialized.bitmap=this.#Ta(!1))}}else e.stamps.set(this.#fa,{area:r,serialized:i}),i.bitmap=this.#Ta(!1);return i}}class bn{#zs;#Ma=!1;#Da=null;#Ra=null;#La=null;#Oa=null;#Ia=null;#Fa=new Map;#Na=!1;#ja=!1;#Ba=!1;#Ha=null;#p;static _initialized=!1;static#N=new Map([ln,mn,vn,gn].map((t=>[t._editorType,t])));constructor(t){let{uiManager:e,pageIndex:i,div:s,accessibilityManager:n,annotationLayer:r,drawLayer:a,textLayer:o,viewport:l,l10n:h}=t;const c=[...bn.#N.values()];if(!bn._initialized){bn._initialized=!0;for(const t of c)t.initialize(h,e)}e.registerEditorTypes(c),this.#p=e,this.pageIndex=i,this.div=s,this.#zs=n,this.#Da=r,this.viewport=l,this.#Ha=o,this.drawLayer=a,this.#p.addLayer(this)}get isEmpty(){return 0===this.#Fa.size}get isInvisible(){return this.isEmpty&&this.#p.getMode()===b.NONE}updateToolbar(t){this.#p.updateToolbar(t)}updateMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.#p.getMode();switch(this.#Wa(),t){case b.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case b.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case b.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of bn.#N.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===(null===(e=this.#Ha)||void 0===e?void 0:e.div)}addInkEditorIfNeeded(t){if(this.#p.getMode()!==b.INK)return;if(!t)for(const e of this.#Fa.values())if(e.isEmpty())return void e.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#p.setEditingState(t)}addCommands(t){this.#p.addCommands(t)}togglePointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(){var t;let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(t=this.#Da)||void 0===t||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of this.#Fa.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#p.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#Da)return;const e=this.#Da.getEditableAnnotations();for(const i of e){if(i.hide(),this.#p.isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#Ba=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const n of this.#Fa.values()){var i;n.disableEditing(),n.annotationElementId&&(null===n.serialize()?(e.set(n.annotationElementId,n),null===(i=this.getEditableAnnotation(n.annotationElementId))||void 0===i||i.show(),n.remove()):t.set(n.annotationElementId,n))}if(this.#Da){const i=this.#Da.getEditableAnnotations();for(const s of i){const{id:i}=s.data;if(this.#p.isDeletedAnnotationElement(i))continue;let n=e.get(i);n?(n.resetAnnotationElement(s),n.show(!1),s.show()):(n=t.get(i),n&&(this.#p.addChangedExistingAnnotation(n),n.renderAnnotationElement(s),n.show(!1)),s.show())}}this.#Wa(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const n of bn.#N.values())s.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#Ba=!1}getEditableAnnotation(t){var e;return(null===(e=this.#Da)||void 0===e?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){this.#p.getActive()!==t&&this.#p.setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,null!==(t=this.#Ha)&&void 0!==t&&t.div&&!this.#Oa&&(this.#Oa=this.#za.bind(this),this.#Ha.div.addEventListener("pointerdown",this.#Oa,{signal:this.#p._signal}),this.#Ha.div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,null!==(t=this.#Ha)&&void 0!==t&&t.div&&this.#Oa&&(this.#Ha.div.removeEventListener("pointerdown",this.#Oa),this.#Oa=null,this.#Ha.div.classList.remove("highlighting"))}#za(t){if(this.#p.unselectAll(),t.target===this.#Ha.div){const{isMac:e}=wt.platform;if(0!==t.button||t.ctrlKey&&e)return;this.#p.showAllEditors("highlight",!0,!0),this.#Ha.div.classList.add("free"),gn.startHighlighting(this,"ltr"===this.#p.direction,t),this.#Ha.div.addEventListener("pointerup",(()=>{this.#Ha.div.classList.remove("free")}),{once:!0,signal:this.#p._signal}),t.preventDefault()}}enableClick(){if(this.#La)return;const t=this.#p._signal;this.#La=this.pointerdown.bind(this),this.#Ra=this.pointerup.bind(this),this.div.addEventListener("pointerdown",this.#La,{signal:t}),this.div.addEventListener("pointerup",this.#Ra,{signal:t})}disableClick(){this.#La&&(this.div.removeEventListener("pointerdown",this.#La),this.div.removeEventListener("pointerup",this.#Ra),this.#La=null,this.#Ra=null)}attach(t){this.#Fa.set(t.id,t);const{annotationElementId:e}=t;e&&this.#p.isDeletedAnnotationElement(e)&&this.#p.removeDeletedAnnotationElement(t)}detach(t){var e;this.#Fa.delete(t.id),null===(e=this.#zs)||void 0===e||e.removePointerInTextLayer(t.contentDiv),!this.#Ba&&t.annotationElementId&&this.#p.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#p.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#ja||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#p.addDeletedAnnotationElement(t.annotationElementId),we.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),null===(e=t.parent)||void 0===e||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#p.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#p.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var e;if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#Ia&&(t._focusEventsAllowed=!1,this.#Ia=setTimeout((()=>{this.#Ia=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0,signal:this.#p._signal}),i.focus())}),0)),t._structTreeParentId=null===(e=this.#zs)||void 0===e?void 0:e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#p.getId()}get#Va(){return bn.#N.get(this.#p.getMode())}get _signal(){return this.#p._signal}#$a(t){const e=this.#Va;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){var t;return null===(t=this.#Va)||void 0===t?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#p.updateToolbar(t),this.#p.updateMode(t);const{offsetX:i,offsetY:s}=this.#Ua(),n=this.getNextId(),r=this.#$a({parent:this,id:n,x:i,y:s,uiManager:this.#p,isCentered:!0,...e});r&&this.add(r)}deserialize(t){var e;return(null===(e=bn.#N.get(t.annotationType??t.annotationEditorType))||void 0===e?void 0:e.deserialize(t,this,this.#p))||null}createAndAddNewEditor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.getNextId(),n=this.#$a({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#p,isCentered:e,...i});return n&&this.add(n),n}#Ua(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),n=Math.max(0,t),r=Math.max(0,e),a=(n+Math.min(window.innerWidth,t+i))/2-t,o=(r+Math.min(window.innerHeight,e+s))/2-e,[l,h]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:h}}addNewEditor(){this.createAndAddNewEditor(this.#Ua(),!0)}setSelected(t){this.#p.setSelected(t)}toggleSelected(t){this.#p.toggleSelected(t)}isSelected(t){return this.#p.isSelected(t)}unselect(t){this.#p.unselect(t)}pointerup(t){const{isMac:e}=wt.platform;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#Na&&(this.#Na=!1,this.#Ma?this.#p.getMode()!==b.STAMP?this.createAndAddNewEditor(t,!1):this.#p.unselectAll():this.#Ma=!0)}pointerdown(t){if(this.#p.getMode()===b.HIGHLIGHT&&this.enableTextSelection(),this.#Na)return void(this.#Na=!1);const{isMac:e}=wt.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;this.#Na=!0;const i=this.#p.getActive();this.#Ma=!i||i.isEmpty()}findNewParent(t,e,i){const s=this.#p.findParent(e,i);return null!==s&&s!==this&&(s.changeParent(t),!0)}destroy(){var t;(null===(t=this.#p.getActive())||void 0===t?void 0:t.parent)===this&&(this.#p.commitOrRemove(),this.#p.setActiveEditor(null)),this.#Ia&&(clearTimeout(this.#Ia),this.#Ia=null);for(const i of this.#Fa.values()){var e;null===(e=this.#zs)||void 0===e||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove()}this.div=null,this.#Fa.clear(),this.#p.removeLayer(this)}#Wa(){this.#ja=!0;for(const t of this.#Fa.values())t.isEmpty()&&t.remove();this.#ja=!1}render(t){let{viewport:e}=t;this.viewport=e,ce(this.div,e);for(const i of this.#p.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update(t){let{viewport:e}=t;this.#p.commitOrRemove(),this.#Wa();const i=this.viewport.rotation,s=e.rotation;if(this.viewport=e,ce(this.div,{rotation:s}),i!==s)for(const n of this.#Fa.values())n.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#p.viewParameters.realScale}}class yn{#xs=null;#v=0;#Ga=new Map;#qa=new Map;constructor(t){let{pageIndex:e}=t;this.pageIndex=e}setParent(t){if(this.#xs){if(this.#xs!==t){if(this.#Ga.size>0)for(const e of this.#Ga.values())e.remove(),t.append(e);this.#xs=t}}else this.#xs=t}static get _svgFactory(){return ht(this,"_svgFactory",new qt)}static#Ya(t){let{x:e=0,y:i=0,width:s=1,height:n=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:r}=t;r.top=100*i+"%",r.left=100*e+"%",r.width=100*s+"%",r.height=100*n+"%"}#Xa(t){const e=yn._svgFactory.create(1,1,!0);return this.#xs.append(e),e.setAttribute("aria-hidden",!0),yn.#Ya(e,t),e}#Ka(t,e){const i=yn._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const n=yn._svgFactory.createElement("use");return i.append(n),n.setAttribute("href",`#${e}`),n.classList.add("clip"),s}highlight(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=this.#v++,r=this.#Xa(t.box);r.classList.add("highlight"),t.free&&r.classList.add("free");const a=yn._svgFactory.createElement("defs");r.append(a);const o=yn._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("d",t.toSVGPath()),s&&this.#qa.set(n,o);const h=this.#Ka(a,l),c=yn._svgFactory.createElement("use");return r.append(c),r.setAttribute("fill",e),r.setAttribute("fill-opacity",i),c.setAttribute("href",`#${l}`),this.#Ga.set(n,r),{id:n,clipPathId:`url(#${h})`}}highlightOutline(t){const e=this.#v++,i=this.#Xa(t.box);i.classList.add("highlightOutline");const s=yn._svgFactory.createElement("defs");i.append(s);const n=yn._svgFactory.createElement("path");s.append(n);const r=`path_p${this.pageIndex}_${e}`;let a;if(n.setAttribute("id",r),n.setAttribute("d",t.toSVGPath()),n.setAttribute("vector-effect","non-scaling-stroke"),t.free){i.classList.add("free");const t=yn._svgFactory.createElement("mask");s.append(t),a=`mask_p${this.pageIndex}_${e}`,t.setAttribute("id",a),t.setAttribute("maskUnits","objectBoundingBox");const n=yn._svgFactory.createElement("rect");t.append(n),n.setAttribute("width","1"),n.setAttribute("height","1"),n.setAttribute("fill","white");const o=yn._svgFactory.createElement("use");t.append(o),o.setAttribute("href",`#${r}`),o.setAttribute("stroke","none"),o.setAttribute("fill","black"),o.setAttribute("fill-rule","nonzero"),o.classList.add("mask")}const o=yn._svgFactory.createElement("use");i.append(o),o.setAttribute("href",`#${r}`),a&&o.setAttribute("mask",`url(#${a})`);const l=o.cloneNode();return i.append(l),o.classList.add("mainOutline"),l.classList.add("secondaryOutline"),this.#Ga.set(e,i),e}finalizeLine(t,e){const i=this.#qa.get(t);this.#qa.delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){this.#Ga.get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),this.#qa.delete(t)}updatePath(t,e){this.#qa.get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){yn.#Ya(this.#Ga.get(t),e)}show(t,e){this.#Ga.get(t).classList.toggle("hidden",!e)}rotate(t,e){this.#Ga.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#Ga.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#Ga.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#Ga.get(t).classList.add(e)}removeClass(t,e){this.#Ga.get(t).classList.remove(e)}remove(t){null!==this.#xs&&(this.#Ga.get(t).remove(),this.#Ga.delete(t))}destroy(){this.#xs=null;for(const t of this.#Ga.values())t.remove();this.#Ga.clear()}}var _n=r.AnnotationLayer,wn=r.AnnotationMode,xn=r.GlobalWorkerOptions,An=r.PDFDataRangeTransport,En=r.TextLayer,kn=r.getDocument},3404:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var s=!0,n="Invariant failed";function r(t,e){if(!t){if(s)throw new Error(n);var i="function"===typeof e?e():e,r=i?"".concat(n,": ").concat(i):n;throw new Error(r)}}},6326:(t,e,i)=>{"use strict";i.d(e,{sH:()=>s});function s(t,e,i,s){return new(i||(i=Promise))((function(n,r){function a(t){try{l(s.next(t))}catch(e){r(e)}}function o(t){try{l(s.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((s=s.apply(t,e||[])).next())}))}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError}}]);
//# sourceMappingURL=395.f34772b7.chunk.js.map