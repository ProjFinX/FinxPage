"use strict";(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[665],{89449:(e,o,s)=>{s.d(o,{$:()=>t,Y:()=>a});s(65043);function a(e,o){let s={},a=[],t=[],r=[],n=[];return e.forEach((e=>{t=[],r=o,r.forEach((o=>{n=o.split("-"),console.log(n),e.BranchId==n[1]&&(t=[...t,n[0]])})),s={BranchId:e.BranchId,RoleIds:t},a=[...a,s]})),console.log(a),a}function t(e,o){let s={},a=[],t=[],r=[],n=[];return e.forEach((e=>{t=[],r=o,r.forEach((o=>{n=o.split("-"),console.log(n),e.BranchId==n[1]&&(t=[...t,n[0]])})),s={BranchId:e.BranchId,RoleMapIds:t},a=[...a,s]})),console.log(a),a}},57320:(e,o,s)=>{s.d(o,{f:()=>t,m:()=>a});s(65043);function a(e){let o="",s=[],a=[];return e.forEach((e=>{a=e.Roles,a.forEach((a=>{o=a.RId+"-"+e.BranchId,s=[...s,o]}))})),s}function t(e,o){let s="",a=[],t=[];return console.log(o),o.forEach((o=>{console.log(o.BRMapId),e.forEach((e=>{t=e.Roles,t.forEach((t=>{o.BRMapId==t.BRMapId&&1==o.BRUMapStatusId&&(s=t.BRMapId+"-"+e.BranchId,a=[...a,s])}))}))})),a}},68916:(e,o,s)=>{s.d(o,{Rw:()=>t,gp:()=>a});s(65043);function a(e,o){let s={},a={},t=[],r=[];return console.log(e),console.log(o),e.forEach((e=>{o.forEach((o=>{a={value:o.RoleId+"-"+e.BranchId,label:o.RoleName},r=[...r,a]})),s={value:e.BranchId,label:e.Name,children:r},t=[...t,s],r=[]})),t}function t(e){let o={},s={},a=[],t=[],r=[];return console.log(e),console.log(r),e.forEach((e=>{r=e.Roles,r.forEach((o=>{s={value:o.BRMapId+"-"+e.BranchId,label:o.RName},t=[...t,s]})),o={value:e.BranchId,label:e.Name,children:t},a=[...a,o],t=[]})),a}},17447:(e,o,s)=>{s.r(o),s.d(o,{default:()=>B});var a=s(65043),t=s(79904),r=s.n(t);s(19980);var n=s(68916),l=s(57320),c=s(89449),d=s(24858),i=s(18403),h=s(73033),u=s(84756),g=s(80511),m=s(47046),f=s(8204),p=s(86971),b=s(60458),I=s(20830),v=s(99453),y=s(70579);const x=h.Ik().shape({}),B=()=>{const[e,o]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{const e=await(0,b.h)();o(e.body.Roles)})()}),[]);const[s,t]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{const e=await(0,I.r)();t(e.body.Branches)})()}),[]);const[h,B]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{const e=await(0,v.I)();B(e.body.Users),console.log(JSON.stringify(e.body.Users))})()}),[]);let N=[],R=[];0==N.length&&(N=(0,n.Rw)(s));const[S,E]=(0,a.useState)([]),[j,w]=(0,a.useState)([]),[k,U]=(0,a.useState)(N),[A,M]=(0,a.useState)(0),{register:O,handleSubmit:J,formState:{errors:$},reset:z}=(0,d.mN)({resolver:(0,i.t)(x)}),[F,L]=(0,a.useState)(""),[Y,C]=(0,a.useState)(!1);(0,a.useEffect)((()=>{}),[k]);const H=(0,p.Zp)(),q=async e=>{console.log("Enter Button submit"),console.log(S);const o=(0,c.$)(s,S),a={BRUMap:{UserId:A,Branches:o}};console.log(a),C(!0);const t={hdr:{convid:(0,g.lk)(),tag:"rolusrmap",orgid:"",vendid:"0"},body:a},r={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};console.log(r);try{const e=await u.Ay.post("/cmpstp/rolusrmap",(0,g.Yw)(t),r),o=JSON.parse((0,g.H5)(e.data));console.log(o),"FAILED"==o.hdr.rst||"ERROR"==o.hdr.rst?(D("Error",JSON.stringify(o.fdr)),C(!1)):(console.log(o.fdr),D("Error",JSON.stringify(o.fdr[0].rstmsg)),C(!1),H("/UserRoleMapping"))}catch(n){console.log(n.message),D("Error","Unable to process request"),C(!1)}},D=(e,o)=>{L({AlertType:e,message:o})};try{return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("section",{className:"vh-100",children:(0,y.jsx)("div",{className:"container h-100",children:(0,y.jsxs)("div",{className:"card text-black",style:{borderRadius:"25px"},children:[(0,y.jsx)("div",{className:"card-header",children:(0,y.jsx)("strong",{className:"card-title",children:"User Role mapping"})}),(0,y.jsxs)("div",{className:"card-body p-md-5",children:[Y?(0,y.jsx)(m.A,{}):"",(0,y.jsx)(f.A,{alert:F}),(0,y.jsxs)("form",{onSubmit:J(q),autocomplete:"off",children:[(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col-sm",children:(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("label",{className:"form-label",children:" User List"}),(0,y.jsx)("select",{name:"list-box",size:20,className:"form-control",onChange:e=>(e=>{let o=0;o=e;let a=[];a=h.filter((e=>e.UserId==o))[0].BRUMap,console.log(a),console.log(s),R=(0,l.f)(s,a),E(R),U(N),M(o)})(e.target.value),children:h.map((e=>(0,y.jsx)("option",{value:e.UserId,children:e.Username},e.UserId)))})]})}),(0,y.jsx)("div",{className:"col-sm",children:(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("label",{htmlFor:"txtConformPassword",className:"form-label",children:" Branch and Role"}),(0,y.jsx)(r(),{nodes:k,checked:S,expanded:j,onCheck:e=>E(e),onExpand:e=>w(e)})]})})]}),(0,y.jsx)("br",{}),(0,y.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]}),console.log(S)]})]})})})})}catch(P){console.log(P.message)}}},20830:(e,o,s)=>{s.d(o,{r:()=>n});s(65043);var a=s(80511),t=s(84756),r=s(82585);const n=async()=>{let e;const o=r.F.BranchList,s={hdr:{convid:(0,a.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},n={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},l=o;return await t.Ay.post(l,(0,a.Yw)(s),n).then((function(o){const s=JSON.parse((0,a.H5)(o.data));console.log(s),e=s})),e}},60458:(e,o,s)=>{s.d(o,{h:()=>n});s(65043);var a=s(80511),t=s(84756);const r=s(82585).F,n=async()=>{let e;const o=r.RoleList,s={hdr:{convid:(0,a.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},n={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},l=o;return await t.Ay.post(l,(0,a.Yw)(s),n).then((function(o){const s=JSON.parse((0,a.H5)(o.data));console.log(s),e=s})),e}},99453:(e,o,s)=>{s.d(o,{I:()=>n,X:()=>l});s(65043);var a=s(80511),t=s(84756);const r=s(82585).F,n=async()=>{let e;const o=r.UserList,s={hdr:{convid:(0,a.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},n={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},l=o;return await t.Ay.post(l,(0,a.Yw)(s),n).then((function(o){const s=JSON.parse((0,a.H5)(o.data));console.log(s),e=s})),e},l=async()=>{let e;const o=r.AllUserList,s={hdr:{convid:(0,a.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},n={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},l=o;return await t.Ay.post(l,(0,a.Yw)(s),n).then((function(o){const s=JSON.parse((0,a.H5)(o.data));console.log(s),e=s})),e}}}]);
//# sourceMappingURL=665.703ebbb0.chunk.js.map