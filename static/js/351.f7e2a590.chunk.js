"use strict";(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[351],{76732:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var r=t(65043),a=t(8204),c=t(24858),l=t(18403),n=t(73033),o=t(84756),d=t(47046),i=t(99453),h=t(57492),m=t(64196),u=t(2459),x=t(80511),g=t(70579);const j=n.Ik().shape({cmbStatus:n.Yj().required("Pls select the role status")});const b=function(){const[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(""),[b,S]=(0,r.useState)(!1),[p,N]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),{register:f,handleSubmit:k,formState:{errors:I},reset:w}=(0,c.mN)({resolver:(0,l.t)(j)}),A=async()=>{const e=await(0,i.X)();s(e.body.Users),console.log(JSON.stringify(e.body.Users))};(0,r.useEffect)((()=>{A(),(async()=>{const e=await(0,h.n)("|USRS|","");console.log(JSON.stringify(e.body.usrs)),N(e.body.usrs)})()}),[]);const U=async e=>{let s={txtNewStatusId:e.cmbStatus,txtUserIds:y};console.log(s),S(!0);const t={convid:(0,x.lk)(),tag:"cngusrstus",orgid:"",vendid:"0"},r={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},a={hdr:t,body:s};console.log(a);try{const e=await o.Ay.post("/cmpstp/cngusrstus",(0,x.Yw)(a),r),s=JSON.parse((0,x.H5)(e.data));console.log(s),"FAILED"==s.hdr.rst||"ERROR"==s.hdr.rst?(O("Error",JSON.stringify(s.fdr[0].rstmsg)),S(!1)):setTimeout((()=>{console.log(s.fdr),O("Success",JSON.stringify(s.fdr[0].rstmsg)),setTimeout((()=>{n({AlertType:"null",message:"null"})}),600),A(),S(!1)}),300)}catch(c){console.log(c.message),O("Error","Unable to process request"),S(!1)}},O=(e,s)=>{n({AlertType:e,message:s})};try{var J;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("section",{className:"vh-100",children:(0,g.jsx)("div",{className:"container h-100",children:(0,g.jsxs)("div",{className:"card text-black",style:{borderRadius:"25px"},children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("strong",{className:"card-title",children:"User Status Change"})}),(0,g.jsx)(u.Ze,{style:{width:1200,height:550},children:(0,g.jsxs)(m.A,{striped:!0,bordered:!0,hover:!0,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"text-center",children:"Select"}),(0,g.jsx)("th",{className:"text-center",children:"Id"}),(0,g.jsx)("th",{className:"text-center",children:"User Id"}),(0,g.jsx)("th",{className:"text-center",children:"Name"}),(0,g.jsx)("th",{className:"text-center",children:"Status"})]})}),(0,g.jsx)("tbody",{children:e.map((e=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{align:"center",children:(0,g.jsx)("input",{type:"checkbox",onChange:s=>{((e,s)=>{console.log(e),console.log(s);let t=y;if(1==e.target.value)t.push(s.UserId);else{const e=t.indexOf(s.UserId);e>-1&&t.splice(e,1)}v(t),console.log(y)})({target:{value:s.target.checked}},e)}})}),(0,g.jsx)("td",{children:e.UserId}),(0,g.jsx)("td",{children:e.Username}),(0,g.jsx)("td",{children:e.FName+" "+e.LName}),(0,g.jsx)("td",{children:p.find((s=>s.k==e.StatusId)).v})]})))})]})}),(0,g.jsxs)("div",{className:"card-body p-md-5",children:[b?(0,g.jsx)(d.A,{}):"",(0,g.jsx)(a.A,{alert:t}),(0,g.jsx)("form",{onSubmit:k(U),autocomplete:"off",children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-sm",children:(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"cmbStatus",className:"form-label",children:"Status"}),(0,g.jsxs)("select",{...f("cmbStatus"),className:"form-control",id:"cmbStatus",children:[(0,g.jsx)("option",{value:"",children:"- Select -"}),p.map((e=>(0,g.jsx)("option",{value:e.k,children:e.v},e.k)))]}),(0,g.jsx)("p",{children:null===(J=I.cmbStatus)||void 0===J?void 0:J.message})]})}),(0,g.jsx)("div",{className:"col-sm",children:(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("br",{}),(0,g.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})]})})]})]})})})})}catch(E){console.log(E.message)}}},99453:(e,s,t)=>{t.d(s,{I:()=>l,X:()=>n});t(65043);var r=t(80511),a=t(84756);const c=t(82585).F,l=async()=>{let e;const s=c.UserList,t={hdr:{convid:(0,r.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},l={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},n=s;return await a.Ay.post(n,(0,r.Yw)(t),l).then((function(s){const t=JSON.parse((0,r.H5)(s.data));console.log(t),e=t})),e},n=async()=>{let e;const s=c.AllUserList,t={hdr:{convid:(0,r.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},l={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},n=s;return await a.Ay.post(n,(0,r.Yw)(t),l).then((function(s){const t=JSON.parse((0,r.H5)(s.data));console.log(t),e=t})),e}}}]);
//# sourceMappingURL=351.f7e2a590.chunk.js.map