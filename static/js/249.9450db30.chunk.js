"use strict";(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[249],{60959:(e,o,t)=>{t.r(o),t.d(o,{default:()=>S});var a=t(65043),n=t(79904),r=t.n(n),s=(t(19980),t(68916)),c=t(57320),l=t(89449),d=t(24858),i=t(18403),h=t(73033),g=t(84756),u=t(80511),p=t(47046),f=t(8204),m=t(86971),b=t(60458),y=t(20830),B=t(82585);t(4781);var I=t(70579);const E=h.Ik().shape({});let R=!1;const S=()=>{(0,a.useEffect)((()=>{R=!1}),[]);const[e,o]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{const e=await(0,b.h)();o(e.body.Roles)})()}),[]);const[t,n]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{const e=await(0,y.r)();n(e.body.Branches)})()}),[]);const[h,S]=(0,a.useState)([]),v=async()=>{const e=await(async()=>{let e;const o=B.F.BranchRoleMapping,t={hdr:{convid:(0,u.lk)(),tag:"brcrolmap",orgid:"",vendid:"0"},body:{}},a={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},n=o;return console.log(n),console.log(t),console.log(a),await g.Ay.post(n,(0,u.Yw)(t),a).then((function(o){const t=JSON.parse((0,u.H5)(o.data));console.log(t),e=t})),e})();console.log(JSON.stringify(e.body)),S(e.body)};(0,a.useEffect)((()=>{v()}),[]);let x=[],N=[];x=(0,s.gp)(t,e),N=(0,c.m)(t);const[k,w]=(0,a.useState)([]),[j,A]=(0,a.useState)([]),[M,O]=(0,a.useState)([]);console.log(N.length),N.length>0&&0==R&&(console.log("render"),O(x),w(N),R=!0);const{register:J,handleSubmit:Y,formState:{errors:F},reset:H}=(0,d.mN)({resolver:(0,i.t)(E)}),[$,z]=(0,a.useState)(""),[C,L]=(0,a.useState)(!1),U=(0,m.Zp)(),q=(e,o)=>{z({AlertType:e,message:o})};return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("section",{className:"vh-100",children:(0,I.jsx)("div",{className:"container h-100",children:(0,I.jsxs)("div",{className:"card text-black",style:{borderRadius:"25px"},children:[(0,I.jsx)("div",{className:"card-header",children:(0,I.jsx)("strong",{className:"card-title",children:"Branch Role mapping"})}),(0,I.jsxs)("div",{className:"card-body p-md-5",children:[C?(0,I.jsx)(p.A,{}):"",(0,I.jsx)(f.A,{alert:$}),(0,I.jsxs)("form",{onSubmit:Y((async e=>{console.log("Enter Button submit"),console.log(k);const o={BRM:(0,l.Y)(t,k)};console.log(o),L(!0);const a={hdr:{convid:(0,u.lk)(),tag:"brcrolmap",orgid:"",vendid:"0"},body:o},n={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};console.log(n);try{const e=await g.Ay.post("/cmpstp/brcrolmap",(0,u.Yw)(a),n),o=JSON.parse((0,u.H5)(e.data));console.log(o),"FAILED"==o.hdr.rst||"ERROR"==o.hdr.rst?(q("Error",JSON.stringify(o.fdr)),L(!1)):(q("Error",JSON.stringify(o.fdr)),L(!1),U("/Home"))}catch(r){console.log(r.message),q("Error","Unable to process request"),L(!1)}})),autocomplete:"off",children:[(0,I.jsx)(r(),{showExpandAall:"true",nodes:M,checked:k,expanded:j,onCheck:e=>w(e),onExpand:e=>A(e)}),(0,I.jsx)("br",{}),(0,I.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]}),console.log(M),console.log(k)]})]})})})})}},89449:(e,o,t)=>{t.d(o,{$:()=>n,Y:()=>a});t(65043);function a(e,o){let t={},a=[],n=[],r=[],s=[];return e.forEach((e=>{n=[],r=o,r.forEach((o=>{s=o.split("-"),console.log(s),e.BranchId==s[1]&&(n=[...n,s[0]])})),t={BranchId:e.BranchId,RoleIds:n},a=[...a,t]})),console.log(a),a}function n(e,o){let t={},a=[],n=[],r=[],s=[];return e.forEach((e=>{n=[],r=o,r.forEach((o=>{s=o.split("-"),console.log(s),e.BranchId==s[1]&&(n=[...n,s[0]])})),t={BranchId:e.BranchId,RoleMapIds:n},a=[...a,t]})),console.log(a),a}},57320:(e,o,t)=>{t.d(o,{f:()=>n,m:()=>a});t(65043);function a(e){let o="",t=[],a=[];return e.forEach((e=>{a=e.Roles,a.forEach((a=>{o=a.RId+"-"+e.BranchId,t=[...t,o]}))})),t}function n(e,o){let t="",a=[],n=[];return console.log(o),o.forEach((o=>{console.log(o.BRMapId),e.forEach((e=>{n=e.Roles,n.forEach((n=>{o.BRMapId==n.BRMapId&&1==o.BRUMapStatusId&&(t=n.BRMapId+"-"+e.BranchId,a=[...a,t])}))}))})),a}},68916:(e,o,t)=>{t.d(o,{Rw:()=>n,gp:()=>a});t(65043);function a(e,o){let t={},a={},n=[],r=[];return console.log(e),console.log(o),e.forEach((e=>{o.forEach((o=>{a={value:o.RoleId+"-"+e.BranchId,label:o.RoleName},r=[...r,a]})),t={value:e.BranchId,label:e.Name,children:r},n=[...n,t],r=[]})),n}function n(e){let o={},t={},a=[],n=[],r=[];return console.log(e),console.log(r),e.forEach((e=>{r=e.Roles,r.forEach((o=>{t={value:o.BRMapId+"-"+e.BranchId,label:o.RName},n=[...n,t]})),o={value:e.BranchId,label:e.Name,children:n},a=[...a,o],n=[]})),a}},20830:(e,o,t)=>{t.d(o,{r:()=>s});t(65043);var a=t(80511),n=t(84756),r=t(82585);const s=async()=>{let e;const o=r.F.BranchList,t={hdr:{convid:(0,a.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},s={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},c=o;return await n.Ay.post(c,(0,a.Yw)(t),s).then((function(o){const t=JSON.parse((0,a.H5)(o.data));console.log(t),e=t})),e}},60458:(e,o,t)=>{t.d(o,{h:()=>s});t(65043);var a=t(80511),n=t(84756);const r=t(82585).F,s=async()=>{let e;const o=r.RoleList,t={hdr:{convid:(0,a.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},s={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},c=o;return await n.Ay.post(c,(0,a.Yw)(t),s).then((function(o){const t=JSON.parse((0,a.H5)(o.data));console.log(t),e=t})),e}}}]);
//# sourceMappingURL=249.9450db30.chunk.js.map