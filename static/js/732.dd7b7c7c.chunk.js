"use strict";(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[732],{53732:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var l=s(65043),a=s(24858),c=s(18403),r=s(73033),d=s(57492),i=s(67560),n=s(84756),o=s(80511),m=s(47046),h=s(8204),x=s(86971),b=(s(99453),s(2459)),p=s(64196),j=s(91036),u=s(82585),v=s(70579);const N=u.F,y=r.Ik().shape({txtTemplatename:r.Yj().required("Template name  can not be empty")}),g=()=>{var e,t,s,r,u,g;const[S,f]=(0,l.useState)([]),[T,I]=(0,l.useState)([]),[M,A]=(0,l.useState)([]);(0,l.useEffect)((()=>{P(),(async()=>{const e=await(0,d.n)("|MILTY|","");A(e.body.milty)})(),U()}),[]);const{register:w,handleSubmit:k,formState:{errors:F},reset:O}=(0,a.mN)({resolver:(0,c.t)(y)}),[H,J]=(0,l.useState)(""),[B,Y]=(0,l.useState)(!1);function L(){O({txtTemplatename:"",cmbSMTPId:"",cmbMailType:"",cbIsHTML:"",cbIsActive:"",txtSubject:"",txtBody:""})}(0,x.Zp)();const P=async()=>{const e=await(0,i.fG)();console.log(JSON.stringify(e)),f(e.body.smpt)},U=async()=>{const e=await(0,i.Yq)();console.log(JSON.stringify(e)),I(e.body.smpt),console.log(JSON.stringify(e.body.Users))},z=(e,t)=>{J({AlertType:e,message:t})};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("section",{className:"vh-100",children:(0,v.jsx)("div",{className:"container h-100",children:(0,v.jsxs)("div",{className:"card text-black",style:{borderRadius:"25px"},children:[(0,v.jsx)("div",{className:"card-header",children:(0,v.jsx)("strong",{className:"card-title",children:"Mail Template"})}),(0,v.jsxs)("div",{className:"card-body p-md-5",children:[B?(0,v.jsx)(m.A,{}):"",(0,v.jsx)(h.A,{alert:H}),(0,v.jsxs)("form",{onSubmit:k((async e=>{Y(!0);let t=0;t=void 0==e.txtMailTemplateId?0:e.txtMailTemplateId;const s={convid:(0,o.lk)(),tag:"NewUser",orgid:"",vendid:"0"},l={txtMailTemplateId:t,txtTemplateName:e.txtTemplatename,cmbMailTypeId:e.cmbMailType,cmbSMTPId:e.cmbSMTPId,txtMailSubject:e.txtSubject,txtMailContent:e.txtBody,cbIsHtml:e.cbIsHTML,cbIsActive:e.cbIsActive};console.log(l);const a={hdr:s,body:l},c={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},r=N.updmiltmplt;try{const e=await n.Ay.post(r,(0,o.Yw)(a),c),t=JSON.parse((0,o.H5)(e.data));console.log(t),"FAILED"==t.hdr.rst||"ERROR"==t.hdr.rst?(z("Error",JSON.stringify(t.fdr)),j.oR.error(JSON.stringify(t.fdr)),Y(!1)):setTimeout((()=>{console.log(t.fdr),z("Success",JSON.stringify(t.fdr[0].rstmsg)),j.oR.success("Successfully updated"),setTimeout((()=>{J({AlertType:"null",message:"null"})}),600),L(),U(),Y(!1)}),300)}catch(d){console.log(d.message),z("Error","Unable to process request"),Y(!1)}})),autocomplete:"off",children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-sm",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsxs)("label",{htmlFor:"txtTemplatename",className:"form-label",children:[" ","Template Name"]}),(0,v.jsx)("input",{...w("txtTemplatename"),type:"text",className:"form-control"}),(0,v.jsx)("p",{children:null===(e=F.txtTemplatename)||void 0===e?void 0:e.message})]})}),(0,v.jsx)("div",{className:"col-sm",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)("label",{htmlFor:"cmbSMTPId",className:"form-label",children:"SMTP"}),(0,v.jsxs)("select",{...w("cmbSMTPId"),className:"form-control",children:[(0,v.jsx)("option",{value:"",children:"- Select -"}),S.map((e=>(0,v.jsx)("option",{value:e.id,children:e.email},e.id)))]}),(0,v.jsx)("p",{children:null===(t=F.cmbSMTPId)||void 0===t?void 0:t.message})]})}),(0,v.jsx)("div",{className:"col-sm",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsxs)("label",{htmlFor:"txtMailTemplateId",className:"form-label",children:[" ","MailTemplate Id"]}),(0,v.jsx)("input",{...w("txtMailTemplateId"),type:"text",disabled:"disabled",readonly:"readonly",className:"form-control"}),(0,v.jsx)("p",{children:null===(s=F.txtMailTemplateId)||void 0===s?void 0:s.message})]})})]}),(0,v.jsxs)("div",{className:"row",children:[(0,v.jsx)("div",{className:"col-sm",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)("label",{htmlFor:"cmbMailType",className:"form-label",children:"Mail Type"}),(0,v.jsxs)("select",{...w("cmbMailType"),className:"form-control",children:[(0,v.jsx)("option",{value:"",children:"- Select -"}),M.map((e=>(0,v.jsx)("option",{value:e.k,children:e.v},e.k)))]}),(0,v.jsx)("p",{children:null===(r=F.cmbMailType)||void 0===r?void 0:r.message})]})}),(0,v.jsx)("div",{className:"col-sm",children:(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsxs)("div",{className:"col-md-1",children:[(0,v.jsx)("input",{...w("cbIsHTML"),type:"checkbox"})," ",(0,v.jsx)("label",{htmlFor:"cbIsHTML",className:"form-label",children:"IsHTML"})]})})}),(0,v.jsx)("div",{className:"col-sm",children:(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsxs)("div",{className:"col-md-1",children:[(0,v.jsx)("input",{...w("cbIsActive"),type:"checkbox"})," ",(0,v.jsxs)("label",{htmlFor:"cbIsActive",className:"form-label",children:["IsActive"," "]})]})})})]}),(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-sm",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsxs)("label",{htmlFor:"txtSubject",className:"form-label",children:[" ","Mail Subject"]}),(0,v.jsx)("input",{...w("txtSubject"),type:"text",className:"form-control"}),(0,v.jsx)("p",{children:null===(u=F.txtSubject)||void 0===u?void 0:u.message})]})})}),(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-sm",children:(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsxs)("label",{htmlFor:"txtBody",className:"form-label",children:[" ","Mail Body"]}),(0,v.jsx)("textarea",{...w("txtBody"),type:"text",className:"form-control"}),(0,v.jsx)("p",{children:null===(g=F.txtBody)||void 0===g?void 0:g.message})]})})}),(0,v.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]}),(0,v.jsx)(b.Ze,{style:{width:1200,height:550},children:(0,v.jsxs)(p.A,{striped:!0,bordered:!0,hover:!0,children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"text-center",children:"Id"}),(0,v.jsx)("th",{className:"text-center",children:"Name"}),(0,v.jsx)("th",{className:"text-center",children:"SMTP"}),(0,v.jsx)("th",{className:"text-center",children:"Subject"}),(0,v.jsx)("th",{className:"text-center",children:"Mail Type"}),(0,v.jsx)("th",{className:"text-center",children:"Status"}),(0,v.jsx)("th",{children:(0,v.jsxs)("button",{className:"btn btn-success",onClick:()=>{L()},children:[" ",(0,v.jsx)("i",{className:"bi bi-table"})," Add"," "]})})]})}),(0,v.jsx)("tbody",{children:T&&T.map((e=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:e.tmpltid}),(0,v.jsx)("td",{children:e.tmpltna}),(0,v.jsx)("td",{children:e.email}),(0,v.jsx)("td",{children:e.subj}),(0,v.jsx)("td",{}),(0,v.jsx)("td",{}),(0,v.jsx)("td",{children:(0,v.jsxs)("button",{className:"btn btn-primary",onClick:()=>{var t;t=e,console.log(t),O({txtUserId:t.UserId,txtUsername:t.Username,txtFirstname:t.FName,txtLastname:t.LName,txtPhone:t.tleid,cmbCountryId:t.tleid,txtPassword:t.tleid,txtConformPassword:t.tleid})},children:[" ",(0,v.jsx)("i",{className:"bi bi-pen"})," Edit"]})})]})))})]})})]})})})})}},67560:(e,t,s)=>{s.d(t,{Rd:()=>n,U_:()=>o,Yq:()=>d,dp:()=>i,fG:()=>r});s(65043);var l=s(80511),a=s(84756);const c=s(82585).F,r=async()=>{let e;const t=c.smtplst,s={hdr:{convid:(0,l.lk)(),tag:"smtplst",orgid:"",vendid:"0"},body:{}},r={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},d=t;return await a.Ay.post(d,(0,l.Yw)(s),r).then((function(t){const s=JSON.parse((0,l.H5)(t.data));e=s})),e},d=async()=>{let e;const t=c.miltmpltlst,s={hdr:{convid:(0,l.lk)(),tag:"miltmpltlst",orgid:"",vendid:"0"},body:{}},r={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},d=t;return await a.Ay.post(d,(0,l.Yw)(s),r).then((function(t){const s=JSON.parse((0,l.H5)(t.data));e=s})),e},i=async e=>{let t;const s=c.miltmltdoclst,r={hdr:{convid:(0,l.lk)(),tag:"miltmltdoclst",orgid:"",vendid:"0"},body:{cmbMailTemplateId:e}},d={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},i=s;return await a.Ay.post(i,(0,l.Yw)(r),d).then((function(e){const s=JSON.parse((0,l.H5)(e.data));t=s})),t},n=async e=>{let t;const s=c.delatchelm,r={txtMailAttchElmsId:e},d={hdr:{convid:(0,l.lk)(),tag:"delatchelm",orgid:"",vendid:"0"},body:r};console.log(r);const i=s;return await a.Ay.post(i,(0,l.Yw)(d),{}).then((function(e){const s=JSON.parse((0,l.H5)(e.data));t=s})),t},o=async e=>{let t;const s=c.getatchelmlst,r={hdr:{convid:(0,l.lk)(),tag:"getatchelmlst",orgid:"",vendid:"0"},body:{txtMailTemplateId:e}},d={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},i=s;return await a.Ay.post(i,(0,l.Yw)(r),d).then((function(e){const s=JSON.parse((0,l.H5)(e.data));t=s})),t}},99453:(e,t,s)=>{s.d(t,{I:()=>r,X:()=>d});s(65043);var l=s(80511),a=s(84756);const c=s(82585).F,r=async()=>{let e;const t=c.UserList,s={hdr:{convid:(0,l.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},r={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},d=t;return await a.Ay.post(d,(0,l.Yw)(s),r).then((function(t){const s=JSON.parse((0,l.H5)(t.data));console.log(s),e=s})),e},d=async()=>{let e;const t=c.AllUserList,s={hdr:{convid:(0,l.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},r={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},d=t;return await a.Ay.post(d,(0,l.Yw)(s),r).then((function(t){const s=JSON.parse((0,l.H5)(t.data));console.log(s),e=s})),e}}}]);
//# sourceMappingURL=732.dd7b7c7c.chunk.js.map