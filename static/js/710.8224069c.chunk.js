"use strict";(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[710],{70710:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var l=t(65043),r=t(8204),a=t(24858),c=t(18403),d=t(73033),n=t(84756),o=t(47046),i=t(8387),m=t(80511),h=t(82585);const x=h.F;var u=t(57492),b=t(64196),j=(t(2459),t(91036)),g=t(70579);const p=h.F,v=(localStorage.getItem("CompanyId"),d.Ik().shape({txtHeader:d.Yj().required("Pls provide Header Name")}));const S=function(){const[e,s]=(0,l.useState)([]),[t,d]=(0,l.useState)(""),[h,S]=(0,l.useState)(!1),[N,y]=(0,l.useState)([]),[f,I]=(0,l.useState)([]),[k,E]=(0,l.useState)([]),[T,A]=(0,l.useState)(0),[O,w]=(0,l.useState)(!1),[H,F]=(0,l.useState)([]),{register:C,handleSubmit:J,formState:{errors:R},reset:L}=(0,a.mN)({resolver:(0,c.t)(v)}),U=async e=>{const t=await(async e=>{let s;const t=x.Tlelst,l={hdr:{convid:(0,m.lk)(),tag:"AllTasKList",orgid:"",vendid:"0"},body:{cmbScrId:e}},r={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},a=t;return await n.Ay.post(a,(0,m.Yw)(l),r).then((function(e){const t=JSON.parse((0,m.H5)(e.data));s=t})),s})(e);console.log(JSON.stringify(t.body.tskcols)),s(t.body.tskcols)},[Y,D]=(0,l.useState)([]);(0,l.useEffect)((()=>{(async()=>{const e=await(0,u.n)("|STGTY|","");D(e.body.stgty),console.log("rerendering method")})(),(async()=>{const e=await(0,i.m)();F(e.body.Screens.filter((e=>1==e.IsActive)))})()}),[]),(0,l.useEffect)((()=>{}),[O]);const q=e=>{A(e.target.value),U(e.target.value),z(0,e.target.value)},z=async(e,s)=>{const t={DUELM:"ScreenId="+s+" and ParentElementId="+e},l=await(0,u.n)("|DUELM|",t);console.log(l),E(l.body.duelm)},B=async e=>{let s=e.txtTaskElmentId;void 0==e.txtTaskElmentId&&(s="0");let t={txtTLEId:s,cmbScrId:T,txtHdr:e.txtHeader,txtOrd:e.txtOrder,cmbElmId:e.cmbStageTypeId};const l=p.UpdTaskElement;console.log(t),S(!0);const r={convid:(0,m.lk)(),tag:"cngusrstus",orgid:"",vendid:"0"},a={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},c={hdr:r,body:t};console.log(c);try{const e=await n.Ay.post(l,(0,m.Yw)(c),a),s=JSON.parse((0,m.H5)(e.data));console.log(s),"FAILED"==s.hdr.rst||"ERROR"==s.hdr.rst?(M("Error",JSON.stringify(s.fdr[0].rstmsg)),S(!1)):setTimeout((()=>{console.log(s.fdr),M("Success",JSON.stringify(s.fdr[0].rstmsg)),j.oR.success("Successfully updated"),setTimeout((()=>{d({AlertType:"null",message:"null"})}),600),$(),U(T),S(!1)}),300)}catch(o){console.log(o.message),j.oR.error("Unable to process request"),M("Error","Unable to process request"),S(!1)}};function $(){L({txtTaskElmentId:"",txtHeader:"",txtOrder:"",cmbStageTypeId:""})}const M=(e,s)=>{d({AlertType:e,message:s})};try{var P,G,K;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("section",{className:"vh-100",children:(0,g.jsx)("div",{className:"container h-100",children:(0,g.jsxs)("div",{className:"card text-black",style:{borderRadius:"25px"},children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("strong",{className:"card-title",children:"Create Task Element"})}),(0,g.jsxs)("div",{className:"card-body p-md-5",children:[h?(0,g.jsx)(o.A,{}):"",(0,g.jsx)(r.A,{alert:t}),(0,g.jsxs)("form",{onSubmit:J(B),autocomplete:"off",children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-sm",children:(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("label",{htmlFor:"cmbScreenId",className:"form-label",children:"Screen"}),(0,g.jsxs)("select",{...C("cmbScreenId"),className:"form-control",onChange:q,children:[(0,g.jsx)("option",{value:"0",children:"- Select -"}),H.map((e=>(0,g.jsx)("option",{value:e.ScreenId,children:e.ScrName},e.ScreenId)))]}),(0,g.jsx)("p",{children:null===(P=R.cmbScreenId)||void 0===P?void 0:P.message})]})}),(0,g.jsx)("div",{className:"col-sm",children:(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsxs)("label",{htmlFor:"txtTaskElmentId",className:"form-label",children:[" ","Task Element Id"]}),(0,g.jsx)("input",{...C("txtTaskElmentId"),type:"text",className:"form-control",disabled:"disabled",readonly:"readonly"})]})})]}),(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-sm",children:(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsxs)("label",{htmlFor:"txtHeader",className:"form-label",children:[" ","Header"]}),(0,g.jsx)("input",{...C("txtHeader"),type:"text",className:"form-control"}),(0,g.jsx)("p",{children:null===(G=R.txtHeader)||void 0===G?void 0:G.message})]})}),(0,g.jsx)("div",{className:"col-sm",children:(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsxs)("label",{htmlFor:"ntxtOrd",className:"form-label",children:[" ","Element"]}),(0,g.jsxs)("select",{...C("cmbStageTypeId"),className:"form-control",onChange:"",children:[(0,g.jsx)("option",{value:"0",children:"- Select -"}),k.map((e=>(0,g.jsx)("option",{value:e.k,children:e.v},e.k)))]})]})})]}),(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-sm",children:(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsxs)("label",{htmlFor:"txtOrder",className:"form-label",children:[" ","Order"]}),(0,g.jsx)("input",{...C("txtOrder"),type:"text",className:"form-control"}),(0,g.jsx)("p",{children:null===(K=R.txtOrder)||void 0===K?void 0:K.message})]})}),(0,g.jsx)("div",{className:"col-sm",children:(0,g.jsx)("div",{className:"mb-3"})})]}),(0,g.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]}),(0,g.jsxs)(b.A,{striped:!0,bordered:!0,hover:!0,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"ID"}),(0,g.jsx)("th",{children:"Header"}),(0,g.jsx)("th",{children:"Element"}),(0,g.jsx)("th",{children:"Order"}),(0,g.jsx)("th",{children:(0,g.jsxs)("button",{className:"btn btn-success",onClick:()=>{$()},children:[" ",(0,g.jsx)("i",{className:"bi bi-table"})," Add"," "]})})]})}),(0,g.jsx)("tbody",{children:e&&e.map((e=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:e.tleid}),(0,g.jsx)("td",{children:e.hdr}),(0,g.jsx)("td",{children:e.elmid}),(0,g.jsx)("td",{children:e.ord}),(0,g.jsx)("td",{children:(0,g.jsxs)("button",{className:"btn btn-primary",onClick:()=>{var s;s=e,console.log(s),L({txtTaskElmentId:s.tleid,txtHeader:s.hdr,txtOrder:s.ord,cmbStageTypeId:s.elmid})},children:[" ",(0,g.jsx)("i",{className:"bi bi-pen"})," Edit"]})})]})))})]})]})})})})}catch(Q){console.log(Q.message)}}},8387:(e,s,t)=>{t.d(s,{m:()=>c});var l=t(80511),r=t(84756);const a=t(82585).F,c=async()=>{let e;const s=a.AllScreen,t={hdr:{convid:(0,l.lk)(),tag:"AllScreen",orgid:"",vendid:"0"},body:{}},c={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},d=s;return console.log(d),await r.Ay.post(d,(0,l.Yw)(t),c).then((function(s){const t=JSON.parse((0,l.H5)(s.data));e=t})),e}}}]);
//# sourceMappingURL=710.8224069c.chunk.js.map