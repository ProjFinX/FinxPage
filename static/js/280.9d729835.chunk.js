(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[280],{89748:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>S});var s=l(65043),a=l(79904),n=l.n(a),o=(l(19980),l(8204)),r=l(24858),d=l(18403),c=l(73033),i=l(84756),u=l(47046),m=l(80511),x=l(14282),h=l(51448),M=l(53157),p=l(20830),b=l(8318),I=l(82585),N=l(70579);const f=I.F;let v=0;const g=e=>{let t=[];return null===e||void 0===e||e.forEach((e=>{let{value:l,children:s}=e;t=[...t,l,...g(s)]})),t},j=c.Ik().shape({});let y=[],k=[];const S=function(){v++,console.log(v);const[e,t]=(0,s.useState)(!1),[l,a]=(0,s.useState)([]),[c,I]=(0,s.useState)(!1),[S,R]=(0,s.useState)([]);(0,s.useEffect)((()=>{(async()=>{const e=await(0,M.Os)();a(e.body.mnugrpitm),console.log(e.body.mnugrpitm)})(),(async()=>{const e=await(0,p.r)();console.log(e.body),R(e.body.Branches)})()}),[]);const[O,w]=(0,s.useState)([]),[E,A]=(0,s.useState)([]),[B,P]=(0,s.useState)([]),[C,T]=(0,s.useState)([]),[G,D]=(0,s.useState)(0),[L,F]=(0,s.useState)("");0!=y.length&&0!=k.length||(y=(0,b.vu)(l),k=(0,b.Rw)(S),console.log(y));const[_,J]=(0,s.useState)(y);(0,s.useEffect)((()=>{P(g(k))}),[C]);const[H,U]=(0,s.useState)({txtMenuId:"",txtMenuname:""}),{register:W,handleSubmit:z,formState:{errors:Y},reset:q}=(0,r.mN)({resolver:(0,d.t)(j),defaultValues:H}),[$,V]=(0,s.useState)(""),[K,Q]=(0,s.useState)(!1),X=()=>Q(!1),Z=async(e,l)=>{try{l.preventDefault();let a={},n=f.ManageMenuItem;a={txtMnuGrpId:e.txtModalMnuGroupId,txtMnuItmId:e.txtModalMnuId,txtMnuItmName:e.txtModalMnuItmName,txtParentId:e.txtModalMnuParentId,ntxtOrd:e.txtModalMnuOrd,txtLink:e.txtModalLink},console.log(a),t(!0);const o=(0,m.lk)(),r={hdr:{convid:o,tag:"rolusrmap",orgid:"",vendid:"0"},body:a},d={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};console.log(d);try{const e=await i.Ay.post(n,(0,m.Yw)(r),d),l=JSON.parse((0,m.H5)(e.data));console.log(l),"FAILED"==l.hdr.rst||"ERROR"==l.hdr.rst?(le("Error",JSON.stringify(l.fdr)),t(!1)):setTimeout((()=>{console.log(l.fdr),le("Success",JSON.stringify(l.fdr[0].rstmsg)),setTimeout((()=>{V({AlertType:"null",message:"null"})}),600),t(!1)}),300)}catch(s){console.log(s.message),le("Error","Unable to process request"),t(!1)}}catch(a){le("Error",a.message),t(!1)}Q(!1)},ee=async e=>{let t=L.split("-");"EDIT"==e&&(c?(q({txtModalMnuId:t[0],txtModalMnuGroupId:t[1],txtModalMnuItmName:t[2],txtModalMnuOrd:t[3]}),t.length>4&&q({txtModalMnuId:t[0],txtModalMnuGroupId:t[1],txtModalMnuItmName:t[2],txtModalMnuOrd:t[3],txtModalLink:"undefined"==t[4]?"":t[4]}),console.log(c)):(q({txtModalMnuId:t[0],txtModalMnuGroupId:t[1],txtModalMnuItmName:t[2],txtModalMnuOrd:t[3]}),t.length>4&&q({txtModalMnuId:t[0],txtModalMnuGroupId:t[1],txtModalMnuItmName:t[2],txtModalMnuOrd:t[3],txtModalMnuParentId:"undefined"==t[4]?"":t[4]}),t.length>5&&q({txtModalMnuId:t[0],txtModalMnuGroupId:t[1],txtModalMnuItmName:t[2],txtModalMnuOrd:t[3],txtModalMnuParentId:"undefined"==t[4]?"":t[4],txtModalLink:"undefined"==t[5]?"":t[5]}))),"ADD"==e&&q(c?{txtModalMnuGroupId:t[1]}:{txtModalMnuGroupId:t[1],txtModalMnuParentId:G}),Q(!0)},te=async(e,l)=>{try{l.preventDefault(),console.log(e),console.log("Enter Save role ");let a={},n=f.RoleUserMap;c?(a={txtMnuGrpId:e.txtMenuId,txtBRMapIds:C},n=f.ManageMenuGroupRights):(a={txtMnuItmId:e.txtMenuId,txtBRMapIds:C},n=f.ManageMenuItemRights),console.log(a),t(!0);const o=(0,m.lk)(),r={hdr:{convid:o,tag:"rolusrmap",orgid:"",vendid:"0"},body:a},d={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};console.log(d);try{const e=await i.Ay.post(n,(0,m.Yw)(r),d),l=JSON.parse((0,m.H5)(e.data));console.log(l),"FAILED"==l.hdr.rst||"ERROR"==l.hdr.rst?(le("Error",JSON.stringify(l.fdr)),t(!1)):setTimeout((()=>{console.log(l.fdr),le("Success",JSON.stringify(l.fdr[0].rstmsg)),setTimeout((()=>{V({AlertType:"null",message:"null"})}),600),T([]),P([]),q({txtMenuId:"",txtMenuname:""}),t(!1)}),300)}catch(s){console.log(s.message),le("Error","Unable to process request"),t(!1)}}catch(a){le("Error",a.message),t(!1)}},le=(e,t)=>{V({AlertType:e,message:t})};try{var se,ae;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("section",{className:"vh-100",children:(0,N.jsx)("div",{className:"container h-100",children:(0,N.jsx)("div",{className:"row d-flex justify-content-center align-items-center h-100",children:(0,N.jsx)("div",{className:"col-lg-12 col-xl-11",children:(0,N.jsx)("div",{className:"card text-black",style:{borderRadius:"25px"},children:(0,N.jsxs)("div",{className:"card-body p-md-5",children:[(0,N.jsx)("div",{}),(0,N.jsx)("div",{className:"row justify-content-center",children:(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("p",{className:"text-left h4 fw-bold mb-5 mx-1 mx-md-4 mt-4",children:"Menu"}),(0,N.jsx)("i",{className:"bx bxs-plus-circle",style:{cursor:"pointer"},onClick:()=>{A(g(y))}}),(0,N.jsx)("i",{className:"bx bxs-minus-circle",style:{cursor:"pointer"},onClick:()=>{A([])}}),(0,N.jsx)(n(),{checked:O,expanded:E,nodes:y,onCheck:e=>w(e),onExpand:e=>A(e),onClick:e=>(async e=>{let t="",l=[],s="";console.log("clicked.value",e.value),F(e.value),0==e.treeDepth?(l=e.value.split("-"),l.length>1&&(t=l[1]),I(!0),D(t)):(l=e.value.split("-"),l.length>2&&(t=l[1],s=l[0]),D(s));const a=await(0,M.ae)(t,s);if(0==e.treeDepth){I(!0),q({txtMenuId:t,txtMenuname:e.label});let l=a.body.MnuGroup.BRMapIds;l=l.replace("[","").replace("]","");let s=l.split(",");console.log("brmapidsarray",s),T(s)}else I(!1),q({txtMenuId:s,txtMenuname:e.label}),console.log("brmapidsarray",a.body.MnuItem.BRMapIds),T(a.body.MnuItem.BRMapIds)})(e)})]})}),(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("p",{className:"text-center h4 fw-bold mb-5 mx-1 mx-md-4 mt-4",children:"Role"}),(0,N.jsx)("div",{children:e?(0,N.jsx)(u.A,{}):""}),(0,N.jsx)(o.A,{alert:$}),(0,N.jsxs)("form",{onSubmit:z(te),autocomplete:"off",children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{...W("txtMenuId"),type:"text",className:"form-control",id:"txtMenuId",disabled:!0,placeholder:"Menu Id"}),(0,N.jsx)("p",{children:null===(se=Y.txtMenuId)||void 0===se?void 0:se.message})]})}),(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsx)("input",{...W("txtMenuname"),type:"text",className:"form-control",id:"txtMenuname",disabled:!0,placeholder:" Name"}),(0,N.jsxs)("button",{className:"btn btn-success",onClick:()=>{ee("ADD")},children:[" ",(0,N.jsx)("i",{className:"bi bi-table"})," Add "]}),(0,N.jsxs)("button",{className:"btn btn-primary",onClick:()=>{ee("EDIT")},children:["  ",(0,N.jsx)("i",{className:"bi bi-pen"})," "]})]})})]}),(0,N.jsx)("div",{className:"row",children:(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsx)("div",{className:"mb-3",children:(0,N.jsx)(n(),{nodes:k,checked:C,expanded:B,onCheck:e=>T(e),onExpand:e=>P(e)})})})}),(0,N.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})]})})]})})})})})}),(0,N.jsxs)(h.A,{show:K,onHide:X,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,N.jsx)(h.A.Header,{closeButton:!0,children:(0,N.jsx)(h.A.Title,{children:"Add Child Menu"})}),(0,N.jsx)(h.A.Body,{children:(0,N.jsxs)("form",{onSubmit:z(Z),autocomplete:"off",children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("label",{htmlFor:"txtModalMnuGroupId",className:"form-label",children:[" ","Menu Group Id"]}),(0,N.jsx)("input",{...W("txtModalMnuGroupId"),type:"text",className:"form-control",disabled:"disabled",readonly:"readonly"})]})}),(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("label",{htmlFor:"txtModalMnuParentId",className:"form-label",children:[" ","Menu Parent Id"]}),(0,N.jsx)("input",{...W("txtModalMnuParentId"),type:"text",className:"form-control",disabled:"disabled",readonly:"readonly"})]})}),(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("label",{htmlFor:"txtModalMnuId",className:"form-label",children:[" ","Menu Id"]}),(0,N.jsx)("input",{...W("txtModalMnuId"),type:"text",className:"form-control",disabled:"disabled",readonly:"readonly"})]})})]}),(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("label",{htmlFor:"txtModalMnuItmName",className:"form-label",children:[" ","Menu Name"]}),(0,N.jsx)("input",{...W("txtModalMnuItmName"),type:"text",className:"form-control"}),(0,N.jsx)("p",{children:null===(ae=Y.txtMnuItmName)||void 0===ae?void 0:ae.message})]})}),(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("label",{htmlFor:"txtModalMnuOrd",className:"form-label",children:[" ","Order"]}),(0,N.jsx)("input",{...W("txtModalMnuOrd"),type:"text",className:"form-control"})]})})]}),(0,N.jsx)("div",{className:"row",children:(0,N.jsx)("div",{className:"col-sm",children:(0,N.jsxs)("div",{className:"mb-3",children:[(0,N.jsxs)("label",{htmlFor:"txtModalLink",className:"form-label",children:[" ","Link"]}),(0,N.jsx)("input",{...W("txtModalLink"),type:"text",className:"form-control"})]})})}),(0,N.jsxs)(h.A.Footer,{children:[(0,N.jsx)(x.A,{variant:"secondary",onClick:X,children:"Close"}),(0,N.jsx)(x.A,{type:"submit",variant:"secondary",children:"Update"})]})]})})]})]})}catch(ne){console.log(ne.message)}}},8318:(e,t,l)=>{"use strict";l.d(t,{Rw:()=>a,gB:()=>n,vu:()=>s});l(65043);function s(e){let t,l,s,a={},n={},o=[],r=[],d="",c={},i={},u=[];return e.forEach((m=>{let x=[];if(u=m.MnuItm,null!=u){for(console.log("sourcearr",e),s=0;s<u.length;s+=1)c[u[s].MnuItmId]=s,d=u[s].MnuItmId+"-"+u[s].MnuGrpId+"-"+u[s].MnuItmName+"-"+u[s].Ord+"-"+u[s].ParentId+"-"+u[s].Link,n={value:d,label:u[s]},i={value:d,label:u[s].MnuItmName,showCheckbox:!1},x=[...x,i],null==u[s].ParentId&&(u[s].ParentId=0);for(s=0;s<u.length;s+=1)t=u[s],l=x[s],0!==t.ParentId?(null==x[c[t.ParentId]].children&&(x[c[t.ParentId]].children=[]),x[c[t.ParentId]].children.push(l)):r.push(l)}console.log("arr1item",m),d="0-"+m.MnuGrpId+"-"+m.MnuGrpName+"-"+m.Ord+"-"+m.Link,a={value:d,label:m.MnuGrpName,showCheckbox:!1,children:r},n={value:d,label:m},o=[...o,a],r=[]})),console.log("parent",o),o}function a(e){let t={},l={},s=[],a=[],n=[];return e.forEach((e=>{n=e.Roles,n.forEach((e=>{l={value:e.BRMapId,label:e.RName},a=[...a,l]})),t={value:e.BranchId+"-B",label:e.Name,showCheckbox:!1,children:a},s=[...s,t],a=[]})),s}function n(e){let t={},l={},s=[],a=[],n=[];return e.forEach((e=>{n=e.Roles,n.forEach((e=>{let t=[{value:e.BRMapId+"-R",label:"Read"},{value:e.BRMapId+"-W",label:"Write"}];l={value:e.BRMapId,label:e.RName,children:t},a=[...a,l]})),t={value:e.BranchId+"-B",label:e.Name,showCheckbox:!1,children:a},s=[...s,t],a=[]})),s}},20830:(e,t,l)=>{"use strict";l.d(t,{r:()=>o});l(65043);var s=l(80511),a=l(84756),n=l(82585);const o=async()=>{let e;const t=n.F.BranchList,l={hdr:{convid:(0,s.lk)(),tag:"brchlst",orgid:"",vendid:"0"},body:{}},o={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},r=t;return await a.Ay.post(r,(0,s.Yw)(l),o).then((function(t){const l=JSON.parse((0,s.H5)(t.data));console.log(l),e=l})),e}},41497:(e,t,l)=>{"use strict";var s=l(13218);function a(){}function n(){}n.resetWarningCache=a,e.exports=function(){function e(e,t,l,a,n,o){if(o!==s){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var l={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:a};return l.PropTypes=l,l}},65173:(e,t,l)=>{e.exports=l(41497)()},13218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);
//# sourceMappingURL=280.9d729835.chunk.js.map