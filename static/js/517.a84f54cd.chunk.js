"use strict";(self.webpackChunkfinxapp=self.webpackChunkfinxapp||[]).push([[517],{98517:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(65043),l=s(24858),r=s(91036),d=s(8204),c=s(47046),n=s(18403),o=s(73033),i=s(57492),m=s(7129),g=s(80511),x=s(84756),S=s(82585),u=s(70579);const h=function(e){let{stageList:t,setStageValue:s,delStage:a}=e;return void 0!==t?t.map(((e,t)=>{const{StageId:l,ScreenId:r,StageName:d,Ord:c,StageTypeId:n,StageFile:o,StageType:i}=e;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:c}),(0,u.jsx)("td",{children:l}),(0,u.jsxs)("td",{children:[" ",(0,u.jsx)("button",{onClick:()=>s(e),class:"btn btn-link",children:d}),"  "]}),(0,u.jsx)("td",{children:i}),(0,u.jsx)("td",{children:(0,u.jsx)("button",{onClick:()=>a(l),class:"btn btn-light clr-gray",children:(0,u.jsx)("i",{class:"fa fa-trash-o"})})})]},t)})):(0,u.jsx)(u.Fragment,{})},p=S.F,y=o.Ik().shape({txtStageName:o.Yj().required("Pls provide stage name"),cmbStageTypeId:o.Yj().required("Pls select stage type"),ntxtOrd:o.Yj().required("Pls provide order")});const j=function(e){let{ScrId:t}=e;const[s,o]=(0,a.useState)([]),[S,j]=(0,a.useState)([]),[b,N]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1),{register:T,handleSubmit:I,formState:{errors:A},reset:F}=(0,l.mN)({resolver:(0,n.t)(y)}),w=async e=>{const t=await(0,m.K)(e);j(t.body.Stages)};(0,a.useEffect)((()=>{(async()=>{const e=await(0,i.n)("|STGTY|","");o(e.body.stgty)})()}),[]),(0,a.useEffect)((()=>{w(t)}),[]);const O=()=>{F({txtStageId:"",txtStageName:"",ntxtOrd:"",cmbStageTypeId:"",txtStageFile:""})},k=async e=>{if(window.confirm("Are you sure, do you want delete this stage ?")){let a={txtStageId:e};const l=p.DelStageMaster,d={},c={hdr:{convid:(0,g.lk)(),tag:"Delete Stage",orgid:"",vendid:"0"},body:a};try{const e=await x.Ay.post(l,(0,g.Yw)(c),d),s=JSON.parse((0,g.H5)(e.data));if("SUCCESS"==s.hdr.rst)setTimeout((()=>{N({AlertType:"Success",message:"Successfully updated"}),r.oR.success("Successfully updated"),setTimeout((()=>{N({AlertType:"null",message:"null"})}),600),O(),w(t),v(!1)}),300);else{let e=JSON.stringify(s.fdr[0].rstmsg);setTimeout((()=>{N({AlertType:"Error",message:e}),r.oR.error(e),setTimeout((()=>{N({AlertType:"null",message:"null"})}),600),v(!1)}),300)}}catch(s){console.log(s.message),r.oR.error("Unable to process request"),N({AlertType:"Error",message:"Unable to process request"}),v(!1)}}},C=async e=>{let s=e.txtStageId;void 0==e.txtStageId&&(s="0");let a={txtStageId:s,txtScreenId:t,txtStageName:e.txtStageName,ntxtOrd:e.ntxtOrd,cmbStageTypeId:e.cmbStageTypeId,txtStageFile:e.txtStageFile};const l=p.UpdStageMaster;v(!0);const d={},c={hdr:{convid:(0,g.lk)(),tag:"Stage Update",orgid:"",vendid:"0"},body:a};try{const e=await x.Ay.post(l,(0,g.Yw)(c),d),s=JSON.parse((0,g.H5)(e.data));"SUCCESS"==s.hdr.rst?setTimeout((()=>{N({AlertType:"Success",message:"Successfully updated"}),r.oR.success("Successfully updated"),setTimeout((()=>{N({AlertType:"null",message:"null"})}),600),O(),w(t),v(!1)}),300):(N({AlertType:"Error",message:JSON.stringify(s.fdr[0].rstmsg)}),v(!1))}catch(n){console.log(n.message),r.oR.error("Unable to process request"),N({AlertType:"Error",message:"Unable to process request"}),v(!1)}};try{var E,U,q;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"",children:[f?(0,u.jsx)(c.A,{}):"",(0,u.jsx)(d.A,{alert:b})]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-4",children:(0,u.jsxs)("form",{onSubmit:I(C),autoComplete:"off",children:[(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)("label",{htmlFor:"txtStageName",className:"form-label",children:"Stage Name"}),(0,u.jsx)("input",{...T("txtStageName"),type:"text",className:"form-control"}),(0,u.jsx)("p",{className:"err-msg",children:null===(E=A.txtStageName)||void 0===E?void 0:E.message})]}),(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)("label",{htmlFor:"cmbStageTypeId",className:"form-label",children:"Stage Type Id (1-Normal 2 - Auto Run )"}),(0,u.jsxs)("select",{...T("cmbStageTypeId"),className:"form-control",onChange:"",children:[(0,u.jsx)("option",{value:"",children:"- Select -"}),s.map((e=>(0,u.jsx)("option",{value:e.k,children:e.v},e.k)))]}),(0,u.jsx)("p",{className:"err-msg",children:null===(U=A.cmbStageTypeId)||void 0===U?void 0:U.message})]}),(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)("label",{htmlFor:"txtStageFile",className:"form-label",children:"Stage File"}),(0,u.jsx)("input",{...T("txtStageFile"),type:"text",className:"form-control"})]}),(0,u.jsxs)("div",{className:"row pad-top-15",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"ntxtOrd",className:"form-label",children:"Stage Order"}),(0,u.jsx)("input",{...T("ntxtOrd"),type:"text",className:"form-control"}),(0,u.jsx)("p",{className:"err-msg",children:null===(q=A.ntxtOrd)||void 0===q?void 0:q.message})]}),(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("label",{htmlFor:"txtStageId",className:"form-label",children:"Stage Id"}),(0,u.jsx)("input",{...T("txtStageId"),type:"text",className:"form-control",disabled:"disabled",readonly:"readonly"})]})]}),(0,u.jsxs)("div",{className:"row pad-top-15",children:[(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("button",{type:"submit",className:"btn btn-success",children:"Submit"})}),(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsx)("button",{type:"button",className:"btn btn-warning",onClick:O,children:"Reset"})})]})]})}),(0,u.jsx)("div",{className:"col-md-8",children:(0,u.jsxs)("table",{className:"lst-grid",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Ord"}),(0,u.jsx)("th",{children:"Id"}),(0,u.jsx)("th",{children:"Stage"}),(0,u.jsx)("th",{children:"Type"}),(0,u.jsx)("th",{children:"Manage"})]})}),(0,u.jsx)("tbody",{children:(0,u.jsx)(h,{stageList:S,setStageValue:function(e){F({txtStageId:e.StageId,txtStageName:e.StageName,ntxtOrd:e.Ord,cmbStageTypeId:e.StageTypeId,txtStageFile:e.StageFile})},delStage:k})})]})})]})]})}catch(R){console.log(R.message)}}},7129:(e,t,s)=>{s.d(t,{K:()=>d});var a=s(80511),l=s(84756);const r=s(82585).F,d=async e=>{let t;const s=r.AllStage,d={hdr:{convid:(0,a.lk)(),tag:"AllStage",orgid:"",vendid:"0"},body:{txtScreenId:e}},c={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},n=s;return await l.Ay.post(n,(0,a.Yw)(d),c).then((function(e){const s=JSON.parse((0,a.H5)(e.data));t=s})),t}}}]);
//# sourceMappingURL=517.a84f54cd.chunk.js.map